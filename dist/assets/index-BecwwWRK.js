var R5=Object.defineProperty;var H5=(t,e,r)=>e in t?R5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Cr=(t,e,r)=>H5(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var Qs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function M5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function L1(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),r}var k1={exports:{}},hm={},T1={exports:{}},or={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qd=Symbol.for("react.element"),K5=Symbol.for("react.portal"),G5=Symbol.for("react.fragment"),V5=Symbol.for("react.strict_mode"),$5=Symbol.for("react.profiler"),z5=Symbol.for("react.provider"),W5=Symbol.for("react.context"),J5=Symbol.for("react.forward_ref"),X5=Symbol.for("react.suspense"),Y5=Symbol.for("react.memo"),q5=Symbol.for("react.lazy"),Dx=Symbol.iterator;function Z5(t){return t===null||typeof t!="object"?null:(t=Dx&&t[Dx]||t["@@iterator"],typeof t=="function"?t:null)}var P1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O1=Object.assign,D1={};function au(t,e,r){this.props=t,this.context=e,this.refs=D1,this.updater=r||P1}au.prototype.isReactComponent={};au.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};au.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function R1(){}R1.prototype=au.prototype;function Jg(t,e,r){this.props=t,this.context=e,this.refs=D1,this.updater=r||P1}var Xg=Jg.prototype=new R1;Xg.constructor=Jg;O1(Xg,au.prototype);Xg.isPureReactComponent=!0;var Rx=Array.isArray,H1=Object.prototype.hasOwnProperty,Yg={current:null},M1={key:!0,ref:!0,__self:!0,__source:!0};function K1(t,e,r){var n,a={},o=null,l=null;if(e!=null)for(n in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)H1.call(e,n)&&!M1.hasOwnProperty(n)&&(a[n]=e[n]);var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){for(var A=Array(c),u=0;u<c;u++)A[u]=arguments[u+2];a.children=A}if(t&&t.defaultProps)for(n in c=t.defaultProps,c)a[n]===void 0&&(a[n]=c[n]);return{$$typeof:qd,type:t,key:o,ref:l,props:a,_owner:Yg.current}}function eC(t,e){return{$$typeof:qd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qg(t){return typeof t=="object"&&t!==null&&t.$$typeof===qd}function tC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Hx=/\/+/g;function Fp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tC(""+t.key):e.toString(36)}function bh(t,e,r,n,a){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case qd:case K5:l=!0}}if(l)return l=t,a=a(l),t=n===""?"."+Fp(l,0):n,Rx(a)?(r="",t!=null&&(r=t.replace(Hx,"$&/")+"/"),bh(a,e,r,"",function(u){return u})):a!=null&&(qg(a)&&(a=eC(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(Hx,"$&/")+"/")+t)),e.push(a)),1;if(l=0,n=n===""?".":n+":",Rx(t))for(var c=0;c<t.length;c++){o=t[c];var A=n+Fp(o,c);l+=bh(o,e,r,A,a)}else if(A=Z5(t),typeof A=="function")for(t=A.call(t),c=0;!(o=t.next()).done;)o=o.value,A=n+Fp(o,c++),l+=bh(o,e,r,A,a);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function zf(t,e,r){if(t==null)return t;var n=[],a=0;return bh(t,n,"","",function(o){return e.call(r,o,a++)}),n}function rC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ls={current:null},jh={transition:null},nC={ReactCurrentDispatcher:Ls,ReactCurrentBatchConfig:jh,ReactCurrentOwner:Yg};function G1(){throw Error("act(...) is not supported in production builds of React.")}or.Children={map:zf,forEach:function(t,e,r){zf(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return zf(t,function(){e++}),e},toArray:function(t){return zf(t,function(e){return e})||[]},only:function(t){if(!qg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};or.Component=au;or.Fragment=G5;or.Profiler=$5;or.PureComponent=Jg;or.StrictMode=V5;or.Suspense=X5;or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nC;or.act=G1;or.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=O1({},t.props),a=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=Yg.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(A in e)H1.call(e,A)&&!M1.hasOwnProperty(A)&&(n[A]=e[A]===void 0&&c!==void 0?c[A]:e[A])}var A=arguments.length-2;if(A===1)n.children=r;else if(1<A){c=Array(A);for(var u=0;u<A;u++)c[u]=arguments[u+2];n.children=c}return{$$typeof:qd,type:t.type,key:a,ref:o,props:n,_owner:l}};or.createContext=function(t){return t={$$typeof:W5,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:z5,_context:t},t.Consumer=t};or.createElement=K1;or.createFactory=function(t){var e=K1.bind(null,t);return e.type=t,e};or.createRef=function(){return{current:null}};or.forwardRef=function(t){return{$$typeof:J5,render:t}};or.isValidElement=qg;or.lazy=function(t){return{$$typeof:q5,_payload:{_status:-1,_result:t},_init:rC}};or.memo=function(t,e){return{$$typeof:Y5,type:t,compare:e===void 0?null:e}};or.startTransition=function(t){var e=jh.transition;jh.transition={};try{t()}finally{jh.transition=e}};or.unstable_act=G1;or.useCallback=function(t,e){return Ls.current.useCallback(t,e)};or.useContext=function(t){return Ls.current.useContext(t)};or.useDebugValue=function(){};or.useDeferredValue=function(t){return Ls.current.useDeferredValue(t)};or.useEffect=function(t,e){return Ls.current.useEffect(t,e)};or.useId=function(){return Ls.current.useId()};or.useImperativeHandle=function(t,e,r){return Ls.current.useImperativeHandle(t,e,r)};or.useInsertionEffect=function(t,e){return Ls.current.useInsertionEffect(t,e)};or.useLayoutEffect=function(t,e){return Ls.current.useLayoutEffect(t,e)};or.useMemo=function(t,e){return Ls.current.useMemo(t,e)};or.useReducer=function(t,e,r){return Ls.current.useReducer(t,e,r)};or.useRef=function(t){return Ls.current.useRef(t)};or.useState=function(t){return Ls.current.useState(t)};or.useSyncExternalStore=function(t,e,r){return Ls.current.useSyncExternalStore(t,e,r)};or.useTransition=function(){return Ls.current.useTransition()};or.version="18.3.1";T1.exports=or;var Y=T1.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sC=Y,aC=Symbol.for("react.element"),oC=Symbol.for("react.fragment"),iC=Object.prototype.hasOwnProperty,AC=sC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lC={key:!0,ref:!0,__self:!0,__source:!0};function V1(t,e,r){var n,a={},o=null,l=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(n in e)iC.call(e,n)&&!lC.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:aC,type:t,key:o,ref:l,props:a,_owner:AC.current}}hm.Fragment=oC;hm.jsx=V1;hm.jsxs=V1;k1.exports=hm;var s=k1.exports,$1={exports:{}},Ca={},z1={exports:{}},W1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,W){var te=V.length;V.push(W);e:for(;0<te;){var oe=te-1>>>1,O=V[oe];if(0<a(O,W))V[oe]=W,V[te]=O,te=oe;else break e}}function r(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var W=V[0],te=V.pop();if(te!==W){V[0]=te;e:for(var oe=0,O=V.length,z=O>>>1;oe<z;){var ne=2*(oe+1)-1,Z=V[ne],q=ne+1,Ae=V[q];if(0>a(Z,te))q<O&&0>a(Ae,Z)?(V[oe]=Ae,V[q]=te,oe=q):(V[oe]=Z,V[ne]=te,oe=ne);else if(q<O&&0>a(Ae,te))V[oe]=Ae,V[q]=te,oe=q;else break e}}return W}function a(V,W){var te=V.sortIndex-W.sortIndex;return te!==0?te:V.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var A=[],u=[],i=1,d=null,h=3,f=!1,w=!1,j=!1,B=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(V){for(var W=r(u);W!==null;){if(W.callback===null)n(u);else if(W.startTime<=V)n(u),W.sortIndex=W.expirationTime,e(A,W);else break;W=r(u)}}function S(V){if(j=!1,C(V),!w)if(r(A)!==null)w=!0,$(E);else{var W=r(u);W!==null&&ee(S,W.startTime-V)}}function E(V,W){w=!1,j&&(j=!1,p(M),M=-1),f=!0;var te=h;try{for(C(W),d=r(A);d!==null&&(!(d.expirationTime>W)||V&&!U());){var oe=d.callback;if(typeof oe=="function"){d.callback=null,h=d.priorityLevel;var O=oe(d.expirationTime<=W);W=t.unstable_now(),typeof O=="function"?d.callback=O:d===r(A)&&n(A),C(W)}else n(A);d=r(A)}if(d!==null)var z=!0;else{var ne=r(u);ne!==null&&ee(S,ne.startTime-W),z=!1}return z}finally{d=null,h=te,f=!1}}var I=!1,H=null,M=-1,D=5,K=-1;function U(){return!(t.unstable_now()-K<D)}function F(){if(H!==null){var V=t.unstable_now();K=V;var W=!0;try{W=H(!0,V)}finally{W?k():(I=!1,H=null)}}else I=!1}var k;if(typeof x=="function")k=function(){x(F)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,P=T.port2;T.port1.onmessage=F,k=function(){P.postMessage(null)}}else k=function(){B(F,0)};function $(V){H=V,I||(I=!0,k())}function ee(V,W){M=B(function(){V(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){w||f||(w=!0,$(E))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(A)},t.unstable_next=function(V){switch(h){case 1:case 2:case 3:var W=3;break;default:W=h}var te=h;h=W;try{return V()}finally{h=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,W){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var te=h;h=V;try{return W()}finally{h=te}},t.unstable_scheduleCallback=function(V,W,te){var oe=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?oe+te:oe):te=oe,V){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=te+O,V={id:i++,callback:W,priorityLevel:V,startTime:te,expirationTime:O,sortIndex:-1},te>oe?(V.sortIndex=te,e(u,V),r(A)===null&&V===r(u)&&(j?(p(M),M=-1):j=!0,ee(S,te-oe))):(V.sortIndex=O,e(A,V),w||f||(w=!0,$(E))),V},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(V){var W=h;return function(){var te=h;h=W;try{return V.apply(this,arguments)}finally{h=te}}}})(W1);z1.exports=W1;var cC=z1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uC=Y,ja=cC;function rt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var J1=new Set,_d={};function Nl(t,e){Jc(t,e),Jc(t+"Capture",e)}function Jc(t,e){for(_d[t]=e,t=0;t<e.length;t++)J1.add(e[t])}var yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),I0=Object.prototype.hasOwnProperty,dC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mx={},Kx={};function fC(t){return I0.call(Kx,t)?!0:I0.call(Mx,t)?!1:dC.test(t)?Kx[t]=!0:(Mx[t]=!0,!1)}function hC(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function mC(t,e,r,n){if(e===null||typeof e>"u"||hC(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ks(t,e,r,n,a,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var ss={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ss[t]=new ks(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ss[e]=new ks(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ss[t]=new ks(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ss[t]=new ks(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ss[t]=new ks(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ss[t]=new ks(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ss[t]=new ks(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ss[t]=new ks(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ss[t]=new ks(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zg=/[\-:]([a-z])/g;function ev(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zg,ev);ss[e]=new ks(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zg,ev);ss[e]=new ks(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zg,ev);ss[e]=new ks(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ss[t]=new ks(t,1,!1,t.toLowerCase(),null,!1,!1)});ss.xlinkHref=new ks("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ss[t]=new ks(t,1,!1,t.toLowerCase(),null,!0,!0)});function tv(t,e,r,n){var a=ss.hasOwnProperty(e)?ss[e]:null;(a!==null?a.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mC(e,r,a,n)&&(r=null),n||a===null?fC(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):a.mustUseProperty?t[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,n=a.attributeNamespace,r===null?t.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ci=uC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wf=Symbol.for("react.element"),Fc=Symbol.for("react.portal"),Uc=Symbol.for("react.fragment"),rv=Symbol.for("react.strict_mode"),L0=Symbol.for("react.profiler"),X1=Symbol.for("react.provider"),Y1=Symbol.for("react.context"),nv=Symbol.for("react.forward_ref"),k0=Symbol.for("react.suspense"),T0=Symbol.for("react.suspense_list"),sv=Symbol.for("react.memo"),nA=Symbol.for("react.lazy"),q1=Symbol.for("react.offscreen"),Gx=Symbol.iterator;function Wu(t){return t===null||typeof t!="object"?null:(t=Gx&&t[Gx]||t["@@iterator"],typeof t=="function"?t:null)}var sn=Object.assign,Up;function ad(t){if(Up===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Up=e&&e[1]||""}return`
`+Up+t}var Qp=!1;function Ip(t,e){if(!t||Qp)return"";Qp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),o=n.stack.split(`
`),l=a.length-1,c=o.length-1;1<=l&&0<=c&&a[l]!==o[c];)c--;for(;1<=l&&0<=c;l--,c--)if(a[l]!==o[c]){if(l!==1||c!==1)do if(l--,c--,0>c||a[l]!==o[c]){var A=`
`+a[l].replace(" at new "," at ");return t.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",t.displayName)),A}while(1<=l&&0<=c);break}}}finally{Qp=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ad(t):""}function pC(t){switch(t.tag){case 5:return ad(t.type);case 16:return ad("Lazy");case 13:return ad("Suspense");case 19:return ad("SuspenseList");case 0:case 2:case 15:return t=Ip(t.type,!1),t;case 11:return t=Ip(t.type.render,!1),t;case 1:return t=Ip(t.type,!0),t;default:return""}}function P0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Uc:return"Fragment";case Fc:return"Portal";case L0:return"Profiler";case rv:return"StrictMode";case k0:return"Suspense";case T0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Y1:return(t.displayName||"Context")+".Consumer";case X1:return(t._context.displayName||"Context")+".Provider";case nv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sv:return e=t.displayName||null,e!==null?e:P0(t.type)||"Memo";case nA:e=t._payload,t=t._init;try{return P0(t(e))}catch{}}return null}function gC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P0(e);case 8:return e===rv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function jA(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Z1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vC(t){var e=Z1(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(l){n=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Jf(t){t._valueTracker||(t._valueTracker=vC(t))}function e2(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Z1(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Ph(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function O0(t,e){var r=e.checked;return sn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Vx(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=jA(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function t2(t,e){e=e.checked,e!=null&&tv(t,"checked",e,!1)}function D0(t,e){t2(t,e);var r=jA(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?R0(t,e.type,r):e.hasOwnProperty("defaultValue")&&R0(t,e.type,jA(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $x(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function R0(t,e,r){(e!=="number"||Ph(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var od=Array.isArray;function Mc(t,e,r,n){if(t=t.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<t.length;r++)a=e.hasOwnProperty("$"+t[r].value),t[r].selected!==a&&(t[r].selected=a),a&&n&&(t[r].defaultSelected=!0)}else{for(r=""+jA(r),e=null,a=0;a<t.length;a++){if(t[a].value===r){t[a].selected=!0,n&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function H0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(rt(91));return sn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zx(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(rt(92));if(od(r)){if(1<r.length)throw Error(rt(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:jA(r)}}function r2(t,e){var r=jA(e.value),n=jA(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Wx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function n2(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function M0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?n2(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xf,s2=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,a){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xf=Xf||document.createElement("div"),Xf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fd(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var cd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xC=["Webkit","ms","Moz","O"];Object.keys(cd).forEach(function(t){xC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cd[e]=cd[t]})});function a2(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||cd.hasOwnProperty(t)&&cd[t]?(""+e).trim():e+"px"}function o2(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=a2(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,a):t[r]=a}}var yC=sn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function K0(t,e){if(e){if(yC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(rt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(rt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(rt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(rt(62))}}function G0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var V0=null;function av(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $0=null,Kc=null,Gc=null;function Jx(t){if(t=tf(t)){if(typeof $0!="function")throw Error(rt(280));var e=t.stateNode;e&&(e=xm(e),$0(t.stateNode,t.type,e))}}function i2(t){Kc?Gc?Gc.push(t):Gc=[t]:Kc=t}function A2(){if(Kc){var t=Kc,e=Gc;if(Gc=Kc=null,Jx(t),e)for(t=0;t<e.length;t++)Jx(e[t])}}function l2(t,e){return t(e)}function c2(){}var Lp=!1;function u2(t,e,r){if(Lp)return t(e,r);Lp=!0;try{return l2(t,e,r)}finally{Lp=!1,(Kc!==null||Gc!==null)&&(c2(),A2())}}function Ud(t,e){var r=t.stateNode;if(r===null)return null;var n=xm(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(rt(231,e,typeof r));return r}var z0=!1;if(yi)try{var Ju={};Object.defineProperty(Ju,"passive",{get:function(){z0=!0}}),window.addEventListener("test",Ju,Ju),window.removeEventListener("test",Ju,Ju)}catch{z0=!1}function wC(t,e,r,n,a,o,l,c,A){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(i){this.onError(i)}}var ud=!1,Oh=null,Dh=!1,W0=null,bC={onError:function(t){ud=!0,Oh=t}};function jC(t,e,r,n,a,o,l,c,A){ud=!1,Oh=null,wC.apply(bC,arguments)}function BC(t,e,r,n,a,o,l,c,A){if(jC.apply(this,arguments),ud){if(ud){var u=Oh;ud=!1,Oh=null}else throw Error(rt(198));Dh||(Dh=!0,W0=u)}}function Sl(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function d2(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Xx(t){if(Sl(t)!==t)throw Error(rt(188))}function CC(t){var e=t.alternate;if(!e){if(e=Sl(t),e===null)throw Error(rt(188));return e!==t?null:t}for(var r=t,n=e;;){var a=r.return;if(a===null)break;var o=a.alternate;if(o===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return Xx(a),t;if(o===n)return Xx(a),e;o=o.sibling}throw Error(rt(188))}if(r.return!==n.return)r=a,n=o;else{for(var l=!1,c=a.child;c;){if(c===r){l=!0,r=a,n=o;break}if(c===n){l=!0,n=a,r=o;break}c=c.sibling}if(!l){for(c=o.child;c;){if(c===r){l=!0,r=o,n=a;break}if(c===n){l=!0,n=o,r=a;break}c=c.sibling}if(!l)throw Error(rt(189))}}if(r.alternate!==n)throw Error(rt(190))}if(r.tag!==3)throw Error(rt(188));return r.stateNode.current===r?t:e}function f2(t){return t=CC(t),t!==null?h2(t):null}function h2(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=h2(t);if(e!==null)return e;t=t.sibling}return null}var m2=ja.unstable_scheduleCallback,Yx=ja.unstable_cancelCallback,NC=ja.unstable_shouldYield,SC=ja.unstable_requestPaint,bn=ja.unstable_now,EC=ja.unstable_getCurrentPriorityLevel,ov=ja.unstable_ImmediatePriority,p2=ja.unstable_UserBlockingPriority,Rh=ja.unstable_NormalPriority,_C=ja.unstable_LowPriority,g2=ja.unstable_IdlePriority,mm=null,Po=null;function FC(t){if(Po&&typeof Po.onCommitFiberRoot=="function")try{Po.onCommitFiberRoot(mm,t,void 0,(t.current.flags&128)===128)}catch{}}var io=Math.clz32?Math.clz32:IC,UC=Math.log,QC=Math.LN2;function IC(t){return t>>>=0,t===0?32:31-(UC(t)/QC|0)|0}var Yf=64,qf=4194304;function id(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hh(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,a=t.suspendedLanes,o=t.pingedLanes,l=r&268435455;if(l!==0){var c=l&~a;c!==0?n=id(c):(o&=l,o!==0&&(n=id(o)))}else l=r&~a,l!==0?n=id(l):o!==0&&(n=id(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&a)&&(a=n&-n,o=e&-e,a>=o||a===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-io(e),a=1<<r,n|=t[r],e&=~a;return n}function LC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kC(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,a=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-io(o),c=1<<l,A=a[l];A===-1?(!(c&r)||c&n)&&(a[l]=LC(c,e)):A<=e&&(t.expiredLanes|=c),o&=~c}}function J0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function v2(){var t=Yf;return Yf<<=1,!(Yf&4194240)&&(Yf=64),t}function kp(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Zd(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-io(e),t[e]=r}function TC(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var a=31-io(r),o=1<<a;e[a]=0,n[a]=-1,t[a]=-1,r&=~o}}function iv(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-io(r),a=1<<n;a&e|t[n]&e&&(t[n]|=e),r&=~a}}var Sr=0;function x2(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var y2,Av,w2,b2,j2,X0=!1,Zf=[],fA=null,hA=null,mA=null,Qd=new Map,Id=new Map,aA=[],PC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qx(t,e){switch(t){case"focusin":case"focusout":fA=null;break;case"dragenter":case"dragleave":hA=null;break;case"mouseover":case"mouseout":mA=null;break;case"pointerover":case"pointerout":Qd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Id.delete(e.pointerId)}}function Xu(t,e,r,n,a,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[a]},e!==null&&(e=tf(e),e!==null&&Av(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function OC(t,e,r,n,a){switch(e){case"focusin":return fA=Xu(fA,t,e,r,n,a),!0;case"dragenter":return hA=Xu(hA,t,e,r,n,a),!0;case"mouseover":return mA=Xu(mA,t,e,r,n,a),!0;case"pointerover":var o=a.pointerId;return Qd.set(o,Xu(Qd.get(o)||null,t,e,r,n,a)),!0;case"gotpointercapture":return o=a.pointerId,Id.set(o,Xu(Id.get(o)||null,t,e,r,n,a)),!0}return!1}function B2(t){var e=al(t.target);if(e!==null){var r=Sl(e);if(r!==null){if(e=r.tag,e===13){if(e=d2(r),e!==null){t.blockedOn=e,j2(t.priority,function(){w2(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Y0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);V0=n,r.target.dispatchEvent(n),V0=null}else return e=tf(r),e!==null&&Av(e),t.blockedOn=r,!1;e.shift()}return!0}function Zx(t,e,r){Bh(t)&&r.delete(e)}function DC(){X0=!1,fA!==null&&Bh(fA)&&(fA=null),hA!==null&&Bh(hA)&&(hA=null),mA!==null&&Bh(mA)&&(mA=null),Qd.forEach(Zx),Id.forEach(Zx)}function Yu(t,e){t.blockedOn===e&&(t.blockedOn=null,X0||(X0=!0,ja.unstable_scheduleCallback(ja.unstable_NormalPriority,DC)))}function Ld(t){function e(a){return Yu(a,t)}if(0<Zf.length){Yu(Zf[0],t);for(var r=1;r<Zf.length;r++){var n=Zf[r];n.blockedOn===t&&(n.blockedOn=null)}}for(fA!==null&&Yu(fA,t),hA!==null&&Yu(hA,t),mA!==null&&Yu(mA,t),Qd.forEach(e),Id.forEach(e),r=0;r<aA.length;r++)n=aA[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<aA.length&&(r=aA[0],r.blockedOn===null);)B2(r),r.blockedOn===null&&aA.shift()}var Vc=Ci.ReactCurrentBatchConfig,Mh=!0;function RC(t,e,r,n){var a=Sr,o=Vc.transition;Vc.transition=null;try{Sr=1,lv(t,e,r,n)}finally{Sr=a,Vc.transition=o}}function HC(t,e,r,n){var a=Sr,o=Vc.transition;Vc.transition=null;try{Sr=4,lv(t,e,r,n)}finally{Sr=a,Vc.transition=o}}function lv(t,e,r,n){if(Mh){var a=Y0(t,e,r,n);if(a===null)Vp(t,e,n,Kh,r),qx(t,n);else if(OC(a,t,e,r,n))n.stopPropagation();else if(qx(t,n),e&4&&-1<PC.indexOf(t)){for(;a!==null;){var o=tf(a);if(o!==null&&y2(o),o=Y0(t,e,r,n),o===null&&Vp(t,e,n,Kh,r),o===a)break;a=o}a!==null&&n.stopPropagation()}else Vp(t,e,n,null,r)}}var Kh=null;function Y0(t,e,r,n){if(Kh=null,t=av(n),t=al(t),t!==null)if(e=Sl(t),e===null)t=null;else if(r=e.tag,r===13){if(t=d2(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Kh=t,null}function C2(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(EC()){case ov:return 1;case p2:return 4;case Rh:case _C:return 16;case g2:return 536870912;default:return 16}default:return 16}}var lA=null,cv=null,Ch=null;function N2(){if(Ch)return Ch;var t,e=cv,r=e.length,n,a="value"in lA?lA.value:lA.textContent,o=a.length;for(t=0;t<r&&e[t]===a[t];t++);var l=r-t;for(n=1;n<=l&&e[r-n]===a[o-n];n++);return Ch=a.slice(t,1<n?1-n:void 0)}function Nh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function eh(){return!0}function ey(){return!1}function Na(t){function e(r,n,a,o,l){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(r=t[c],this[c]=r?r(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?eh:ey,this.isPropagationStopped=ey,this}return sn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=eh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=eh)},persist:function(){},isPersistent:eh}),e}var ou={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uv=Na(ou),ef=sn({},ou,{view:0,detail:0}),MC=Na(ef),Tp,Pp,qu,pm=sn({},ef,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qu&&(qu&&t.type==="mousemove"?(Tp=t.screenX-qu.screenX,Pp=t.screenY-qu.screenY):Pp=Tp=0,qu=t),Tp)},movementY:function(t){return"movementY"in t?t.movementY:Pp}}),ty=Na(pm),KC=sn({},pm,{dataTransfer:0}),GC=Na(KC),VC=sn({},ef,{relatedTarget:0}),Op=Na(VC),$C=sn({},ou,{animationName:0,elapsedTime:0,pseudoElement:0}),zC=Na($C),WC=sn({},ou,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),JC=Na(WC),XC=sn({},ou,{data:0}),ry=Na(XC),YC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ZC[t])?!!e[t]:!1}function dv(){return e4}var t4=sn({},ef,{key:function(t){if(t.key){var e=YC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Nh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dv,charCode:function(t){return t.type==="keypress"?Nh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),r4=Na(t4),n4=sn({},pm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ny=Na(n4),s4=sn({},ef,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dv}),a4=Na(s4),o4=sn({},ou,{propertyName:0,elapsedTime:0,pseudoElement:0}),i4=Na(o4),A4=sn({},pm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),l4=Na(A4),c4=[9,13,27,32],fv=yi&&"CompositionEvent"in window,dd=null;yi&&"documentMode"in document&&(dd=document.documentMode);var u4=yi&&"TextEvent"in window&&!dd,S2=yi&&(!fv||dd&&8<dd&&11>=dd),sy=" ",ay=!1;function E2(t,e){switch(t){case"keyup":return c4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _2(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qc=!1;function d4(t,e){switch(t){case"compositionend":return _2(e);case"keypress":return e.which!==32?null:(ay=!0,sy);case"textInput":return t=e.data,t===sy&&ay?null:t;default:return null}}function f4(t,e){if(Qc)return t==="compositionend"||!fv&&E2(t,e)?(t=N2(),Ch=cv=lA=null,Qc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return S2&&e.locale!=="ko"?null:e.data;default:return null}}var h4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!h4[t.type]:e==="textarea"}function F2(t,e,r,n){i2(n),e=Gh(e,"onChange"),0<e.length&&(r=new uv("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var fd=null,kd=null;function m4(t){H2(t,0)}function gm(t){var e=kc(t);if(e2(e))return t}function p4(t,e){if(t==="change")return e}var U2=!1;if(yi){var Dp;if(yi){var Rp="oninput"in document;if(!Rp){var iy=document.createElement("div");iy.setAttribute("oninput","return;"),Rp=typeof iy.oninput=="function"}Dp=Rp}else Dp=!1;U2=Dp&&(!document.documentMode||9<document.documentMode)}function Ay(){fd&&(fd.detachEvent("onpropertychange",Q2),kd=fd=null)}function Q2(t){if(t.propertyName==="value"&&gm(kd)){var e=[];F2(e,kd,t,av(t)),u2(m4,e)}}function g4(t,e,r){t==="focusin"?(Ay(),fd=e,kd=r,fd.attachEvent("onpropertychange",Q2)):t==="focusout"&&Ay()}function v4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gm(kd)}function x4(t,e){if(t==="click")return gm(e)}function y4(t,e){if(t==="input"||t==="change")return gm(e)}function w4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var lo=typeof Object.is=="function"?Object.is:w4;function Td(t,e){if(lo(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!I0.call(e,a)||!lo(t[a],e[a]))return!1}return!0}function ly(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cy(t,e){var r=ly(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ly(r)}}function I2(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?I2(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function L2(){for(var t=window,e=Ph();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Ph(t.document)}return e}function hv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function b4(t){var e=L2(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&I2(r.ownerDocument.documentElement,r)){if(n!==null&&hv(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=r.textContent.length,o=Math.min(n.start,a);n=n.end===void 0?o:Math.min(n.end,a),!t.extend&&o>n&&(a=n,n=o,o=a),a=cy(r,o);var l=cy(r,n);a&&l&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var j4=yi&&"documentMode"in document&&11>=document.documentMode,Ic=null,q0=null,hd=null,Z0=!1;function uy(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Z0||Ic==null||Ic!==Ph(n)||(n=Ic,"selectionStart"in n&&hv(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),hd&&Td(hd,n)||(hd=n,n=Gh(q0,"onSelect"),0<n.length&&(e=new uv("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Ic)))}function th(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Lc={animationend:th("Animation","AnimationEnd"),animationiteration:th("Animation","AnimationIteration"),animationstart:th("Animation","AnimationStart"),transitionend:th("Transition","TransitionEnd")},Hp={},k2={};yi&&(k2=document.createElement("div").style,"AnimationEvent"in window||(delete Lc.animationend.animation,delete Lc.animationiteration.animation,delete Lc.animationstart.animation),"TransitionEvent"in window||delete Lc.transitionend.transition);function vm(t){if(Hp[t])return Hp[t];if(!Lc[t])return t;var e=Lc[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in k2)return Hp[t]=e[r];return t}var T2=vm("animationend"),P2=vm("animationiteration"),O2=vm("animationstart"),D2=vm("transitionend"),R2=new Map,dy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function NA(t,e){R2.set(t,e),Nl(e,[t])}for(var Mp=0;Mp<dy.length;Mp++){var Kp=dy[Mp],B4=Kp.toLowerCase(),C4=Kp[0].toUpperCase()+Kp.slice(1);NA(B4,"on"+C4)}NA(T2,"onAnimationEnd");NA(P2,"onAnimationIteration");NA(O2,"onAnimationStart");NA("dblclick","onDoubleClick");NA("focusin","onFocus");NA("focusout","onBlur");NA(D2,"onTransitionEnd");Jc("onMouseEnter",["mouseout","mouseover"]);Jc("onMouseLeave",["mouseout","mouseover"]);Jc("onPointerEnter",["pointerout","pointerover"]);Jc("onPointerLeave",["pointerout","pointerover"]);Nl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ad="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ad));function fy(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,BC(n,e,void 0,t),t.currentTarget=null}function H2(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],a=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var l=n.length-1;0<=l;l--){var c=n[l],A=c.instance,u=c.currentTarget;if(c=c.listener,A!==o&&a.isPropagationStopped())break e;fy(a,c,u),o=A}else for(l=0;l<n.length;l++){if(c=n[l],A=c.instance,u=c.currentTarget,c=c.listener,A!==o&&a.isPropagationStopped())break e;fy(a,c,u),o=A}}}if(Dh)throw t=W0,Dh=!1,W0=null,t}function Rr(t,e){var r=e[sg];r===void 0&&(r=e[sg]=new Set);var n=t+"__bubble";r.has(n)||(M2(e,t,2,!1),r.add(n))}function Gp(t,e,r){var n=0;e&&(n|=4),M2(r,t,n,e)}var rh="_reactListening"+Math.random().toString(36).slice(2);function Pd(t){if(!t[rh]){t[rh]=!0,J1.forEach(function(r){r!=="selectionchange"&&(N4.has(r)||Gp(r,!1,t),Gp(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[rh]||(e[rh]=!0,Gp("selectionchange",!1,e))}}function M2(t,e,r,n){switch(C2(e)){case 1:var a=RC;break;case 4:a=HC;break;default:a=lv}r=a.bind(null,e,r,t),a=void 0,!z0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),n?a!==void 0?t.addEventListener(e,r,{capture:!0,passive:a}):t.addEventListener(e,r,!0):a!==void 0?t.addEventListener(e,r,{passive:a}):t.addEventListener(e,r,!1)}function Vp(t,e,r,n,a){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var c=n.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(l===4)for(l=n.return;l!==null;){var A=l.tag;if((A===3||A===4)&&(A=l.stateNode.containerInfo,A===a||A.nodeType===8&&A.parentNode===a))return;l=l.return}for(;c!==null;){if(l=al(c),l===null)return;if(A=l.tag,A===5||A===6){n=o=l;continue e}c=c.parentNode}}n=n.return}u2(function(){var u=o,i=av(r),d=[];e:{var h=R2.get(t);if(h!==void 0){var f=uv,w=t;switch(t){case"keypress":if(Nh(r)===0)break e;case"keydown":case"keyup":f=r4;break;case"focusin":w="focus",f=Op;break;case"focusout":w="blur",f=Op;break;case"beforeblur":case"afterblur":f=Op;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=ty;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=GC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=a4;break;case T2:case P2:case O2:f=zC;break;case D2:f=i4;break;case"scroll":f=MC;break;case"wheel":f=l4;break;case"copy":case"cut":case"paste":f=JC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=ny}var j=(e&4)!==0,B=!j&&t==="scroll",p=j?h!==null?h+"Capture":null:h;j=[];for(var x=u,C;x!==null;){C=x;var S=C.stateNode;if(C.tag===5&&S!==null&&(C=S,p!==null&&(S=Ud(x,p),S!=null&&j.push(Od(x,S,C)))),B)break;x=x.return}0<j.length&&(h=new f(h,w,null,r,i),d.push({event:h,listeners:j}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&r!==V0&&(w=r.relatedTarget||r.fromElement)&&(al(w)||w[wi]))break e;if((f||h)&&(h=i.window===i?i:(h=i.ownerDocument)?h.defaultView||h.parentWindow:window,f?(w=r.relatedTarget||r.toElement,f=u,w=w?al(w):null,w!==null&&(B=Sl(w),w!==B||w.tag!==5&&w.tag!==6)&&(w=null)):(f=null,w=u),f!==w)){if(j=ty,S="onMouseLeave",p="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(j=ny,S="onPointerLeave",p="onPointerEnter",x="pointer"),B=f==null?h:kc(f),C=w==null?h:kc(w),h=new j(S,x+"leave",f,r,i),h.target=B,h.relatedTarget=C,S=null,al(i)===u&&(j=new j(p,x+"enter",w,r,i),j.target=C,j.relatedTarget=B,S=j),B=S,f&&w)t:{for(j=f,p=w,x=0,C=j;C;C=pc(C))x++;for(C=0,S=p;S;S=pc(S))C++;for(;0<x-C;)j=pc(j),x--;for(;0<C-x;)p=pc(p),C--;for(;x--;){if(j===p||p!==null&&j===p.alternate)break t;j=pc(j),p=pc(p)}j=null}else j=null;f!==null&&hy(d,h,f,j,!1),w!==null&&B!==null&&hy(d,B,w,j,!0)}}e:{if(h=u?kc(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var E=p4;else if(oy(h))if(U2)E=y4;else{E=v4;var I=g4}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=x4);if(E&&(E=E(t,u))){F2(d,E,r,i);break e}I&&I(t,h,u),t==="focusout"&&(I=h._wrapperState)&&I.controlled&&h.type==="number"&&R0(h,"number",h.value)}switch(I=u?kc(u):window,t){case"focusin":(oy(I)||I.contentEditable==="true")&&(Ic=I,q0=u,hd=null);break;case"focusout":hd=q0=Ic=null;break;case"mousedown":Z0=!0;break;case"contextmenu":case"mouseup":case"dragend":Z0=!1,uy(d,r,i);break;case"selectionchange":if(j4)break;case"keydown":case"keyup":uy(d,r,i)}var H;if(fv)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Qc?E2(t,r)&&(M="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(S2&&r.locale!=="ko"&&(Qc||M!=="onCompositionStart"?M==="onCompositionEnd"&&Qc&&(H=N2()):(lA=i,cv="value"in lA?lA.value:lA.textContent,Qc=!0)),I=Gh(u,M),0<I.length&&(M=new ry(M,t,null,r,i),d.push({event:M,listeners:I}),H?M.data=H:(H=_2(r),H!==null&&(M.data=H)))),(H=u4?d4(t,r):f4(t,r))&&(u=Gh(u,"onBeforeInput"),0<u.length&&(i=new ry("onBeforeInput","beforeinput",null,r,i),d.push({event:i,listeners:u}),i.data=H))}H2(d,e)})}function Od(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Gh(t,e){for(var r=e+"Capture",n=[];t!==null;){var a=t,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=Ud(t,r),o!=null&&n.unshift(Od(t,o,a)),o=Ud(t,e),o!=null&&n.push(Od(t,o,a))),t=t.return}return n}function pc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hy(t,e,r,n,a){for(var o=e._reactName,l=[];r!==null&&r!==n;){var c=r,A=c.alternate,u=c.stateNode;if(A!==null&&A===n)break;c.tag===5&&u!==null&&(c=u,a?(A=Ud(r,o),A!=null&&l.unshift(Od(r,A,c))):a||(A=Ud(r,o),A!=null&&l.push(Od(r,A,c)))),r=r.return}l.length!==0&&t.push({event:e,listeners:l})}var S4=/\r\n?/g,E4=/\u0000|\uFFFD/g;function my(t){return(typeof t=="string"?t:""+t).replace(S4,`
`).replace(E4,"")}function nh(t,e,r){if(e=my(e),my(t)!==e&&r)throw Error(rt(425))}function Vh(){}var eg=null,tg=null;function rg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ng=typeof setTimeout=="function"?setTimeout:void 0,_4=typeof clearTimeout=="function"?clearTimeout:void 0,py=typeof Promise=="function"?Promise:void 0,F4=typeof queueMicrotask=="function"?queueMicrotask:typeof py<"u"?function(t){return py.resolve(null).then(t).catch(U4)}:ng;function U4(t){setTimeout(function(){throw t})}function $p(t,e){var r=e,n=0;do{var a=r.nextSibling;if(t.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){t.removeChild(a),Ld(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Ld(e)}function pA(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var iu=Math.random().toString(36).slice(2),ko="__reactFiber$"+iu,Dd="__reactProps$"+iu,wi="__reactContainer$"+iu,sg="__reactEvents$"+iu,Q4="__reactListeners$"+iu,I4="__reactHandles$"+iu;function al(t){var e=t[ko];if(e)return e;for(var r=t.parentNode;r;){if(e=r[wi]||r[ko]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=gy(t);t!==null;){if(r=t[ko])return r;t=gy(t)}return e}t=r,r=t.parentNode}return null}function tf(t){return t=t[ko]||t[wi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function kc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(rt(33))}function xm(t){return t[Dd]||null}var ag=[],Tc=-1;function SA(t){return{current:t}}function Mr(t){0>Tc||(t.current=ag[Tc],ag[Tc]=null,Tc--)}function Pr(t,e){Tc++,ag[Tc]=t.current,t.current=e}var BA={},ws=SA(BA),ea=SA(!1),vl=BA;function Xc(t,e){var r=t.type.contextTypes;if(!r)return BA;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in r)a[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function ta(t){return t=t.childContextTypes,t!=null}function $h(){Mr(ea),Mr(ws)}function vy(t,e,r){if(ws.current!==BA)throw Error(rt(168));Pr(ws,e),Pr(ea,r)}function K2(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in e))throw Error(rt(108,gC(t)||"Unknown",a));return sn({},r,n)}function zh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||BA,vl=ws.current,Pr(ws,t),Pr(ea,ea.current),!0}function xy(t,e,r){var n=t.stateNode;if(!n)throw Error(rt(169));r?(t=K2(t,e,vl),n.__reactInternalMemoizedMergedChildContext=t,Mr(ea),Mr(ws),Pr(ws,t)):Mr(ea),Pr(ea,r)}var mi=null,ym=!1,zp=!1;function G2(t){mi===null?mi=[t]:mi.push(t)}function L4(t){ym=!0,G2(t)}function EA(){if(!zp&&mi!==null){zp=!0;var t=0,e=Sr;try{var r=mi;for(Sr=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}mi=null,ym=!1}catch(a){throw mi!==null&&(mi=mi.slice(t+1)),m2(ov,EA),a}finally{Sr=e,zp=!1}}return null}var Pc=[],Oc=0,Wh=null,Jh=0,Pa=[],Oa=0,xl=null,gi=1,vi="";function ZA(t,e){Pc[Oc++]=Jh,Pc[Oc++]=Wh,Wh=t,Jh=e}function V2(t,e,r){Pa[Oa++]=gi,Pa[Oa++]=vi,Pa[Oa++]=xl,xl=t;var n=gi;t=vi;var a=32-io(n)-1;n&=~(1<<a),r+=1;var o=32-io(e)+a;if(30<o){var l=a-a%5;o=(n&(1<<l)-1).toString(32),n>>=l,a-=l,gi=1<<32-io(e)+a|r<<a|n,vi=o+t}else gi=1<<o|r<<a|n,vi=t}function mv(t){t.return!==null&&(ZA(t,1),V2(t,1,0))}function pv(t){for(;t===Wh;)Wh=Pc[--Oc],Pc[Oc]=null,Jh=Pc[--Oc],Pc[Oc]=null;for(;t===xl;)xl=Pa[--Oa],Pa[Oa]=null,vi=Pa[--Oa],Pa[Oa]=null,gi=Pa[--Oa],Pa[Oa]=null}var ba=null,ya=null,Wr=!1,oo=null;function $2(t,e){var r=Da(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function yy(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ba=t,ya=pA(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ba=t,ya=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=xl!==null?{id:gi,overflow:vi}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Da(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ba=t,ya=null,!0):!1;default:return!1}}function og(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ig(t){if(Wr){var e=ya;if(e){var r=e;if(!yy(t,e)){if(og(t))throw Error(rt(418));e=pA(r.nextSibling);var n=ba;e&&yy(t,e)?$2(n,r):(t.flags=t.flags&-4097|2,Wr=!1,ba=t)}}else{if(og(t))throw Error(rt(418));t.flags=t.flags&-4097|2,Wr=!1,ba=t}}}function wy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ba=t}function sh(t){if(t!==ba)return!1;if(!Wr)return wy(t),Wr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rg(t.type,t.memoizedProps)),e&&(e=ya)){if(og(t))throw z2(),Error(rt(418));for(;e;)$2(t,e),e=pA(e.nextSibling)}if(wy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(rt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){ya=pA(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}ya=null}}else ya=ba?pA(t.stateNode.nextSibling):null;return!0}function z2(){for(var t=ya;t;)t=pA(t.nextSibling)}function Yc(){ya=ba=null,Wr=!1}function gv(t){oo===null?oo=[t]:oo.push(t)}var k4=Ci.ReactCurrentBatchConfig;function Zu(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(rt(309));var n=r.stateNode}if(!n)throw Error(rt(147,t));var a=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var c=a.refs;l===null?delete c[o]:c[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(rt(284));if(!r._owner)throw Error(rt(290,t))}return t}function ah(t,e){throw t=Object.prototype.toString.call(e),Error(rt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function by(t){var e=t._init;return e(t._payload)}function W2(t){function e(p,x){if(t){var C=p.deletions;C===null?(p.deletions=[x],p.flags|=16):C.push(x)}}function r(p,x){if(!t)return null;for(;x!==null;)e(p,x),x=x.sibling;return null}function n(p,x){for(p=new Map;x!==null;)x.key!==null?p.set(x.key,x):p.set(x.index,x),x=x.sibling;return p}function a(p,x){return p=yA(p,x),p.index=0,p.sibling=null,p}function o(p,x,C){return p.index=C,t?(C=p.alternate,C!==null?(C=C.index,C<x?(p.flags|=2,x):C):(p.flags|=2,x)):(p.flags|=1048576,x)}function l(p){return t&&p.alternate===null&&(p.flags|=2),p}function c(p,x,C,S){return x===null||x.tag!==6?(x=e0(C,p.mode,S),x.return=p,x):(x=a(x,C),x.return=p,x)}function A(p,x,C,S){var E=C.type;return E===Uc?i(p,x,C.props.children,S,C.key):x!==null&&(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===nA&&by(E)===x.type)?(S=a(x,C.props),S.ref=Zu(p,x,C),S.return=p,S):(S=Ih(C.type,C.key,C.props,null,p.mode,S),S.ref=Zu(p,x,C),S.return=p,S)}function u(p,x,C,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==C.containerInfo||x.stateNode.implementation!==C.implementation?(x=t0(C,p.mode,S),x.return=p,x):(x=a(x,C.children||[]),x.return=p,x)}function i(p,x,C,S,E){return x===null||x.tag!==7?(x=ul(C,p.mode,S,E),x.return=p,x):(x=a(x,C),x.return=p,x)}function d(p,x,C){if(typeof x=="string"&&x!==""||typeof x=="number")return x=e0(""+x,p.mode,C),x.return=p,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Wf:return C=Ih(x.type,x.key,x.props,null,p.mode,C),C.ref=Zu(p,null,x),C.return=p,C;case Fc:return x=t0(x,p.mode,C),x.return=p,x;case nA:var S=x._init;return d(p,S(x._payload),C)}if(od(x)||Wu(x))return x=ul(x,p.mode,C,null),x.return=p,x;ah(p,x)}return null}function h(p,x,C,S){var E=x!==null?x.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return E!==null?null:c(p,x,""+C,S);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Wf:return C.key===E?A(p,x,C,S):null;case Fc:return C.key===E?u(p,x,C,S):null;case nA:return E=C._init,h(p,x,E(C._payload),S)}if(od(C)||Wu(C))return E!==null?null:i(p,x,C,S,null);ah(p,C)}return null}function f(p,x,C,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return p=p.get(C)||null,c(x,p,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Wf:return p=p.get(S.key===null?C:S.key)||null,A(x,p,S,E);case Fc:return p=p.get(S.key===null?C:S.key)||null,u(x,p,S,E);case nA:var I=S._init;return f(p,x,C,I(S._payload),E)}if(od(S)||Wu(S))return p=p.get(C)||null,i(x,p,S,E,null);ah(x,S)}return null}function w(p,x,C,S){for(var E=null,I=null,H=x,M=x=0,D=null;H!==null&&M<C.length;M++){H.index>M?(D=H,H=null):D=H.sibling;var K=h(p,H,C[M],S);if(K===null){H===null&&(H=D);break}t&&H&&K.alternate===null&&e(p,H),x=o(K,x,M),I===null?E=K:I.sibling=K,I=K,H=D}if(M===C.length)return r(p,H),Wr&&ZA(p,M),E;if(H===null){for(;M<C.length;M++)H=d(p,C[M],S),H!==null&&(x=o(H,x,M),I===null?E=H:I.sibling=H,I=H);return Wr&&ZA(p,M),E}for(H=n(p,H);M<C.length;M++)D=f(H,p,M,C[M],S),D!==null&&(t&&D.alternate!==null&&H.delete(D.key===null?M:D.key),x=o(D,x,M),I===null?E=D:I.sibling=D,I=D);return t&&H.forEach(function(U){return e(p,U)}),Wr&&ZA(p,M),E}function j(p,x,C,S){var E=Wu(C);if(typeof E!="function")throw Error(rt(150));if(C=E.call(C),C==null)throw Error(rt(151));for(var I=E=null,H=x,M=x=0,D=null,K=C.next();H!==null&&!K.done;M++,K=C.next()){H.index>M?(D=H,H=null):D=H.sibling;var U=h(p,H,K.value,S);if(U===null){H===null&&(H=D);break}t&&H&&U.alternate===null&&e(p,H),x=o(U,x,M),I===null?E=U:I.sibling=U,I=U,H=D}if(K.done)return r(p,H),Wr&&ZA(p,M),E;if(H===null){for(;!K.done;M++,K=C.next())K=d(p,K.value,S),K!==null&&(x=o(K,x,M),I===null?E=K:I.sibling=K,I=K);return Wr&&ZA(p,M),E}for(H=n(p,H);!K.done;M++,K=C.next())K=f(H,p,M,K.value,S),K!==null&&(t&&K.alternate!==null&&H.delete(K.key===null?M:K.key),x=o(K,x,M),I===null?E=K:I.sibling=K,I=K);return t&&H.forEach(function(F){return e(p,F)}),Wr&&ZA(p,M),E}function B(p,x,C,S){if(typeof C=="object"&&C!==null&&C.type===Uc&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Wf:e:{for(var E=C.key,I=x;I!==null;){if(I.key===E){if(E=C.type,E===Uc){if(I.tag===7){r(p,I.sibling),x=a(I,C.props.children),x.return=p,p=x;break e}}else if(I.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===nA&&by(E)===I.type){r(p,I.sibling),x=a(I,C.props),x.ref=Zu(p,I,C),x.return=p,p=x;break e}r(p,I);break}else e(p,I);I=I.sibling}C.type===Uc?(x=ul(C.props.children,p.mode,S,C.key),x.return=p,p=x):(S=Ih(C.type,C.key,C.props,null,p.mode,S),S.ref=Zu(p,x,C),S.return=p,p=S)}return l(p);case Fc:e:{for(I=C.key;x!==null;){if(x.key===I)if(x.tag===4&&x.stateNode.containerInfo===C.containerInfo&&x.stateNode.implementation===C.implementation){r(p,x.sibling),x=a(x,C.children||[]),x.return=p,p=x;break e}else{r(p,x);break}else e(p,x);x=x.sibling}x=t0(C,p.mode,S),x.return=p,p=x}return l(p);case nA:return I=C._init,B(p,x,I(C._payload),S)}if(od(C))return w(p,x,C,S);if(Wu(C))return j(p,x,C,S);ah(p,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,x!==null&&x.tag===6?(r(p,x.sibling),x=a(x,C),x.return=p,p=x):(r(p,x),x=e0(C,p.mode,S),x.return=p,p=x),l(p)):r(p,x)}return B}var qc=W2(!0),J2=W2(!1),Xh=SA(null),Yh=null,Dc=null,vv=null;function xv(){vv=Dc=Yh=null}function yv(t){var e=Xh.current;Mr(Xh),t._currentValue=e}function Ag(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function $c(t,e){Yh=t,vv=Dc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zs=!0),t.firstContext=null)}function Ha(t){var e=t._currentValue;if(vv!==t)if(t={context:t,memoizedValue:e,next:null},Dc===null){if(Yh===null)throw Error(rt(308));Dc=t,Yh.dependencies={lanes:0,firstContext:t}}else Dc=Dc.next=t;return e}var ol=null;function wv(t){ol===null?ol=[t]:ol.push(t)}function X2(t,e,r,n){var a=e.interleaved;return a===null?(r.next=r,wv(e)):(r.next=a.next,a.next=r),e.interleaved=r,bi(t,n)}function bi(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var sA=!1;function bv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Y2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gA(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,pr&2){var a=n.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),n.pending=e,bi(t,r)}return a=n.interleaved,a===null?(e.next=e,wv(n)):(e.next=a.next,a.next=e),n.interleaved=e,bi(t,r)}function Sh(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,iv(t,r)}}function jy(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?a=o=l:o=o.next=l,r=r.next}while(r!==null);o===null?a=o=e:o=o.next=e}else a=o=e;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function qh(t,e,r,n){var a=t.updateQueue;sA=!1;var o=a.firstBaseUpdate,l=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var A=c,u=A.next;A.next=null,l===null?o=u:l.next=u,l=A;var i=t.alternate;i!==null&&(i=i.updateQueue,c=i.lastBaseUpdate,c!==l&&(c===null?i.firstBaseUpdate=u:c.next=u,i.lastBaseUpdate=A))}if(o!==null){var d=a.baseState;l=0,i=u=A=null,c=o;do{var h=c.lane,f=c.eventTime;if((n&h)===h){i!==null&&(i=i.next={eventTime:f,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var w=t,j=c;switch(h=e,f=r,j.tag){case 1:if(w=j.payload,typeof w=="function"){d=w.call(f,d,h);break e}d=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=j.payload,h=typeof w=="function"?w.call(f,d,h):w,h==null)break e;d=sn({},d,h);break e;case 2:sA=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,h=a.effects,h===null?a.effects=[c]:h.push(c))}else f={eventTime:f,lane:h,tag:c.tag,payload:c.payload,callback:c.callback,next:null},i===null?(u=i=f,A=d):i=i.next=f,l|=h;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;h=c,c=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(i===null&&(A=d),a.baseState=A,a.firstBaseUpdate=u,a.lastBaseUpdate=i,e=a.shared.interleaved,e!==null){a=e;do l|=a.lane,a=a.next;while(a!==e)}else o===null&&(a.shared.lanes=0);wl|=l,t.lanes=l,t.memoizedState=d}}function By(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(rt(191,a));a.call(n)}}}var rf={},Oo=SA(rf),Rd=SA(rf),Hd=SA(rf);function il(t){if(t===rf)throw Error(rt(174));return t}function jv(t,e){switch(Pr(Hd,e),Pr(Rd,t),Pr(Oo,rf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:M0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=M0(e,t)}Mr(Oo),Pr(Oo,e)}function Zc(){Mr(Oo),Mr(Rd),Mr(Hd)}function q2(t){il(Hd.current);var e=il(Oo.current),r=M0(e,t.type);e!==r&&(Pr(Rd,t),Pr(Oo,r))}function Bv(t){Rd.current===t&&(Mr(Oo),Mr(Rd))}var rn=SA(0);function Zh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wp=[];function Cv(){for(var t=0;t<Wp.length;t++)Wp[t]._workInProgressVersionPrimary=null;Wp.length=0}var Eh=Ci.ReactCurrentDispatcher,Jp=Ci.ReactCurrentBatchConfig,yl=0,nn=null,Rn=null,Wn=null,em=!1,md=!1,Md=0,T4=0;function fs(){throw Error(rt(321))}function Nv(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!lo(t[r],e[r]))return!1;return!0}function Sv(t,e,r,n,a,o){if(yl=o,nn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Eh.current=t===null||t.memoizedState===null?R4:H4,t=r(n,a),md){o=0;do{if(md=!1,Md=0,25<=o)throw Error(rt(301));o+=1,Wn=Rn=null,e.updateQueue=null,Eh.current=M4,t=r(n,a)}while(md)}if(Eh.current=tm,e=Rn!==null&&Rn.next!==null,yl=0,Wn=Rn=nn=null,em=!1,e)throw Error(rt(300));return t}function Ev(){var t=Md!==0;return Md=0,t}function Io(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?nn.memoizedState=Wn=t:Wn=Wn.next=t,Wn}function Ma(){if(Rn===null){var t=nn.alternate;t=t!==null?t.memoizedState:null}else t=Rn.next;var e=Wn===null?nn.memoizedState:Wn.next;if(e!==null)Wn=e,Rn=t;else{if(t===null)throw Error(rt(310));Rn=t,t={memoizedState:Rn.memoizedState,baseState:Rn.baseState,baseQueue:Rn.baseQueue,queue:Rn.queue,next:null},Wn===null?nn.memoizedState=Wn=t:Wn=Wn.next=t}return Wn}function Kd(t,e){return typeof e=="function"?e(t):e}function Xp(t){var e=Ma(),r=e.queue;if(r===null)throw Error(rt(311));r.lastRenderedReducer=t;var n=Rn,a=n.baseQueue,o=r.pending;if(o!==null){if(a!==null){var l=a.next;a.next=o.next,o.next=l}n.baseQueue=a=o,r.pending=null}if(a!==null){o=a.next,n=n.baseState;var c=l=null,A=null,u=o;do{var i=u.lane;if((yl&i)===i)A!==null&&(A=A.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var d={lane:i,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};A===null?(c=A=d,l=n):A=A.next=d,nn.lanes|=i,wl|=i}u=u.next}while(u!==null&&u!==o);A===null?l=n:A.next=c,lo(n,e.memoizedState)||(Zs=!0),e.memoizedState=n,e.baseState=l,e.baseQueue=A,r.lastRenderedState=n}if(t=r.interleaved,t!==null){a=t;do o=a.lane,nn.lanes|=o,wl|=o,a=a.next;while(a!==t)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Yp(t){var e=Ma(),r=e.queue;if(r===null)throw Error(rt(311));r.lastRenderedReducer=t;var n=r.dispatch,a=r.pending,o=e.memoizedState;if(a!==null){r.pending=null;var l=a=a.next;do o=t(o,l.action),l=l.next;while(l!==a);lo(o,e.memoizedState)||(Zs=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function Z2(){}function eb(t,e){var r=nn,n=Ma(),a=e(),o=!lo(n.memoizedState,a);if(o&&(n.memoizedState=a,Zs=!0),n=n.queue,_v(nb.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||Wn!==null&&Wn.memoizedState.tag&1){if(r.flags|=2048,Gd(9,rb.bind(null,r,n,a,e),void 0,null),Jn===null)throw Error(rt(349));yl&30||tb(r,e,a)}return a}function tb(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=nn.updateQueue,e===null?(e={lastEffect:null,stores:null},nn.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function rb(t,e,r,n){e.value=r,e.getSnapshot=n,sb(e)&&ab(t)}function nb(t,e,r){return r(function(){sb(e)&&ab(t)})}function sb(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!lo(t,r)}catch{return!0}}function ab(t){var e=bi(t,1);e!==null&&Ao(e,t,1,-1)}function Cy(t){var e=Io();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kd,lastRenderedState:t},e.queue=t,t=t.dispatch=D4.bind(null,nn,t),[e.memoizedState,t]}function Gd(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=nn.updateQueue,e===null?(e={lastEffect:null,stores:null},nn.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function ob(){return Ma().memoizedState}function _h(t,e,r,n){var a=Io();nn.flags|=t,a.memoizedState=Gd(1|e,r,void 0,n===void 0?null:n)}function wm(t,e,r,n){var a=Ma();n=n===void 0?null:n;var o=void 0;if(Rn!==null){var l=Rn.memoizedState;if(o=l.destroy,n!==null&&Nv(n,l.deps)){a.memoizedState=Gd(e,r,o,n);return}}nn.flags|=t,a.memoizedState=Gd(1|e,r,o,n)}function Ny(t,e){return _h(8390656,8,t,e)}function _v(t,e){return wm(2048,8,t,e)}function ib(t,e){return wm(4,2,t,e)}function Ab(t,e){return wm(4,4,t,e)}function lb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function cb(t,e,r){return r=r!=null?r.concat([t]):null,wm(4,4,lb.bind(null,e,t),r)}function Fv(){}function ub(t,e){var r=Ma();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Nv(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function db(t,e){var r=Ma();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Nv(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function fb(t,e,r){return yl&21?(lo(r,e)||(r=v2(),nn.lanes|=r,wl|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zs=!0),t.memoizedState=r)}function P4(t,e){var r=Sr;Sr=r!==0&&4>r?r:4,t(!0);var n=Jp.transition;Jp.transition={};try{t(!1),e()}finally{Sr=r,Jp.transition=n}}function hb(){return Ma().memoizedState}function O4(t,e,r){var n=xA(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},mb(t))pb(e,r);else if(r=X2(t,e,r,n),r!==null){var a=Us();Ao(r,t,n,a),gb(r,e,n)}}function D4(t,e,r){var n=xA(t),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(mb(t))pb(e,a);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,c=o(l,r);if(a.hasEagerState=!0,a.eagerState=c,lo(c,l)){var A=e.interleaved;A===null?(a.next=a,wv(e)):(a.next=A.next,A.next=a),e.interleaved=a;return}}catch{}finally{}r=X2(t,e,a,n),r!==null&&(a=Us(),Ao(r,t,n,a),gb(r,e,n))}}function mb(t){var e=t.alternate;return t===nn||e!==null&&e===nn}function pb(t,e){md=em=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function gb(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,iv(t,r)}}var tm={readContext:Ha,useCallback:fs,useContext:fs,useEffect:fs,useImperativeHandle:fs,useInsertionEffect:fs,useLayoutEffect:fs,useMemo:fs,useReducer:fs,useRef:fs,useState:fs,useDebugValue:fs,useDeferredValue:fs,useTransition:fs,useMutableSource:fs,useSyncExternalStore:fs,useId:fs,unstable_isNewReconciler:!1},R4={readContext:Ha,useCallback:function(t,e){return Io().memoizedState=[t,e===void 0?null:e],t},useContext:Ha,useEffect:Ny,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,_h(4194308,4,lb.bind(null,e,t),r)},useLayoutEffect:function(t,e){return _h(4194308,4,t,e)},useInsertionEffect:function(t,e){return _h(4,2,t,e)},useMemo:function(t,e){var r=Io();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Io();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=O4.bind(null,nn,t),[n.memoizedState,t]},useRef:function(t){var e=Io();return t={current:t},e.memoizedState=t},useState:Cy,useDebugValue:Fv,useDeferredValue:function(t){return Io().memoizedState=t},useTransition:function(){var t=Cy(!1),e=t[0];return t=P4.bind(null,t[1]),Io().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=nn,a=Io();if(Wr){if(r===void 0)throw Error(rt(407));r=r()}else{if(r=e(),Jn===null)throw Error(rt(349));yl&30||tb(n,e,r)}a.memoizedState=r;var o={value:r,getSnapshot:e};return a.queue=o,Ny(nb.bind(null,n,o,t),[t]),n.flags|=2048,Gd(9,rb.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=Io(),e=Jn.identifierPrefix;if(Wr){var r=vi,n=gi;r=(n&~(1<<32-io(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Md++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=T4++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},H4={readContext:Ha,useCallback:ub,useContext:Ha,useEffect:_v,useImperativeHandle:cb,useInsertionEffect:ib,useLayoutEffect:Ab,useMemo:db,useReducer:Xp,useRef:ob,useState:function(){return Xp(Kd)},useDebugValue:Fv,useDeferredValue:function(t){var e=Ma();return fb(e,Rn.memoizedState,t)},useTransition:function(){var t=Xp(Kd)[0],e=Ma().memoizedState;return[t,e]},useMutableSource:Z2,useSyncExternalStore:eb,useId:hb,unstable_isNewReconciler:!1},M4={readContext:Ha,useCallback:ub,useContext:Ha,useEffect:_v,useImperativeHandle:cb,useInsertionEffect:ib,useLayoutEffect:Ab,useMemo:db,useReducer:Yp,useRef:ob,useState:function(){return Yp(Kd)},useDebugValue:Fv,useDeferredValue:function(t){var e=Ma();return Rn===null?e.memoizedState=t:fb(e,Rn.memoizedState,t)},useTransition:function(){var t=Yp(Kd)[0],e=Ma().memoizedState;return[t,e]},useMutableSource:Z2,useSyncExternalStore:eb,useId:hb,unstable_isNewReconciler:!1};function no(t,e){if(t&&t.defaultProps){e=sn({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function lg(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:sn({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var bm={isMounted:function(t){return(t=t._reactInternals)?Sl(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Us(),a=xA(t),o=xi(n,a);o.payload=e,r!=null&&(o.callback=r),e=gA(t,o,a),e!==null&&(Ao(e,t,a,n),Sh(e,t,a))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Us(),a=xA(t),o=xi(n,a);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=gA(t,o,a),e!==null&&(Ao(e,t,a,n),Sh(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Us(),n=xA(t),a=xi(r,n);a.tag=2,e!=null&&(a.callback=e),e=gA(t,a,n),e!==null&&(Ao(e,t,n,r),Sh(e,t,n))}};function Sy(t,e,r,n,a,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,l):e.prototype&&e.prototype.isPureReactComponent?!Td(r,n)||!Td(a,o):!0}function vb(t,e,r){var n=!1,a=BA,o=e.contextType;return typeof o=="object"&&o!==null?o=Ha(o):(a=ta(e)?vl:ws.current,n=e.contextTypes,o=(n=n!=null)?Xc(t,a):BA),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bm,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=o),e}function Ey(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&bm.enqueueReplaceState(e,e.state,null)}function cg(t,e,r,n){var a=t.stateNode;a.props=r,a.state=t.memoizedState,a.refs={},bv(t);var o=e.contextType;typeof o=="object"&&o!==null?a.context=Ha(o):(o=ta(e)?vl:ws.current,a.context=Xc(t,o)),a.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(lg(t,e,o,r),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&bm.enqueueReplaceState(a,a.state,null),qh(t,r,a,n),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function eu(t,e){try{var r="",n=e;do r+=pC(n),n=n.return;while(n);var a=r}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:a,digest:null}}function qp(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function ug(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var K4=typeof WeakMap=="function"?WeakMap:Map;function xb(t,e,r){r=xi(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){nm||(nm=!0,wg=n),ug(t,e)},r}function yb(t,e,r){r=xi(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var a=e.value;r.payload=function(){return n(a)},r.callback=function(){ug(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){ug(t,e),typeof n!="function"&&(vA===null?vA=new Set([this]):vA.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),r}function _y(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new K4;var a=new Set;n.set(e,a)}else a=n.get(e),a===void 0&&(a=new Set,n.set(e,a));a.has(r)||(a.add(r),t=nN.bind(null,t,e,r),e.then(t,t))}function Fy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Uy(t,e,r,n,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=xi(-1,1),e.tag=2,gA(r,e,1))),r.lanes|=1),t)}var G4=Ci.ReactCurrentOwner,Zs=!1;function _s(t,e,r,n){e.child=t===null?J2(e,null,r,n):qc(e,t.child,r,n)}function Qy(t,e,r,n,a){r=r.render;var o=e.ref;return $c(e,a),n=Sv(t,e,r,n,o,a),r=Ev(),t!==null&&!Zs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,ji(t,e,a)):(Wr&&r&&mv(e),e.flags|=1,_s(t,e,n,a),e.child)}function Iy(t,e,r,n,a){if(t===null){var o=r.type;return typeof o=="function"&&!Ov(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,wb(t,e,o,n,a)):(t=Ih(r.type,null,n,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&a)){var l=o.memoizedProps;if(r=r.compare,r=r!==null?r:Td,r(l,n)&&t.ref===e.ref)return ji(t,e,a)}return e.flags|=1,t=yA(o,n),t.ref=e.ref,t.return=e,e.child=t}function wb(t,e,r,n,a){if(t!==null){var o=t.memoizedProps;if(Td(o,n)&&t.ref===e.ref)if(Zs=!1,e.pendingProps=n=o,(t.lanes&a)!==0)t.flags&131072&&(Zs=!0);else return e.lanes=t.lanes,ji(t,e,a)}return dg(t,e,r,n,a)}function bb(t,e,r){var n=e.pendingProps,a=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pr(Hc,xa),xa|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pr(Hc,xa),xa|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Pr(Hc,xa),xa|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,Pr(Hc,xa),xa|=n;return _s(t,e,a,r),e.child}function jb(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function dg(t,e,r,n,a){var o=ta(r)?vl:ws.current;return o=Xc(e,o),$c(e,a),r=Sv(t,e,r,n,o,a),n=Ev(),t!==null&&!Zs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,ji(t,e,a)):(Wr&&n&&mv(e),e.flags|=1,_s(t,e,r,a),e.child)}function Ly(t,e,r,n,a){if(ta(r)){var o=!0;zh(e)}else o=!1;if($c(e,a),e.stateNode===null)Fh(t,e),vb(e,r,n),cg(e,r,n,a),n=!0;else if(t===null){var l=e.stateNode,c=e.memoizedProps;l.props=c;var A=l.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ha(u):(u=ta(r)?vl:ws.current,u=Xc(e,u));var i=r.getDerivedStateFromProps,d=typeof i=="function"||typeof l.getSnapshotBeforeUpdate=="function";d||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==n||A!==u)&&Ey(e,l,n,u),sA=!1;var h=e.memoizedState;l.state=h,qh(e,n,l,a),A=e.memoizedState,c!==n||h!==A||ea.current||sA?(typeof i=="function"&&(lg(e,r,i,n),A=e.memoizedState),(c=sA||Sy(e,r,c,n,h,A,u))?(d||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=A),l.props=n,l.state=A,l.context=u,n=c):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{l=e.stateNode,Y2(t,e),c=e.memoizedProps,u=e.type===e.elementType?c:no(e.type,c),l.props=u,d=e.pendingProps,h=l.context,A=r.contextType,typeof A=="object"&&A!==null?A=Ha(A):(A=ta(r)?vl:ws.current,A=Xc(e,A));var f=r.getDerivedStateFromProps;(i=typeof f=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==d||h!==A)&&Ey(e,l,n,A),sA=!1,h=e.memoizedState,l.state=h,qh(e,n,l,a);var w=e.memoizedState;c!==d||h!==w||ea.current||sA?(typeof f=="function"&&(lg(e,r,f,n),w=e.memoizedState),(u=sA||Sy(e,r,u,n,h,w,A)||!1)?(i||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,w,A),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,w,A)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=w),l.props=n,l.state=w,l.context=A,n=u):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return fg(t,e,r,n,o,a)}function fg(t,e,r,n,a,o){jb(t,e);var l=(e.flags&128)!==0;if(!n&&!l)return a&&xy(e,r,!1),ji(t,e,o);n=e.stateNode,G4.current=e;var c=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&l?(e.child=qc(e,t.child,null,o),e.child=qc(e,null,c,o)):_s(t,e,c,o),e.memoizedState=n.state,a&&xy(e,r,!0),e.child}function Bb(t){var e=t.stateNode;e.pendingContext?vy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vy(t,e.context,!1),jv(t,e.containerInfo)}function ky(t,e,r,n,a){return Yc(),gv(a),e.flags|=256,_s(t,e,r,n),e.child}var hg={dehydrated:null,treeContext:null,retryLane:0};function mg(t){return{baseLanes:t,cachePool:null,transitions:null}}function Cb(t,e,r){var n=e.pendingProps,a=rn.current,o=!1,l=(e.flags&128)!==0,c;if((c=l)||(c=t!==null&&t.memoizedState===null?!1:(a&2)!==0),c?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Pr(rn,a&1),t===null)return ig(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=n.children,t=n.fallback,o?(n=e.mode,o=e.child,l={mode:"hidden",children:l},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Cm(l,n,0,null),t=ul(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=mg(r),e.memoizedState=hg,t):Uv(e,l));if(a=t.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return V4(t,e,l,n,c,a,r);if(o){o=n.fallback,l=e.mode,a=t.child,c=a.sibling;var A={mode:"hidden",children:n.children};return!(l&1)&&e.child!==a?(n=e.child,n.childLanes=0,n.pendingProps=A,e.deletions=null):(n=yA(a,A),n.subtreeFlags=a.subtreeFlags&14680064),c!==null?o=yA(c,o):(o=ul(o,l,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,l=t.child.memoizedState,l=l===null?mg(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~r,e.memoizedState=hg,n}return o=t.child,t=o.sibling,n=yA(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Uv(t,e){return e=Cm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function oh(t,e,r,n){return n!==null&&gv(n),qc(e,t.child,null,r),t=Uv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function V4(t,e,r,n,a,o,l){if(r)return e.flags&256?(e.flags&=-257,n=qp(Error(rt(422))),oh(t,e,l,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,a=e.mode,n=Cm({mode:"visible",children:n.children},a,0,null),o=ul(o,a,l,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&qc(e,t.child,null,l),e.child.memoizedState=mg(l),e.memoizedState=hg,o);if(!(e.mode&1))return oh(t,e,l,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var c=n.dgst;return n=c,o=Error(rt(419)),n=qp(o,n,void 0),oh(t,e,l,n)}if(c=(l&t.childLanes)!==0,Zs||c){if(n=Jn,n!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|l)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,bi(t,a),Ao(n,t,a,-1))}return Pv(),n=qp(Error(rt(421))),oh(t,e,l,n)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=sN.bind(null,t),a._reactRetry=e,null):(t=o.treeContext,ya=pA(a.nextSibling),ba=e,Wr=!0,oo=null,t!==null&&(Pa[Oa++]=gi,Pa[Oa++]=vi,Pa[Oa++]=xl,gi=t.id,vi=t.overflow,xl=e),e=Uv(e,n.children),e.flags|=4096,e)}function Ty(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Ag(t.return,e,r)}function Zp(t,e,r,n,a){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=a)}function Nb(t,e,r){var n=e.pendingProps,a=n.revealOrder,o=n.tail;if(_s(t,e,n.children,r),n=rn.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ty(t,r,e);else if(t.tag===19)Ty(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Pr(rn,n),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)t=r.alternate,t!==null&&Zh(t)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),Zp(e,!1,a,r,o);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&Zh(t)===null){e.child=a;break}t=a.sibling,a.sibling=r,r=a,a=t}Zp(e,!0,r,null,o);break;case"together":Zp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ji(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),wl|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(rt(153));if(e.child!==null){for(t=e.child,r=yA(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=yA(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function $4(t,e,r){switch(e.tag){case 3:Bb(e),Yc();break;case 5:q2(e);break;case 1:ta(e.type)&&zh(e);break;case 4:jv(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,a=e.memoizedProps.value;Pr(Xh,n._currentValue),n._currentValue=a;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Pr(rn,rn.current&1),e.flags|=128,null):r&e.child.childLanes?Cb(t,e,r):(Pr(rn,rn.current&1),t=ji(t,e,r),t!==null?t.sibling:null);Pr(rn,rn.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Nb(t,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Pr(rn,rn.current),n)break;return null;case 22:case 23:return e.lanes=0,bb(t,e,r)}return ji(t,e,r)}var Sb,pg,Eb,_b;Sb=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};pg=function(){};Eb=function(t,e,r,n){var a=t.memoizedProps;if(a!==n){t=e.stateNode,il(Oo.current);var o=null;switch(r){case"input":a=O0(t,a),n=O0(t,n),o=[];break;case"select":a=sn({},a,{value:void 0}),n=sn({},n,{value:void 0}),o=[];break;case"textarea":a=H0(t,a),n=H0(t,n),o=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Vh)}K0(r,n);var l;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var c=a[u];for(l in c)c.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(_d.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var A=n[u];if(c=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&A!==c&&(A!=null||c!=null))if(u==="style")if(c){for(l in c)!c.hasOwnProperty(l)||A&&A.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in A)A.hasOwnProperty(l)&&c[l]!==A[l]&&(r||(r={}),r[l]=A[l])}else r||(o||(o=[]),o.push(u,r)),r=A;else u==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,c=c?c.__html:void 0,A!=null&&c!==A&&(o=o||[]).push(u,A)):u==="children"?typeof A!="string"&&typeof A!="number"||(o=o||[]).push(u,""+A):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(_d.hasOwnProperty(u)?(A!=null&&u==="onScroll"&&Rr("scroll",t),o||c===A||(o=[])):(o=o||[]).push(u,A))}r&&(o=o||[]).push("style",r);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};_b=function(t,e,r,n){r!==n&&(e.flags|=4)};function ed(t,e){if(!Wr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function hs(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function z4(t,e,r){var n=e.pendingProps;switch(pv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hs(e),null;case 1:return ta(e.type)&&$h(),hs(e),null;case 3:return n=e.stateNode,Zc(),Mr(ea),Mr(ws),Cv(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(sh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,oo!==null&&(Bg(oo),oo=null))),pg(t,e),hs(e),null;case 5:Bv(e);var a=il(Hd.current);if(r=e.type,t!==null&&e.stateNode!=null)Eb(t,e,r,n,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(rt(166));return hs(e),null}if(t=il(Oo.current),sh(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[ko]=e,n[Dd]=o,t=(e.mode&1)!==0,r){case"dialog":Rr("cancel",n),Rr("close",n);break;case"iframe":case"object":case"embed":Rr("load",n);break;case"video":case"audio":for(a=0;a<Ad.length;a++)Rr(Ad[a],n);break;case"source":Rr("error",n);break;case"img":case"image":case"link":Rr("error",n),Rr("load",n);break;case"details":Rr("toggle",n);break;case"input":Vx(n,o),Rr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Rr("invalid",n);break;case"textarea":zx(n,o),Rr("invalid",n)}K0(r,o),a=null;for(var l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="children"?typeof c=="string"?n.textContent!==c&&(o.suppressHydrationWarning!==!0&&nh(n.textContent,c,t),a=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&nh(n.textContent,c,t),a=["children",""+c]):_d.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&Rr("scroll",n)}switch(r){case"input":Jf(n),$x(n,o,!0);break;case"textarea":Jf(n),Wx(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Vh)}n=a,e.updateQueue=n,n!==null&&(e.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=n2(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=l.createElement(r,{is:n.is}):(t=l.createElement(r),r==="select"&&(l=t,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):t=l.createElementNS(t,r),t[ko]=e,t[Dd]=n,Sb(t,e,!1,!1),e.stateNode=t;e:{switch(l=G0(r,n),r){case"dialog":Rr("cancel",t),Rr("close",t),a=n;break;case"iframe":case"object":case"embed":Rr("load",t),a=n;break;case"video":case"audio":for(a=0;a<Ad.length;a++)Rr(Ad[a],t);a=n;break;case"source":Rr("error",t),a=n;break;case"img":case"image":case"link":Rr("error",t),Rr("load",t),a=n;break;case"details":Rr("toggle",t),a=n;break;case"input":Vx(t,n),a=O0(t,n),Rr("invalid",t);break;case"option":a=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},a=sn({},n,{value:void 0}),Rr("invalid",t);break;case"textarea":zx(t,n),a=H0(t,n),Rr("invalid",t);break;default:a=n}K0(r,a),c=a;for(o in c)if(c.hasOwnProperty(o)){var A=c[o];o==="style"?o2(t,A):o==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&s2(t,A)):o==="children"?typeof A=="string"?(r!=="textarea"||A!=="")&&Fd(t,A):typeof A=="number"&&Fd(t,""+A):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(_d.hasOwnProperty(o)?A!=null&&o==="onScroll"&&Rr("scroll",t):A!=null&&tv(t,o,A,l))}switch(r){case"input":Jf(t),$x(t,n,!1);break;case"textarea":Jf(t),Wx(t);break;case"option":n.value!=null&&t.setAttribute("value",""+jA(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?Mc(t,!!n.multiple,o,!1):n.defaultValue!=null&&Mc(t,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=Vh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return hs(e),null;case 6:if(t&&e.stateNode!=null)_b(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(rt(166));if(r=il(Hd.current),il(Oo.current),sh(e)){if(n=e.stateNode,r=e.memoizedProps,n[ko]=e,(o=n.nodeValue!==r)&&(t=ba,t!==null))switch(t.tag){case 3:nh(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&nh(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ko]=e,e.stateNode=n}return hs(e),null;case 13:if(Mr(rn),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Wr&&ya!==null&&e.mode&1&&!(e.flags&128))z2(),Yc(),e.flags|=98560,o=!1;else if(o=sh(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(rt(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(rt(317));o[ko]=e}else Yc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;hs(e),o=!1}else oo!==null&&(Bg(oo),oo=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||rn.current&1?Mn===0&&(Mn=3):Pv())),e.updateQueue!==null&&(e.flags|=4),hs(e),null);case 4:return Zc(),pg(t,e),t===null&&Pd(e.stateNode.containerInfo),hs(e),null;case 10:return yv(e.type._context),hs(e),null;case 17:return ta(e.type)&&$h(),hs(e),null;case 19:if(Mr(rn),o=e.memoizedState,o===null)return hs(e),null;if(n=(e.flags&128)!==0,l=o.rendering,l===null)if(n)ed(o,!1);else{if(Mn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Zh(t),l!==null){for(e.flags|=128,ed(o,!1),n=l.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Pr(rn,rn.current&1|2),e.child}t=t.sibling}o.tail!==null&&bn()>tu&&(e.flags|=128,n=!0,ed(o,!1),e.lanes=4194304)}else{if(!n)if(t=Zh(l),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ed(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Wr)return hs(e),null}else 2*bn()-o.renderingStartTime>tu&&r!==1073741824&&(e.flags|=128,n=!0,ed(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(r=o.last,r!==null?r.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=bn(),e.sibling=null,r=rn.current,Pr(rn,n?r&1|2:r&1),e):(hs(e),null);case 22:case 23:return Tv(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?xa&1073741824&&(hs(e),e.subtreeFlags&6&&(e.flags|=8192)):hs(e),null;case 24:return null;case 25:return null}throw Error(rt(156,e.tag))}function W4(t,e){switch(pv(e),e.tag){case 1:return ta(e.type)&&$h(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Zc(),Mr(ea),Mr(ws),Cv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Bv(e),null;case 13:if(Mr(rn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(rt(340));Yc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Mr(rn),null;case 4:return Zc(),null;case 10:return yv(e.type._context),null;case 22:case 23:return Tv(),null;case 24:return null;default:return null}}var ih=!1,xs=!1,J4=typeof WeakSet=="function"?WeakSet:Set,Nt=null;function Rc(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){hn(t,e,n)}else r.current=null}function gg(t,e,r){try{r()}catch(n){hn(t,e,n)}}var Py=!1;function X4(t,e){if(eg=Mh,t=L2(),hv(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var l=0,c=-1,A=-1,u=0,i=0,d=t,h=null;t:for(;;){for(var f;d!==r||a!==0&&d.nodeType!==3||(c=l+a),d!==o||n!==0&&d.nodeType!==3||(A=l+n),d.nodeType===3&&(l+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===r&&++u===a&&(c=l),h===o&&++i===n&&(A=l),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}r=c===-1||A===-1?null:{start:c,end:A}}else r=null}r=r||{start:0,end:0}}else r=null;for(tg={focusedElem:t,selectionRange:r},Mh=!1,Nt=e;Nt!==null;)if(e=Nt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Nt=t;else for(;Nt!==null;){e=Nt;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var j=w.memoizedProps,B=w.memoizedState,p=e.stateNode,x=p.getSnapshotBeforeUpdate(e.elementType===e.type?j:no(e.type,j),B);p.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(rt(163))}}catch(S){hn(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Nt=t;break}Nt=e.return}return w=Py,Py=!1,w}function pd(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&t)===t){var o=a.destroy;a.destroy=void 0,o!==void 0&&gg(e,r,o)}a=a.next}while(a!==n)}}function jm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function vg(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Fb(t){var e=t.alternate;e!==null&&(t.alternate=null,Fb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ko],delete e[Dd],delete e[sg],delete e[Q4],delete e[I4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ub(t){return t.tag===5||t.tag===3||t.tag===4}function Oy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ub(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xg(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Vh));else if(n!==4&&(t=t.child,t!==null))for(xg(t,e,r),t=t.sibling;t!==null;)xg(t,e,r),t=t.sibling}function yg(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(yg(t,e,r),t=t.sibling;t!==null;)yg(t,e,r),t=t.sibling}var rs=null,so=!1;function qi(t,e,r){for(r=r.child;r!==null;)Qb(t,e,r),r=r.sibling}function Qb(t,e,r){if(Po&&typeof Po.onCommitFiberUnmount=="function")try{Po.onCommitFiberUnmount(mm,r)}catch{}switch(r.tag){case 5:xs||Rc(r,e);case 6:var n=rs,a=so;rs=null,qi(t,e,r),rs=n,so=a,rs!==null&&(so?(t=rs,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):rs.removeChild(r.stateNode));break;case 18:rs!==null&&(so?(t=rs,r=r.stateNode,t.nodeType===8?$p(t.parentNode,r):t.nodeType===1&&$p(t,r),Ld(t)):$p(rs,r.stateNode));break;case 4:n=rs,a=so,rs=r.stateNode.containerInfo,so=!0,qi(t,e,r),rs=n,so=a;break;case 0:case 11:case 14:case 15:if(!xs&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var o=a,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&gg(r,e,l),a=a.next}while(a!==n)}qi(t,e,r);break;case 1:if(!xs&&(Rc(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(c){hn(r,e,c)}qi(t,e,r);break;case 21:qi(t,e,r);break;case 22:r.mode&1?(xs=(n=xs)||r.memoizedState!==null,qi(t,e,r),xs=n):qi(t,e,r);break;default:qi(t,e,r)}}function Dy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new J4),e.forEach(function(n){var a=aN.bind(null,t,n);r.has(n)||(r.add(n),n.then(a,a))})}}function eo(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var o=t,l=e,c=l;e:for(;c!==null;){switch(c.tag){case 5:rs=c.stateNode,so=!1;break e;case 3:rs=c.stateNode.containerInfo,so=!0;break e;case 4:rs=c.stateNode.containerInfo,so=!0;break e}c=c.return}if(rs===null)throw Error(rt(160));Qb(o,l,a),rs=null,so=!1;var A=a.alternate;A!==null&&(A.return=null),a.return=null}catch(u){hn(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ib(e,t),e=e.sibling}function Ib(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(eo(e,t),Fo(t),n&4){try{pd(3,t,t.return),jm(3,t)}catch(j){hn(t,t.return,j)}try{pd(5,t,t.return)}catch(j){hn(t,t.return,j)}}break;case 1:eo(e,t),Fo(t),n&512&&r!==null&&Rc(r,r.return);break;case 5:if(eo(e,t),Fo(t),n&512&&r!==null&&Rc(r,r.return),t.flags&32){var a=t.stateNode;try{Fd(a,"")}catch(j){hn(t,t.return,j)}}if(n&4&&(a=t.stateNode,a!=null)){var o=t.memoizedProps,l=r!==null?r.memoizedProps:o,c=t.type,A=t.updateQueue;if(t.updateQueue=null,A!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&t2(a,o),G0(c,l);var u=G0(c,o);for(l=0;l<A.length;l+=2){var i=A[l],d=A[l+1];i==="style"?o2(a,d):i==="dangerouslySetInnerHTML"?s2(a,d):i==="children"?Fd(a,d):tv(a,i,d,u)}switch(c){case"input":D0(a,o);break;case"textarea":r2(a,o);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var f=o.value;f!=null?Mc(a,!!o.multiple,f,!1):h!==!!o.multiple&&(o.defaultValue!=null?Mc(a,!!o.multiple,o.defaultValue,!0):Mc(a,!!o.multiple,o.multiple?[]:"",!1))}a[Dd]=o}catch(j){hn(t,t.return,j)}}break;case 6:if(eo(e,t),Fo(t),n&4){if(t.stateNode===null)throw Error(rt(162));a=t.stateNode,o=t.memoizedProps;try{a.nodeValue=o}catch(j){hn(t,t.return,j)}}break;case 3:if(eo(e,t),Fo(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ld(e.containerInfo)}catch(j){hn(t,t.return,j)}break;case 4:eo(e,t),Fo(t);break;case 13:eo(e,t),Fo(t),a=t.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(Lv=bn())),n&4&&Dy(t);break;case 22:if(i=r!==null&&r.memoizedState!==null,t.mode&1?(xs=(u=xs)||i,eo(e,t),xs=u):eo(e,t),Fo(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!i&&t.mode&1)for(Nt=t,i=t.child;i!==null;){for(d=Nt=i;Nt!==null;){switch(h=Nt,f=h.child,h.tag){case 0:case 11:case 14:case 15:pd(4,h,h.return);break;case 1:Rc(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(j){hn(n,r,j)}}break;case 5:Rc(h,h.return);break;case 22:if(h.memoizedState!==null){Hy(d);continue}}f!==null?(f.return=h,Nt=f):Hy(d)}i=i.sibling}e:for(i=null,d=t;;){if(d.tag===5){if(i===null){i=d;try{a=d.stateNode,u?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=d.stateNode,A=d.memoizedProps.style,l=A!=null&&A.hasOwnProperty("display")?A.display:null,c.style.display=a2("display",l))}catch(j){hn(t,t.return,j)}}}else if(d.tag===6){if(i===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(j){hn(t,t.return,j)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;i===d&&(i=null),d=d.return}i===d&&(i=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:eo(e,t),Fo(t),n&4&&Dy(t);break;case 21:break;default:eo(e,t),Fo(t)}}function Fo(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Ub(r)){var n=r;break e}r=r.return}throw Error(rt(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Fd(a,""),n.flags&=-33);var o=Oy(t);yg(t,o,a);break;case 3:case 4:var l=n.stateNode.containerInfo,c=Oy(t);xg(t,c,l);break;default:throw Error(rt(161))}}catch(A){hn(t,t.return,A)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Y4(t,e,r){Nt=t,Lb(t)}function Lb(t,e,r){for(var n=(t.mode&1)!==0;Nt!==null;){var a=Nt,o=a.child;if(a.tag===22&&n){var l=a.memoizedState!==null||ih;if(!l){var c=a.alternate,A=c!==null&&c.memoizedState!==null||xs;c=ih;var u=xs;if(ih=l,(xs=A)&&!u)for(Nt=a;Nt!==null;)l=Nt,A=l.child,l.tag===22&&l.memoizedState!==null?My(a):A!==null?(A.return=l,Nt=A):My(a);for(;o!==null;)Nt=o,Lb(o),o=o.sibling;Nt=a,ih=c,xs=u}Ry(t)}else a.subtreeFlags&8772&&o!==null?(o.return=a,Nt=o):Ry(t)}}function Ry(t){for(;Nt!==null;){var e=Nt;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xs||jm(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!xs)if(r===null)n.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:no(e.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&By(e,o,n);break;case 3:var l=e.updateQueue;if(l!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}By(e,l,r)}break;case 5:var c=e.stateNode;if(r===null&&e.flags&4){r=c;var A=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&r.focus();break;case"img":A.src&&(r.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var i=u.memoizedState;if(i!==null){var d=i.dehydrated;d!==null&&Ld(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(rt(163))}xs||e.flags&512&&vg(e)}catch(h){hn(e,e.return,h)}}if(e===t){Nt=null;break}if(r=e.sibling,r!==null){r.return=e.return,Nt=r;break}Nt=e.return}}function Hy(t){for(;Nt!==null;){var e=Nt;if(e===t){Nt=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Nt=r;break}Nt=e.return}}function My(t){for(;Nt!==null;){var e=Nt;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{jm(4,e)}catch(A){hn(e,r,A)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var a=e.return;try{n.componentDidMount()}catch(A){hn(e,a,A)}}var o=e.return;try{vg(e)}catch(A){hn(e,o,A)}break;case 5:var l=e.return;try{vg(e)}catch(A){hn(e,l,A)}}}catch(A){hn(e,e.return,A)}if(e===t){Nt=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Nt=c;break}Nt=e.return}}var q4=Math.ceil,rm=Ci.ReactCurrentDispatcher,Qv=Ci.ReactCurrentOwner,Ra=Ci.ReactCurrentBatchConfig,pr=0,Jn=null,In=null,ns=0,xa=0,Hc=SA(0),Mn=0,Vd=null,wl=0,Bm=0,Iv=0,gd=null,Ys=null,Lv=0,tu=1/0,fi=null,nm=!1,wg=null,vA=null,Ah=!1,cA=null,sm=0,vd=0,bg=null,Uh=-1,Qh=0;function Us(){return pr&6?bn():Uh!==-1?Uh:Uh=bn()}function xA(t){return t.mode&1?pr&2&&ns!==0?ns&-ns:k4.transition!==null?(Qh===0&&(Qh=v2()),Qh):(t=Sr,t!==0||(t=window.event,t=t===void 0?16:C2(t.type)),t):1}function Ao(t,e,r,n){if(50<vd)throw vd=0,bg=null,Error(rt(185));Zd(t,r,n),(!(pr&2)||t!==Jn)&&(t===Jn&&(!(pr&2)&&(Bm|=r),Mn===4&&oA(t,ns)),ra(t,n),r===1&&pr===0&&!(e.mode&1)&&(tu=bn()+500,ym&&EA()))}function ra(t,e){var r=t.callbackNode;kC(t,e);var n=Hh(t,t===Jn?ns:0);if(n===0)r!==null&&Yx(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Yx(r),e===1)t.tag===0?L4(Ky.bind(null,t)):G2(Ky.bind(null,t)),F4(function(){!(pr&6)&&EA()}),r=null;else{switch(x2(n)){case 1:r=ov;break;case 4:r=p2;break;case 16:r=Rh;break;case 536870912:r=g2;break;default:r=Rh}r=Mb(r,kb.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function kb(t,e){if(Uh=-1,Qh=0,pr&6)throw Error(rt(327));var r=t.callbackNode;if(zc()&&t.callbackNode!==r)return null;var n=Hh(t,t===Jn?ns:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=am(t,n);else{e=n;var a=pr;pr|=2;var o=Pb();(Jn!==t||ns!==e)&&(fi=null,tu=bn()+500,cl(t,e));do try{tN();break}catch(c){Tb(t,c)}while(!0);xv(),rm.current=o,pr=a,In!==null?e=0:(Jn=null,ns=0,e=Mn)}if(e!==0){if(e===2&&(a=J0(t),a!==0&&(n=a,e=jg(t,a))),e===1)throw r=Vd,cl(t,0),oA(t,n),ra(t,bn()),r;if(e===6)oA(t,n);else{if(a=t.current.alternate,!(n&30)&&!Z4(a)&&(e=am(t,n),e===2&&(o=J0(t),o!==0&&(n=o,e=jg(t,o))),e===1))throw r=Vd,cl(t,0),oA(t,n),ra(t,bn()),r;switch(t.finishedWork=a,t.finishedLanes=n,e){case 0:case 1:throw Error(rt(345));case 2:el(t,Ys,fi);break;case 3:if(oA(t,n),(n&130023424)===n&&(e=Lv+500-bn(),10<e)){if(Hh(t,0)!==0)break;if(a=t.suspendedLanes,(a&n)!==n){Us(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=ng(el.bind(null,t,Ys,fi),e);break}el(t,Ys,fi);break;case 4:if(oA(t,n),(n&4194240)===n)break;for(e=t.eventTimes,a=-1;0<n;){var l=31-io(n);o=1<<l,l=e[l],l>a&&(a=l),n&=~o}if(n=a,n=bn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*q4(n/1960))-n,10<n){t.timeoutHandle=ng(el.bind(null,t,Ys,fi),n);break}el(t,Ys,fi);break;case 5:el(t,Ys,fi);break;default:throw Error(rt(329))}}}return ra(t,bn()),t.callbackNode===r?kb.bind(null,t):null}function jg(t,e){var r=gd;return t.current.memoizedState.isDehydrated&&(cl(t,e).flags|=256),t=am(t,e),t!==2&&(e=Ys,Ys=r,e!==null&&Bg(e)),t}function Bg(t){Ys===null?Ys=t:Ys.push.apply(Ys,t)}function Z4(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],o=a.getSnapshot;a=a.value;try{if(!lo(o(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function oA(t,e){for(e&=~Iv,e&=~Bm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-io(e),n=1<<r;t[r]=-1,e&=~n}}function Ky(t){if(pr&6)throw Error(rt(327));zc();var e=Hh(t,0);if(!(e&1))return ra(t,bn()),null;var r=am(t,e);if(t.tag!==0&&r===2){var n=J0(t);n!==0&&(e=n,r=jg(t,n))}if(r===1)throw r=Vd,cl(t,0),oA(t,e),ra(t,bn()),r;if(r===6)throw Error(rt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,el(t,Ys,fi),ra(t,bn()),null}function kv(t,e){var r=pr;pr|=1;try{return t(e)}finally{pr=r,pr===0&&(tu=bn()+500,ym&&EA())}}function bl(t){cA!==null&&cA.tag===0&&!(pr&6)&&zc();var e=pr;pr|=1;var r=Ra.transition,n=Sr;try{if(Ra.transition=null,Sr=1,t)return t()}finally{Sr=n,Ra.transition=r,pr=e,!(pr&6)&&EA()}}function Tv(){xa=Hc.current,Mr(Hc)}function cl(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,_4(r)),In!==null)for(r=In.return;r!==null;){var n=r;switch(pv(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&$h();break;case 3:Zc(),Mr(ea),Mr(ws),Cv();break;case 5:Bv(n);break;case 4:Zc();break;case 13:Mr(rn);break;case 19:Mr(rn);break;case 10:yv(n.type._context);break;case 22:case 23:Tv()}r=r.return}if(Jn=t,In=t=yA(t.current,null),ns=xa=e,Mn=0,Vd=null,Iv=Bm=wl=0,Ys=gd=null,ol!==null){for(e=0;e<ol.length;e++)if(r=ol[e],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,o=r.pending;if(o!==null){var l=o.next;o.next=a,n.next=l}r.pending=n}ol=null}return t}function Tb(t,e){do{var r=In;try{if(xv(),Eh.current=tm,em){for(var n=nn.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}em=!1}if(yl=0,Wn=Rn=nn=null,md=!1,Md=0,Qv.current=null,r===null||r.return===null){Mn=1,Vd=e,In=null;break}e:{var o=t,l=r.return,c=r,A=e;if(e=ns,c.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var u=A,i=c,d=i.tag;if(!(i.mode&1)&&(d===0||d===11||d===15)){var h=i.alternate;h?(i.updateQueue=h.updateQueue,i.memoizedState=h.memoizedState,i.lanes=h.lanes):(i.updateQueue=null,i.memoizedState=null)}var f=Fy(l);if(f!==null){f.flags&=-257,Uy(f,l,c,o,e),f.mode&1&&_y(o,u,e),e=f,A=u;var w=e.updateQueue;if(w===null){var j=new Set;j.add(A),e.updateQueue=j}else w.add(A);break e}else{if(!(e&1)){_y(o,u,e),Pv();break e}A=Error(rt(426))}}else if(Wr&&c.mode&1){var B=Fy(l);if(B!==null){!(B.flags&65536)&&(B.flags|=256),Uy(B,l,c,o,e),gv(eu(A,c));break e}}o=A=eu(A,c),Mn!==4&&(Mn=2),gd===null?gd=[o]:gd.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var p=xb(o,A,e);jy(o,p);break e;case 1:c=A;var x=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(vA===null||!vA.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=yb(o,c,e);jy(o,S);break e}}o=o.return}while(o!==null)}Db(r)}catch(E){e=E,In===r&&r!==null&&(In=r=r.return);continue}break}while(!0)}function Pb(){var t=rm.current;return rm.current=tm,t===null?tm:t}function Pv(){(Mn===0||Mn===3||Mn===2)&&(Mn=4),Jn===null||!(wl&268435455)&&!(Bm&268435455)||oA(Jn,ns)}function am(t,e){var r=pr;pr|=2;var n=Pb();(Jn!==t||ns!==e)&&(fi=null,cl(t,e));do try{eN();break}catch(a){Tb(t,a)}while(!0);if(xv(),pr=r,rm.current=n,In!==null)throw Error(rt(261));return Jn=null,ns=0,Mn}function eN(){for(;In!==null;)Ob(In)}function tN(){for(;In!==null&&!NC();)Ob(In)}function Ob(t){var e=Hb(t.alternate,t,xa);t.memoizedProps=t.pendingProps,e===null?Db(t):In=e,Qv.current=null}function Db(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=W4(r,e),r!==null){r.flags&=32767,In=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Mn=6,In=null;return}}else if(r=z4(r,e,xa),r!==null){In=r;return}if(e=e.sibling,e!==null){In=e;return}In=e=t}while(e!==null);Mn===0&&(Mn=5)}function el(t,e,r){var n=Sr,a=Ra.transition;try{Ra.transition=null,Sr=1,rN(t,e,r,n)}finally{Ra.transition=a,Sr=n}return null}function rN(t,e,r,n){do zc();while(cA!==null);if(pr&6)throw Error(rt(327));r=t.finishedWork;var a=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(rt(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(TC(t,o),t===Jn&&(In=Jn=null,ns=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ah||(Ah=!0,Mb(Rh,function(){return zc(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Ra.transition,Ra.transition=null;var l=Sr;Sr=1;var c=pr;pr|=4,Qv.current=null,X4(t,r),Ib(r,t),b4(tg),Mh=!!eg,tg=eg=null,t.current=r,Y4(r),SC(),pr=c,Sr=l,Ra.transition=o}else t.current=r;if(Ah&&(Ah=!1,cA=t,sm=a),o=t.pendingLanes,o===0&&(vA=null),FC(r.stateNode),ra(t,bn()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)a=e[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(nm)throw nm=!1,t=wg,wg=null,t;return sm&1&&t.tag!==0&&zc(),o=t.pendingLanes,o&1?t===bg?vd++:(vd=0,bg=t):vd=0,EA(),null}function zc(){if(cA!==null){var t=x2(sm),e=Ra.transition,r=Sr;try{if(Ra.transition=null,Sr=16>t?16:t,cA===null)var n=!1;else{if(t=cA,cA=null,sm=0,pr&6)throw Error(rt(331));var a=pr;for(pr|=4,Nt=t.current;Nt!==null;){var o=Nt,l=o.child;if(Nt.flags&16){var c=o.deletions;if(c!==null){for(var A=0;A<c.length;A++){var u=c[A];for(Nt=u;Nt!==null;){var i=Nt;switch(i.tag){case 0:case 11:case 15:pd(8,i,o)}var d=i.child;if(d!==null)d.return=i,Nt=d;else for(;Nt!==null;){i=Nt;var h=i.sibling,f=i.return;if(Fb(i),i===u){Nt=null;break}if(h!==null){h.return=f,Nt=h;break}Nt=f}}}var w=o.alternate;if(w!==null){var j=w.child;if(j!==null){w.child=null;do{var B=j.sibling;j.sibling=null,j=B}while(j!==null)}}Nt=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,Nt=l;else e:for(;Nt!==null;){if(o=Nt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:pd(9,o,o.return)}var p=o.sibling;if(p!==null){p.return=o.return,Nt=p;break e}Nt=o.return}}var x=t.current;for(Nt=x;Nt!==null;){l=Nt;var C=l.child;if(l.subtreeFlags&2064&&C!==null)C.return=l,Nt=C;else e:for(l=x;Nt!==null;){if(c=Nt,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:jm(9,c)}}catch(E){hn(c,c.return,E)}if(c===l){Nt=null;break e}var S=c.sibling;if(S!==null){S.return=c.return,Nt=S;break e}Nt=c.return}}if(pr=a,EA(),Po&&typeof Po.onPostCommitFiberRoot=="function")try{Po.onPostCommitFiberRoot(mm,t)}catch{}n=!0}return n}finally{Sr=r,Ra.transition=e}}return!1}function Gy(t,e,r){e=eu(r,e),e=xb(t,e,1),t=gA(t,e,1),e=Us(),t!==null&&(Zd(t,1,e),ra(t,e))}function hn(t,e,r){if(t.tag===3)Gy(t,t,r);else for(;e!==null;){if(e.tag===3){Gy(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(vA===null||!vA.has(n))){t=eu(r,t),t=yb(e,t,1),e=gA(e,t,1),t=Us(),e!==null&&(Zd(e,1,t),ra(e,t));break}}e=e.return}}function nN(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Us(),t.pingedLanes|=t.suspendedLanes&r,Jn===t&&(ns&r)===r&&(Mn===4||Mn===3&&(ns&130023424)===ns&&500>bn()-Lv?cl(t,0):Iv|=r),ra(t,e)}function Rb(t,e){e===0&&(t.mode&1?(e=qf,qf<<=1,!(qf&130023424)&&(qf=4194304)):e=1);var r=Us();t=bi(t,e),t!==null&&(Zd(t,e,r),ra(t,r))}function sN(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Rb(t,r)}function aN(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,a=t.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(rt(314))}n!==null&&n.delete(e),Rb(t,r)}var Hb;Hb=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||ea.current)Zs=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Zs=!1,$4(t,e,r);Zs=!!(t.flags&131072)}else Zs=!1,Wr&&e.flags&1048576&&V2(e,Jh,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Fh(t,e),t=e.pendingProps;var a=Xc(e,ws.current);$c(e,r),a=Sv(null,e,n,t,a,r);var o=Ev();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ta(n)?(o=!0,zh(e)):o=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,bv(e),a.updater=bm,e.stateNode=a,a._reactInternals=e,cg(e,n,t,r),e=fg(null,e,n,!0,o,r)):(e.tag=0,Wr&&o&&mv(e),_s(null,e,a,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Fh(t,e),t=e.pendingProps,a=n._init,n=a(n._payload),e.type=n,a=e.tag=iN(n),t=no(n,t),a){case 0:e=dg(null,e,n,t,r);break e;case 1:e=Ly(null,e,n,t,r);break e;case 11:e=Qy(null,e,n,t,r);break e;case 14:e=Iy(null,e,n,no(n.type,t),r);break e}throw Error(rt(306,n,""))}return e;case 0:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:no(n,a),dg(t,e,n,a,r);case 1:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:no(n,a),Ly(t,e,n,a,r);case 3:e:{if(Bb(e),t===null)throw Error(rt(387));n=e.pendingProps,o=e.memoizedState,a=o.element,Y2(t,e),qh(e,n,null,r);var l=e.memoizedState;if(n=l.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){a=eu(Error(rt(423)),e),e=ky(t,e,n,r,a);break e}else if(n!==a){a=eu(Error(rt(424)),e),e=ky(t,e,n,r,a);break e}else for(ya=pA(e.stateNode.containerInfo.firstChild),ba=e,Wr=!0,oo=null,r=J2(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Yc(),n===a){e=ji(t,e,r);break e}_s(t,e,n,r)}e=e.child}return e;case 5:return q2(e),t===null&&ig(e),n=e.type,a=e.pendingProps,o=t!==null?t.memoizedProps:null,l=a.children,rg(n,a)?l=null:o!==null&&rg(n,o)&&(e.flags|=32),jb(t,e),_s(t,e,l,r),e.child;case 6:return t===null&&ig(e),null;case 13:return Cb(t,e,r);case 4:return jv(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=qc(e,null,n,r):_s(t,e,n,r),e.child;case 11:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:no(n,a),Qy(t,e,n,a,r);case 7:return _s(t,e,e.pendingProps,r),e.child;case 8:return _s(t,e,e.pendingProps.children,r),e.child;case 12:return _s(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,a=e.pendingProps,o=e.memoizedProps,l=a.value,Pr(Xh,n._currentValue),n._currentValue=l,o!==null)if(lo(o.value,l)){if(o.children===a.children&&!ea.current){e=ji(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var c=o.dependencies;if(c!==null){l=o.child;for(var A=c.firstContext;A!==null;){if(A.context===n){if(o.tag===1){A=xi(-1,r&-r),A.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var i=u.pending;i===null?A.next=A:(A.next=i.next,i.next=A),u.pending=A}}o.lanes|=r,A=o.alternate,A!==null&&(A.lanes|=r),Ag(o.return,r,e),c.lanes|=r;break}A=A.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(rt(341));l.lanes|=r,c=l.alternate,c!==null&&(c.lanes|=r),Ag(l,r,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}_s(t,e,a.children,r),e=e.child}return e;case 9:return a=e.type,n=e.pendingProps.children,$c(e,r),a=Ha(a),n=n(a),e.flags|=1,_s(t,e,n,r),e.child;case 14:return n=e.type,a=no(n,e.pendingProps),a=no(n.type,a),Iy(t,e,n,a,r);case 15:return wb(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,a=e.pendingProps,a=e.elementType===n?a:no(n,a),Fh(t,e),e.tag=1,ta(n)?(t=!0,zh(e)):t=!1,$c(e,r),vb(e,n,a),cg(e,n,a,r),fg(null,e,n,!0,t,r);case 19:return Nb(t,e,r);case 22:return bb(t,e,r)}throw Error(rt(156,e.tag))};function Mb(t,e){return m2(t,e)}function oN(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Da(t,e,r,n){return new oN(t,e,r,n)}function Ov(t){return t=t.prototype,!(!t||!t.isReactComponent)}function iN(t){if(typeof t=="function")return Ov(t)?1:0;if(t!=null){if(t=t.$$typeof,t===nv)return 11;if(t===sv)return 14}return 2}function yA(t,e){var r=t.alternate;return r===null?(r=Da(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ih(t,e,r,n,a,o){var l=2;if(n=t,typeof t=="function")Ov(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case Uc:return ul(r.children,a,o,e);case rv:l=8,a|=8;break;case L0:return t=Da(12,r,e,a|2),t.elementType=L0,t.lanes=o,t;case k0:return t=Da(13,r,e,a),t.elementType=k0,t.lanes=o,t;case T0:return t=Da(19,r,e,a),t.elementType=T0,t.lanes=o,t;case q1:return Cm(r,a,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case X1:l=10;break e;case Y1:l=9;break e;case nv:l=11;break e;case sv:l=14;break e;case nA:l=16,n=null;break e}throw Error(rt(130,t==null?t:typeof t,""))}return e=Da(l,r,e,a),e.elementType=t,e.type=n,e.lanes=o,e}function ul(t,e,r,n){return t=Da(7,t,n,e),t.lanes=r,t}function Cm(t,e,r,n){return t=Da(22,t,n,e),t.elementType=q1,t.lanes=r,t.stateNode={isHidden:!1},t}function e0(t,e,r){return t=Da(6,t,null,e),t.lanes=r,t}function t0(t,e,r){return e=Da(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function AN(t,e,r,n,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kp(0),this.expirationTimes=kp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kp(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Dv(t,e,r,n,a,o,l,c,A){return t=new AN(t,e,r,c,A),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Da(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},bv(o),t}function lN(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fc,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Kb(t){if(!t)return BA;t=t._reactInternals;e:{if(Sl(t)!==t||t.tag!==1)throw Error(rt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ta(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(rt(171))}if(t.tag===1){var r=t.type;if(ta(r))return K2(t,r,e)}return e}function Gb(t,e,r,n,a,o,l,c,A){return t=Dv(r,n,!0,t,a,o,l,c,A),t.context=Kb(null),r=t.current,n=Us(),a=xA(r),o=xi(n,a),o.callback=e??null,gA(r,o,a),t.current.lanes=a,Zd(t,a,n),ra(t,n),t}function Nm(t,e,r,n){var a=e.current,o=Us(),l=xA(a);return r=Kb(r),e.context===null?e.context=r:e.pendingContext=r,e=xi(o,l),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=gA(a,e,l),t!==null&&(Ao(t,a,l,o),Sh(t,a,l)),l}function om(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Vy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Rv(t,e){Vy(t,e),(t=t.alternate)&&Vy(t,e)}function cN(){return null}var Vb=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hv(t){this._internalRoot=t}Sm.prototype.render=Hv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(rt(409));Nm(t,e,null,null)};Sm.prototype.unmount=Hv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bl(function(){Nm(null,t,null,null)}),e[wi]=null}};function Sm(t){this._internalRoot=t}Sm.prototype.unstable_scheduleHydration=function(t){if(t){var e=b2();t={blockedOn:null,target:t,priority:e};for(var r=0;r<aA.length&&e!==0&&e<aA[r].priority;r++);aA.splice(r,0,t),r===0&&B2(t)}};function Mv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Em(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $y(){}function uN(t,e,r,n,a){if(a){if(typeof n=="function"){var o=n;n=function(){var u=om(l);o.call(u)}}var l=Gb(e,n,t,0,null,!1,!1,"",$y);return t._reactRootContainer=l,t[wi]=l.current,Pd(t.nodeType===8?t.parentNode:t),bl(),l}for(;a=t.lastChild;)t.removeChild(a);if(typeof n=="function"){var c=n;n=function(){var u=om(A);c.call(u)}}var A=Dv(t,0,!1,null,null,!1,!1,"",$y);return t._reactRootContainer=A,t[wi]=A.current,Pd(t.nodeType===8?t.parentNode:t),bl(function(){Nm(e,A,r,n)}),A}function _m(t,e,r,n,a){var o=r._reactRootContainer;if(o){var l=o;if(typeof a=="function"){var c=a;a=function(){var A=om(l);c.call(A)}}Nm(e,l,t,a)}else l=uN(r,e,t,a,n);return om(l)}y2=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=id(e.pendingLanes);r!==0&&(iv(e,r|1),ra(e,bn()),!(pr&6)&&(tu=bn()+500,EA()))}break;case 13:bl(function(){var n=bi(t,1);if(n!==null){var a=Us();Ao(n,t,1,a)}}),Rv(t,1)}};Av=function(t){if(t.tag===13){var e=bi(t,134217728);if(e!==null){var r=Us();Ao(e,t,134217728,r)}Rv(t,134217728)}};w2=function(t){if(t.tag===13){var e=xA(t),r=bi(t,e);if(r!==null){var n=Us();Ao(r,t,e,n)}Rv(t,e)}};b2=function(){return Sr};j2=function(t,e){var r=Sr;try{return Sr=t,e()}finally{Sr=r}};$0=function(t,e,r){switch(e){case"input":if(D0(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var a=xm(n);if(!a)throw Error(rt(90));e2(n),D0(n,a)}}}break;case"textarea":r2(t,r);break;case"select":e=r.value,e!=null&&Mc(t,!!r.multiple,e,!1)}};l2=kv;c2=bl;var dN={usingClientEntryPoint:!1,Events:[tf,kc,xm,i2,A2,kv]},td={findFiberByHostInstance:al,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fN={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ci.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=f2(t),t===null?null:t.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||cN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lh.isDisabled&&lh.supportsFiber)try{mm=lh.inject(fN),Po=lh}catch{}}Ca.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dN;Ca.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mv(e))throw Error(rt(200));return lN(t,e,null,r)};Ca.createRoot=function(t,e){if(!Mv(t))throw Error(rt(299));var r=!1,n="",a=Vb;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=Dv(t,1,!1,null,null,r,!1,n,a),t[wi]=e.current,Pd(t.nodeType===8?t.parentNode:t),new Hv(e)};Ca.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(rt(188)):(t=Object.keys(t).join(","),Error(rt(268,t)));return t=f2(e),t=t===null?null:t.stateNode,t};Ca.flushSync=function(t){return bl(t)};Ca.hydrate=function(t,e,r){if(!Em(e))throw Error(rt(200));return _m(null,t,e,!0,r)};Ca.hydrateRoot=function(t,e,r){if(!Mv(t))throw Error(rt(405));var n=r!=null&&r.hydratedSources||null,a=!1,o="",l=Vb;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),e=Gb(e,null,t,1,r??null,a,!1,o,l),t[wi]=e.current,Pd(t),n)for(t=0;t<n.length;t++)r=n[t],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new Sm(e)};Ca.render=function(t,e,r){if(!Em(e))throw Error(rt(200));return _m(null,t,e,!1,r)};Ca.unmountComponentAtNode=function(t){if(!Em(t))throw Error(rt(40));return t._reactRootContainer?(bl(function(){_m(null,null,t,!1,function(){t._reactRootContainer=null,t[wi]=null})}),!0):!1};Ca.unstable_batchedUpdates=kv;Ca.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Em(r))throw Error(rt(200));if(t==null||t._reactInternals===void 0)throw Error(rt(38));return _m(t,e,r,!1,n)};Ca.version="18.3.1-next-f1338f8080-20240426";function $b(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($b)}catch(t){console.error(t)}}$b(),$1.exports=Ca;var hN=$1.exports,zb,zy=hN;zb=zy.createRoot,zy.hydrateRoot;const mN="modulepreload",pN=function(t){return"/"+t},Wy={},wA=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(r.map(A=>{if(A=pN(A),A in Wy)return;Wy[A]=!0;const u=A.endsWith(".css"),i=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${i}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":mN,u||(d.as="script"),d.crossOrigin="",d.href=A,c&&d.setAttribute("nonce",c),document.head.appendChild(d),u)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${A}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return a.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},gN=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>wA(async()=>{const{default:n}=await Promise.resolve().then(()=>Au);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class Kv extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class Jy extends Kv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Xy extends Kv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Yy extends Kv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Cg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Cg||(Cg={}));var vN=function(t,e,r,n){function a(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function c(i){try{u(n.next(i))}catch(d){l(d)}}function A(i){try{u(n.throw(i))}catch(d){l(d)}}function u(i){i.done?o(i.value):a(i.value).then(c,A)}u((n=n.apply(t,e||[])).next())})};class xN{constructor(e,{headers:r={},customFetch:n,region:a=Cg.Any}={}){this.url=e,this.headers=r,this.region=a,this.fetch=gN(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return vN(this,arguments,void 0,function*(r,n={}){var a;try{const{headers:o,method:l,body:c,signal:A}=n;let u={},{region:i}=n;i||(i=this.region);const d=new URL(`${this.url}/${r}`);i&&i!=="any"&&(u["x-region"]=i,d.searchParams.set("forceFunctionRegion",i));let h;c&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=c):typeof c=="string"?(u["Content-Type"]="text/plain",h=c):typeof FormData<"u"&&c instanceof FormData?h=c:(u["Content-Type"]="application/json",h=JSON.stringify(c)));const f=yield this.fetch(d.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),o),body:h,signal:A}).catch(p=>{throw p.name==="AbortError"?p:new Jy(p)}),w=f.headers.get("x-relay-error");if(w&&w==="true")throw new Xy(f);if(!f.ok)throw new Yy(f);let j=((a=f.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),B;return j==="application/json"?B=yield f.json():j==="application/octet-stream"?B=yield f.blob():j==="text/event-stream"?B=f:j==="multipart/form-data"?B=yield f.formData():B=yield f.text(),{data:B,error:null,response:f}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new Jy(o)}:{data:null,error:o,response:o instanceof Yy||o instanceof Xy?o.context:void 0}}})}}var qs={},Gv={},Fm={},nf={},Um={},Qm={},yN=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ru=yN();const wN=ru.fetch,Wb=ru.fetch.bind(ru),Jb=ru.Headers,bN=ru.Request,jN=ru.Response,Au=Object.freeze(Object.defineProperty({__proto__:null,Headers:Jb,Request:bN,Response:jN,default:Wb,fetch:wN},Symbol.toStringTag,{value:"Module"})),BN=L1(Au);var Im={};Object.defineProperty(Im,"__esModule",{value:!0});let CN=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Im.default=CN;var Xb=Qs&&Qs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qm,"__esModule",{value:!0});const NN=Xb(BN),SN=Xb(Im);let EN=class{constructor(e){var r,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(r=e.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=NN.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=new Headers(this.headers),this.headers.set(e,r),this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var l,c,A,u;let i=null,d=null,h=null,f=o.status,w=o.statusText;if(o.ok){if(this.method!=="HEAD"){const x=await o.text();x===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?d=x:d=JSON.parse(x))}const B=(c=this.headers.get("Prefer"))===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),p=(A=o.headers.get("content-range"))===null||A===void 0?void 0:A.split("/");B&&p&&p.length>1&&(h=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(i={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,w="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const B=await o.text();try{i=JSON.parse(B),Array.isArray(i)&&o.status===404&&(d=[],i=null,f=200,w="OK")}catch{o.status===404&&B===""?(f=204,w="No Content"):i={message:B}}if(i&&this.isMaybeSingle&&(!((u=i==null?void 0:i.details)===null||u===void 0)&&u.includes("0 rows"))&&(i=null,f=200,w="OK"),i&&this.shouldThrowOnError)throw new SN.default(i)}return{error:i,data:d,count:h,status:f,statusText:w}});return this.shouldThrowOnError||(a=a.catch(o=>{var l,c,A;return{error:{message:`${(l=o==null?void 0:o.name)!==null&&l!==void 0?l:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(c=o==null?void 0:o.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(A=o==null?void 0:o.code)!==null&&A!==void 0?A:""}`},data:null,count:null,status:0,statusText:""}})),a.then(e,r)}returns(){return this}overrideTypes(){return this}};Qm.default=EN;var _N=Qs&&Qs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Um,"__esModule",{value:!0});const FN=_N(Qm);let UN=class extends FN.default{select(e){let r=!1;const n=(e??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:o=a}={}){const l=o?`${o}.order`:"order",c=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${c?`${c},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:a=n}={}){const o=typeof a>"u"?"offset":`${a}.offset`,l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(l,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:o=!1,format:l="text"}={}){var c;const A=[e?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,o?"wal":null].filter(Boolean).join("|"),u=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${u}"; options=${A};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Um.default=UN;var QN=Qs&&Qs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nf,"__esModule",{value:!0});const IN=QN(Um);let LN=class extends IN.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:a}={}){let o="";a==="plain"?o="pl":a==="phrase"?o="ph":a==="websearch"&&(o="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${o}fts${l}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};nf.default=LN;var kN=Qs&&Qs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fm,"__esModule",{value:!0});const rd=kN(nf);let TN=class{constructor(e,{headers:r={},schema:n,fetch:a}){this.url=e,this.headers=new Headers(r),this.schema=n,this.fetch=a}select(e,r){const{head:n=!1,count:a}=r??{},o=n?"HEAD":"GET";let l=!1;const c=(e??"*").split("").map(A=>/\s/.test(A)&&!l?"":(A==='"'&&(l=!l),A)).join("");return this.url.searchParams.set("select",c),a&&this.headers.append("Prefer",`count=${a}`),new rd.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:r,defaultToNull:n=!0}={}){var a;const o="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,A)=>c.concat(Object.keys(A)),[]);if(l.length>0){const c=[...new Set(l)].map(A=>`"${A}"`);this.url.searchParams.set("columns",c.join(","))}}return new rd.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:o=!0}={}){var l;const c="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),a&&this.headers.append("Prefer",`count=${a}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const A=e.reduce((u,i)=>u.concat(Object.keys(i)),[]);if(A.length>0){const u=[...new Set(A)].map(i=>`"${i}"`);this.url.searchParams.set("columns",u.join(","))}}return new rd.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(e,{count:r}={}){var n;const a="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new rd.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var r;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new rd.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Fm.default=TN;var Yb=Qs&&Qs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gv,"__esModule",{value:!0});const PN=Yb(Fm),ON=Yb(nf);let DN=class qb{constructor(e,{headers:r={},schema:n,fetch:a}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=a}from(e){const r=new URL(`${this.url}/${e}`);return new PN.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new qb(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:a=!1,count:o}={}){var l;let c;const A=new URL(`${this.url}/rpc/${e}`);let u;n||a?(c=n?"HEAD":"GET",Object.entries(r).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{A.searchParams.append(d,h)})):(c="POST",u=r);const i=new Headers(this.headers);return o&&i.set("Prefer",`count=${o}`),new ON.default({method:c,url:A,headers:i,schema:this.schemaName,body:u,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};Gv.default=DN;var lu=Qs&&Qs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qs,"__esModule",{value:!0});qs.PostgrestError=qs.PostgrestBuilder=qs.PostgrestTransformBuilder=qs.PostgrestFilterBuilder=qs.PostgrestQueryBuilder=qs.PostgrestClient=void 0;const Zb=lu(Gv);qs.PostgrestClient=Zb.default;const ej=lu(Fm);qs.PostgrestQueryBuilder=ej.default;const tj=lu(nf);qs.PostgrestFilterBuilder=tj.default;const rj=lu(Um);qs.PostgrestTransformBuilder=rj.default;const nj=lu(Qm);qs.PostgrestBuilder=nj.default;const sj=lu(Im);qs.PostgrestError=sj.default;var RN=qs.default={PostgrestClient:Zb.default,PostgrestQueryBuilder:ej.default,PostgrestFilterBuilder:tj.default,PostgrestTransformBuilder:rj.default,PostgrestBuilder:nj.default,PostgrestError:sj.default};const{PostgrestClient:HN,PostgrestQueryBuilder:Q6,PostgrestFilterBuilder:I6,PostgrestTransformBuilder:L6,PostgrestBuilder:k6,PostgrestError:T6}=RN;class MN{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const KN="2.75.1",GN=`realtime-js/${KN}`,VN="1.0.0",Ng=1e4,$N=1e3,zN=100;var xd;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(xd||(xd={}));var Dn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Dn||(Dn={}));var ao;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ao||(ao={}));var Sg;(function(t){t.websocket="websocket"})(Sg||(Sg={}));var nl;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(nl||(nl={}));class WN{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const a=r.getUint8(1),o=r.getUint8(2);let l=this.HEADER_LENGTH+2;const c=n.decode(e.slice(l,l+a));l=l+a;const A=n.decode(e.slice(l,l+o));l=l+o;const u=JSON.parse(n.decode(e.slice(l,e.byteLength)));return{ref:null,topic:c,event:A,payload:u}}}class aj{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Tr;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Tr||(Tr={}));const qy=(t,e,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((o,l)=>(o[l]=JN(l,t,e,a),o),{}):{}},JN=(t,e,r,n)=>{const a=e.find(c=>c.name===t),o=a==null?void 0:a.type,l=r[t];return o&&!n.includes(o)?oj(o,l):Eg(l)},oj=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return ZN(e,r)}switch(t){case Tr.bool:return XN(e);case Tr.float4:case Tr.float8:case Tr.int2:case Tr.int4:case Tr.int8:case Tr.numeric:case Tr.oid:return YN(e);case Tr.json:case Tr.jsonb:return qN(e);case Tr.timestamp:return eS(e);case Tr.abstime:case Tr.date:case Tr.daterange:case Tr.int4range:case Tr.int8range:case Tr.money:case Tr.reltime:case Tr.text:case Tr.time:case Tr.timestamptz:case Tr.timetz:case Tr.tsrange:case Tr.tstzrange:return Eg(e);default:return Eg(e)}},Eg=t=>t,XN=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},YN=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},qN=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},ZN=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let o;const l=t.slice(1,r);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(c=>oj(e,c))}return t},eS=t=>typeof t=="string"?t.replace(" ","T"):t,ij=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class r0{constructor(e,r,n={},a=Ng){this.channel=e,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Zy;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Zy||(Zy={}));class yd{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:o,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yd.syncState(this.state,a,o,l),this.pendingDiffs.forEach(A=>{this.state=yd.syncDiff(this.state,A,o,l)}),this.pendingDiffs=[],c()}),this.channel._on(n.diff,{},a=>{const{onJoin:o,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=yd.syncDiff(this.state,a,o,l),c())}),this.onJoin((a,o,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:l})}),this.onLeave((a,o,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,a){const o=this.cloneDeep(e),l=this.transformState(r),c={},A={};return this.map(o,(u,i)=>{l[u]||(A[u]=i)}),this.map(l,(u,i)=>{const d=o[u];if(d){const h=i.map(B=>B.presence_ref),f=d.map(B=>B.presence_ref),w=i.filter(B=>f.indexOf(B.presence_ref)<0),j=d.filter(B=>h.indexOf(B.presence_ref)<0);w.length>0&&(c[u]=w),j.length>0&&(A[u]=j)}else c[u]=i}),this.syncDiff(o,{joins:c,leaves:A},n,a)}static syncDiff(e,r,n,a){const{joins:o,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(o,(c,A)=>{var u;const i=(u=e[c])!==null&&u!==void 0?u:[];if(e[c]=this.cloneDeep(A),i.length>0){const d=e[c].map(f=>f.presence_ref),h=i.filter(f=>d.indexOf(f.presence_ref)<0);e[c].unshift(...h)}n(c,i,A)}),this.map(l,(c,A)=>{let u=e[c];if(!u)return;const i=A.map(d=>d.presence_ref);u=u.filter(d=>i.indexOf(d.presence_ref)<0),e[c]=u,a(c,u,A),u.length===0&&delete e[c]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const a=e[n];return"metas"in a?r[n]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=a,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ew;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ew||(ew={}));var wd;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(wd||(wd={}));var hi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(hi||(hi={}));class Vv{constructor(e,r={config:{}},n){var a,o;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Dn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new r0(this,ao.join,this.params,this.timeout),this.rejoinTimer=new aj(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Dn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Dn.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Dn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Dn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Dn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ao.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new yd(this),this.broadcastEndpointURL=ij(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Dn.closed){const{config:{broadcast:l,presence:c,private:A}}=this.params,u=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&a!==void 0?a:[],i=!!this.bindings[wd.PRESENCE]&&this.bindings[wd.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,d={},h={broadcast:l,presence:Object.assign(Object.assign({},c),{enabled:i}),postgres_changes:u,private:A};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(hi.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(hi.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var w;if(this.socket.setAuth(),f===void 0){e==null||e(hi.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,B=(w=j==null?void 0:j.length)!==null&&w!==void 0?w:0,p=[];for(let x=0;x<B;x++){const C=j[x],{filter:{event:S,schema:E,table:I,filter:H}}=C,M=f&&f[x];if(M&&M.event===S&&M.schema===E&&M.table===I&&M.filter===H)p.push(Object.assign(Object.assign({},C),{id:M.id}));else{this.unsubscribe(),this.state=Dn.errored,e==null||e(hi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(hi.SUBSCRIBED);return}}).receive("error",f=>{this.state=Dn.errored,e==null||e(hi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(hi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Dn.joined&&e===wd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async send(e,r={}){var n,a;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:l}=e,A={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,A,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,c,A;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((A=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||A===void 0)&&A.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Dn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ao.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new r0(this,ao.leave,{},e),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Dn.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const a=new AbortController,o=setTimeout(()=>a.abort(),n),l=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(o),l}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new r0(this,e,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>zN){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var a,o;const l=e.toLocaleLowerCase(),{close:c,error:A,leave:u,join:i}=ao;if(n&&[c,A,u,i].indexOf(l)>=0&&n!==this._joinRef())return;let h=this._onMessage(l,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(f=>{var w,j,B;return((w=f.filter)===null||w===void 0?void 0:w.event)==="*"||((B=(j=f.filter)===null||j===void 0?void 0:j.event)===null||B===void 0?void 0:B.toLocaleLowerCase())===l}).map(f=>f.callback(h,n)):(o=this.bindings[l])===null||o===void 0||o.filter(f=>{var w,j,B,p,x,C;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in f){const S=f.id,E=(w=f.filter)===null||w===void 0?void 0:w.event;return S&&((j=r.ids)===null||j===void 0?void 0:j.includes(S))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((B=r.data)===null||B===void 0?void 0:B.type.toLocaleLowerCase()))}else{const S=(x=(p=f==null?void 0:f.filter)===null||p===void 0?void 0:p.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return S==="*"||S===((C=r==null?void 0:r.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===l}).map(f=>{if(typeof h=="object"&&"ids"in h){const w=h.data,{schema:j,table:B,commit_timestamp:p,type:x,errors:C}=w;h=Object.assign(Object.assign({},{schema:j,table:B,commit_timestamp:p,eventType:x,new:{},old:{},errors:C}),this._getPayloadRecords(w))}f.callback(h,n)})}_isClosed(){return this.state===Dn.closed}_isJoined(){return this.state===Dn.joined}_isJoining(){return this.state===Dn.joining}_isLeaving(){return this.state===Dn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const a=e.toLocaleLowerCase(),o={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&Vv.isEqual(a.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ao.close,{},e)}_onError(e){this._on(ao.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Dn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=qy(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=qy(e.columns,e.old_record)),r}}const n0=()=>{},ch={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},tS=[1e3,2e3,5e3,1e4],rS=1e4,nS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class sS{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ng,this.transport=null,this.heartbeatIntervalMs=ch.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=n0,this.ref=0,this.reconnectTimer=null,this.logger=n0,this.conn=null,this.sendBuffer=[],this.serializer=new WN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...l)=>wA(async()=>{const{default:c}=await Promise.resolve().then(()=>Au);return{default:c}},void 0).then(({default:c})=>c(...l)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...l)=>o(...l)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Sg.websocket}`,this.httpEndpoint=ij(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=MN.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:VN}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case xd.connecting:return nl.Connecting;case xd.open:return nl.Open;case xd.closing:return nl.Closing;default:return nl.Closed}}isConnected(){return this.connectionState()===nl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,a=this.getChannels().find(o=>o.topic===n);if(a)return a;{const o=new Vv(`realtime:${e}`,r,this);return this.channels.push(o),o}}push(e){const{topic:r,event:n,payload:a,ref:o}=e,l=()=>{this.encode(e,c=>{var A;(A=this.conn)===null||A===void 0||A.send(c)})};this.log("push",`${r} ${n} (${o})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close($N,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ch.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:o,ref:l}=r,c=l?`(${l})`:"",A=o.status||"";this.log("receive",`${A} ${n} ${a} ${c}`.trim(),o),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(a,o,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ao.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${e}${n}${a}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([nS],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:GN};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(ao.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new aj(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ch.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,a,o,l,c,A,u,i;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Ng,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:ch.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(c=e==null?void 0:e.heartbeatCallback)!==null&&c!==void 0?c:n0,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(A=e==null?void 0:e.reconnectAfterMs)!==null&&A!==void 0?A:d=>tS[d-1]||rS,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(d,h)=>h(JSON.stringify(d)),this.decode=(i=e==null?void 0:e.decode)!==null&&i!==void 0?i:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class $v extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Qn(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class aS extends $v{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class _g extends $v{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var oS=function(t,e,r,n){function a(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function c(i){try{u(n.next(i))}catch(d){l(d)}}function A(i){try{u(n.throw(i))}catch(d){l(d)}}function u(i){i.done?o(i.value):a(i.value).then(c,A)}u((n=n.apply(t,e||[])).next())})};const Aj=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>wA(async()=>{const{default:n}=await Promise.resolve().then(()=>Au);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},iS=()=>oS(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield wA(()=>Promise.resolve().then(()=>Au),void 0)).Response:Response}),Fg=t=>{if(Array.isArray(t))return t.map(r=>Fg(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=Fg(n)}),e},AS=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var El=function(t,e,r,n){function a(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function c(i){try{u(n.next(i))}catch(d){l(d)}}function A(i){try{u(n.throw(i))}catch(d){l(d)}}function u(i){i.done?o(i.value):a(i.value).then(c,A)}u((n=n.apply(t,e||[])).next())})};const s0=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),lS=(t,e,r)=>El(void 0,void 0,void 0,function*(){const n=yield iS();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(a=>{const o=t.status||500,l=(a==null?void 0:a.statusCode)||o+"";e(new aS(s0(a),o,l))}).catch(a=>{e(new _g(s0(a),a))}):e(new _g(s0(t),t))}),cS=(t,e,r,n)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?a:(AS(n)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(n)):a.body=n,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),r))};function sf(t,e,r,n,a,o){return El(this,void 0,void 0,function*(){return new Promise((l,c)=>{t(r,cS(e,n,a,o)).then(A=>{if(!A.ok)throw A;return n!=null&&n.noResolveJson?A:A.json()}).then(A=>l(A)).catch(A=>lS(A,c,n))})})}function im(t,e,r,n){return El(this,void 0,void 0,function*(){return sf(t,"GET",e,r,n)})}function Lo(t,e,r,n,a){return El(this,void 0,void 0,function*(){return sf(t,"POST",e,n,a,r)})}function Ug(t,e,r,n,a){return El(this,void 0,void 0,function*(){return sf(t,"PUT",e,n,a,r)})}function uS(t,e,r,n){return El(this,void 0,void 0,function*(){return sf(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function lj(t,e,r,n,a){return El(this,void 0,void 0,function*(){return sf(t,"DELETE",e,n,a,r)})}var dS=function(t,e,r,n){function a(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function c(i){try{u(n.next(i))}catch(d){l(d)}}function A(i){try{u(n.throw(i))}catch(d){l(d)}}function u(i){i.done?o(i.value):a(i.value).then(c,A)}u((n=n.apply(t,e||[])).next())})};class fS{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return dS(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Qn(e))return{data:null,error:e};throw e}})}}var hS=function(t,e,r,n){function a(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function c(i){try{u(n.next(i))}catch(d){l(d)}}function A(i){try{u(n.throw(i))}catch(d){l(d)}}function u(i){i.done?o(i.value):a(i.value).then(c,A)}u((n=n.apply(t,e||[])).next())})},cj;class mS{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[cj]="BlobDownloadBuilder",this.promise=null}asStream(){return new fS(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return hS(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Qn(e))return{data:null,error:e};throw e}})}}cj=Symbol.toStringTag;var Xs=function(t,e,r,n){function a(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function c(i){try{u(n.next(i))}catch(d){l(d)}}function A(i){try{u(n.throw(i))}catch(d){l(d)}}function u(i){i.done?o(i.value):a(i.value).then(c,A)}u((n=n.apply(t,e||[])).next())})};const pS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},tw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class gS{constructor(e,r={},n,a){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=Aj(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,a){return Xs(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},tw),a);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const A=l.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),A&&o.append("metadata",this.encodeMetadata(A)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",l.cacheControl),A&&o.append("metadata",this.encodeMetadata(A))):(o=n,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,A&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(A)))),a!=null&&a.headers&&(c=Object.assign(Object.assign({},c),a.headers));const u=this._removeEmptyFolders(r),i=this._getFinalPath(u),d=yield(e=="PUT"?Ug:Lo)(this.fetch,`${this.url}/object/${i}`,o,Object.assign({headers:c},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qn(o))return{data:null,error:o};throw o}})}upload(e,r,n){return Xs(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,a){return Xs(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),l=this._getFinalPath(o),c=new URL(this.url+`/object/upload/sign/${l}`);c.searchParams.set("token",r);try{let A;const u=Object.assign({upsert:tw.upsert},a),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(A=new FormData,A.append("cacheControl",u.cacheControl),A.append("",n)):typeof FormData<"u"&&n instanceof FormData?(A=n,A.append("cacheControl",u.cacheControl)):(A=n,i["cache-control"]=`max-age=${u.cacheControl}`,i["content-type"]=u.contentType);const d=yield Ug(this.fetch,c.toString(),A,{headers:i});return{data:{path:o,fullPath:d.Key},error:null}}catch(A){if(this.shouldThrowOnError)throw A;if(Qn(A))return{data:null,error:A};throw A}})}createSignedUploadUrl(e,r){return Xs(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const o=yield Lo(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),l=new URL(this.url+o.url),c=l.searchParams.get("token");if(!c)throw new $v("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:c},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qn(n))return{data:null,error:n};throw n}})}update(e,r,n){return Xs(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Xs(this,void 0,void 0,function*(){try{return{data:yield Lo(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qn(a))return{data:null,error:a};throw a}})}copy(e,r,n){return Xs(this,void 0,void 0,function*(){try{return{data:{path:(yield Lo(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qn(a))return{data:null,error:a};throw a}})}createSignedUrl(e,r,n){return Xs(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),o=yield Lo(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qn(a))return{data:null,error:a};throw a}})}createSignedUrls(e,r,n){return Xs(this,void 0,void 0,function*(){try{const a=yield Lo(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qn(a))return{data:null,error:a};throw a}})}download(e,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=o?`?${o}`:"",c=this._getFinalPath(e),A=()=>im(this.fetch,`${this.url}/${a}/${c}${l}`,{headers:this.headers,noResolveJson:!0});return new mS(A,this.shouldThrowOnError)}info(e){return Xs(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield im(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Fg(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qn(n))return{data:null,error:n};throw n}})}exists(e){return Xs(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield uS(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qn(n)&&n instanceof _g){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),a=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&a.push(o);const c=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",A=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});A!==""&&a.push(A);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${n}${u}`)}}}remove(e){return Xs(this,void 0,void 0,function*(){try{return{data:yield lj(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qn(r))return{data:null,error:r};throw r}})}list(e,r,n){return Xs(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},pS),r),{prefix:e||""});return{data:yield Lo(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qn(a))return{data:null,error:a};throw a}})}listV2(e,r){return Xs(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Lo(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qn(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const vS="2.75.1",xS={"X-Client-Info":`storage-js/${vS}`};var gc=function(t,e,r,n){function a(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function c(i){try{u(n.next(i))}catch(d){l(d)}}function A(i){try{u(n.throw(i))}catch(d){l(d)}}function u(i){i.done?o(i.value):a(i.value).then(c,A)}u((n=n.apply(t,e||[])).next())})};class yS{constructor(e,r={},n,a){this.shouldThrowOnError=!1;const o=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xS),r),this.fetch=Aj(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return gc(this,void 0,void 0,function*(){try{return{data:yield im(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Qn(e))return{data:null,error:e};throw e}})}getBucket(e){return gc(this,void 0,void 0,function*(){try{return{data:yield im(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qn(r))return{data:null,error:r};throw r}})}createBucket(e){return gc(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Lo(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qn(a))return{data:null,error:a};throw a}})}updateBucket(e,r){return gc(this,void 0,void 0,function*(){try{return{data:yield Ug(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qn(n))return{data:null,error:n};throw n}})}emptyBucket(e){return gc(this,void 0,void 0,function*(){try{return{data:yield Lo(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qn(r))return{data:null,error:r};throw r}})}deleteBucket(e){return gc(this,void 0,void 0,function*(){try{return{data:yield lj(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qn(r))return{data:null,error:r};throw r}})}}class wS extends yS{constructor(e,r={},n,a){super(e,r,n,a)}from(e){return new gS(this.url,this.headers,e,this.fetch)}}const bS="2.75.1";let ld="";typeof Deno<"u"?ld="deno":typeof document<"u"?ld="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ld="react-native":ld="node";const jS={"X-Client-Info":`supabase-js-${ld}/${bS}`},BS={headers:jS},CS={schema:"public"},NS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},SS={};var ES=function(t,e,r,n){function a(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function c(i){try{u(n.next(i))}catch(d){l(d)}}function A(i){try{u(n.throw(i))}catch(d){l(d)}}function u(i){i.done?o(i.value):a(i.value).then(c,A)}u((n=n.apply(t,e||[])).next())})};const _S=t=>{let e;return t?e=t:typeof fetch>"u"?e=Wb:e=fetch,(...r)=>e(...r)},FS=()=>typeof Headers>"u"?Jb:Headers,US=(t,e,r)=>{const n=_S(r),a=FS();return(o,l)=>ES(void 0,void 0,void 0,function*(){var c;const A=(c=yield e())!==null&&c!==void 0?c:t;let u=new a(l==null?void 0:l.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${A}`),n(o,Object.assign(Object.assign({},l),{headers:u}))})};var QS=function(t,e,r,n){function a(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function c(i){try{u(n.next(i))}catch(d){l(d)}}function A(i){try{u(n.throw(i))}catch(d){l(d)}}function u(i){i.done?o(i.value):a(i.value).then(c,A)}u((n=n.apply(t,e||[])).next())})};function IS(t){return t.endsWith("/")?t:t+"/"}function LS(t,e){var r,n;const{db:a,auth:o,realtime:l,global:c}=t,{db:A,auth:u,realtime:i,global:d}=e,h={db:Object.assign(Object.assign({},A),a),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},i),l),storage:{},global:Object.assign(Object.assign(Object.assign({},d),c),{headers:Object.assign(Object.assign({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=c==null?void 0:c.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>QS(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function kS(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(IS(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const uj="2.75.1",Nc=30*1e3,Qg=3,a0=Qg*Nc,TS="http://localhost:9999",PS="supabase.auth.token",OS={"X-Client-Info":`gotrue-js/${uj}`},Ig="X-Supabase-Api-Version",dj={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},DS=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,RS=10*60*1e3;class $d extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Rt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class HS extends $d{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function MS(t){return Rt(t)&&t.name==="AuthApiError"}class sl extends $d{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class _A extends $d{constructor(e,r,n,a){super(e,n,a),this.name=r,this.status=n}}class rA extends _A{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function KS(t){return Rt(t)&&t.name==="AuthSessionMissingError"}class vc extends _A{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class uh extends _A{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class dh extends _A{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function GS(t){return Rt(t)&&t.name==="AuthImplicitGrantRedirectError"}class rw extends _A{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lg extends _A{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function o0(t){return Rt(t)&&t.name==="AuthRetryableFetchError"}class nw extends _A{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class kg extends _A{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Am="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),sw=` 	
\r=`.split(""),VS=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<sw.length;e+=1)t[sw[e].charCodeAt(0)]=-2;for(let e=0;e<Am.length;e+=1)t[Am[e].charCodeAt(0)]=e;return t})();function aw(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Am[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Am[n]),e.queuedBits-=6}}function fj(t,e,r){const n=VS[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function ow(t){const e=[],r=l=>{e.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=l=>{WS(l,n,r)};for(let l=0;l<t.length;l+=1)fj(t.charCodeAt(l),a,o);return e.join("")}function $S(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function zS(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}$S(n,e)}}function WS(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Wc(t){const e=[],r={queue:0,queuedBits:0},n=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)fj(t.charCodeAt(a),r,n);return new Uint8Array(e)}function JS(t){const e=[];return zS(t,r=>e.push(r)),new Uint8Array(e)}function Al(t){const e=[],r={queue:0,queuedBits:0},n=a=>{e.push(a)};return t.forEach(a=>aw(a,r,n)),aw(null,r,n),e.join("")}function XS(t){return Math.round(Date.now()/1e3)+t}function YS(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const va=()=>typeof window<"u"&&typeof document<"u",YA={tested:!1,writable:!1},hj=()=>{if(!va())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(YA.tested)return YA.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),YA.tested=!0,YA.writable=!0}catch{YA.tested=!0,YA.writable=!1}return YA.writable};function qS(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return r.searchParams.forEach((n,a)=>{e[a]=n}),e}const mj=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>wA(async()=>{const{default:n}=await Promise.resolve().then(()=>Au);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},ZS=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Sc=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},qA=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Zi=async(t,e)=>{await t.removeItem(e)};class Lm{constructor(){this.promise=new Lm.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Lm.promiseConstructor=Promise;function i0(t){const e=t.split(".");if(e.length!==3)throw new kg("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!DS.test(e[n]))throw new kg("JWT not in base64url format");return{header:JSON.parse(ow(e[0])),payload:JSON.parse(ow(e[1])),signature:Wc(e[2]),raw:{header:e[0],payload:e[1]}}}async function e3(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function t3(t,e){return new Promise((n,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await t(o);if(!e(o,null,l)){n(l);return}}catch(l){if(!e(o,l)){a(l);return}}})()})}function r3(t){return("0"+t.toString(16)).substr(-2)}function n3(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let o=0;o<56;o++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(e),Array.from(e,r3).join("")}async function s3(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function a3(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await s3(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xc(t,e,r=!1){const n=n3();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Sc(t,`${e}-code-verifier`,a);const o=await a3(n);return[o,n===o?"plain":"s256"]}const o3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function i3(t){const e=t.headers.get(Ig);if(!e||!e.match(o3))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function A3(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function l3(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const c3=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yc(t){if(!c3.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function A0(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function iw(t){return JSON.parse(JSON.stringify(t))}var u3=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r};const tl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),d3=[502,503,504];async function Aw(t){var e;if(!ZS(t))throw new Lg(tl(t),0);if(d3.includes(t.status))throw new Lg(tl(t),t.status);let r;try{r=await t.json()}catch(o){throw new sl(tl(o),o)}let n;const a=i3(t);if(a&&a.getTime()>=dj["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new nw(tl(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new rA}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new nw(tl(r),t.status,r.weak_password.reasons);throw new HS(tl(r),t.status||500,n)}const f3=(t,e,r,n)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Yt(t,e,r,n){var a;const o=Object.assign({},n==null?void 0:n.headers);o[Ig]||(o[Ig]=dj["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const l=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",A=await h3(t,e,r+c,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(A):{data:Object.assign({},A),error:null}}async function h3(t,e,r,n,a,o){const l=f3(e,n,a,o);let c;try{c=await t(r,Object.assign({},l))}catch(A){throw console.error(A),new Lg(tl(A),0)}if(c.ok||await Aw(c),n!=null&&n.noResolveJson)return c;try{return await c.json()}catch(A){await Aw(A)}}function ro(t){var e;let r=null;g3(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=XS(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function lw(t){const e=ro(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function iA(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function m3(t){return{data:t,error:null}}function p3(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:a,verification_type:o}=t,l=u3(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:r,hashed_token:n,redirect_to:a,verification_type:o},A=Object.assign({},l);return{data:{properties:c,user:A},error:null}}function cw(t){return t}function g3(t){return t.access_token&&t.refresh_token&&t.expires_in}const l0=["global","local","others"];var v3=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r};class x3{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=mj(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=l0[0]){if(l0.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${l0.join(", ")}`);try{return await Yt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Rt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await Yt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:iA})}catch(n){if(Rt(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=v3(e,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Yt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:p3,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Rt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Yt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:iA})}catch(r){if(Rt(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,a,o,l,c,A;try{const u={nextPage:null,lastPage:0,total:0},i=await Yt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:cw});if(i.error)throw i.error;const d=await i.json(),h=(l=i.headers.get("x-total-count"))!==null&&l!==void 0?l:0,f=(A=(c=i.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&A!==void 0?A:[];return f.length>0&&(f.forEach(w=>{const j=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),B=JSON.parse(w.split(";")[1].split("=")[1]);u[`${B}Page`]=j}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(Rt(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){yc(e);try{return await Yt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:iA})}catch(r){if(Rt(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){yc(e);try{return await Yt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:iA})}catch(n){if(Rt(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){yc(e);try{return await Yt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:iA})}catch(n){if(Rt(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){yc(e.userId);try{const{data:r,error:n}=await Yt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(Rt(r))return{data:null,error:r};throw r}}async _deleteFactor(e){yc(e.userId),yc(e.id);try{return{data:await Yt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Rt(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,a,o,l,c,A;try{const u={nextPage:null,lastPage:0,total:0},i=await Yt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:cw});if(i.error)throw i.error;const d=await i.json(),h=(l=i.headers.get("x-total-count"))!==null&&l!==void 0?l:0,f=(A=(c=i.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&A!==void 0?A:[];return f.length>0&&(f.forEach(w=>{const j=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),B=JSON.parse(w.split(";")[1].split("=")[1]);u[`${B}Page`]=j}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(Rt(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await Yt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Rt(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await Yt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Rt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Yt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Rt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await Yt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Rt(r))return{data:null,error:r};throw r}}}function uw(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const wc={debug:!!(globalThis&&hj()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pj extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class y3 extends pj{}async function w3(t,e,r){wc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),wc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){wc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await r()}finally{wc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw wc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new y3(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(wc.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function b3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function gj(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function j3(t){return parseInt(t,16)}function B3(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function C3(t){var e;const{chainId:r,domain:n,expirationTime:a,issuedAt:o=new Date,nonce:l,notBefore:c,requestId:A,resources:u,scheme:i,uri:d,version:h}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const f=gj(t.address),w=i?`${i}://${n}`:n,j=t.statement?`${t.statement}
`:"",B=`${w} wants you to sign in with your Ethereum account:
${f}

${j}`;let p=`URI: ${d}
Version: ${h}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${o.toISOString()}`;if(a&&(p+=`
Expiration Time: ${a.toISOString()}`),c&&(p+=`
Not Before: ${c.toISOString()}`),A&&(p+=`
Request ID: ${A}`),u){let x=`
Resources:`;for(const C of u){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);x+=`
- ${C}`}p+=x}return`${B}
${p}`}class Un extends Error{constructor({message:e,code:r,cause:n,name:a}){var o;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(o=a??(n instanceof Error?n.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class lm extends Un{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function N3({error:t,options:e}){var r,n,a;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Un({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Un({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Un({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Un({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Un({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Un({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new Un({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Un({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(xj(l)){if(o.rp.id!==l)return new Un({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Un({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Un({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Un({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Un({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function S3({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Un({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Un({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(xj(n)){if(r.rpId!==n)return new Un({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Un({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Un({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Un({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}var vj=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r};class E3{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const _3=new E3;function F3(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,a=vj(t,["challenge","user","excludeCredentials"]),o=Wc(e).buffer,l=Object.assign(Object.assign({},r),{id:Wc(r.id).buffer}),c=Object.assign(Object.assign({},a),{challenge:o,user:l});if(n&&n.length>0){c.excludeCredentials=new Array(n.length);for(let A=0;A<n.length;A++){const u=n[A];c.excludeCredentials[A]=Object.assign(Object.assign({},u),{id:Wc(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return c}function U3(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=vj(t,["challenge","allowCredentials"]),a=Wc(e).buffer,o=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];o.allowCredentials[l]=Object.assign(Object.assign({},c),{id:Wc(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function Q3(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Al(new Uint8Array(t.response.attestationObject)),clientDataJSON:Al(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function I3(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Al(new Uint8Array(a.authenticatorData)),clientDataJSON:Al(new Uint8Array(a.clientDataJSON)),signature:Al(new Uint8Array(a.signature)),userHandle:a.userHandle?Al(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function xj(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function dw(){var t,e;return!!(va()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function L3(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new lm("Browser returned unexpected credential type",e)}:{data:null,error:new lm("Empty credential response",e)}}catch(e){return{data:null,error:N3({error:e,options:t})}}}async function k3(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new lm("Browser returned unexpected credential type",e)}:{data:null,error:new lm("Empty credential response",e)}}catch(e){return{data:null,error:S3({error:e,options:t})}}}const T3={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},P3={userVerification:"preferred",hints:["security-key"]};function cm(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of t)if(a)for(const o in a){const l=a[o];if(l!==void 0)if(Array.isArray(l))n[o]=l;else if(r(l))n[o]=l;else if(e(l)){const c=n[o];e(c)?n[o]=cm(c,l):n[o]=cm(l)}else n[o]=l}return n}function O3(t,e){return cm(T3,t,e||{})}function D3(t,e){return cm(P3,t,e||{})}class R3{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:a},o){try{const{data:l,error:c}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!l)return{data:null,error:c};const A=a??_3.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:u}=l.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(l.webauthn.type){case"create":{const u=O3(l.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:i,error:d}=await L3({publicKey:u,signal:A});return i?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:i}},error:null}:{data:null,error:d}}case"request":{const u=D3(l.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:i,error:d}=await k3(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:u,signal:A}));return i?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:i}},error:null}:{data:null,error:d}}}}catch(l){return Rt(l)?{data:null,error:l}:{data:null,error:new sl("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}},o){if(!r)return{data:null,error:new $d("rpId is required for WebAuthn authentication")};try{if(!dw())return{data:null,error:new sl("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:o});if(!l)return{data:null,error:c};const{webauthn:A}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:A.type,rpId:r,rpOrigins:n,credential_response:A.credential_response}})}catch(l){return Rt(l)?{data:null,error:l}:{data:null,error:new sl("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a},o){if(!r)return{data:null,error:new $d("rpId is required for WebAuthn registration")};try{if(!dw())return{data:null,error:new sl("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(i=>{var d;return(d=i.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===e&&h.status!=="unverified")}).then(i=>i?this.client.mfa.unenroll({factorId:i==null?void 0:i.id}):void 0),{data:null,error:c};const{data:A,error:u}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:o});return A?this._verify({factorId:l.id,challengeId:A.challengeId,webauthn:{rpId:r,rpOrigins:n,type:A.webauthn.type,credential_response:A.webauthn.credential_response}}):{data:null,error:u}}catch(l){return Rt(l)?{data:null,error:l}:{data:null,error:new sl("Unexpected error in register",l)}}}}b3();const H3={url:TS,storageKey:PS,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:OS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function fw(t,e,r){return await r()}const bc={};class zd{get jwks(){var e,r;return(r=(e=bc[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){bc[this.storageKey]=Object.assign(Object.assign({},bc[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=bc[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){bc[this.storageKey]=Object.assign(Object.assign({},bc[this.storageKey]),{cachedAt:e})}constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=zd.nextInstanceID,zd.nextInstanceID+=1,this.instanceID>0&&va()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},H3),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new x3({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=mj(a.fetch),this.lock=a.lock||fw,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:va()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=w3:this.lock=fw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new R3(this)},this.persistSession?(a.storage?this.storage=a.storage:hj()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=uw(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=uw(this.memoryStorage)),va()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${uj}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=qS(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),va()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),GS(o)){const A=(e=o.details)===null||e===void 0?void 0:e.code;if(A==="identity_already_exists"||A==="identity_not_found"||A==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:c}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Rt(r)?{error:r}:{error:new sl("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,a;try{const o=await Yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:ro}),{data:l,error:c}=o;if(c||!l)return{data:{user:null,session:null},error:c};const A=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",A)),{data:{user:u,session:A},error:null}}catch(o){if(Rt(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var r,n,a;try{let o;if("email"in e){const{email:i,password:d,options:h}=e;let f=null,w=null;this.flowType==="pkce"&&([f,w]=await xc(this.storage,this.storageKey)),o=await Yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:i,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:w},xform:ro})}else if("phone"in e){const{phone:i,password:d,options:h}=e;o=await Yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:i,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ro})}else throw new uh("You must provide either an email or phone number and a password");const{data:l,error:c}=o;if(c||!l)return{data:{user:null,session:null},error:c};const A=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",A)),{data:{user:u,session:A},error:null}}catch(o){if(Rt(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let r;if("email"in e){const{email:o,password:l,options:c}=e;r=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:lw})}else if("phone"in e){const{phone:o,password:l,options:c}=e;r=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:lw})}else throw new uh("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new vc}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(Rt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,a,o,l,c,A,u,i,d,h;let f,w;if("message"in e)f=e.message,w=e.signature;else{const{chain:j,wallet:B,statement:p,options:x}=e;let C;if(va())if(typeof B=="object")C=B;else{const D=window;if("ethereum"in D&&typeof D.ethereum=="object"&&"request"in D.ethereum&&typeof D.ethereum.request=="function")C=D.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof B!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=B}const S=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href),E=await C.request({method:"eth_requestAccounts"}).then(D=>D).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=gj(E[0]);let H=(n=x==null?void 0:x.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!H){const D=await C.request({method:"eth_chainId"});H=j3(D)}const M={domain:S.host,address:I,statement:p,uri:S.href,version:"1",chainId:H,nonce:(a=x==null?void 0:x.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(l=(o=x==null?void 0:x.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(A=x==null?void 0:x.signInWithEthereum)===null||A===void 0?void 0:A.notBefore,requestId:(u=x==null?void 0:x.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.resources};f=C3(M),w=await C.request({method:"personal_sign",params:[B3(f),I]})}try{const{data:j,error:B}=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:w},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:ro});if(B)throw B;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new vc}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:B})}catch(j){if(Rt(j))return{data:{user:null,session:null},error:j};throw j}}async signInWithSolana(e){var r,n,a,o,l,c,A,u,i,d,h,f;let w,j;if("message"in e)w=e.message,j=e.signature;else{const{chain:B,wallet:p,statement:x,options:C}=e;let S;if(va())if(typeof p=="object")S=p;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))S=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=p}const E=new URL((r=C==null?void 0:C.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in S&&S.signIn){const I=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),x?{statement:x}:null));let H;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")H=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)H=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)w=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),j=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${E.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(a=(n=C==null?void 0:C.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=C==null?void 0:C.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((l=C==null?void 0:C.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((c=C==null?void 0:C.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((A=C==null?void 0:C.signInWithSolana)===null||A===void 0)&&A.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((u=C==null?void 0:C.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((d=(i=C==null?void 0:C.signInWithSolana)===null||i===void 0?void 0:i.resources)===null||d===void 0)&&d.length?["Resources",...C.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);const I=await S.signMessage(new TextEncoder().encode(w),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=I}}try{const{data:B,error:p}=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Al(j)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ro});if(p)throw p;return!B||!B.session||!B.user?{data:{user:null,session:null},error:new vc}:(B.session&&(await this._saveSession(B.session),await this._notifyAllSubscribers("SIGNED_IN",B.session)),{data:Object.assign({},B),error:p})}catch(B){if(Rt(B))return{data:{user:null,session:null},error:B};throw B}}async _exchangeCodeForSession(e){const r=await qA(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:o,error:l}=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:ro});if(await Zi(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new vc}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:l})}catch(o){if(Rt(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:r,provider:n,token:a,access_token:o,nonce:l}=e,c=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ro}),{data:A,error:u}=c;return u?{data:{user:null,session:null},error:u}:!A||!A.session||!A.user?{data:{user:null,session:null},error:new vc}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:A,error:u})}catch(r){if(Rt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,a,o,l;try{if("email"in e){const{email:c,options:A}=e;let u=null,i=null;this.flowType==="pkce"&&([u,i]=await xc(this.storage,this.storageKey));const{error:d}=await Yt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=A==null?void 0:A.data)!==null&&r!==void 0?r:{},create_user:(n=A==null?void 0:A.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},code_challenge:u,code_challenge_method:i},redirectTo:A==null?void 0:A.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:c,options:A}=e,{data:u,error:i}=await Yt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(a=A==null?void 0:A.data)!==null&&a!==void 0?a:{},create_user:(o=A==null?void 0:A.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},channel:(l=A==null?void 0:A.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:i}}throw new uh("You must provide either an email or phone number.")}catch(c){if(Rt(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var r,n;try{let a,o;"options"in e&&(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:c}=await Yt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:ro});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const A=l.session,u=l.user;return A!=null&&A.access_token&&(await this._saveSession(A),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",A)),{data:{user:u,session:A},error:null}}catch(a){if(Rt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var r,n,a;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=await xc(this.storage,this.storageKey)),await Yt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:m3})}catch(o){if(Rt(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new rA;const{error:a}=await Yt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(Rt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:a,options:o}=e,{error:l}=await Yt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:n,type:a,options:o}=e,{data:l,error:c}=await Yt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:c}}throw new uh("You must provide either an email or phone number and a type")}catch(r){if(Rt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await qA(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<a0:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const l=await qA(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=A0()}if(this.storage.isServer&&e.user){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(A,u,i)=>(!l&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(A,u,i))})}return{data:{session:e},error:null}}const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Yt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:iA}):await this._useSession(async r=>{var n,a,o;const{data:l,error:c}=r;if(c)throw c;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rA}:await Yt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:iA})})}catch(r){if(Rt(r))return KS(r)&&(await this._removeSession(),await Zi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:a,error:o}=n;if(o)throw o;if(!a.session)throw new rA;const l=a.session;let c=null,A=null;this.flowType==="pkce"&&e.email!=null&&([c,A]=await xc(this.storage,this.storageKey));const{data:u,error:i}=await Yt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:A}),jwt:l.access_token,xform:iA});if(i)throw i;return l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(Rt(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new rA;const r=Date.now()/1e3;let n=r,a=!0,o=null;const{payload:l}=i0(e.access_token);if(l.exp&&(n=l.exp,a=n<=r),a){const{data:c,error:A}=await this._callRefreshToken(e.refresh_token);if(A)return{data:{user:null,session:null},error:A};if(!c)return{data:{user:null,session:null},error:null};o=c}else{const{data:c,error:A}=await this._getUser(e.access_token);if(A)throw A;o={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(Rt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:l,error:c}=r;if(c)throw c;e=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new rA;const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Rt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!va())throw new dh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new dh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new rw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new dh("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new rw("No code detected.");const{data:x,error:C}=await this._exchangeCodeForSession(e.code);if(C)throw C;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:o,refresh_token:l,expires_in:c,expires_at:A,token_type:u}=e;if(!o||!c||!l||!u)throw new dh("No session defined in URL");const i=Math.round(Date.now()/1e3),d=parseInt(c);let h=i+d;A&&(h=parseInt(A));const f=h-i;f*1e3<=Nc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const w=h-d;i-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,h,i):i-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,h,i);const{data:j,error:B}=await this._getUser(o);if(B)throw B;const p={provider_token:n,provider_refresh_token:a,access_token:o,expires_in:d,expires_at:h,refresh_token:l,token_type:u,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(n){if(Rt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await qA(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:o}=r;if(o)return{error:o};const l=(n=a.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:c}=await this.admin.signOut(l,e);if(c&&!(MS(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await Zi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=YS(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,a;try{const{data:{session:o},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await xc(this.storage,this.storageKey,!0));try{return await Yt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(Rt(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(Rt(r))return{data:null,error:r};throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:a}=await this._useSession(async o=>{var l,c,A,u,i;const{data:d,error:h}=o;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(A=e.options)===null||A===void 0?void 0:A.queryParams,skipBrowserRedirect:!0});return await Yt(this.fetch,"GET",f,{headers:this.headers,jwt:(i=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&i!==void 0?i:void 0})});if(a)throw a;return va()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Rt(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:o}}=r;if(a)throw a;const{options:l,provider:c,token:A,access_token:u,nonce:i}=e,d=await Yt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=o==null?void 0:o.access_token)!==null&&n!==void 0?n:void 0,body:{provider:c,id_token:A,access_token:u,nonce:i,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ro}),{data:h,error:f}=d;return f?{data:{user:null,session:null},error:f}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new vc}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),{data:h,error:f})}catch(a){if(Rt(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,a;const{data:o,error:l}=r;if(l)throw l;return await Yt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Rt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await t3(async a=>(a>0&&await e3(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Yt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ro})),(a,o)=>{const l=200*Math.pow(2,a);return o&&o0(o)&&Date.now()+l-n<Nc})}catch(n){if(this._debug(r,"error",n),Rt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),va()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await qA(this.storage,this.storageKey);if(a&&this.userStorage){let l=await qA(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await Sc(this.userStorage,this.storageKey+"-user",l)),a.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:A0()}else if(a&&!a.user&&!a.user){const l=await qA(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(a.user=l.user,await Zi(this.storage,this.storageKey+"-user"),await Sc(this.storage,this.storageKey,a)):a.user=A0()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const o=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<a0;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${a0}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),o0(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:c}=await this._getUser(a.access_token);!c&&(l!=null&&l.user)?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new rA;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Lm;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new rA;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const c={data:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(a,"error",o),Rt(o)){const l={data:null,error:o};return o0(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,r,n=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,r)}catch(A){o.push(A)}});if(await Promise.all(l),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Sc(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const o=iw(a);await Sc(this.storage,this.storageKey,o)}else{const a=iw(r);await Sc(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Zi(this.storage,this.storageKey),await Zi(this.storage,this.storageKey+"-code-verifier"),await Zi(this.storage,this.storageKey+"-user"),this.userStorage&&await Zi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&va()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Nc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-e)/Nc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Nc}ms, refresh threshold is ${Qg} ticks`),a<=Qg&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof pj)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!va()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,l]=await xc(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(c.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);a.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:a,error:o}=r;return o?{data:null,error:o}:await Yt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Rt(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,a;const{data:o,error:l}=r;if(l)return{data:null,error:l};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:A,error:u}=await Yt(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&A.type==="totp"&&(!((a=A==null?void 0:A.totp)===null||a===void 0)&&a.qr_code)&&(A.totp.qr_code=`data:image/svg+xml;utf-8,${A.totp.qr_code}`),{data:A,error:null})})}catch(r){if(Rt(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Q3(e.webauthn.credential_response):I3(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:A}=await Yt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return A?{data:null,error:A}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:A})})}catch(r){if(Rt(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:o}=r;if(o)return{data:null,error:o};const l=await Yt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:c}=l;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:F3(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:U3(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Rt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:a},error:o}=e;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=i0(a.access_token);let c=null;l.aal&&(c=l.aal);let A=c;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(A="aal2");const i=l.amr||[];return{data:{currentLevel:c,nextLevel:A,currentAuthenticationMethods:i},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(c=>c.kid===e);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(c=>c.kid===e),n&&this.jwks_cached_at+RS>a)return n;const{data:o,error:l}=await Yt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,n=o.keys.find(c=>c.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:f,error:w}=await this.getSession();if(w||!f.session)return{data:null,error:w};n=f.session.access_token}const{header:a,payload:o,signature:l,raw:{header:c,payload:A}}=i0(n);r!=null&&r.allowExpired||A3(o.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:o,header:a,signature:l},error:null}}const i=l3(a.alg),d=await crypto.subtle.importKey("jwk",u,i,!0,["verify"]);if(!await crypto.subtle.verify(i,d,l,JS(`${c}.${A}`)))throw new kg("Invalid JWT signature");return{data:{claims:o,header:a,signature:l},error:null}}catch(n){if(Rt(n))return{data:null,error:n};throw n}}}zd.nextInstanceID=0;const M3=zd;class K3 extends M3{constructor(e){super(e)}}var G3=function(t,e,r,n){function a(o){return o instanceof r?o:new r(function(l){l(o)})}return new(r||(r=Promise))(function(o,l){function c(i){try{u(n.next(i))}catch(d){l(d)}}function A(i){try{u(n.throw(i))}catch(d){l(d)}}function u(i){i.done?o(i.value):a(i.value).then(c,A)}u((n=n.apply(t,e||[])).next())})};class V3{constructor(e,r,n){var a,o,l;this.supabaseUrl=e,this.supabaseKey=r;const c=kS(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const A=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:CS,realtime:SS,auth:Object.assign(Object.assign({},NS),{storageKey:A}),global:BS},i=LS(n??{},u);this.storageKey=(a=i.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=i.global.headers)!==null&&o!==void 0?o:{},i.accessToken?(this.accessToken=i.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=i.auth)!==null&&l!==void 0?l:{},this.headers,i.global.fetch),this.fetch=US(r,this._getAccessToken.bind(this),i.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},i.realtime)),this.rest=new HN(new URL("rest/v1",c).href,{headers:this.headers,schema:i.db.schema,fetch:this.fetch}),this.storage=new wS(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),i.accessToken||this._listenForAuthEvents()}get functions(){return new xN(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return G3(this,void 0,void 0,function*(){var e,r;if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:o,storageKey:l,flowType:c,lock:A,debug:u},i,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new K3({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),i),storageKey:l,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:o,flowType:c,lock:A,debug:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new sS(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $3=(t,e,r)=>new V3(t,e,r);function z3(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}z3()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const W3="https://hsftnenijlcpqbqzpyhk.supabase.co",J3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhzZnRuZW5pamxjcHFicXpweWhrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA4ODUxMzMsImV4cCI6MjA3NjQ2MTEzM30.gOwmsa6N9p0d36XXLCsDv2bd8s5nkDINfsDEmsqVDXo",ge=$3(W3,J3),yj=Y.createContext(void 0);function X3({children:t}){const[e,r]=Y.useState(null),[n,a]=Y.useState(!0);Y.useEffect(()=>{ge.auth.getSession().then(({data:{session:u}})=>{r((u==null?void 0:u.user)??null),a(!1)});const{data:{subscription:A}}=ge.auth.onAuthStateChange((u,i)=>{r((i==null?void 0:i.user)??null)});return()=>A.unsubscribe()},[]);const o=async(A,u)=>{const{error:i}=await ge.auth.signInWithPassword({email:A,password:u});return{error:i?new Error(i.message):null}},l=async(A,u)=>{const{error:i,data:d}=await ge.auth.signUp({email:A,password:u});return{error:i?new Error(i.message):null,data:d}},c=async()=>{await ge.auth.signOut(),r(null)};return s.jsx(yj.Provider,{value:{user:e,loading:n,signIn:o,signUp:l,signOut:c},children:t})}function Jr(){const t=Y.useContext(yj);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const wj=Y.createContext(void 0);function Y3({children:t}){const{user:e}=Jr(),[r,n]=Y.useState(null),[a,o]=Y.useState([]),[l,c]=Y.useState(null),[A,u]=Y.useState(null),[i,d]=Y.useState(!1),[h,f]=Y.useState(!0),w=async()=>{try{if(!e){o([]),n(null),c(null),u(null),f(!1);return}const{data:x}=await ge.from("users").select("has_all_access").eq("id",e.id).maybeSingle(),C=(x==null?void 0:x.has_all_access)||!1;d(C);let S=[];if(C){const{data:E,error:I}=await ge.from("companies").select("*").eq("is_active",!0).order("name");console.log("Loading companies for all access user:",{allCompanies:E,companiesError:I,userHasAllAccess:C,allCompaniesType:typeof E,allCompaniesIsArray:Array.isArray(E),allCompaniesLength:E==null?void 0:E.length}),I&&console.error("Error loading companies:",I),E&&Array.isArray(E)&&(S=E)}else{const{data:E}=await ge.from("user_company_roles").select("company_id, companies(*)").eq("user_id",e.id).eq("is_active",!0);E&&(S=E.map(I=>I.companies).filter(Boolean))}if(console.log("Final company list being set:",S),o(S),S.length>0){const E=localStorage.getItem("currentCompanyId"),I=E&&S.find(H=>H.id===E)||S[0];I&&await j(I,C)}}catch(x){console.error("Error loading companies:",x)}finally{f(!1)}},j=async(x,C=!1)=>{if(!e)return;if(n(x),localStorage.setItem("currentCompanyId",x.id),C){u(Z3());const{data:E}=await ge.from("user_company_roles").select("*, roles(*)").eq("user_id",e.id).eq("company_id",x.id).eq("is_active",!0).maybeSingle();c(E||null);return}const{data:S}=await ge.from("user_company_roles").select("*, roles(*)").eq("user_id",e.id).eq("company_id",x.id).eq("is_active",!0).maybeSingle();if(S){c(S);const E=S.roles,I=(E==null?void 0:E.permissions)||q3(),H=S.permission_overrides||{},M={...I,...Object.keys(H).reduce((D,K)=>(D[K]={...I[K],...H[K]||{}},D),{})};u(M)}else c(null),u(null)},B=async x=>{const C=a.find(S=>S.id===x);if(C&&e){const{data:S}=await ge.from("users").select("has_all_access").eq("id",e.id).maybeSingle(),E=(S==null?void 0:S.has_all_access)||!1;await j(C,E)}};Y.useEffect(()=>{w()},[e==null?void 0:e.id]);const p=async()=>{await w()};return s.jsx(wj.Provider,{value:{currentCompany:r,companies:a,userRole:l,permissions:A,hasAllAccess:i,loading:h,switchCompany:B,refreshCompanies:p},children:t})}function ir(){const t=Y.useContext(wj);if(t===void 0)throw new Error("useCompany must be used within a CompanyProvider");return t}function q3(){return{customers:{create:!1,read:!1,update:!1,delete:!1},leads:{create:!1,read:!1,update:!1,delete:!1},quotations:{create:!1,read:!1,update:!1,delete:!1},activities:{create:!1,read:!1,update:!1,delete:!1},products:{create:!1,read:!1,update:!1,delete:!1},settings:{create:!1,read:!1,update:!1,delete:!1}}}function Z3(){return{customers:{create:!0,read:!0,update:!0,delete:!0},leads:{create:!0,read:!0,update:!0,delete:!0},quotations:{create:!0,read:!0,update:!0,delete:!0},activities:{create:!0,read:!0,update:!0,delete:!0},products:{create:!0,read:!0,update:!0,delete:!0},settings:{create:!0,read:!0,update:!0,delete:!0},pipeline:{create:!0,read:!0,update:!0,delete:!0},event_types:{create:!0,read:!0,update:!0,delete:!0},templates:{create:!0,read:!0,update:!0,delete:!0},payments:{create:!0,read:!0,update:!0,delete:!0}}}const bj=Y.createContext(void 0);let Lh=null;typeof window<"u"&&window.addEventListener("message",t=>{var a,o;console.log("[GoogleAuth] Global message received:",t.origin,(a=t.data)==null?void 0:a.type);const e=(o=t==null?void 0:t.data)==null?void 0:o.type;if(!e||e!=="gmail-connected"&&e!=="google-connected")return;if(!["https://hsftnenijlcpqbqzpyhk.supabase.co","https://nexperience-crm-mul-xopl.bolt.host","http://localhost:5173","http://localhost:54321"].some(l=>(t.origin||"").startsWith(l))){console.warn("[GoogleAuth] Unexpected origin:",t.origin);return}t.data.data&&t.data.data.tokens&&(console.log("[GoogleAuth] Tokens received via postMessage, storing for component"),Lh=t.data.data)});function eE({children:t}){const{user:e}=Jr(),[r,n]=Y.useState(!1),[a,o]=Y.useState(!0),[l,c]=Y.useState(0),A=Y.useRef(null);Y.useEffect(()=>{e?u():(n(!1),o(!1))},[e]),Y.useEffect(()=>{function K(U){var P;console.log("[GoogleAuth] message received:",U.origin,U.data);const F=(P=U==null?void 0:U.data)==null?void 0:P.type;if(!F||F!=="gmail-connected"&&F!=="google-connected")return;["https://hsftnenijlcpqbqzpyhk.supabase.co","https://nexperience-crm-mul-xopl.bolt.host","http://localhost:5173","http://localhost:54321"].some($=>(U.origin||"").startsWith($))||console.warn("[GoogleAuth] Unexpected origin:",U.origin),U.data.data&&U.data.data.tokens&&e&&(console.log("[GoogleAuth] Saving tokens from postMessage"),i(U.data.data));try{n(!0),localStorage.setItem("google_connected","true"),console.log("[GoogleAuth] Connection confirmed!")}catch($){console.error("[GoogleAuth] Error updating state:",$)}}return window.addEventListener("message",K),console.log("[GoogleAuth] Message listener attached"),()=>{window.removeEventListener("message",K),console.log("[GoogleAuth] Message listener removed")}},[e]),Y.useEffect(()=>{function K(){try{const F=localStorage.getItem("google_oauth_tokens");if(F&&e){console.log("[GoogleAuth] Found tokens in localStorage (fallback)");const k=JSON.parse(F);k.data&&k.data.tokens&&(i(k.data),localStorage.removeItem("google_oauth_tokens"))}}catch(F){console.error("[GoogleAuth] Error checking localStorage fallback:",F)}}const U=setInterval(K,500);return()=>{clearInterval(U)}},[e]);const u=async()=>{if(e)try{localStorage.getItem("google_connected")==="true"&&(console.log("[GoogleAuth] LocalStorage indicates connected"),n(!0));const{data:U}=await ge.from("google_tokens").select("id, expires_at").eq("user_id",e.id).maybeSingle();if(U){const k=new Date(U.expires_at)>new Date;console.log("[GoogleAuth] Database check - connected:",k),n(k),k?localStorage.setItem("google_connected","true"):localStorage.removeItem("google_connected")}else console.log("[GoogleAuth] No tokens found in database"),n(!1),localStorage.removeItem("google_connected")}catch(K){console.error("[GoogleAuth] Error checking connection:",K),n(!1)}finally{o(!1)}},i=async K=>{if(e)try{console.log("[GoogleAuth] Saving tokens from callback:",K);const{error:U}=await ge.from("google_tokens").upsert({user_id:e.id,access_token:K.tokens.access_token,refresh_token:K.tokens.refresh_token,expires_at:K.tokens.expires_at,scope:K.tokens.scope,updated_at:new Date().toISOString()},{onConflict:"user_id"});U?console.error("[GoogleAuth] Error saving tokens:",U):(console.log("[GoogleAuth] Tokens saved successfully"),n(!0),localStorage.setItem("google_connected","true"))}catch(U){console.error("[GoogleAuth] Error in saveTokensFromCallback:",U)}},d=async()=>{if(e)try{const{data:{session:K}}=await ge.auth.getSession();if(!K){console.error("[GoogleAuth] No active session");return}const F=await fetch("https://hsftnenijlcpqbqzpyhk.supabase.co/functions/v1/google-oauth-start",{headers:{Authorization:`Bearer ${K.access_token}`}});if(!F.ok){const W=await F.text();console.error("[GoogleAuth] Failed to start OAuth - Status:",F.status,"Response:",W);return}const k=await F.json();console.log("[GoogleAuth] OAuth start response:",k);const T=k.authUrl;if(!T){console.error("[GoogleAuth] No auth URL in response:",k);return}console.log("[GoogleAuth] Opening OAuth window with URL:",T);const P=window.open(T,"google-oauth","width=520,height=640");(!P||P.closed||typeof P.closed>"u")&&(console.log("[GoogleAuth] Window blocked or closed, redirecting"),window.location.href=T);let $=0;const ee=120,V=setInterval(async()=>{$++,console.log("[GoogleAuth] Polling for tokens... attempt",$);try{if(Lh){console.log("[GoogleAuth] Tokens received via postMessage! Saving..."),await i(Lh),Lh=null,clearInterval(V);return}const{data:W,error:te}=await ge.from("google_tokens").select("id, access_token, expires_at").eq("user_id",e.id).maybeSingle();te&&console.error("[GoogleAuth] Query error:",te),W&&(console.log("[GoogleAuth] Tokens found! Connection successful"),n(!0),clearInterval(V),localStorage.setItem("google_connected","true"))}catch(W){console.error("[GoogleAuth] Error polling for tokens:",W)}if($>=ee){console.log("[GoogleAuth] Polling timeout after",$,"attempts"),clearInterval(V);try{const{data:W,error:te}=await ge.from("google_tokens").select("id").eq("user_id",e.id).maybeSingle();te?console.error("[GoogleAuth] Final check error:",te):W||console.error("[GoogleAuth] No tokens found after timeout - OAuth may have failed")}catch(W){console.error("[GoogleAuth] Final check exception:",W)}}},1e3)}catch(K){console.error("[GoogleAuth] Error connecting to Google:",K)}},h=async()=>{if(e)try{await ge.from("google_tokens").delete().eq("user_id",e.id),n(!1)}catch(K){throw console.error("Error disconnecting Google:",K),K}},f=async K=>{var ee;if(!e)throw new Error("User not authenticated");if(!r)throw new Error("Google account not connected");const{data:U}=await ge.from("google_tokens").select("access_token, refresh_token, expires_at").eq("user_id",e.id).maybeSingle();if(!U)throw new Error("No Google token found");let F=U.access_token;new Date(U.expires_at)<=new Date&&(F=await w(U.refresh_token));const T=j(K),P=btoa(unescape(encodeURIComponent(T))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),$=await fetch("https://gmail.googleapis.com/gmail/v1/users/me/messages/send",{method:"POST",headers:{Authorization:`Bearer ${F}`,"Content-Type":"application/json"},body:JSON.stringify({raw:P})});if(!$.ok){const V=await $.json();throw new Error(((ee=V.error)==null?void 0:ee.message)||"Failed to send email")}return await $.json()},w=async K=>{try{const{data:{session:U}}=await ge.auth.getSession();if(!U)throw new Error("No session found");const F=await fetch("https://hsftnenijlcpqbqzpyhk.supabase.co/functions/v1/google-token-refresh",{method:"POST",headers:{Authorization:`Bearer ${U.access_token}`,"Content-Type":"application/json"}});if(!F.ok){const T=await F.json();throw new Error(T.error||"Failed to refresh access token")}return(await F.json()).access_token}catch(U){throw console.error("[GoogleAuth] Token refresh error:",U),U}},j=K=>{const U="----=_Part_"+Date.now();let F="";if(F+=`To: ${K.to.join(", ")}\r
`,F+=`Subject: ${K.subject}\r
`,F+=`MIME-Version: 1.0\r
`,K.attachments&&K.attachments.length>0){F+=`Content-Type: multipart/mixed; boundary="${U}"\r
\r
`,F+=`--${U}\r
`,F+=`Content-Type: text/html; charset=UTF-8\r
\r
`,F+=`${K.body}\r
\r
`;for(const k of K.attachments)F+=`--${U}\r
`,F+=`Content-Type: ${k.mimeType}\r
`,F+=`Content-Transfer-Encoding: base64\r
`,F+=`Content-Disposition: attachment; filename="${k.filename}"\r
\r
`,F+=`${k.content}\r
\r
`;F+=`--${U}--`}else F+=`Content-Type: text/html; charset=UTF-8\r
\r
`,F+=K.body;return F},B=async(K=50)=>{if(!e)throw new Error("User not authenticated");if(!r)throw new Error("Google account not connected");const{data:U}=await ge.from("google_tokens").select("access_token, refresh_token, expires_at").eq("user_id",e.id).maybeSingle();if(!U)throw new Error("No Google token found");let F=U.access_token;new Date(U.expires_at)<=new Date&&(F=await w(U.refresh_token));const T=await fetch(`https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=${K}`,{headers:{Authorization:`Bearer ${F}`}});if(!T.ok)throw new Error("Failed to fetch messages");const P=await T.json();return(await Promise.all((P.messages||[]).map(async ee=>(await fetch(`https://gmail.googleapis.com/gmail/v1/users/me/messages/${ee.id}`,{headers:{Authorization:`Bearer ${F}`}})).json()))).map(ee=>{var W,te,oe;const V=ee.payload.headers;return{id:ee.id,threadId:ee.threadId,snippet:ee.snippet,from:((W=V.find(O=>O.name==="From"))==null?void 0:W.value)||"",subject:((te=V.find(O=>O.name==="Subject"))==null?void 0:te.value)||"",date:new Date(parseInt(ee.internalDate)).toLocaleDateString(),unread:((oe=ee.labelIds)==null?void 0:oe.includes("UNREAD"))||!1}})},p=async K=>{if(!e)throw new Error("User not authenticated");if(!r)throw new Error("Google account not connected");const{data:U}=await ge.from("google_tokens").select("access_token, refresh_token, expires_at").eq("user_id",e.id).maybeSingle();if(!U)throw new Error("No Google token found");let F=U.access_token;new Date(U.expires_at)<=new Date&&(F=await w(U.refresh_token));const T=await fetch(`https://gmail.googleapis.com/gmail/v1/users/me/threads/${K}`,{headers:{Authorization:`Bearer ${F}`}});if(!T.ok)throw new Error("Failed to fetch thread");return T.json()},x=async K=>{if(!e)throw new Error("User not authenticated");if(!r)throw new Error("Google account not connected");const{data:U}=await ge.from("google_tokens").select("access_token, refresh_token, expires_at").eq("user_id",e.id).maybeSingle();if(!U)throw new Error("No Google token found");let F=U.access_token;if(new Date(U.expires_at)<=new Date&&(F=await w(U.refresh_token)),!(await fetch(`https://gmail.googleapis.com/gmail/v1/users/me/messages/${K}/modify`,{method:"POST",headers:{Authorization:`Bearer ${F}`,"Content-Type":"application/json"},body:JSON.stringify({removeLabelIds:["UNREAD"]})})).ok)throw new Error("Failed to mark message as read");c(P=>Math.max(0,P-1))},C=async K=>{if(!e)throw new Error("User not authenticated");if(!r)throw new Error("Google account not connected");const{data:U}=await ge.from("google_tokens").select("access_token, refresh_token, expires_at").eq("user_id",e.id).maybeSingle();if(!U)throw new Error("No Google token found");let F=U.access_token;if(new Date(U.expires_at)<=new Date&&(F=await w(U.refresh_token)),!(await fetch(`https://gmail.googleapis.com/gmail/v1/users/me/messages/${K}/modify`,{method:"POST",headers:{Authorization:`Bearer ${F}`,"Content-Type":"application/json"},body:JSON.stringify({addLabelIds:["UNREAD"]})})).ok)throw new Error("Failed to mark message as unread");c(P=>P+1)},S=async K=>{if(!e)throw new Error("User not authenticated");if(!r)throw new Error("Google account not connected");const{data:U}=await ge.from("google_tokens").select("access_token, refresh_token, expires_at").eq("user_id",e.id).maybeSingle();if(!U)throw new Error("No Google token found");let F=U.access_token;if(new Date(U.expires_at)<=new Date&&(F=await w(U.refresh_token)),!(await fetch(`https://gmail.googleapis.com/gmail/v1/users/me/messages/${K}`,{method:"DELETE",headers:{Authorization:`Bearer ${F}`}})).ok)throw new Error("Failed to delete message")},E=async()=>{if(!e)throw new Error("User not authenticated");if(!r)throw new Error("Google account not connected");const{data:K}=await ge.from("google_tokens").select("access_token, refresh_token, expires_at").eq("user_id",e.id).maybeSingle();if(!K)throw new Error("No Google token found");let U=K.access_token;new Date(K.expires_at)<=new Date&&(U=await w(K.refresh_token));const k=await fetch("https://gmail.googleapis.com/gmail/v1/users/me/labels",{headers:{Authorization:`Bearer ${U}`}});if(!k.ok)throw new Error("Failed to fetch labels");return(await k.json()).labels||[]},I=async(K,U=50)=>{if(!e)throw new Error("User not authenticated");if(!r)throw new Error("Google account not connected");const{data:F}=await ge.from("google_tokens").select("access_token, refresh_token, expires_at").eq("user_id",e.id).maybeSingle();if(!F)throw new Error("No Google token found");let k=F.access_token;new Date(F.expires_at)<=new Date&&(k=await w(F.refresh_token));const P=encodeURIComponent(K),$=await fetch(`https://gmail.googleapis.com/gmail/v1/users/me/messages?q=${P}&maxResults=${U}`,{headers:{Authorization:`Bearer ${k}`}});if(!$.ok)throw new Error("Failed to search messages");const ee=await $.json();return(await Promise.all((ee.messages||[]).map(async W=>(await fetch(`https://gmail.googleapis.com/gmail/v1/users/me/messages/${W.id}`,{headers:{Authorization:`Bearer ${k}`}})).json()))).map(W=>{var oe,O,z;const te=W.payload.headers;return{id:W.id,threadId:W.threadId,snippet:W.snippet,from:((oe=te.find(ne=>ne.name==="From"))==null?void 0:oe.value)||"",subject:((O=te.find(ne=>ne.name==="Subject"))==null?void 0:O.value)||"",date:new Date(parseInt(W.internalDate)).toLocaleDateString(),unread:((z=W.labelIds)==null?void 0:z.includes("UNREAD"))||!1}})},H=()=>{if(e){console.log("[GoogleAuth] Subscribing to unread count updates");try{const K=ge.channel(`unread-count-${e.id}`).on("postgres_changes",{event:"*",schema:"public",table:"unread_email_count",filter:`user_id=eq.${e.id}`},U=>{console.log("[GoogleAuth] Unread count updated:",U),U.new&&typeof U.new.unread_count=="number"&&c(U.new.unread_count)}).subscribe(U=>{console.log("[GoogleAuth] Subscription status:",U)});A.current=K}catch(K){console.error("[GoogleAuth] Error subscribing to unread count:",K)}}},M=()=>{console.log("[GoogleAuth] Unsubscribing from unread count updates"),A.current&&(ge.removeChannel(A.current),A.current=null)},D=async()=>{if(e)try{const{data:K}=await ge.from("unread_email_count").select("unread_count").eq("user_id",e.id).maybeSingle();K?c(K.unread_count):(await ge.from("unread_email_count").insert({user_id:e.id,unread_count:0}),c(0))}catch(K){console.error("[GoogleAuth] Error fetching unread count:",K)}};return Y.useEffect(()=>(r&&e&&(H(),D()),()=>{e&&M()}),[r,e]),s.jsx(bj.Provider,{value:{isConnected:r,loading:a,unreadCount:l,connectGoogle:d,disconnectGoogle:h,sendEmail:f,fetchMessages:B,fetchThread:p,markAsRead:x,markAsUnread:C,deleteMessage:S,getLabels:E,searchMessages:I,subscribeToUnreadCount:H,unsubscribeFromUnreadCount:M},children:t})}function km(){const t=Y.useContext(bj);if(t===void 0)throw new Error("useGoogleAuth must be used within a GoogleAuthProvider");return t}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),mt=(t,e)=>{const r=Y.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:c="",children:A,...u},i)=>Y.createElement("svg",{ref:i,...tE,width:a,height:a,stroke:n,strokeWidth:l?Number(o)*24/Number(a):o,className:["lucide",`lucide-${rE(t)}`,c].join(" "),...u},[...e.map(([d,h])=>Y.createElement(d,h)),...Array.isArray(A)?A:[A]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=mt("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=mt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=mt("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=mt("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=mt("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=mt("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=mt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=mt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=mt("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=mt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=mt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=mt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=mt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=mt("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=mt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=mt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=mt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=mt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=mt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=mt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=mt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=mt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=mt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=mt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=mt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=mt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=mt("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=mt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=mt("FileType",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 13v-1h6v1",key:"1bb014"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M11 18h2",key:"12mj7e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=mt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=mt("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=mt("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=mt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=mt("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=mt("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=mt("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=mt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=mt("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=mt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=mt("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=mt("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=mt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=mt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=mt("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=mt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=mt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=mt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=mt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=mt("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=mt("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=mt("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=mt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=mt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=mt("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=mt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=mt("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=mt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=mt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=mt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=mt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=mt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=mt("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=mt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=mt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=mt("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=mt("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=mt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=mt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=mt("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=mt("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=mt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=mt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=mt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=mt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=mt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=mt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function PE(){const{signIn:t}=Jr(),[e,r]=Y.useState("signin"),[n,a]=Y.useState(""),[o,l]=Y.useState(""),[c,A]=Y.useState(""),[u,i]=Y.useState(""),[d,h]=Y.useState(!1),[f,w]=Y.useState(!1),[j,B]=Y.useState(""),[p,x]=Y.useState(""),C=async()=>{w(!0),B("");try{console.log("[GoogleAuth] Starting OAuth flow for mode:",e);const{error:U}=await ge.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}`,queryParams:{access_type:"offline",prompt:"consent"}}});if(U)throw U;console.log("[GoogleAuth] OAuth flow initiated"),w(!1)}catch(U){console.error("Google OAuth error:",U),B(U instanceof Error?U.message:"Failed to authenticate with Google"),w(!1)}},S=async()=>{const{error:U}=await t(n,o);if(U){B(U.message),h(!1);return}const{data:{user:F},error:k}=await ge.auth.getUser();if(k){B("Failed to get user information"),h(!1);return}if(F){const{data:T}=await ge.from("users").select("id, email, has_all_access, is_active").eq("id",F.id).maybeSingle();if(!T){B("User not found in system. Please contact your administrator."),await ge.auth.signOut(),h(!1);return}if(!T.is_active){B("Your account is inactive. Please contact your administrator."),await ge.auth.signOut(),h(!1);return}const{data:P}=await ge.from("user_company_roles").select("id").eq("user_id",T.id).eq("is_active",!0).limit(1);if(!T.has_all_access&&(!P||P.length===0)){B("No company access. Please contact your administrator."),await ge.auth.signOut(),h(!1);return}}h(!1)},E=async()=>{if(o!==u){B("Passwords do not match"),h(!1);return}if(o.length<6){B("Password must be at least 6 characters long"),h(!1);return}const{error:U}=await ge.auth.signUp({email:n,password:o,options:{data:{full_name:c}}});if(U){B(U.message),h(!1);return}x("Account created successfully! Please contact your administrator to get access to business units."),h(!1)},I=async()=>{const{error:U}=await ge.auth.resetPasswordForEmail(n,{redirectTo:`${window.location.origin}/reset-password`});if(U){B(U.message),h(!1);return}x("Password reset instructions have been sent to your email."),h(!1)},H=async U=>{U.preventDefault(),B(""),x(""),h(!0),e==="signin"?await S():e==="signup"?await E():e==="reset"&&await I()},M=()=>e==="signup"?s.jsx(Lj,{className:"w-8 h-8 text-white"}):e==="reset"?s.jsx(wE,{className:"w-8 h-8 text-white"}):s.jsx(SE,{className:"w-8 h-8 text-white"}),D=()=>e==="signup"?"Create Account":e==="reset"?"Reset Password":"Sign in to your CRM account",K=()=>d?e==="signup"?"Creating Account...":e==="reset"?"Sending Reset Link...":"Signing in...":e==="signup"?"Sign Up":e==="reset"?"Send Reset Link":"Sign In";return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 to-slate-100",children:s.jsx("div",{className:"w-full max-w-md",children:s.jsxs("div",{className:"bg-white shadow-xl rounded-2xl p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-slate-900 rounded-xl mb-4",children:M()}),s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"The Nextperience Group"}),s.jsx("p",{className:"text-slate-600 mt-2",children:D()})]}),s.jsxs("form",{onSubmit:H,className:"space-y-6",children:[j&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:j}),p&&s.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:p}),e==="signup"&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-slate-700 mb-2",children:"Full Name (Optional)"}),s.jsx("input",{id:"fullName",type:"text",value:c,onChange:U=>A(U.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent",placeholder:"John Doe"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-2",children:"Email Address"}),s.jsx("input",{id:"email",type:"email",value:n,onChange:U=>a(U.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent",placeholder:"you@company.com",required:!0})]}),e!=="reset"&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-2",children:"Password"}),s.jsx("input",{id:"password",type:"password",value:o,onChange:U=>l(U.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent",placeholder:"",required:!0})]}),e==="signup"&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 mb-2",children:"Confirm Password"}),s.jsx("input",{id:"confirmPassword",type:"password",value:u,onChange:U=>i(U.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent",placeholder:"",required:!0})]}),s.jsx("button",{type:"submit",disabled:d,className:"w-full bg-slate-900 text-white py-2 px-4 rounded-lg hover:bg-slate-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:K()}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-slate-200"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-white text-slate-500",children:"Or continue with"})})]}),s.jsxs("button",{type:"button",onClick:C,disabled:d||f,className:"w-full flex items-center justify-center gap-3 bg-white border border-slate-300 text-slate-700 py-2 px-4 rounded-lg hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:[s.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),f?"Connecting...":`${e==="signup"?"Sign up":"Sign in"} with Google`]}),s.jsxs("div",{className:"flex flex-col gap-2 pt-4 border-t border-slate-200",children:[e==="signin"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",onClick:()=>{r("reset"),B(""),x("")},className:"text-sm text-slate-600 hover:text-slate-900 transition-colors",children:"Forgot your password?"}),s.jsx("button",{type:"button",onClick:()=>{r("signup"),B(""),x("")},className:"text-sm text-slate-600 hover:text-slate-900 transition-colors",children:"Don't have an account? Sign up"})]}),(e==="signup"||e==="reset")&&s.jsx("button",{type:"button",onClick:()=>{r("signin"),B(""),x("")},className:"text-sm text-slate-600 hover:text-slate-900 transition-colors",children:"Back to sign in"})]})]})]})})})}function OE(){const{currentCompany:t,companies:e,switchCompany:r}=ir(),[n,a]=Y.useState(!1);return t?s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>e.length>1?a(!n):null,className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-slate-100 transition-colors",children:[s.jsx(nu,{className:"w-5 h-5 text-slate-600"}),s.jsx("span",{className:"font-medium text-slate-900",children:t.name}),e.length>1&&s.jsx(jj,{className:`w-4 h-4 text-slate-600 transition-transform ${n?"rotate-180":""}`})]}),n&&e.length>1&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>a(!1)}),s.jsx("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white rounded-lg shadow-xl border border-slate-200 py-2 z-20",children:e.map(o=>s.jsxs("button",{onClick:()=>{r(o.id),a(!1)},className:"w-full flex items-center justify-between px-4 py-2 hover:bg-slate-50 transition-colors cursor-pointer",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(nu,{className:"w-4 h-4 text-slate-600"}),s.jsx("span",{className:"text-slate-900",children:o.name})]}),o.id===t.id&&s.jsx(Fs,{className:"w-4 h-4 text-green-600"})]},o.id))})]})]}):null}function DE({currentView:t,onNavigate:e}){var f,w;const{permissions:r,currentCompany:n,companies:a,switchCompany:o}=ir(),{signOut:l,user:c}=Jr(),{unreadCount:A}=km(),[u,i]=Y.useState(!1),d=Y.useRef(null);Y.useEffect(()=>{function j(B){d.current&&!d.current.contains(B.target)&&i(!1)}return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]);const h=[{id:"dashboard",label:"Dashboard",icon:bE,show:!0},{id:"customers",label:"Customers",icon:Bi,show:r==null?void 0:r.customers.read},{id:"leads",label:"Leads",icon:Ij,show:r==null?void 0:r.leads.read},{id:"quotations",label:"Quotations",icon:ys,show:(f=r==null?void 0:r.quotations)==null?void 0:f.read},{id:"emails",label:"Emails",icon:Is,show:!0},{id:"templates",label:"Templates",icon:pE,show:(w=r==null?void 0:r.quotations)==null?void 0:w.read},{id:"products",label:"Products",icon:zv,show:r==null?void 0:r.products.read}];return s.jsx("div",{className:"bg-white border-b border-slate-200 sticky top-0 z-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs("div",{className:"flex items-center gap-4 lg:gap-8 overflow-x-auto",children:[s.jsx(OE,{}),s.jsx("nav",{className:"hidden md:flex items-center gap-1 overflow-x-auto",children:h.filter(j=>j.show).map(j=>{const B=j.icon;return s.jsxs("button",{onClick:()=>e(j.id),className:`flex items-center gap-2 px-3 lg:px-4 py-2 rounded-lg transition-colors whitespace-nowrap relative ${t===j.id?"bg-slate-900 text-white":"text-slate-600 hover:bg-slate-100"}`,children:[s.jsx(B,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium text-sm lg:text-base",children:j.label}),j.id==="emails"&&A>0&&s.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:A>99?"99+":A})]},j.id)})})]}),s.jsxs("div",{className:"flex items-center gap-2 relative",ref:d,children:[s.jsxs("button",{onClick:()=>i(!u),className:"flex items-center gap-2 px-3 py-1.5 text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",children:[s.jsx(Is,{className:"w-4 h-4 text-slate-500"}),s.jsx("span",{className:"text-sm hidden md:inline",children:c==null?void 0:c.email}),s.jsx(jj,{className:"w-4 h-4 text-slate-500"})]}),u&&s.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-white rounded-lg shadow-lg border border-slate-200 py-1 z-50",children:[s.jsxs("div",{className:"px-3 py-2 border-b border-slate-100",children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Signed in as"}),s.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:c==null?void 0:c.email})]}),a.length>1&&n&&s.jsxs("div",{className:"border-b border-slate-100 py-1",children:[s.jsx("div",{className:"px-3 py-2",children:s.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Business Unit"})}),a.map(j=>s.jsxs("button",{onClick:()=>{o(j.id)},className:"w-full flex items-center justify-between px-3 py-2 text-sm hover:bg-slate-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(nu,{className:"w-4 h-4 text-slate-600"}),s.jsx("span",{className:j.id===n.id?"text-slate-900 font-medium":"text-slate-700",children:j.name})]}),j.id===n.id&&s.jsx(Fs,{className:"w-4 h-4 text-green-600"})]},j.id))]}),s.jsxs("button",{onClick:()=>{i(!1),e("profile")},className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-slate-700 hover:bg-slate-50 transition-colors",children:[s.jsx(Dm,{className:"w-4 h-4"}),"Profile"]}),(r==null?void 0:r.settings.read)&&s.jsxs("button",{onClick:()=>{i(!1),e("settings")},className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-slate-700 hover:bg-slate-50 transition-colors",children:[s.jsx(QE,{className:"w-4 h-4"}),"Settings"]}),s.jsx("div",{className:"border-t border-slate-100 mt-1 pt-1",children:s.jsxs("button",{onClick:l,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[s.jsx(EE,{className:"w-4 h-4"}),"Sign Out"]})})]})]})]}),s.jsx("div",{className:"md:hidden flex gap-2 overflow-x-auto pb-2",children:h.filter(j=>j.show).map(j=>{const B=j.icon;return s.jsxs("button",{onClick:()=>e(j.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg whitespace-nowrap transition-colors relative ${t===j.id?"bg-slate-900 text-white":"text-slate-600 hover:bg-slate-100"}`,children:[s.jsx(B,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:j.label}),j.id==="emails"&&A>0&&s.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:A>99?"99+":A})]},j.id)})})]})})}function RE(){const{currentCompany:t}=ir(),[e,r]=Y.useState({customers:0,leads:0,activities:0,products:0,wonLeads:0,totalLeadValue:0}),[n,a]=Y.useState(!0);Y.useEffect(()=>{t&&o()},[t]);const o=async()=>{var w,j;if(!t)return;a(!0);const[c,A,u,i,d]=await Promise.all([ge.from("customers").select("id",{count:"exact",head:!0}).eq("company_id",t.id).eq("is_archived",!1),ge.from("leads").select("id",{count:"exact",head:!0}).eq("company_id",t.id).eq("is_archived",!1),ge.from("activities").select("id",{count:"exact",head:!0}).eq("company_id",t.id),ge.from("products").select("id",{count:"exact",head:!0}).eq("company_id",t.id).eq("is_active",!0),ge.from("leads").select("value").eq("company_id",t.id).eq("stage","won")]),h=((w=d.data)==null?void 0:w.length)||0,f=((j=d.data)==null?void 0:j.reduce((B,p)=>B+(p.value||0),0))||0;r({customers:c.count||0,leads:A.count||0,activities:u.count||0,products:i.count||0,wonLeads:h,totalLeadValue:f}),a(!1)},l=[{label:"Total Customers",value:e.customers,icon:Bi,color:"bg-blue-100 text-blue-600"},{label:"Active Leads",value:e.leads,icon:Ij,color:"bg-amber-100 text-amber-600"},{label:"Won Deals",value:e.wonLeads,icon:Do,color:"bg-green-100 text-green-600"},{label:"Total Activities",value:e.activities,icon:nE,color:"bg-purple-100 text-purple-600"},{label:"Products",value:e.products,icon:zv,color:"bg-slate-100 text-slate-600"},{label:"Revenue (Won)",value:`$${e.totalLeadValue.toLocaleString()}`,icon:hE,color:"bg-emerald-100 text-emerald-600"}];return n?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"text-slate-600",children:"Loading dashboard..."})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Dashboard"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:l.map(c=>{const A=c.icon;return s.jsx("div",{className:"bg-white rounded-lg border border-slate-200 p-6 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600 mb-2",children:c.label}),s.jsx("p",{className:"text-3xl font-bold text-slate-900",children:c.value})]}),s.jsx("div",{className:`p-3 rounded-lg ${c.color}`,children:s.jsx(A,{className:"w-6 h-6"})})]})},c.label)})}),s.jsxs("div",{className:"mt-8 bg-white rounded-lg border border-slate-200 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Welcome to The Nextperience Group CRM"}),s.jsx("p",{className:"text-slate-600",children:"This is your central hub for managing customer relationships. Use the navigation above to access different sections of the CRM. All data is automatically scoped to your current company selection."})]})]})}function HE({customer:t,onClose:e}){const{currentCompany:r,permissions:n}=ir(),{user:a}=Jr(),[o,l]=Y.useState({name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||"",phone:(t==null?void 0:t.phone)||"",company_name:(t==null?void 0:t.company_name)||"",notes:(t==null?void 0:t.notes)||"",tags:(t==null?void 0:t.tags.join(", "))||""}),[c,A]=Y.useState([]),[u,i]=Y.useState(!1),[d,h]=Y.useState("");Y.useEffect(()=>{t&&f()},[t]);const f=async()=>{if(!t)return;const{data:p}=await ge.from("activities").select("*").eq("related_to_type","customer").eq("related_to_id",t.id).order("created_at",{ascending:!1}).limit(5);p&&A(p)},w=async p=>{if(p.preventDefault(),!r||!a)return;i(!0),h("");const x={...o,tags:o.tags?o.tags.split(",").map(C=>C.trim()).filter(Boolean):[],company_id:r.id,created_by:a.id};if(t){const{error:C}=await ge.from("customers").update(x).eq("id",t.id);if(C){h(C.message),i(!1);return}await ge.from("audit_logs").insert({company_id:r.id,entity_type:"customer",entity_id:t.id,action:"update",changed_fields:{updated:!0},user_id:a.id})}else{const{error:C}=await ge.from("customers").insert([x]);if(C){h(C.message),i(!1);return}}i(!1),e(!0)},j=async()=>{if(!t||!(n!=null&&n.customers.delete))return;const{error:p}=await ge.from("customers").update({is_archived:!0}).eq("id",t.id);p||(await ge.from("audit_logs").insert({company_id:r.id,entity_type:"customer",entity_id:t.id,action:"archive",changed_fields:{},user_id:a.id}),e(!0))},B=t?n==null?void 0:n.customers.update:n==null?void 0:n.customers.create;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:t?"Customer Profile":"New Customer"}),s.jsx("button",{onClick:()=>e(),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:s.jsx(mr,{className:"w-5 h-5 text-slate-600"})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 p-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("form",{onSubmit:w,className:"space-y-4",children:[d&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:d}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Name *"}),s.jsx("input",{type:"text",value:o.name,onChange:p=>l({...o,name:p.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent",required:!0,disabled:!B})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Company Name"}),s.jsx("input",{type:"text",value:o.company_name,onChange:p=>l({...o,company_name:p.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent",disabled:!B})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:o.email,onChange:p=>l({...o,email:p.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent",disabled:!B})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Phone"}),s.jsx("input",{type:"tel",value:o.phone,onChange:p=>l({...o,phone:p.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent",disabled:!B})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tags (comma-separated)"}),s.jsx("input",{type:"text",value:o.tags,onChange:p=>l({...o,tags:p.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent",placeholder:"VIP, Partner, Enterprise",disabled:!B})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Notes"}),s.jsx("textarea",{value:o.notes,onChange:p=>l({...o,notes:p.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent h-32",disabled:!B})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200",children:[t&&(n==null?void 0:n.customers.delete)&&s.jsxs("button",{type:"button",onClick:j,className:"flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[s.jsx(Ba,{className:"w-4 h-4"}),"Archive"]}),B&&s.jsxs("button",{type:"submit",disabled:u,className:"flex items-center gap-2 px-6 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors disabled:opacity-50 ml-auto",children:[s.jsx(FA,{className:"w-4 h-4"}),u?"Saving...":"Save"]})]})]})}),t&&s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"font-semibold text-slate-900",children:"Recent Activities"}),(n==null?void 0:n.activities.create)&&s.jsx("button",{className:"p-1 hover:bg-white rounded transition-colors",children:s.jsx(mn,{className:"w-4 h-4 text-slate-600"})})]}),c.length>0?s.jsx("div",{className:"space-y-3",children:c.map(p=>s.jsx("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:s.jsxs("div",{className:"flex items-start gap-2",children:[p.type==="call"&&s.jsx(af,{className:"w-4 h-4 text-slate-600 mt-0.5"}),p.type==="email"&&s.jsx(Is,{className:"w-4 h-4 text-slate-600 mt-0.5"}),p.type==="meeting"&&s.jsx(Ro,{className:"w-4 h-4 text-slate-600 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-slate-900",children:p.title}),s.jsx("p",{className:"text-xs text-slate-600 mt-1",children:new Date(p.created_at).toLocaleDateString()})]})]})},p.id))}):s.jsx("p",{className:"text-sm text-slate-600",children:"No activities yet"})]})})]})]})})}function ME(){const{currentCompany:t,permissions:e}=ir(),[r,n]=Y.useState([]),[a,o]=Y.useState(!0),[l,c]=Y.useState(""),[A,u]=Y.useState(!1),[i,d]=Y.useState(null);Y.useEffect(()=>{t&&h()},[t]);const h=async()=>{if(!t)return;o(!0);const{data:p}=await ge.from("customers").select("*").eq("company_id",t.id).eq("is_archived",!1).order("created_at",{ascending:!1});p&&n(p),o(!1)},f=r.filter(p=>{var C,S,E;const x=l.toLowerCase();return p.name.toLowerCase().includes(x)||((C=p.email)==null?void 0:C.toLowerCase().includes(x))||((S=p.phone)==null?void 0:S.toLowerCase().includes(x))||((E=p.company_name)==null?void 0:E.toLowerCase().includes(x))}),w=()=>{d(null),u(!0)},j=p=>{d(p),u(!0)},B=p=>{u(!1),d(null),p&&h()};return a?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"text-slate-600",children:"Loading customers..."})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Customers"}),(e==null?void 0:e.customers.create)&&s.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:[s.jsx(mn,{className:"w-4 h-4"}),"Add Customer"]})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),s.jsx("input",{type:"text",value:l,onChange:p=>c(p.target.value),placeholder:"Search customers by name, email, or phone...",className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(p=>s.jsxs("div",{onClick:()=>j(p),className:"bg-white rounded-lg border border-slate-200 p-4 hover:shadow-md transition-shadow cursor-pointer",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsx("h3",{className:"font-semibold text-slate-900",children:p.name}),p.tags.length>0&&s.jsx("div",{className:"flex gap-1",children:p.tags.slice(0,2).map((x,C)=>s.jsx("span",{className:"px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded",children:x},C))})]}),p.company_name&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 mb-2",children:[s.jsx(cE,{className:"w-4 h-4"}),s.jsx("span",{children:p.company_name})]}),p.email&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 mb-2",children:[s.jsx(Is,{className:"w-4 h-4"}),s.jsx("span",{className:"truncate",children:p.email})]}),p.phone&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 mb-2",children:[s.jsx(af,{className:"w-4 h-4"}),s.jsx("span",{children:p.phone})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 mt-3 pt-3 border-t border-slate-200",children:[s.jsx(Ro,{className:"w-3 h-3"}),s.jsxs("span",{children:["Added ",new Date(p.created_at).toLocaleDateString()]})]})]},p.id))}),f.length===0&&s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-slate-600",children:l?"No customers found matching your search.":"No customers yet."})}),A&&s.jsx(HE,{customer:i,onClose:B})]})}function KE({selectedCustomerId:t,onSelectCustomer:e,onCreateNew:r,showCreateNew:n=!0}){const{currentCompany:a}=ir(),[o,l]=Y.useState([]),[c,A]=Y.useState([]),[u,i]=Y.useState(""),[d,h]=Y.useState(!1),[f,w]=Y.useState(!1),[j,B]=Y.useState(null);Y.useEffect(()=>{a&&p()},[a]),Y.useEffect(()=>{if(t&&o.length>0){const E=o.find(I=>I.id===t);E&&B(E)}},[t,o]),Y.useEffect(()=>{if(u){const E=u.toLowerCase(),I=o.filter(H=>{var M,D,K;return H.name.toLowerCase().includes(E)||((M=H.email)==null?void 0:M.toLowerCase().includes(E))||((D=H.phone)==null?void 0:D.includes(E))||((K=H.company_name)==null?void 0:K.toLowerCase().includes(E))});A(I)}else A(o)},[u,o]);const p=async()=>{if(!a)return;w(!0);const{data:E}=await ge.from("customers").select("*").eq("company_id",a.id).eq("is_archived",!1).order("name");E&&(l(E),A(E)),w(!1)},x=E=>{B(E),e(E),h(!1),i("")},C=()=>{B(null),e(null),i("")},S=()=>{h(!1),r()};return s.jsxs("div",{className:"relative",children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Customer ",s.jsx("span",{className:"text-red-500",children:"*"})]}),j?s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 border border-slate-300 rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-slate-900",children:j.name}),j.email&&s.jsx("div",{className:"text-sm text-slate-600",children:j.email}),j.company_name&&s.jsx("div",{className:"text-xs text-slate-500",children:j.company_name})]}),s.jsx("button",{type:"button",onClick:C,className:"p-1 text-slate-400 hover:text-slate-600",children:s.jsx(mr,{className:"w-4 h-4"})})]}):s.jsxs("div",{children:[s.jsxs("button",{type:"button",onClick:()=>h(!d),className:"w-full flex items-center gap-2 p-3 border border-slate-300 rounded-lg hover:border-slate-400 transition-colors text-left bg-white",children:[s.jsx(jl,{className:"w-4 h-4 text-slate-400"}),s.jsx("span",{className:"text-slate-600",children:"Select or search customer..."})]}),d&&s.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-slate-300 rounded-lg shadow-lg max-h-80 overflow-hidden flex flex-col",children:[s.jsx("div",{className:"p-3 border-b border-slate-200",children:s.jsxs("div",{className:"relative",children:[s.jsx(jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),s.jsx("input",{type:"text",value:u,onChange:E=>i(E.target.value),placeholder:"Search by name, email, or phone...",className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent",autoFocus:!0})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto",children:[n&&s.jsxs("button",{type:"button",onClick:S,className:"w-full flex items-center gap-3 p-3 hover:bg-slate-50 transition-colors border-b border-slate-200",children:[s.jsx("div",{className:"w-8 h-8 bg-slate-900 rounded-full flex items-center justify-center",children:s.jsx(mn,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium text-slate-900",children:"Create New Customer"}),s.jsx("div",{className:"text-xs text-slate-600",children:"Add a new customer record"})]})]}),f?s.jsx("div",{className:"p-8 text-center text-slate-600",children:"Loading customers..."}):c.length===0?s.jsx("div",{className:"p-8 text-center text-slate-600",children:u?"No customers found":"No customers available"}):c.map(E=>s.jsxs("button",{type:"button",onClick:()=>x(E),className:"w-full flex items-center gap-3 p-3 hover:bg-slate-50 transition-colors text-left",children:[s.jsx("div",{className:"w-8 h-8 bg-slate-200 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-slate-700",children:E.name.charAt(0).toUpperCase()})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium text-slate-900",children:E.name}),E.email&&s.jsx("div",{className:"text-sm text-slate-600 truncate",children:E.email}),E.phone&&s.jsx("div",{className:"text-xs text-slate-500",children:E.phone}),E.company_name&&s.jsx("div",{className:"text-xs text-slate-500",children:E.company_name})]})]},E.id))]}),s.jsx("div",{className:"p-2 border-t border-slate-200 bg-slate-50",children:s.jsx("button",{type:"button",onClick:()=>h(!1),className:"w-full px-3 py-2 text-sm text-slate-600 hover:text-slate-900 transition-colors",children:"Close"})})]})]})]})}function GE({lead:t,onClose:e,onSuccess:r}){var F,k;const{currentCompany:n,permissions:a}=ir(),{user:o}=Jr(),[l,c]=Y.useState(!1),[A,u]=Y.useState(null),[i,d]=Y.useState([]),[h,f]=Y.useState(null),[w,j]=Y.useState({name:"",email:"",phone:"",company_name:""}),[B,p]=Y.useState({event_name:(t==null?void 0:t.event_name)||"",event_date:(t==null?void 0:t.event_date)||"",event_type:(t==null?void 0:t.event_type)||"",event_value:((F=t==null?void 0:t.event_value)==null?void 0:F.toString())||"",expected_pax:((k=t==null?void 0:t.expected_pax)==null?void 0:k.toString())||"",source:(t==null?void 0:t.source)||"",notes:(t==null?void 0:t.notes)||""}),[x,C]=Y.useState(!1),[S,E]=Y.useState("");Y.useEffect(()=>{n&&I(),t!=null&&t.customer_id&&H(t.customer_id)},[n,t]);const I=async()=>{if(!n)return;const{data:T}=await ge.from("event_types").select("*").eq("company_id",n.id).eq("is_active",!0).order("order");T&&d(T)},H=async T=>{const{data:P}=await ge.from("customers").select("*").eq("id",T).maybeSingle();P&&u(P)},M=async(T,P)=>{if(!n||!T&&!P)return null;const $=ge.from("customers").select("*").eq("company_id",n.id).eq("is_archived",!1);T&&P?$.or(`email.eq.${T},phone.eq.${P}`):T?$.eq("email",T):P&&$.eq("phone",P);const{data:ee}=await $.limit(1).maybeSingle();return ee},D=async()=>{if(!w.name.trim()){E("Customer name is required");return}const T=await M(w.email,w.phone);if(T&&!h){f(T);return}return f(null),w},K=()=>{h&&(u(h),c(!1),f(null),j({name:"",email:"",phone:"",company_name:""}))},U=async T=>{if(T.preventDefault(),!n||!o)return;if(!t&&!A&&!l){E("Please select a customer or create a new one");return}C(!0),E("");let P=A==null?void 0:A.id;if(l){const V=await D();if(!V){C(!1);return}const{data:W,error:te}=await ge.from("customers").insert([{company_id:n.id,name:V.name,email:V.email||null,phone:V.phone||null,company_name:V.company_name||null,created_by:o.id}]).select().single();if(te){E(te.message),C(!1);return}P=W.id,await ge.from("audit_logs").insert({company_id:n.id,user_id:o.id,entity_type:"customer",entity_id:W.id,action:"create",changed_fields:W})}if(!P&&!t){E("Customer is required"),C(!1);return}const $=B.event_date||null;if($&&!t){const V=new Date;if(V.setHours(0,0,0,0),new Date($)<V&&!confirm("The event date is in the past. Do you want to continue?")){C(!1);return}}const ee={customer_id:P||(t==null?void 0:t.customer_id),event_name:B.event_name||null,event_date:$,event_type:B.event_type||null,event_value:B.event_value?parseFloat(B.event_value):0,expected_pax:B.expected_pax?parseInt(B.expected_pax):null,source:B.source||null,notes:B.notes||null,company_id:n.id,created_by:o.id};if(t){const{error:V}=await ge.from("leads").update(ee).eq("id",t.id);if(V){E(V.message),C(!1);return}await ge.from("audit_logs").insert({company_id:n.id,user_id:o.id,entity_type:"lead",entity_id:t.id,action:"updated",changed_fields:ee})}else{const{data:V}=await ge.from("pipeline_stages").select("id").eq("company_id",n.id).order("order").limit(1).maybeSingle(),{error:W}=await ge.from("leads").insert([{...ee,stage_id:(V==null?void 0:V.id)||null}]);if(W){E(W.message),C(!1);return}P&&A&&await ge.from("audit_logs").insert({company_id:n.id,user_id:o.id,entity_type:"lead",entity_id:P,action:"update",changed_fields:{customer_id:P,customer_name:A.name}})}C(!1),r&&r(),e(!0)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900",children:t?"Edit Lead":"New Lead"}),s.jsx("button",{onClick:()=>e(!1),className:"p-2 text-slate-400 hover:text-slate-600 transition-colors",children:s.jsx(mr,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:U,className:"p-6 space-y-6",children:[S&&s.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[s.jsx(Wd,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),s.jsx("div",{className:"text-sm text-red-800",children:S})]}),!t&&!l&&s.jsx(KE,{selectedCustomerId:(A==null?void 0:A.id)||null,onSelectCustomer:T=>u(T),onCreateNew:()=>c(!0)}),t&&A&&s.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Customer"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900",children:A.name}),A.email&&s.jsx("div",{className:"text-sm text-slate-600",children:A.email}),A.phone&&s.jsx("div",{className:"text-sm text-slate-600",children:A.phone}),A.company_name&&s.jsx("div",{className:"text-xs text-slate-500",children:A.company_name})]})]}),l&&s.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-medium text-slate-900",children:"New Customer"}),s.jsx("button",{type:"button",onClick:()=>{c(!1),f(null)},className:"text-sm text-slate-600 hover:text-slate-900",children:"Cancel"})]}),h&&s.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[s.jsx(Wd,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-amber-900",children:"Possible Duplicate Customer"}),s.jsx("div",{className:"text-sm text-amber-800 mt-1",children:"A customer with similar contact info already exists:"}),s.jsxs("div",{className:"mt-2 p-2 bg-white rounded border border-amber-200",children:[s.jsx("div",{className:"font-medium",children:h.name}),h.email&&s.jsx("div",{className:"text-sm text-slate-600",children:h.email}),h.phone&&s.jsx("div",{className:"text-sm text-slate-600",children:h.phone})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:K,className:"flex-1 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800",children:"Use Existing Customer"}),s.jsx("button",{type:"button",onClick:()=>f(null),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Create New Anyway"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:w.name,onChange:T=>j({...w,name:T.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Company Name"}),s.jsx("input",{type:"text",value:w.company_name,onChange:T=>j({...w,company_name:T.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:w.email,onChange:T=>j({...w,email:T.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Phone"}),s.jsx("input",{type:"tel",value:w.phone,onChange:T=>j({...w,phone:T.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]})]})]}),s.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[s.jsx("h3",{className:"font-medium text-slate-900 mb-4",children:"Event Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Event Name / Title"}),s.jsx("input",{type:"text",value:B.event_name,onChange:T=>p({...B,event_name:T.target.value}),placeholder:"e.g., John & Jane Wedding",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[s.jsx(Ro,{className:"w-4 h-4 inline mr-1"}),"Event Date"]}),s.jsx("input",{type:"date",value:B.event_date,onChange:T=>p({...B,event_date:T.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Kind of Event"}),s.jsxs("select",{value:B.event_type,onChange:T=>p({...B,event_type:T.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select event type..."}),i.map(T=>s.jsx("option",{value:T.name,children:T.name},T.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Expected PAX"}),s.jsx("input",{type:"number",value:B.expected_pax,onChange:T=>p({...B,expected_pax:T.target.value}),placeholder:"Number of attendees",min:"0",step:"1",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Projected Event Value ()"}),s.jsx("input",{type:"number",value:B.event_value,onChange:T=>p({...B,event_value:T.target.value}),placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Source"}),s.jsx("input",{type:"text",value:B.source,onChange:T=>p({...B,source:T.target.value}),placeholder:"e.g., Website, Referral, Cold Call",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Notes"}),s.jsx("textarea",{value:B.notes,onChange:T=>p({...B,notes:T.target.value}),rows:4,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent resize-none",placeholder:"Add any additional notes..."})]}),s.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-slate-200",children:[s.jsx("button",{type:"button",onClick:()=>e(!1),className:"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:x,className:"flex items-center gap-2 px-6 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(FA,{className:"w-4 h-4"}),x?"Saving...":"Save Lead"]})]})]})]})})}const c0=["Admin","Manager","Sales Representative"],VE=["Admin"],$E=["Admin","Manager","Sales Representative"];async function kj(){const{data:t,error:e}=await ge.rpc("check_user_role");return e?(console.error("Error fetching user role:",e),"Viewer"):t||"Viewer"}async function Jv(){const t=await kj();return{canEdit:c0.includes(t),canDelete:$E.includes(t),canMove:c0.includes(t),isViewOnly:!c0.includes(t),role:t}}async function zE(t){const{data:e,error:r}=await ge.rpc("has_verified_payment_quotation",{quotation_uuid:t});if(r)return console.error("Error checking quotation payment status:",r),{isLocked:!1,hasVerifiedPayment:!1};const n=await kj(),a=e&&!VE.includes(n);return{isLocked:a,hasVerifiedPayment:e||!1,lockReason:a?"Locked: This record has a verified payment attached.":void 0}}async function WE(t){const{data:e,error:r}=await ge.rpc("can_delete_quotation",{quotation_uuid:t});return r?(console.error("Error checking quotation delete permission:",r),!1):e||!1}async function Pg(t,e,r,n,a){const{error:o}=await ge.rpc("log_audit_action",{p_table_name:t,p_record_id:e,p_action:r,p_old_data:n?JSON.stringify(n):null,p_new_data:a?JSON.stringify(a):null});o&&console.error("Error logging audit action:",o)}function JE({onViewLead:t,onViewCalendar:e}){const{currentCompany:r,permissions:n}=ir(),{user:a}=Jr(),[o,l]=Y.useState([]),[c,A]=Y.useState([]),[u,i]=Y.useState(!0),[d,h]=Y.useState(null),[f,w]=Y.useState(null),[j,B]=Y.useState(!1),[p,x]=Y.useState(null),[C,S]=Y.useState(null),[E,I]=Y.useState(""),[H,M]=Y.useState(""),[D,K]=Y.useState("created"),[U,F]=Y.useState("desc"),[k,T]=Y.useState(""),[P,$]=Y.useState(""),[ee,V]=Y.useState(""),[W,te]=Y.useState([]),[oe,O]=Y.useState(null),[z,ne]=Y.useState({});Y.useEffect(()=>{r&&(ve(),Z(),q())},[r]);const Z=async()=>{const pe=await Jv();O(pe)},q=async()=>{if(!r)return;const{data:pe}=await ge.from("leads").select("created_by").eq("company_id",r.id).not("created_by","is",null);if(pe){const Ie=[...new Set(pe.map(ke=>ke.created_by).filter(ke=>ke!=null))];if(Ie.length>0){const{data:ke}=await ge.from("users").select("id, email").in("id",Ie);ke&&te(ke)}}},Ae=async pe=>{if(pe.length===0){ne({});return}try{const{data:Ie,error:ke}=await ge.rpc("can_delete_leads_batch",{lead_uuids:pe});if(ke){console.error("Error checking lead delete permissions:",ke),ne({});return}ne(Ie||{})}catch(Ie){console.error("Error in batch permission check:",Ie),ne({})}},ve=async()=>{if(!r)return;i(!0);const[pe,Ie]=await Promise.all([ge.from("pipeline_stages").select("*").eq("company_id",r.id).order("order"),ge.from("leads").select(`
          *,
          customer:customers!leads_customer_id_fkey(*)
        `).eq("company_id",r.id).eq("is_archived",!1).order("created_at",{ascending:!1})]);if(pe.data&&A(pe.data),Ie.data){const ke=[...new Set(Ie.data.map(Ct=>Ct.created_by).filter(Ct=>Ct!=null))];let Ye={};if(ke.length>0){const{data:Ct}=await ge.from("users").select("id, email").in("id",ke);Ct&&(Ye=Ct.reduce((bt,ft)=>(bt[ft.id]={email:ft.email},bt),{}))}const Pe=Ie.data.map(Ct=>({...Ct,creator:Ct.created_by?Ye[Ct.created_by]:void 0}));l(Pe),i(!1);const Xe=Ie.data.map(Ct=>Ct.id);Ae(Xe)}else i(!1)},be=(pe,Ie)=>{if(!(oe!=null&&oe.canMove)){pe.preventDefault();return}h(Ie),pe.dataTransfer.effectAllowed="move"},Ne=(pe,Ie)=>{pe.preventDefault(),pe.dataTransfer.dropEffect="move",w(Ie)},Te=()=>{w(null)},De=async(pe,Ie)=>{if(pe.preventDefault(),w(null),!d||d.stage_id===Ie){h(null);return}const ke=d.stage_id;l(Pe=>Pe.map(Xe=>Xe.id===d.id?{...Xe,stage_id:Ie}:Xe));const{error:Ye}=await ge.from("leads").update({stage_id:Ie,updated_at:new Date().toISOString()}).eq("id",d.id);Ye?await ve():await Pg("leads",d.id,"moved",{stage_id:ke},{stage_id:Ie}),h(null)},We=pe=>{x(pe),B(!0)},_e=pe=>{t==null||t(pe.id)},de=async pe=>{if(!z[pe.id]){alert("You do not have permission to delete this lead. It may have a verified payment attached.");return}if(!confirm(`Are you sure you want to delete the lead "${pe.name}"?`))return;const{error:ke}=await ge.from("leads").update({is_archived:!0}).eq("id",pe.id);ke||(await Pg("leads",pe.id,"deleted",{lead:pe},null),await ve())},Ut=()=>{x(null),B(!0)},dt=(pe,Ie=!1)=>(Ie?Tt:o).filter(Ye=>Ye.stage_id===pe),ot=pe=>dt(pe).reduce((Ie,ke)=>Ie+(ke.event_value||0),0),ze=pe=>pe?new Date(pe).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):null,gt=pe=>""+new Intl.NumberFormat("en-PH",{minimumFractionDigits:0,maximumFractionDigits:0}).format(pe),et=pe=>{S(pe.id),I(pe.name)},It=async pe=>{if(!E.trim())return;const{error:Ie}=await ge.from("pipeline_stages").update({name:E,updated_at:new Date().toISOString()}).eq("id",pe);Ie||(await ve(),S(null))};if(u)return s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"text-slate-600",children:"Loading pipeline..."})});if(c.length===0)return s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-lg border-2 border-dashed border-slate-300",children:[s.jsx("p",{className:"text-slate-600 mb-4",children:"No pipeline stages configured for this company."}),s.jsx("p",{className:"text-sm text-slate-500",children:"Go to Settings  Pipeline to create your pipeline stages."})]})});const vt=pe=>[...pe].sort((Ie,ke)=>{let Ye=0;switch(D){case"created":{const Pe=new Date(Ie.created_at||0).getTime();Ye=new Date(ke.created_at||0).getTime()-Pe;break}case"event_date":{const Pe=Ie.event_date?new Date(Ie.event_date).getTime():0,Xe=ke.event_date?new Date(ke.event_date).getTime():0;Ye=Pe-Xe;break}case"value_asc":{const Pe=Ie.expected_value||0,Xe=ke.expected_value||0;Ye=Pe-Xe;break}case"value_desc":{const Pe=Ie.expected_value||0;Ye=(ke.expected_value||0)-Pe;break}}return U==="asc"?Ye:-Ye}),Tt=o.filter(pe=>{var Ie,ke,Ye,Pe,Xe,Ct,bt,ft,Me,ct,nt,ut;if(H.trim()){const at=H.toLowerCase(),Le=((ke=(Ie=pe.customer)==null?void 0:Ie.name)==null?void 0:ke.toLowerCase())||"",lt=((Pe=(Ye=pe.customer)==null?void 0:Ye.company_name)==null?void 0:Pe.toLowerCase())||"",tt=((Xe=pe.event_name)==null?void 0:Xe.toLowerCase())||"",Ve=((Ct=pe.event_type)==null?void 0:Ct.toLowerCase())||"",it=((ft=(bt=pe.customer)==null?void 0:bt.email)==null?void 0:ft.toLowerCase())||"",jt=((ct=(Me=pe.customer)==null?void 0:Me.phone)==null?void 0:ct.toLowerCase())||"",Pt=((ut=(nt=pe.creator)==null?void 0:nt.email)==null?void 0:ut.toLowerCase())||"";if(!(Le.includes(at)||lt.includes(at)||tt.includes(at)||Ve.includes(at)||it.includes(at)||jt.includes(at)||Pt.includes(at)))return!1}if(k){const[at,Le]=k.split("-"),lt=new Date(pe.created_at||""),tt=lt.getFullYear().toString(),Ve=(lt.getMonth()+1).toString().padStart(2,"0");if(tt!==at||Ve!==Le)return!1}if(P&&pe.event_date){const[at,Le]=P.split("-"),lt=new Date(pe.event_date),tt=lt.getFullYear().toString(),Ve=(lt.getMonth()+1).toString().padStart(2,"0");if(tt!==at||Ve!==Le)return!1}return!(ee&&pe.created_by!==ee)}),Se=vt(Tt);return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Pipeline"}),s.jsxs("div",{className:"flex items-center gap-3",children:[e&&s.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:[s.jsx(Ro,{className:"w-4 h-4"}),"Calendar"]}),n.leads.create&&s.jsxs("button",{onClick:Ut,className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:[s.jsx(mn,{className:"w-4 h-4"}),"Add Lead"]})]})]}),s.jsxs("div",{className:"mb-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[s.jsxs("div",{className:"relative flex-1 max-w-md",children:[s.jsx(jl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),s.jsx("input",{type:"text",value:H,onChange:pe=>M(pe.target.value),placeholder:"Search by customer, event, email, phone...",className:"w-full pl-10 pr-10 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent"}),H&&s.jsx("button",{onClick:()=>M(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:s.jsx(mr,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(AE,{className:"w-4 h-4 text-slate-600"}),s.jsxs("select",{value:D,onChange:pe=>K(pe.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-slate-900 focus:border-transparent",children:[s.jsx("option",{value:"created",children:"Date Created"}),s.jsx("option",{value:"event_date",children:"Event Date"}),s.jsx("option",{value:"value_asc",children:"Value (Low to High)"}),s.jsx("option",{value:"value_desc",children:"Value (High to Low)"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm text-slate-600 whitespace-nowrap",children:"Created:"}),s.jsxs("select",{value:k.split("-")[1]||"",onChange:pe=>{const Ie=k.split("-")[0]||new Date().getFullYear();T(pe.target.value?`${Ie}-${pe.target.value}`:"")},className:"px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-slate-900 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Month"}),s.jsx("option",{value:"01",children:"January"}),s.jsx("option",{value:"02",children:"February"}),s.jsx("option",{value:"03",children:"March"}),s.jsx("option",{value:"04",children:"April"}),s.jsx("option",{value:"05",children:"May"}),s.jsx("option",{value:"06",children:"June"}),s.jsx("option",{value:"07",children:"July"}),s.jsx("option",{value:"08",children:"August"}),s.jsx("option",{value:"09",children:"September"}),s.jsx("option",{value:"10",children:"October"}),s.jsx("option",{value:"11",children:"November"}),s.jsx("option",{value:"12",children:"December"})]}),s.jsxs("select",{value:k.split("-")[0]||"",onChange:pe=>{const Ie=k.split("-")[1]||"";T(pe.target.value&&Ie?`${pe.target.value}-${Ie}`:"")},className:"px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-slate-900 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Year"}),Array.from({length:10},(pe,Ie)=>new Date().getFullYear()-2+Ie).map(pe=>s.jsx("option",{value:pe,children:pe},pe))]}),k&&s.jsx("button",{onClick:()=>T(""),className:"text-slate-400 hover:text-slate-600",title:"Clear filter",children:s.jsx(mr,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm text-slate-600 whitespace-nowrap",children:"Event:"}),s.jsxs("select",{value:P.split("-")[1]||"",onChange:pe=>{const Ie=P.split("-")[0]||new Date().getFullYear();$(pe.target.value?`${Ie}-${pe.target.value}`:"")},className:"px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-slate-900 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Month"}),s.jsx("option",{value:"01",children:"January"}),s.jsx("option",{value:"02",children:"February"}),s.jsx("option",{value:"03",children:"March"}),s.jsx("option",{value:"04",children:"April"}),s.jsx("option",{value:"05",children:"May"}),s.jsx("option",{value:"06",children:"June"}),s.jsx("option",{value:"07",children:"July"}),s.jsx("option",{value:"08",children:"August"}),s.jsx("option",{value:"09",children:"September"}),s.jsx("option",{value:"10",children:"October"}),s.jsx("option",{value:"11",children:"November"}),s.jsx("option",{value:"12",children:"December"})]}),s.jsxs("select",{value:P.split("-")[0]||"",onChange:pe=>{const Ie=P.split("-")[1]||"";$(pe.target.value&&Ie?`${pe.target.value}-${Ie}`:"")},className:"px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-slate-900 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Year"}),Array.from({length:10},(pe,Ie)=>new Date().getFullYear()-2+Ie).map(pe=>s.jsx("option",{value:pe,children:pe},pe))]}),P&&s.jsx("button",{onClick:()=>$(""),className:"text-slate-400 hover:text-slate-600",title:"Clear filter",children:s.jsx(mr,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm text-slate-600 whitespace-nowrap",children:"Creator:"}),s.jsxs("select",{value:ee,onChange:pe=>V(pe.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-slate-900 focus:border-transparent",children:[s.jsx("option",{value:"",children:"All Creators"}),W.map(pe=>s.jsx("option",{value:pe.id,children:pe.email},pe.id))]}),ee&&s.jsx("button",{onClick:()=>V(""),className:"text-slate-400 hover:text-slate-600",title:"Clear filter",children:s.jsx(mr,{className:"w-4 h-4"})})]}),(k||P)&&s.jsx("button",{onClick:()=>{T(""),$("")},className:"text-sm text-slate-600 hover:text-slate-900 underline",children:"Clear all filters"})]}),(H||k||P)&&s.jsxs("p",{className:"text-sm text-slate-600",children:[Tt.length," lead",Tt.length!==1?"s":""," found"]})]}),s.jsx("div",{className:"flex gap-4 overflow-x-auto pb-6",children:c.map(pe=>{const Ie=Se.filter(Pe=>Pe.stage_id===pe.id),ke=ot(pe.id),Ye=f===pe.id;return s.jsxs("div",{className:"flex-shrink-0 w-80",onDragOver:Pe=>Ne(Pe,pe.id),onDragLeave:Te,onDrop:Pe=>De(Pe,pe.id),children:[s.jsxs("div",{className:"rounded-t-lg px-4 py-3 flex items-center justify-between",style:{backgroundColor:pe.color},children:[s.jsx("div",{className:"flex items-center gap-2 flex-1",children:C===pe.id?s.jsx("input",{type:"text",value:E,onChange:Pe=>I(Pe.target.value),onBlur:()=>It(pe.id),onKeyDown:Pe=>{Pe.key==="Enter"&&It(pe.id),Pe.key==="Escape"&&S(null)},className:"px-2 py-1 text-sm font-semibold text-white bg-white/20 rounded border-none outline-none focus:bg-white/30",autoFocus:!0}):s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"font-semibold text-white",children:pe.name}),n.leads.update&&s.jsx("button",{onClick:()=>et(pe),className:"p-1 text-white/70 hover:text-white transition-colors",children:s.jsx(co,{className:"w-3 h-3"})})]})}),s.jsx("div",{className:"text-sm font-medium text-white",children:Ie.length})]}),s.jsxs("div",{className:"bg-slate-50 px-4 py-2 text-xs text-slate-600 border-x border-slate-200",children:["Total: ",gt(ke)]}),s.jsxs("div",{className:`min-h-[500px] bg-slate-100 border-x border-b border-slate-200 rounded-b-lg p-3 space-y-3 transition-colors ${Ye?"bg-slate-200 border-slate-400":""}`,children:[Ie.map(Pe=>s.jsxs("div",{draggable:!0,onDragStart:Xe=>be(Xe,Pe),className:"bg-white rounded-lg border border-slate-200 p-4 cursor-move hover:shadow-md transition-shadow group",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-slate-900 text-sm leading-tight",children:Pe.event_name||Pe.name||"Untitled Lead"}),Pe.event_name&&Pe.name&&s.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:Pe.name})]}),s.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[s.jsx("button",{onClick:Xe=>{Xe.stopPropagation(),_e(Pe)},className:"p-1 text-slate-400 hover:text-blue-600 transition-colors",title:"View",children:s.jsx(cu,{className:"w-4 h-4"})}),(oe==null?void 0:oe.canEdit)&&s.jsx("button",{onClick:Xe=>{Xe.stopPropagation(),We(Pe)},className:"p-1 text-slate-400 hover:text-slate-900 transition-colors",title:"Edit",children:s.jsx(co,{className:"w-4 h-4"})}),(oe==null?void 0:oe.canDelete)&&s.jsx("button",{onClick:Xe=>{Xe.stopPropagation(),z[Pe.id]&&de(Pe)},disabled:!z[Pe.id],className:`p-1 transition-colors ${z[Pe.id]?"text-slate-400 hover:text-red-600 cursor-pointer":"text-slate-300 cursor-not-allowed"}`,title:z[Pe.id]?"Delete":"Locked: This record has a verified payment attached.",children:z[Pe.id]?s.jsx(Ba,{className:"w-4 h-4"}):s.jsx(_j,{className:"w-4 h-4"})})]})]}),Pe.customer&&s.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[s.jsx(Dm,{className:"w-3 h-3 text-slate-500"}),s.jsx("span",{className:"text-xs font-medium text-slate-700",children:Pe.customer.name})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[Pe.event_date&&s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-700",children:ze(Pe.event_date)}),Pe.event_type&&s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-slate-100 text-slate-700",children:Pe.event_type}),Pe.expected_pax&&Pe.expected_pax>0&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-700",children:[s.jsx(Bi,{className:"w-3 h-3"}),Pe.expected_pax," PAX"]})]}),Pe.event_value&&Pe.event_value>0&&s.jsx("div",{className:"text-sm font-semibold text-green-700 mb-2",children:gt(Pe.event_value)}),Pe.company_name&&s.jsx("p",{className:"text-xs text-slate-600 mb-1",children:Pe.company_name}),Pe.creator&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 pt-2 border-t border-slate-100",children:[s.jsx(Is,{className:"w-3 h-3"}),s.jsx("span",{className:"truncate",children:Pe.creator.email})]})]},Pe.id)),Ie.length===0&&s.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"No leads in this stage"})]})]},pe.id)})}),j&&s.jsx(GE,{lead:p,onClose:()=>{B(!1),x(null)},onSuccess:ve})]})}function XE({leadId:t}){const{currentCompany:e}=ir(),[r,n]=Y.useState([]),[a,o]=Y.useState(!0);Y.useEffect(()=>{l()},[t]);const l=async()=>{if(!e)return;const i=[],{data:d}=await ge.from("activities").select("*, users(email)").eq("lead_id",t).order("activity_date",{ascending:!1});d&&d.forEach(j=>{var B;i.push({id:j.id,type:"activity",title:j.title,description:j.description||"",timestamp:j.activity_date,user:(B=j.users)==null?void 0:B.email})});const{data:h}=await ge.from("quotations").select("*").eq("lead_id",t).order("created_at",{ascending:!1});h&&h.forEach(j=>{i.push({id:j.id,type:"quotation",title:`Quotation ${j.quotation_no} created`,description:`Status: ${j.status}`,timestamp:j.created_at}),j.status==="sent"&&j.updated_at!==j.created_at&&i.push({id:`${j.id}-sent`,type:"quotation",title:`Quotation ${j.quotation_no} sent`,description:"Quotation sent to customer",timestamp:j.updated_at}),j.signed_at&&i.push({id:`${j.id}-signed`,type:"quotation",title:`Quotation ${j.quotation_no} accepted`,description:`Signed by ${j.signed_by}`,timestamp:j.signed_at})});const{data:f}=await ge.from("email_messages").select("*").eq("lead_id",t).order("created_at",{ascending:!1});f&&f.forEach(j=>{i.push({id:j.id,type:"email",title:j.subject,description:`Sent to ${j.recipient_email}`,timestamp:j.sent_at||j.created_at})});const{data:w}=await ge.from("payments").select(`
        *,
        quotations(quotation_no)
      `).in("quotation_id",(h==null?void 0:h.map(j=>j.id))||[]).order("created_at",{ascending:!1});w&&w.forEach(j=>{var p;const B=(p=j.quotations)==null?void 0:p.quotation_no;i.push({id:j.id,type:"payment",title:`Payment recorded for ${B}`,description:`${j.currency} ${parseFloat(j.amount).toLocaleString()} via ${j.payment_method}`,timestamp:j.payment_date,status:j.payment_status}),j.verified_at&&j.verification_status&&i.push({id:`${j.id}-verified`,type:"payment",title:`Payment ${j.verification_status}`,description:j.verification_notes||`Payment ${j.verification_status} by finance team`,timestamp:j.verified_at,status:j.verification_status})}),i.sort((j,B)=>new Date(B.timestamp).getTime()-new Date(j.timestamp).getTime()),n(i),o(!1)},c=(i,d)=>{switch(i){case"activity":return s.jsx(Fj,{className:"w-4 h-4"});case"quotation":return s.jsx(ys,{className:"w-4 h-4"});case"email":return s.jsx(Is,{className:"w-4 h-4"});case"payment":return d==="verified"?s.jsx(IE,{className:"w-4 h-4"}):d==="rejected"||d==="failed"?s.jsx(su,{className:"w-4 h-4"}):s.jsx(fl,{className:"w-4 h-4"});case"status_change":return s.jsx(dl,{className:"w-4 h-4"});default:return s.jsx(dl,{className:"w-4 h-4"})}},A=(i,d)=>{switch(i){case"activity":return"bg-blue-100 text-blue-600";case"quotation":return"bg-emerald-100 text-emerald-600";case"email":return"bg-purple-100 text-purple-600";case"payment":return d==="verified"?"bg-green-100 text-green-600":d==="rejected"||d==="failed"?"bg-red-100 text-red-600":"bg-cyan-100 text-cyan-600";case"status_change":return"bg-amber-100 text-amber-600";default:return"bg-slate-100 text-slate-600"}},u=i=>{const d=new Date(i),f=(new Date().getTime()-d.getTime())/(1e3*60*60);return f<24?d.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}):f<168?d.toLocaleDateString("en-US",{weekday:"short",hour:"numeric",minute:"2-digit",hour12:!0}):d.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})};return a?s.jsx("div",{className:"text-center py-8 text-slate-600",children:"Loading timeline..."}):r.length===0?s.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-lg",children:[s.jsx(dl,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),s.jsx("p",{className:"text-slate-600",children:"No activity yet"})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Timeline"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-slate-200"}),s.jsx("div",{className:"space-y-6",children:r.map(i=>s.jsxs("div",{className:"relative flex gap-4",children:[s.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${A(i.type,i.status)} z-10`,children:c(i.type,i.status)}),s.jsxs("div",{className:"flex-1 bg-white border border-slate-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-1",children:[s.jsx("h4",{className:"font-medium text-slate-900",children:i.title}),s.jsx("span",{className:"text-xs text-slate-500",children:u(i.timestamp)})]}),i.description&&s.jsx("p",{className:"text-sm text-slate-600 mb-2",children:i.description}),i.user&&s.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500",children:[s.jsx(Dm,{className:"w-3 h-3"}),i.user]})]})]},i.id))})]})]})}function Rm({quotation:t,leadData:e,customerData:r,onClose:n,onSuccess:a}){const{currentCompany:o}=ir(),{user:l}=Jr(),[c,A]=Y.useState(e||null),[u,i]=Y.useState(r||null),[d,h]=Y.useState([]),[f,w]=Y.useState([]),[j,B]=Y.useState([]),[p,x]=Y.useState([]),[C,S]=Y.useState([]),[E,I]=Y.useState(""),[H,M]=Y.useState(null),[D,K]=Y.useState(""),[U,F]=Y.useState(""),[k,T]=Y.useState(""),[P,$]=Y.useState(!1),[ee,V]=Y.useState(!1),[W,te]=Y.useState(null),[oe,O]=Y.useState(!1),[z,ne]=Y.useState({name:"",description:"",price:0}),Z=()=>{const Se=new Date;return Se.setDate(Se.getDate()+7),Se.toISOString().split("T")[0]},[q,Ae]=Y.useState({quotation_date:new Date().toISOString().split("T")[0],expiration_date:Z(),vat_enabled:!1,vat_rate:12,notes:"",template_id:null,event_type_id:null,no_of_pax:null,event_date:null}),[ve,be]=Y.useState([{item_type:"product",description:"",quantity:1,unit_price:0,discount:0,subtotal:0}]);Y.useEffect(()=>{Te(),t!=null&&t.id?Ne():De()},[o]),Y.useEffect(()=>{de()},[ve,q.vat_enabled,q.vat_rate]);const Ne=async()=>{if(!(t!=null&&t.id))return;const{data:Se}=await ge.from("quotations").select("*").eq("id",t.id).maybeSingle();if(Se){Ae({quotation_date:Se.quotation_date,expiration_date:Se.expiration_date||Z(),vat_enabled:Se.vat_enabled||!1,vat_rate:Se.vat_rate||12,notes:Se.notes||"",template_id:Se.template_id||null,event_type_id:Se.event_type_id||null,no_of_pax:Se.no_of_pax||null,event_date:Se.event_date||null}),K(Se.body_html||""),F(Se.terms_html||""),I(Se.template_id||"");const{data:pe}=await ge.from("customers").select("*").eq("id",Se.customer_id).maybeSingle();if(pe&&i(pe),Se.lead_id){const{data:ke}=await ge.from("leads").select("*").eq("id",Se.lead_id).maybeSingle();ke&&A(ke)}const{data:Ie}=await ge.from("quotation_lines").select("*").eq("quotation_id",t.id).order("order");Ie&&Ie.length>0&&be(Ie.map(ke=>({id:ke.id,item_type:"product",product_id:ke.product_id||void 0,description:ke.description,quantity:ke.quantity,unit_price:ke.unit_price,discount:ke.discount,subtotal:ke.subtotal})))}},Te=async()=>{var ke;if(!o)return;const{data:Se}=await ge.from("products").select("*").eq("company_id",o.id).eq("is_active",!0).order("name");if(Se&&h(Se),!r){const{data:Ye}=await ge.from("customers").select("*").eq("company_id",o.id).order("name");Ye&&w(Ye)}if(!e){const{data:Ye}=await ge.from("leads").select("*").eq("company_id",o.id).order("created_at",{ascending:!1});Ye&&B(Ye)}const{data:pe}=await ge.from("quotation_templates").select("*").eq("company_id",o.id).eq("archived",!1).order("name");pe&&x(pe);const{data:Ie}=await ge.from("event_types").select("*").eq("company_id",o.id).eq("is_active",!0).order("name");if(Ie&&S(Ie),l){const{data:Ye}=await ge.from("user_company_roles").select("role_id, roles(name)").eq("user_id",l.id).eq("company_id",o.id).maybeSingle();if(Ye){const Pe=((ke=Ye.roles)==null?void 0:ke.name)||"";T(Pe),$(Pe!=="admin"&&Pe!=="manager"&&!(t!=null&&t.id))}}},De=async()=>{if(!o)return;const{data:Se}=await ge.from("quotation_templates").select("*").eq("company_id",o.id).eq("is_default",!0).eq("archived",!1).maybeSingle();Se&&await We(Se.id)},We=async Se=>{const{data:pe}=await ge.from("quotation_templates").select("*").eq("id",Se).maybeSingle();if(!pe)return;M(pe),K(pe.body_html||""),F(pe.terms_html||""),I(Se),Ae(ke=>({...ke,template_id:Se}));const{data:Ie}=await ge.from("template_line_items").select("*").eq("template_id",Se).order("sort_order");Ie&&Ie.length>0&&be(Ie.map(ke=>({description:ke.name+(ke.description?`
${ke.description}`:""),quantity:ke.default_quantity,unit_price:ke.default_price,discount:0,subtotal:ke.default_quantity*ke.default_price})))},_e=Se=>{if(Se.item_type==="section")return 0;const pe=Se.quantity*Se.unit_price,Ie=pe*Se.discount/100;return pe-Ie},de=()=>ve.reduce((Se,pe)=>Se+_e(pe),0),Ut=()=>de(),dt=()=>q.vat_enabled?Ut()*q.vat_rate/100:0,ot=()=>Ut()+dt(),ze=(Se,pe,Ie)=>{const ke=[...ve];if(ke[Se]={...ke[Se],[pe]:Ie},pe==="product_id"&&Ie){const Ye=d.find(Pe=>Pe.id===Ie);Ye&&(ke[Se].description=Ye.name,ke[Se].unit_price=Ye.price||0)}ke[Se].subtotal=_e(ke[Se]),be(ke)},gt=()=>{be([...ve,{item_type:"product",description:"",quantity:1,unit_price:0,discount:0,subtotal:0}])},et=Se=>{ve.length>1&&be(ve.filter((pe,Ie)=>Ie!==Se))},It=async()=>{if(!o||!z.name){te({type:"error",text:"Please enter a product name"});return}try{const{data:Se,error:pe}=await ge.from("products").insert({company_id:o.id,name:z.name,description:z.description,price:z.price,is_active:!0}).select().single();if(pe)throw pe;h([...d,Se]),ne({name:"",description:"",price:0}),O(!1),te({type:"success",text:"Product created successfully"}),setTimeout(()=>te(null),3e3)}catch(Se){te({type:"error",text:Se.message||"Failed to create product"})}},vt=async Se=>{if(Se.preventDefault(),!(!o||!l||!u)){if(ve.some(pe=>!pe.description)){te({type:"error",text:"Please fill in all line items"});return}V(!0),te(null);try{const pe=q.expiration_date?q.expiration_date:new Date(Date.now()+6048e5).toISOString().split("T")[0],Ie=t==null?void 0:t.id;let ke=t==null?void 0:t.id;if(Ie){const{error:Xe}=await ge.from("quotations").update({lead_id:(c==null?void 0:c.id)||null,customer_id:u.id,quotation_date:q.quotation_date,expiration_date:pe,subtotal:Ut(),vat_enabled:q.vat_enabled,vat_rate:q.vat_rate,vat_amount:dt(),total_amount:ot(),notes:q.notes,body_html:D,terms_html:U,template_id:q.template_id,event_type_id:q.event_type_id,no_of_pax:q.no_of_pax,event_date:q.event_date}).eq("id",ke);if(Xe)throw Xe;await ge.from("quotation_lines").delete().eq("quotation_id",ke)}else{const Xe={company_id:o.id,customer_id:u.id,salesperson_id:l.id,quotation_date:q.quotation_date,expiration_date:pe,status:"draft",subtotal:Ut(),vat_enabled:q.vat_enabled,vat_rate:q.vat_rate,vat_amount:dt(),total_amount:ot(),notes:q.notes||"",body_html:D||"",terms_html:U||"",created_by:l.id,quotation_no:""};c!=null&&c.id&&(Xe.lead_id=c.id),q.template_id&&(Xe.template_id=q.template_id),q.event_type_id&&(Xe.event_type_id=q.event_type_id),q.no_of_pax&&(Xe.no_of_pax=q.no_of_pax),q.event_date&&(Xe.event_date=q.event_date);const{data:Ct,error:bt}=await ge.from("quotations").insert(Xe).select().single();if(bt)throw console.error("Quotation creation error:",bt),bt;ke=Ct.id}const Ye=ve.map((Xe,Ct)=>({quotation_id:ke,product_id:Xe.product_id||null,description:Xe.description,quantity:Xe.quantity,unit_price:Xe.unit_price,discount:Xe.discount,subtotal:_e(Xe),order:Ct})),{error:Pe}=await ge.from("quotation_lines").insert(Ye);if(Pe)throw Pe;await ge.from("audit_logs").insert({company_id:o.id,user_id:l.id,action:Ie?"update":"create",entity_type:"quotation",entity_id:ke}),te({type:"success",text:`Quotation ${Ie?"updated":"created"} successfully`}),setTimeout(()=>{a&&a(),n()},1500)}catch(pe){te({type:"error",text:pe.message||`Failed to ${t!=null&&t.id?"update":"create"} quotation`})}finally{V(!1)}}},Tt=Se=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(Se);return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:t!=null&&t.id?"Edit Quotation":"New Quotation"}),s.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600",children:s.jsx(mr,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:vt,className:"flex-1 overflow-y-auto p-6",children:[W&&s.jsx("div",{className:`mb-4 p-3 rounded-lg ${W.type==="success"?"bg-emerald-50 text-emerald-800":"bg-red-50 text-red-800"}`,children:W.text}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[s.jsx("h3",{className:"font-semibold text-slate-900 mb-3",children:"Event Details"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Event Type"}),s.jsxs("select",{value:q.event_type_id||"",onChange:Se=>Ae({...q,event_type_id:Se.target.value||null}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Select event type..."}),C.map(Se=>s.jsx("option",{value:Se.id,children:Se.name},Se.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"No. of Pax"}),s.jsx("input",{type:"number",value:q.no_of_pax||"",onChange:Se=>Ae({...q,no_of_pax:Se.target.value?parseInt(Se.target.value):null}),placeholder:"Number of guests",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Event Date"}),s.jsx("input",{type:"date",value:q.event_date||"",onChange:Se=>Ae({...q,event_date:Se.target.value||null}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-slate-900 mb-3",children:"Customer Information"}),u?s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-600",children:"Name:"}),s.jsx("p",{className:"font-medium text-slate-900",children:u.name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-600",children:"Email:"}),s.jsx("p",{className:"text-slate-900",children:u.email||"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-600",children:"Phone:"}),s.jsx("p",{className:"text-slate-900",children:u.phone||"N/A"})]})]}):s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Select Customer *"}),s.jsxs("select",{value:(u==null?void 0:u.id)||"",onChange:Se=>{const pe=f.find(ke=>ke.id===Se.target.value);i(pe||null);const Ie=j.filter(ke=>ke.customer_id===Se.target.value);Ie.length===1&&A(Ie[0])},className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900",required:!0,children:[s.jsx("option",{value:"",children:"Choose a customer..."}),f.map(Se=>s.jsx("option",{value:Se.id,children:Se.name},Se.id))]}),u&&s.jsxs("div",{className:"mt-3 space-y-1 text-sm",children:[s.jsxs("div",{className:"text-slate-600",children:["Email: ",s.jsx("span",{className:"text-slate-900",children:u.email||"N/A"})]}),s.jsxs("div",{className:"text-slate-600",children:["Phone: ",s.jsx("span",{className:"text-slate-900",children:u.phone||"N/A"})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[!e&&u&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Select Lead (Optional)"}),s.jsxs("select",{value:(c==null?void 0:c.id)||"",onChange:Se=>{const pe=j.find(Ie=>Ie.id===Se.target.value);A(pe||null)},className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900",children:[s.jsx("option",{value:"",children:"No lead (Direct quotation)"}),j.filter(Se=>Se.customer_id===u.id).map(Se=>s.jsxs("option",{value:Se.id,children:[Se.event_name," - ",new Date(Se.event_date).toLocaleDateString()]},Se.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Quotation Date"}),s.jsx("input",{type:"date",value:q.quotation_date,onChange:Se=>Ae({...q,quotation_date:Se.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Expiration Date (Optional)"}),s.jsx("input",{type:"date",value:q.expiration_date,onChange:Se=>Ae({...q,expiration_date:Se.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg"}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Defaults to 7 days if not set"})]})]})]}),!(t!=null&&t.id)&&s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Choose Template (Optional)"}),s.jsxs("select",{value:E,onChange:Se=>{Se.target.value&&We(Se.target.value)},className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"No template - Start from scratch"}),p.map(Se=>s.jsxs("option",{value:Se.id,children:[Se.name," ",Se.is_default?"(Default)":""]},Se.id))]})]}),(H==null?void 0:H.logo_url)&&s.jsxs("div",{className:"mb-6 p-4 bg-slate-50 border border-slate-200 rounded-lg",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Template Logo"}),s.jsx("div",{className:`flex ${H.logo_position==="center"?"justify-center":H.logo_position==="right"?"justify-end":"justify-start"}`,children:s.jsx("img",{src:H.logo_url,alt:"Template logo",style:{maxWidth:`${H.logo_max_width||200}px`},className:"border border-slate-300 rounded"})}),s.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"This logo will appear on the quotation PDF and email view."})]}),s.jsxs("div",{className:"mb-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Body / Introduction (HTML)"}),s.jsx("textarea",{value:D,onChange:Se=>K(Se.target.value),placeholder:"Enter introduction or body content. You can use HTML: <p>, <strong>, <ul>, <img src='url'>, <a href='url'>...",rows:4,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-mono text-sm",disabled:P}),P&&s.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Only admins and managers can edit this field"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Terms & Conditions (HTML)"}),s.jsx("textarea",{value:U,onChange:Se=>F(Se.target.value),placeholder:"Enter terms and conditions. Supports HTML formatting.",rows:4,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-mono text-sm",disabled:P}),P&&s.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Only admins and managers can edit this field"})]}),(H==null?void 0:H.custom_sections)&&H.custom_sections.length>0&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Additional Sections from Template"}),s.jsx("div",{className:"space-y-3",children:H.custom_sections.map((Se,pe)=>s.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-slate-900 mb-2",children:Se.title}),s.jsx("div",{className:"prose prose-sm max-w-none text-slate-700",dangerouslySetInnerHTML:{__html:Se.content}})]},pe))}),s.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"These sections are from the selected template and will appear on the quotation."})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"font-semibold text-slate-900",children:"Line Items"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>{be([...ve,{item_type:"section",description:"",quantity:0,unit_price:0,discount:0,subtotal:0}])},className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700 font-medium",children:[s.jsx(mn,{className:"w-4 h-4"}),"Add Section"]}),s.jsxs("button",{type:"button",onClick:gt,className:"flex items-center gap-1 text-sm text-slate-700 hover:text-slate-900",children:[s.jsx(mn,{className:"w-4 h-4"}),"Add Line"]})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full border border-slate-200 rounded-lg",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-700",children:"Product"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-700",children:"Description"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-700 w-24",children:"Qty"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-700 w-32",children:"Unit Price"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-700 w-24",children:"Discount %"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-700 w-32",children:"Subtotal"}),s.jsx("th",{className:"px-3 py-2 w-10"})]})}),s.jsx("tbody",{children:ve.map((Se,pe)=>Se.item_type==="section"?s.jsxs("tr",{className:"border-t border-slate-200 bg-slate-50",children:[s.jsx("td",{colSpan:6,className:"px-3 py-2",children:s.jsx("textarea",{value:Se.description,onChange:Ie=>ze(pe,"description",Ie.target.value),className:"w-full px-3 py-2 text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 min-h-[100px] font-mono",placeholder:"Enter section content (e.g., inclusions, notes, schedule...)"})}),s.jsx("td",{className:"px-3 py-2",children:s.jsx("button",{type:"button",onClick:()=>et(pe),className:"text-red-600 hover:text-red-700",children:s.jsx(Ba,{className:"w-4 h-4"})})})]},pe):s.jsxs("tr",{className:"border-t border-slate-200",children:[s.jsx("td",{className:"px-3 py-2",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("select",{value:Se.product_id||"",onChange:Ie=>{Ie.target.value==="__add_new__"?O(!0):ze(pe,"product_id",Ie.target.value)},className:"w-full px-2 py-1 text-sm border border-slate-300 rounded",children:[s.jsx("option",{value:"",children:"Select Product"}),d.map(Ie=>s.jsx("option",{value:Ie.id,children:Ie.name},Ie.id)),s.jsx("option",{value:"__add_new__",className:"text-blue-600 font-medium",children:"+ Add New Product"})]}),oe&&s.jsxs("div",{className:"absolute z-10 bg-white border-2 border-slate-300 rounded-lg shadow-lg p-4 w-80",children:[s.jsx("h4",{className:"font-semibold text-slate-900 mb-3",children:"Create New Product"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Product Name *"}),s.jsx("input",{type:"text",value:z.name,onChange:Ie=>ne({...z,name:Ie.target.value}),className:"w-full px-2 py-1 text-sm border border-slate-300 rounded",placeholder:"Enter product name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Description"}),s.jsx("input",{type:"text",value:z.description,onChange:Ie=>ne({...z,description:Ie.target.value}),className:"w-full px-2 py-1 text-sm border border-slate-300 rounded",placeholder:"Enter description"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Price"}),s.jsx("input",{type:"number",value:z.price,onChange:Ie=>ne({...z,price:parseFloat(Ie.target.value)||0}),className:"w-full px-2 py-1 text-sm border border-slate-300 rounded",placeholder:"0.00",step:"0.01",min:"0"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:It,className:"flex-1 px-3 py-1.5 bg-slate-900 text-white text-sm rounded hover:bg-slate-800",children:"Create"}),s.jsx("button",{type:"button",onClick:()=>{O(!1),ne({name:"",description:"",price:0})},className:"flex-1 px-3 py-1.5 bg-slate-200 text-slate-700 text-sm rounded hover:bg-slate-300",children:"Cancel"})]})]})]})]})}),s.jsx("td",{className:"px-3 py-2",children:s.jsx("input",{type:"text",value:Se.description,onChange:Ie=>ze(pe,"description",Ie.target.value),className:"w-full px-2 py-1 text-sm border border-slate-300 rounded",required:!0})}),s.jsx("td",{className:"px-3 py-2",children:s.jsx("input",{type:"number",value:Se.quantity,onChange:Ie=>ze(pe,"quantity",parseFloat(Ie.target.value)||0),className:"w-full px-2 py-1 text-sm border border-slate-300 rounded",min:"0",step:"0.01",required:!0})}),s.jsx("td",{className:"px-3 py-2",children:s.jsx("input",{type:"number",value:Se.unit_price,onChange:Ie=>ze(pe,"unit_price",parseFloat(Ie.target.value)||0),className:"w-full px-2 py-1 text-sm border border-slate-300 rounded",min:"0",step:"0.01",required:!0})}),s.jsx("td",{className:"px-3 py-2",children:s.jsx("input",{type:"number",value:Se.discount,onChange:Ie=>ze(pe,"discount",parseFloat(Ie.target.value)||0),className:"w-full px-2 py-1 text-sm border border-slate-300 rounded",min:"0",max:"100",step:"0.01"})}),s.jsx("td",{className:"px-3 py-2 text-sm font-medium text-slate-900",children:Tt(_e(Se))}),s.jsx("td",{className:"px-3 py-2",children:ve.length>1&&s.jsx("button",{type:"button",onClick:()=>et(pe),className:"text-red-600 hover:text-red-700",children:s.jsx(Ba,{className:"w-4 h-4"})})})]},pe))})]})})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("div",{className:"w-80 space-y-3",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600",children:"Subtotal:"}),s.jsx("span",{className:"font-medium text-slate-900",children:Tt(Ut())})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm text-slate-700",children:[s.jsx("input",{type:"checkbox",checked:q.vat_enabled,onChange:Se=>Ae({...q,vat_enabled:Se.target.checked}),className:"rounded border-slate-300"}),"VAT (",q.vat_rate,"%)"]}),q.vat_enabled&&s.jsx("span",{className:"text-sm font-medium text-slate-900",children:Tt(dt())})]}),s.jsxs("div",{className:"flex justify-between pt-3 border-t border-slate-200",children:[s.jsx("span",{className:"font-semibold text-slate-900",children:"Total:"}),s.jsx("span",{className:"text-xl font-bold text-slate-900",children:Tt(ot())})]}),!q.vat_enabled&&s.jsx("p",{className:"text-sm text-amber-600 font-medium text-right",children:"Total is exclusive of VAT"})]})}),s.jsxs("div",{className:"mt-6",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Notes (Optional)"}),s.jsx("textarea",{value:q.notes,onChange:Se=>Ae({...q,notes:Se.target.value}),rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg",placeholder:"Add any additional notes or terms..."})]}),s.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t border-slate-200",children:[s.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-slate-700 border border-slate-300 rounded-lg hover:bg-slate-50",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:ee,className:"flex items-center gap-2 px-6 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 disabled:opacity-50",children:[s.jsx(FA,{className:"w-4 h-4"}),ee?"Creating...":"Create Quotation"]})]})]})]})})}function YE({leadId:t,onViewQuotation:e}){var B;const{permissions:r}=ir(),[n,a]=Y.useState([]),[o,l]=Y.useState(!0),[c,A]=Y.useState(!1),u=((B=r==null?void 0:r.quotations)==null?void 0:B.create)||!1;Y.useEffect(()=>{i()},[t]);const i=async()=>{l(!0);const{data:p}=await ge.from("quotations").select("*").eq("lead_id",t).order("created_at",{ascending:!1});p&&a(p),l(!1)},d=p=>{switch(p){case"draft":return s.jsx(dl,{className:"w-4 h-4 text-slate-400"});case"sent":return s.jsx(Om,{className:"w-4 h-4 text-blue-500"});case"accepted":return s.jsx(Do,{className:"w-4 h-4 text-emerald-500"});case"declined":return s.jsx(su,{className:"w-4 h-4 text-red-500"});case"paid":return s.jsx(Do,{className:"w-4 h-4 text-green-600"});default:return s.jsx(ys,{className:"w-4 h-4 text-slate-400"})}},h=p=>{switch(p){case"draft":return"bg-slate-100 text-slate-700";case"sent":return"bg-blue-100 text-blue-700";case"accepted":return"bg-emerald-100 text-emerald-700";case"declined":return"bg-red-100 text-red-700";case"paid":return"bg-green-100 text-green-700";default:return"bg-slate-100 text-slate-700"}},f=p=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(p),w=p=>new Date(p).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),j=p=>{e==null||e(p.id)};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Quotations"}),u&&s.jsxs("button",{onClick:()=>A(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:[s.jsx(mn,{className:"w-4 h-4"}),"New Quotation"]})]}),n.length===0?s.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-lg",children:[s.jsx(ys,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),s.jsx("p",{className:"text-slate-600 mb-4",children:"No quotations yet"}),u&&s.jsx("button",{onClick:()=>A(!0),className:"text-sm text-slate-900 hover:underline",children:"Create your first quotation"})]}):s.jsx("div",{className:"space-y-3",children:n.map(p=>s.jsx("div",{className:"bg-white border border-slate-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h4",{className:"font-semibold text-slate-900",children:p.quotation_no}),s.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1 ${h(p.status)}`,children:[d(p.status),p.status.charAt(0).toUpperCase()+p.status.slice(1)]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-600",children:"Date:"}),s.jsx("p",{className:"font-medium text-slate-900",children:w(p.quotation_date)})]}),p.expiration_date&&s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-600",children:"Expires:"}),s.jsx("p",{className:"font-medium text-slate-900",children:w(p.expiration_date)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-600",children:"Total:"}),s.jsx("p",{className:"font-semibold text-slate-900 text-base",children:f(p.total_amount)})]})]}),p.vat_enabled&&s.jsxs("p",{className:"text-xs text-slate-500 mt-2",children:["Includes ",p.vat_rate,"% VAT"]})]}),s.jsxs("button",{onClick:()=>j(p),className:"flex items-center gap-2 px-3 py-2 text-sm text-slate-700 border border-slate-300 rounded-lg hover:bg-slate-50",children:[s.jsx(cu,{className:"w-4 h-4"}),"View"]})]})},p.id))})]}),c&&s.jsx(Rm,{leadId:t,onClose:()=>{A(!1),i()}})]})}function qE({leadId:t,onBack:e,onEdit:r,onViewQuotation:n}){const{currentCompany:a}=ir(),[o,l]=Y.useState(null),[c,A]=Y.useState(null),[u,i]=Y.useState(null),[d,h]=Y.useState(!0),[f,w]=Y.useState("details");Y.useEffect(()=>{j()},[t]);const j=async()=>{h(!0);const{data:x,error:C}=await ge.from("leads").select("*").eq("id",t).maybeSingle();if(C){console.error("Error loading lead:",C),h(!1);return}if(!x){h(!1);return}if(l(x),x.customer_id){const{data:S}=await ge.from("customers").select("*").eq("id",x.customer_id).maybeSingle();A(S)}if(x.stage_id){const{data:S}=await ge.from("pipeline_stages").select("*").eq("id",x.stage_id).maybeSingle();i(S)}h(!1)},B=x=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(x),p=x=>x?new Date(x).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"N/A";return d?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"text-slate-600",children:"Loading lead..."})})}):o?s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[s.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-slate-600 hover:text-slate-900",children:[s.jsx(Tm,{className:"w-5 h-5"}),"Back to Pipeline"]}),r&&s.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 text-slate-700 border border-slate-300 rounded-lg hover:bg-slate-50",children:[s.jsx(co,{className:"w-4 h-4"}),"Edit Lead"]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200",children:[s.jsx("div",{className:"p-6 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:o.event_name}),u&&s.jsx("span",{className:"inline-flex px-3 py-1 rounded-full text-sm font-medium",style:{backgroundColor:`${u.color}20`,color:u.color},children:u.name})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-2xl font-bold text-slate-900",children:B(o.expected_value||0)}),s.jsx("div",{className:"text-sm text-slate-600",children:"Expected Value"})]})]})}),s.jsx("div",{className:"border-b border-slate-200",children:s.jsxs("div",{className:"flex gap-8 px-6",children:[s.jsx("button",{onClick:()=>w("details"),className:`py-4 border-b-2 font-medium transition-colors ${f==="details"?"border-slate-900 text-slate-900":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Details"}),s.jsx("button",{onClick:()=>w("activities"),className:`py-4 border-b-2 font-medium transition-colors ${f==="activities"?"border-slate-900 text-slate-900":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Activities"}),s.jsx("button",{onClick:()=>w("quotations"),className:`py-4 border-b-2 font-medium transition-colors ${f==="quotations"?"border-slate-900 text-slate-900":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Quotations"})]})}),s.jsxs("div",{className:"p-6",children:[f==="details"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Customer Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Bi,{className:"w-5 h-5 text-slate-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600",children:"Customer"}),s.jsx("p",{className:"font-medium text-slate-900",children:(c==null?void 0:c.name)||"N/A"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Is,{className:"w-5 h-5 text-slate-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600",children:"Email"}),s.jsx("p",{className:"font-medium text-slate-900",children:(c==null?void 0:c.email)||"N/A"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(af,{className:"w-5 h-5 text-slate-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600",children:"Phone"}),s.jsx("p",{className:"font-medium text-slate-900",children:(c==null?void 0:c.phone)||"N/A"})]})]})]})]}),s.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Event Details"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ro,{className:"w-5 h-5 text-slate-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600",children:"Event Date"}),s.jsx("p",{className:"font-medium text-slate-900",children:p(o.event_date)})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(dl,{className:"w-5 h-5 text-slate-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600",children:"Event Type"}),s.jsx("p",{className:"font-medium text-slate-900",children:o.event_type||"N/A"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(_E,{className:"w-5 h-5 text-slate-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600",children:"Location"}),s.jsx("p",{className:"font-medium text-slate-900",children:o.event_location||"N/A"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Bi,{className:"w-5 h-5 text-slate-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600",children:"Expected PAX"}),s.jsx("p",{className:"font-medium text-slate-900",children:o.expected_pax||"N/A"})]})]})]})]}),o.notes&&s.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Notes"}),s.jsx("p",{className:"text-slate-600 whitespace-pre-wrap",children:o.notes})]})]}),f==="activities"&&s.jsx(XE,{leadId:t}),f==="quotations"&&s.jsx(YE,{leadId:t,onViewQuotation:n})]})]})]}):s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-slate-600 mb-4",children:"Lead not found"}),s.jsx("button",{onClick:e,className:"text-slate-900 hover:text-slate-700 underline",children:"Back to Leads"})]})})}function ZE(){const{currentCompany:t,permissions:e}=ir(),{user:r}=Jr(),[n,a]=Y.useState([]),[o,l]=Y.useState(!0),[c,A]=Y.useState("all");Y.useEffect(()=>{t&&u()},[t]);const u=async()=>{if(!t)return;l(!0);const{data:f}=await ge.from("activities").select("*").eq("company_id",t.id).order("created_at",{ascending:!1});f&&a(f),l(!1)},i=async f=>{if(!(e!=null&&e.activities.update))return;const{error:w}=await ge.from("activities").update({completed:!f.completed}).eq("id",f.id);w||(await ge.from("audit_logs").insert({company_id:t.id,entity_type:"activity",entity_id:f.id,action:"update",changed_fields:{completed:{old:f.completed,new:!f.completed}},user_id:r.id}),u())},d=f=>{switch(f){case"call":return af;case"email":return Is;case"meeting":return Bi;case"note":return ys;case"task":return uE;default:return ys}},h=n.filter(f=>c==="pending"?!f.completed:c==="completed"?f.completed:!0);return o?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"text-slate-600",children:"Loading activities..."})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Activities"}),(e==null?void 0:e.activities.create)&&s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:[s.jsx(mn,{className:"w-4 h-4"}),"Add Activity"]})]}),s.jsx("div",{className:"flex gap-2 mb-6",children:["all","pending","completed"].map(f=>s.jsx("button",{onClick:()=>A(f),className:`px-4 py-2 rounded-lg transition-colors ${c===f?"bg-slate-900 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:f.charAt(0).toUpperCase()+f.slice(1)},f))}),s.jsxs("div",{className:"space-y-3",children:[h.map(f=>{const w=d(f.type);return s.jsx("div",{className:`bg-white rounded-lg border p-4 transition-all ${f.completed?"border-green-200 bg-green-50":"border-slate-200 hover:shadow-md"}`,children:s.jsxs("div",{className:"flex items-start gap-4",children:[(e==null?void 0:e.activities.update)&&s.jsx("button",{onClick:()=>i(f),className:`mt-1 w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${f.completed?"bg-green-600 border-green-600":"border-slate-300 hover:border-slate-400"}`,children:f.completed&&s.jsx(Fs,{className:"w-3 h-3 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(w,{className:"w-5 h-5 text-slate-600"}),s.jsx("h3",{className:`font-medium ${f.completed?"text-slate-600 line-through":"text-slate-900"}`,children:f.title}),s.jsx("span",{className:"px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded",children:f.type})]}),f.description&&s.jsx("p",{className:"text-sm text-slate-600 mb-2",children:f.description}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[f.due_date&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ro,{className:"w-3 h-3"}),s.jsxs("span",{children:["Due: ",new Date(f.due_date).toLocaleDateString()]})]}),s.jsxs("span",{children:["Created: ",new Date(f.created_at).toLocaleDateString()]})]})]})]})},f.id)}),h.length===0&&s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-slate-600",children:"No activities found."})})]})]})}function e_({product:t,onClose:e,onSave:r}){const{currentCompany:n}=ir(),[a,o]=Y.useState({name:"",sku:"",description:"",price:"",currency:"PHP"}),[l,c]=Y.useState(!1);Y.useEffect(()=>{var u;t&&o({name:t.name||"",sku:t.sku||"",description:t.description||"",price:((u=t.price)==null?void 0:u.toString())||"",currency:t.currency||"PHP"})},[t]);const A=async u=>{if(u.preventDefault(),!!n){c(!0);try{const i={company_id:n.id,name:a.name.trim(),sku:a.sku.trim()||null,description:a.description.trim()||null,price:parseFloat(a.price),currency:a.currency,is_active:!0};if(t){const{error:d}=await ge.from("products").update(i).eq("id",t.id);if(d)throw d}else{const{error:d}=await ge.from("products").insert(i);if(d)throw d}r(),e()}catch(i){console.error("Error saving product:",i),alert("Failed to save product: "+i.message)}finally{c(!1)}}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:t?"Edit Product":"Add Product"}),s.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600",children:s.jsx(mr,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:A,className:"flex-1 overflow-y-auto p-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Product Name *"}),s.jsx("input",{type:"text",value:a.name,onChange:u=>o({...a,name:u.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"SKU"}),s.jsx("input",{type:"text",value:a.sku,onChange:u=>o({...a,sku:u.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500",placeholder:"e.g., PROD-001"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description"}),s.jsx("textarea",{value:a.description,onChange:u=>o({...a,description:u.target.value}),rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500",placeholder:"Product description..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Price *"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:a.price,onChange:u=>o({...a,price:u.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Currency"}),s.jsxs("select",{value:a.currency,onChange:u=>o({...a,currency:u.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500",children:[s.jsx("option",{value:"PHP",children:"PHP ()"}),s.jsx("option",{value:"USD",children:"USD ($)"}),s.jsx("option",{value:"EUR",children:"EUR ()"})]})]})]})]}),s.jsxs("div",{className:"flex items-center justify-end gap-3 mt-6 pt-6 border-t border-slate-200",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-slate-700 border border-slate-300 rounded-lg hover:bg-slate-50",disabled:l,children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:l,className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 disabled:opacity-50",children:[s.jsx(FA,{className:"w-4 h-4"}),l?"Saving...":"Save Product"]})]})]})]})})}function t_(){const{currentCompany:t,permissions:e}=ir(),[r,n]=Y.useState([]),[a,o]=Y.useState(!0),[l,c]=Y.useState(!1),[A,u]=Y.useState(null);Y.useEffect(()=>{t&&i()},[t]);const i=async()=>{if(!t)return;o(!0);const{data:B}=await ge.from("products").select("*").eq("company_id",t.id).eq("is_active",!0).order("name",{ascending:!0});B&&n(B),o(!1)},d=(B,p)=>{const x=parseFloat(String(B)).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2});return p==="PHP"?` ${x}`:p==="USD"?`$ ${x}`:p==="EUR"?` ${x}`:`${x} ${p}`},h=()=>{u(null),c(!0)},f=B=>{u(B),c(!0)},w=()=>{c(!1),u(null)},j=()=>{i()};return a?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"text-slate-600",children:"Loading products..."})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Products"}),(e==null?void 0:e.products.create)&&s.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:[s.jsx(mn,{className:"w-4 h-4"}),"Add Product"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(B=>s.jsxs("div",{onClick:()=>(e==null?void 0:e.products.update)&&f(B),className:"bg-white rounded-lg border border-slate-200 p-4 hover:shadow-md transition-shadow cursor-pointer",children:[s.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[s.jsx("div",{className:"p-2 bg-slate-100 rounded-lg",children:s.jsx(zv,{className:"w-5 h-5 text-slate-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-slate-900",children:B.name}),B.sku&&s.jsxs("p",{className:"text-xs text-slate-500",children:["SKU: ",B.sku]})]})]}),B.description&&s.jsx("p",{className:"text-sm text-slate-600 mb-3 line-clamp-2",children:B.description}),s.jsx("div",{className:"text-lg font-bold text-slate-900",children:d(B.price,B.currency)})]},B.id))}),r.length===0&&s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-slate-600",children:"No products yet."})})]}),l&&s.jsx(e_,{product:A,onClose:w,onSave:j})]})}const gw=[{key:"customers",label:"Customers"},{key:"leads",label:"Leads"},{key:"activities",label:"Activities"},{key:"products",label:"Products"},{key:"pipeline",label:"Pipeline"},{key:"event_types",label:"Event Types"},{key:"quotations",label:"Quotations"},{key:"payments",label:"Payment Verification"},{key:"settings",label:"Settings"}],vw=["create","read","update","delete"];function r_(){var K,U;const{currentCompany:t,userRole:e,hasAllAccess:r}=ir(),[n,a]=Y.useState([]),[o,l]=Y.useState({}),[c,A]=Y.useState(new Set),[u,i]=Y.useState(!0),[d,h]=Y.useState(null),[f,w]=Y.useState(!1),[j,B]=Y.useState(""),[p,x]=Y.useState(!1),C=(U=(K=e==null?void 0:e.roles)==null?void 0:K.name)==null?void 0:U.toLowerCase(),S=r||C==="admin";Y.useEffect(()=>{E()},[]);const E=async()=>{i(!0);const{data:F}=await ge.from("roles").select("*").is("company_id",null).order("name",{ascending:!0});if(F){a(F);const k={};F.forEach(T=>{k[T.id]=T.permissions}),l(k)}i(!1)},I=(F,k,T)=>{!S||!c.has(F)||l(P=>{const $={...P[F]},ee={...$[k]};return ee[T]=!ee[T],$[k]=ee,{...P,[F]:$}})},H=async F=>{h(F);const{error:k}=await ge.from("roles").update({permissions:o[F],updated_at:new Date().toISOString()}).eq("id",F);k?alert("Error saving permissions: "+k.message):(A(T=>{const P=new Set(T);return P.delete(F),P}),await E()),h(null)},M=F=>{const k=n.find(T=>T.id===F);k&&l(T=>({...T,[F]:k.permissions})),A(T=>{const P=new Set(T);return P.delete(F),P})},D=async()=>{if(!j.trim()){alert("Please enter a role name");return}x(!0);try{const F={};gw.forEach(T=>{F[T.key]={create:!1,read:!1,update:!1,delete:!1}});const{error:k}=await ge.from("roles").insert({name:j.trim(),company_id:null,permissions:F,is_system:!1});k?alert("Error creating role: "+k.message):(w(!1),B(""),await E())}catch(F){alert("Error creating role: "+F.message)}finally{x(!1)}};return u?s.jsx("div",{className:"text-slate-600",children:"Loading roles..."}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("p",{className:"text-slate-600",children:["Manage roles and permissions for your organization. ",S?"Click on any permission to toggle it.":"Only admins can modify permissions."]}),S&&s.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800",children:[s.jsx(mn,{className:"w-4 h-4"}),"Create Role"]})]}),s.jsx("div",{className:"space-y-6",children:n.map(F=>{const k=o[F.id]||F.permissions,T=c.has(F.id),P=d===F.id;return s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h3",{className:"font-semibold text-slate-900",children:F.name}),F.is_system&&s.jsx("span",{className:"px-2 py-1 text-xs bg-slate-200 text-slate-700 rounded",children:"System Role"})]}),S&&s.jsx("div",{className:"flex items-center gap-2",children:T?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>M(F.id),disabled:P,className:"px-3 py-1.5 text-sm text-slate-600 hover:text-slate-900 disabled:opacity-50",children:"Cancel"}),s.jsxs("button",{onClick:()=>H(F.id),disabled:P,className:"flex items-center gap-2 px-4 py-1.5 bg-slate-900 text-white text-sm rounded-lg hover:bg-slate-800 disabled:opacity-50",children:[s.jsx(FA,{className:"w-4 h-4"}),P?"Saving...":"Save Changes"]})]}):s.jsxs("button",{onClick:()=>A($=>new Set($).add(F.id)),className:"flex items-center gap-2 px-3 py-1.5 text-sm text-slate-600 hover:text-slate-900 border border-slate-300 rounded-lg hover:border-slate-400",children:[s.jsx(co,{className:"w-4 h-4"}),"Edit Permissions"]})})]})}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left text-sm font-medium text-slate-700 pb-3",children:"Module"}),vw.map($=>s.jsx("th",{className:"text-center text-sm font-medium text-slate-700 pb-3 px-4",children:$.charAt(0).toUpperCase()+$.slice(1)},$))]})}),s.jsx("tbody",{children:gw.map($=>{const ee=k[$.key]||{};return s.jsxs("tr",{className:"border-t border-slate-200",children:[s.jsx("td",{className:"py-3 text-sm text-slate-900",children:$.label}),vw.map(V=>{const W=ee[V];return s.jsx("td",{className:"text-center py-3",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("button",{onClick:()=>I(F.id,$.key,V),disabled:!S||!T,className:`p-1 rounded transition-colors ${S&&T?"hover:bg-slate-100 cursor-pointer":"cursor-default"}`,children:W?s.jsx(Fs,{className:"w-5 h-5 text-green-600"}):s.jsx(mr,{className:"w-5 h-5 text-slate-300"})})})},V)})]},$.key)})})]})})})]},F.id)})}),f&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Create New Role"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Role Name"}),s.jsx("input",{type:"text",value:j,onChange:F=>B(F.target.value),onKeyDown:F=>F.key==="Enter"&&D(),placeholder:"e.g., Accountant, Coordinator",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500",autoFocus:!0})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>{w(!1),B("")},disabled:p,className:"px-4 py-2 text-slate-600 hover:text-slate-900 disabled:opacity-50",children:"Cancel"}),s.jsx("button",{onClick:D,disabled:p||!j.trim(),className:"px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 disabled:opacity-50",children:p?"Creating...":"Create Role"})]})]})})]})}function n_(){const[t,e]=Y.useState([]),[r,n]=Y.useState(new Map),[a,o]=Y.useState(!0),[l,c]=Y.useState(!1),[A,u]=Y.useState(""),[i,d]=Y.useState(""),[h,f]=Y.useState(""),[w,j]=Y.useState(!1),[B,p]=Y.useState([]),[x,C]=Y.useState(!1),[S,E]=Y.useState([]),[I,H]=Y.useState([]),[M,D]=Y.useState(null),[K,U]=Y.useState(!1);Y.useEffect(()=>{F(),k(),T()},[]);const F=async()=>{o(!0);const{data:W,error:te}=await ge.from("users").select("id, email, full_name, is_active, has_all_access, created_at").order("created_at",{ascending:!1});if(W&&!te){e(W);const oe=new Map;for(const O of W){const{data:z}=await ge.from("user_company_roles").select("companies(name), roles(name)").eq("user_id",O.id);if(z){const ne=z.map(Z=>{var q,Ae;return{company_name:((q=Z.companies)==null?void 0:q.name)||"Unknown",role_name:((Ae=Z.roles)==null?void 0:Ae.name)||"Unknown"}});oe.set(O.id,ne)}}n(oe)}o(!1)},k=async()=>{const{data:W}=await ge.from("companies").select("id, name").eq("is_active",!0).order("name");W&&E(W)},T=async()=>{const{data:W}=await ge.from("roles").select("id, name").is("company_id",null).order("name");W&&H(W)},P=async()=>{if(!A||!i){alert("Please enter email and password");return}if(!w&&B.length===0){alert('Please select at least one business unit or enable "All Business Units" access');return}if(!w&&B.some(W=>!W.roleId)){alert("Please select a role for each business unit");return}C(!0);try{const{data:W,error:te}=await ge.auth.signUp({email:A,password:i});if(te)throw new Error(te.message);if(!W.user)throw new Error("Failed to create user");const{error:oe}=await ge.from("users").upsert({id:W.user.id,email:W.user.email,full_name:h||null,has_all_access:w||!1,is_active:!0},{onConflict:"id"});if(oe)throw new Error(oe.message);if(w){const{data:O}=await ge.from("companies").select("id").eq("is_active",!0);if(O&&O.length>0){const{data:z}=await ge.from("roles").select("id").eq("name","Admin").is("company_id",null).maybeSingle();if(z){const ne=O.map(q=>({user_id:W.user.id,company_id:q.id,role_id:z.id,is_active:!0})),{error:Z}=await ge.from("user_company_roles").insert(ne);if(Z)throw new Error(Z.message)}}}else if(B.length>0){const O=B.map(ne=>({user_id:W.user.id,company_id:ne.companyId,role_id:ne.roleId,is_active:!0})),{error:z}=await ge.from("user_company_roles").insert(O);if(z)throw new Error(z.message)}u(""),d(""),f(""),j(!1),p([]),c(!1),await F(),alert("User created successfully!")}catch(W){console.error("Error adding user:",W),alert(W.message||"Failed to add user")}finally{C(!1)}},$=async(W,te)=>{const{error:oe}=await ge.from("users").update({is_active:!te}).eq("id",W);oe||await F()},ee=async W=>{D(W),r.get(W.id);const{data:te}=await ge.from("user_company_roles").select("company_id, role_id").eq("user_id",W.id);te&&p(te.map(oe=>({companyId:oe.company_id,roleId:oe.role_id}))),j(W.has_all_access),U(!0)},V=async()=>{if(M){C(!0);try{if(await ge.from("users").update({has_all_access:w}).eq("id",M.id),await ge.from("user_company_roles").delete().eq("user_id",M.id),w){const{data:W}=await ge.from("companies").select("id").eq("is_active",!0),{data:te}=await ge.from("roles").select("id").eq("name","Admin").is("company_id",null).maybeSingle();if(W&&te){const oe=W.map(O=>({user_id:M.id,company_id:O.id,role_id:te.id,is_active:!0}));await ge.from("user_company_roles").insert(oe)}}else if(B.length>0){const W=B.map(te=>({user_id:M.id,company_id:te.companyId,role_id:te.roleId,is_active:!0}));await ge.from("user_company_roles").insert(W)}U(!1),D(null),p([]),j(!1),await F()}catch(W){console.error("Error updating user:",W),alert(W.message||"Failed to update user")}finally{C(!1)}}};return a?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"text-slate-500",children:"Loading users..."})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Universal User Management"}),s.jsx("p",{className:"text-slate-600 mt-1",children:"Manage all users across the platform. Assign access per business unit."})]}),s.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[s.jsx(Lj,{className:"w-4 h-4"}),"Add User"]})]}),l&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Add New User"}),s.jsx("button",{onClick:()=>c(!1),className:"text-slate-400 hover:text-slate-600",children:s.jsx(mr,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:A,onChange:W=>u(W.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"user@example.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Full Name (Optional)"}),s.jsx("input",{type:"text",value:h,onChange:W=>f(W.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"John Doe"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Password"}),s.jsx("input",{type:"password",value:i,onChange:W=>d(W.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""})]}),s.jsxs("div",{className:"border-t border-slate-200 pt-4",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:w,onChange:W=>{j(W.target.checked),W.target.checked&&p([])},className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Grant access to all business units"})]}),s.jsx("p",{className:"text-xs text-slate-500 mt-1 ml-6",children:"User will have admin access to all current and future business units"})]}),!w&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Business Units & Roles ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto border border-slate-300 rounded-lg p-3",children:S.map(W=>{var O;const te=B.some(z=>z.companyId===W.id),oe=((O=B.find(z=>z.companyId===W.id))==null?void 0:O.roleId)||"";return s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:te,onChange:z=>{z.target.checked?p([...B,{companyId:W.id,roleId:""}]):p(B.filter(ne=>ne.companyId!==W.id))},className:"mt-1 w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-medium text-slate-700 mb-1",children:W.name}),te&&s.jsxs("select",{value:oe,onChange:z=>{p(B.map(ne=>ne.companyId===W.id?{...ne,roleId:z.target.value}:ne))},className:"w-full px-2 py-1 text-sm border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select role"}),I.map(z=>s.jsx("option",{value:z.id,children:z.name},z.id))]})]})]},W.id)})})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-slate-700 border border-slate-300 rounded-lg hover:bg-slate-50",disabled:x,children:"Cancel"}),s.jsx("button",{onClick:P,disabled:x||!A||!i||!w&&B.length===0||!w&&B.some(W=>!W.roleId),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:x?"Adding...":"Add User"})]})]})]})}),K&&M&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Edit User Access"}),s.jsx("button",{onClick:()=>{U(!1),D(null),p([]),j(!1)},className:"text-slate-400 hover:text-slate-600",children:s.jsx(mr,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email"}),s.jsx("input",{type:"text",value:M.email,disabled:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-500"})]}),s.jsxs("div",{className:"border-t border-slate-200 pt-4",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:w,onChange:W=>{j(W.target.checked),W.target.checked&&p([])},className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Grant access to all business units"})]}),s.jsx("p",{className:"text-xs text-slate-500 mt-1 ml-6",children:"User will have admin access to all current and future business units"})]}),!w&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Business Units & Roles ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto border border-slate-300 rounded-lg p-3",children:S.map(W=>{var O;const te=B.some(z=>z.companyId===W.id),oe=((O=B.find(z=>z.companyId===W.id))==null?void 0:O.roleId)||"";return s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:te,onChange:z=>{z.target.checked?p([...B,{companyId:W.id,roleId:""}]):p(B.filter(ne=>ne.companyId!==W.id))},className:"mt-1 w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm font-medium text-slate-700 mb-1",children:W.name}),te&&s.jsxs("select",{value:oe,onChange:z=>{p(B.map(ne=>ne.companyId===W.id?{...ne,roleId:z.target.value}:ne))},className:"w-full px-2 py-1 text-sm border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select role"}),I.map(z=>s.jsx("option",{value:z.id,children:z.name},z.id))]})]})]},W.id)})})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx("button",{onClick:()=>{U(!1),D(null),p([]),j(!1)},className:"px-4 py-2 text-slate-700 border border-slate-300 rounded-lg hover:bg-slate-50",disabled:x,children:"Cancel"}),s.jsx("button",{onClick:V,disabled:x||!w&&B.length===0||!w&&B.some(W=>!W.roleId),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:x?"Updating...":"Update User"})]})]})]})}),s.jsx("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"User"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Access Level"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Business Units"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Joined"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:t.map(W=>{const te=r.get(W.id)||[];return s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-slate-100 rounded-full",children:s.jsx(Is,{className:"w-4 h-4 text-slate-600"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900",children:W.email}),W.full_name&&s.jsx("div",{className:"text-sm text-slate-500",children:W.full_name})]})]})}),s.jsx("td",{className:"px-6 py-4",children:W.has_all_access?s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-full",children:[s.jsx(Qj,{className:"w-3 h-3"}),"All Access"]}):s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-100 text-slate-700 text-xs font-medium rounded-full",children:[s.jsx(nu,{className:"w-3 h-3"}),"Specific Access"]})}),s.jsx("td",{className:"px-6 py-4",children:W.has_all_access?s.jsx("span",{className:"text-sm text-slate-600",children:"All business units"}):te.length>0?s.jsx("div",{className:"flex flex-col gap-1",children:te.map((oe,O)=>s.jsxs("div",{className:"text-sm text-slate-600",children:[s.jsx("span",{className:"font-medium",children:oe.company_name}),s.jsxs("span",{className:"text-slate-400",children:["  ",oe.role_name]})]},O))}):s.jsx("span",{className:"text-sm text-slate-400",children:"No access"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${W.is_active?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:W.is_active?"Active":"Inactive"})}),s.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:new Date(W.created_at).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:()=>ee(W),className:"text-sm text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1",children:[s.jsx(LE,{className:"w-4 h-4"}),"Edit"]}),s.jsx("button",{onClick:()=>$(W.id,W.is_active),className:"text-sm text-slate-600 hover:text-slate-700 font-medium",children:W.is_active?"Deactivate":"Activate"})]})})]},W.id)})})]})}),t.length===0&&s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-slate-500",children:"No users found"})})]})}function s_(){const{currentCompany:t}=ir(),[e,r]=Y.useState([]),[n,a]=Y.useState(!0),[o,l]=Y.useState(null),[c,A]=Y.useState(""),[u,i]=Y.useState(""),[d,h]=Y.useState(0),[f,w]=Y.useState(!1),[j,B]=Y.useState(""),[p,x]=Y.useState("#6b7280"),[C,S]=Y.useState(50);Y.useEffect(()=>{t&&E()},[t]);const E=async()=>{if(!t)return;a(!0);const{data:U}=await ge.from("pipeline_stages").select("*").eq("company_id",t.id).order("order");U&&r(U),a(!1)},I=async()=>{if(!t||!j.trim())return;const U=Math.max(...e.map(k=>k.order),-1),{error:F}=await ge.from("pipeline_stages").insert({company_id:t.id,name:j.trim(),color:p,order:U+1,probability:C,is_default:!1});F||(await E(),B(""),x("#6b7280"),S(50),w(!1))},H=async U=>{const{error:F}=await ge.from("pipeline_stages").update({name:c,color:u,probability:d,updated_at:new Date().toISOString()}).eq("id",U);F||(await E(),l(null))},M=async U=>{const F=e.find($=>$.id===U),{data:k}=await ge.from("leads").select("id",{count:"exact",head:!0}).eq("stage_id",U),T=k?1:0;if(T>0){if(!confirm(`This stage has ${T} lead(s). Are you sure you want to delete it? Leads will need to be reassigned.`))return}else if(!confirm(`Are you sure you want to delete the "${F==null?void 0:F.name}" stage?`))return;const{error:P}=await ge.from("pipeline_stages").delete().eq("id",U);P?alert("Error deleting stage: "+P.message):await E()},D=async(U,F)=>{const k=e.findIndex(ee=>ee.id===U);if(k===-1||k===0)return;const T=k-1,P=[...e];[P[k],P[T]]=[P[T],P[k]];const $=P.map((ee,V)=>({id:ee.id,order:V,updated_at:new Date().toISOString()}));for(const ee of $)await ge.from("pipeline_stages").update({order:ee.order,updated_at:ee.updated_at}).eq("id",ee.id);await E()},K=U=>{l(U.id),A(U.name),i(U.color),h(U.probability||0)};return n?s.jsx("div",{className:"text-slate-600",children:"Loading pipeline settings..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Pipeline Stages"}),s.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Configure the stages for your sales pipeline. Leads will move through these stages."})]}),s.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:[s.jsx(mn,{className:"w-4 h-4"}),"Add Stage"]})]}),f&&s.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200",children:[s.jsx("h4",{className:"font-medium text-slate-900 mb-4",children:"Add New Stage"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Name"}),s.jsx("input",{type:"text",value:j,onChange:U=>B(U.target.value),placeholder:"Stage name",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Color"}),s.jsx("input",{type:"color",value:p,onChange:U=>x(U.target.value),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Probability (%)"}),s.jsx("input",{type:"number",min:"0",max:"100",value:C,onChange:U=>S(Number(U.target.value)),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent"})]}),s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsx("button",{onClick:I,disabled:!j.trim(),className:"flex-1 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Add"}),s.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden",children:[s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left text-sm font-medium text-slate-700 px-6 py-3 w-12"}),s.jsx("th",{className:"text-left text-sm font-medium text-slate-700 px-6 py-3",children:"Stage Name"}),s.jsx("th",{className:"text-left text-sm font-medium text-slate-700 px-6 py-3",children:"Color"}),s.jsx("th",{className:"text-left text-sm font-medium text-slate-700 px-6 py-3",children:"Probability"}),s.jsx("th",{className:"text-left text-sm font-medium text-slate-700 px-6 py-3",children:"Order"}),s.jsx("th",{className:"text-left text-sm font-medium text-slate-700 px-6 py-3",children:"Actions"})]})}),s.jsx("tbody",{children:e.map((U,F)=>{const k=o===U.id;return s.jsxs("tr",{className:"border-b border-slate-200",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"flex flex-col gap-1",children:s.jsx("button",{onClick:()=>D(U.id),disabled:F===0,className:"text-slate-400 hover:text-slate-600 disabled:opacity-30 disabled:cursor-not-allowed",children:s.jsx(Pm,{className:"w-4 h-4"})})})}),s.jsx("td",{className:"px-6 py-4",children:k?s.jsx("input",{type:"text",value:c,onChange:T=>A(T.target.value),className:"px-3 py-1 border border-slate-300 rounded text-sm"}):s.jsx("span",{className:"text-sm font-medium text-slate-900",children:U.name})}),s.jsx("td",{className:"px-6 py-4",children:k?s.jsx("input",{type:"color",value:u,onChange:T=>i(T.target.value),className:"w-20 h-8 px-1 border border-slate-300 rounded"}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-6 h-6 rounded",style:{backgroundColor:U.color}}),s.jsx("span",{className:"text-xs text-slate-600",children:U.color})]})}),s.jsx("td",{className:"px-6 py-4",children:k?s.jsx("input",{type:"number",min:"0",max:"100",value:d,onChange:T=>h(Number(T.target.value)),className:"w-20 px-3 py-1 border border-slate-300 rounded text-sm"}):s.jsxs("span",{className:"text-sm text-slate-600",children:[U.probability,"%"]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"text-sm text-slate-600",children:F+1})}),s.jsx("td",{className:"px-6 py-4",children:k?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>H(U.id),className:"p-1 text-green-600 hover:text-green-700",children:s.jsx(Fs,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>l(null),className:"p-1 text-slate-400 hover:text-slate-600",children:s.jsx(mr,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>K(U),className:"p-1 text-slate-600 hover:text-slate-900",children:s.jsx(co,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>M(U.id),className:"p-1 text-red-600 hover:text-red-700",children:s.jsx(Ba,{className:"w-4 h-4"})})]})})]},U.id)})})]}),e.length===0&&s.jsx("div",{className:"text-center py-12 text-slate-500",children:'No pipeline stages configured yet. Click "Add Stage" to create your first stage.'})]})]})}function a_(){var U;const{currentCompany:t,permissions:e}=ir(),[r,n]=Y.useState([]),[a,o]=Y.useState(!0),[l,c]=Y.useState(null),[A,u]=Y.useState(""),[i,d]=Y.useState(""),[h,f]=Y.useState(!1),[w,j]=Y.useState(null),[B,p]=Y.useState(null),x=((U=e==null?void 0:e.settings)==null?void 0:U.update)||!1;Y.useEffect(()=>{t&&C()},[t]);const C=async()=>{if(!t)return;o(!0);const{data:F,error:k}=await ge.from("event_types").select("*").eq("company_id",t.id).eq("is_active",!0).order("order");F&&n(F),o(!1)},S=(F,k)=>{p({type:F,text:k}),setTimeout(()=>p(null),3e3)},E=async()=>{if(!i.trim()||!t)return;const F=Math.max(...r.map(T=>T.order),0),{error:k}=await ge.from("event_types").insert({company_id:t.id,name:i.trim(),order:F+1});k?S("error","Failed to add event type"):(S("success","Event type added"),d(""),f(!1),await C())},I=async F=>{if(!A.trim())return;const{error:k}=await ge.from("event_types").update({name:A.trim(),updated_at:new Date().toISOString()}).eq("id",F);k?S("error","Failed to update event type"):(S("success","Event type updated"),c(null),await C())},H=async(F,k)=>{if(!confirm(`Delete event type "${k}"?`))return;const{error:T}=await ge.from("event_types").update({is_active:!1}).eq("id",F);T?S("error","Failed to delete event type"):(S("success","Event type deleted"),await C())},M=(F,k)=>{j(k),F.dataTransfer.effectAllowed="move"},D=F=>{F.preventDefault(),F.dataTransfer.dropEffect="move"},K=async(F,k)=>{if(F.preventDefault(),!w||w.id===k.id)return;const T=[...r],P=T.findIndex(V=>V.id===w.id),$=T.findIndex(V=>V.id===k.id);T.splice(P,1),T.splice($,0,w);const ee=T.map((V,W)=>({id:V.id,order:W+1}));n(T);for(const V of ee)await ge.from("event_types").update({order:V.order}).eq("id",V.id);S("success","Event types reordered"),j(null)};return t?a?s.jsx("div",{className:"text-slate-600",children:"Loading event types..."}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Event Types"}),s.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Manage the event types available in the Lead form"})]}),x&&!h&&s.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:[s.jsx(mn,{className:"w-4 h-4"}),"Add Type"]})]}),B&&s.jsx("div",{className:`mb-4 p-3 rounded-lg ${B.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:B.text}),h&&s.jsx("div",{className:"mb-4 p-4 bg-slate-50 rounded-lg border border-slate-200",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:i,onChange:F=>d(F.target.value),onKeyDown:F=>{F.key==="Enter"&&E(),F.key==="Escape"&&(f(!1),d(""))},placeholder:"Enter event type name...",className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent",autoFocus:!0}),s.jsx("button",{onClick:E,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",children:s.jsx(Fs,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>{f(!1),d("")},className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:s.jsx(mr,{className:"w-5 h-5"})})]})}),s.jsx("div",{className:"space-y-2",children:r.length===0?s.jsx("div",{className:"text-center py-8 text-slate-500",children:"No event types yet. Add one to get started."}):r.map(F=>s.jsxs("div",{draggable:x,onDragStart:k=>M(k,F),onDragOver:D,onDrop:k=>K(k,F),className:`flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg ${x?"cursor-move hover:bg-slate-50":""} transition-colors`,children:[x&&s.jsx(Pm,{className:"w-5 h-5 text-slate-400"}),l===F.id?s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"text",value:A,onChange:k=>u(k.target.value),onKeyDown:k=>{k.key==="Enter"&&I(F.id),k.key==="Escape"&&c(null)},className:"flex-1 px-3 py-1 border border-slate-300 rounded focus:ring-2 focus:ring-slate-900 focus:border-transparent",autoFocus:!0}),s.jsx("button",{onClick:()=>I(F.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",children:s.jsx(Fs,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>c(null),className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:s.jsx(mr,{className:"w-5 h-5"})})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"flex-1 text-slate-900",children:F.name}),x&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>{c(F.id),u(F.name)},className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:s.jsx(co,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>H(F.id,F.name),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:s.jsx(Ba,{className:"w-4 h-4"})})]})]})]},F.id))}),!x&&s.jsx("p",{className:"mt-4 text-sm text-slate-500",children:"Only Managers and Admins can add, edit, or delete event types."})]}):s.jsx("div",{className:"text-slate-600",children:"No company selected"})}function o_({onManageAccess:t}){var i;const{user:e}=Jr(),{permissions:r,companies:n,loading:a,hasAllAccess:o}=ir(),[l,c]=Y.useState(new Map),[A,u]=Y.useState(!0);return Y.useEffect(()=>{(async()=>{if(!e||o){u(!1);return}const{data:h}=await ge.from("user_company_roles").select("company_id, roles(name)").eq("user_id",e.id).eq("is_active",!0),f=new Map;h==null||h.forEach(w=>{var j;f.set(w.company_id,((j=w.roles)==null?void 0:j.name)||"")}),c(f),u(!1)})()},[e,o]),a||A?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"text-slate-500",children:"Loading business units..."})}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Business Units Management"}),s.jsx("p",{className:"text-slate-600 text-sm mt-0.5",children:"Manage business units and their user access"})]}),((i=r==null?void 0:r.users)==null?void 0:i.create)&&s.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700",children:[s.jsx(mn,{className:"w-4 h-4"}),"Add Business Unit"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:n.map(d=>s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4 hover:border-blue-300 transition-colors flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2.5",children:[s.jsx("div",{className:"p-1.5 bg-blue-50 rounded-lg",children:s.jsx(nu,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:d.name}),s.jsx("p",{className:"text-xs text-slate-500",children:d.slug})]})]}),s.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium shrink-0 ${d.is_active?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-700"}`,children:d.is_active?"Active":"Inactive"})]}),(o||l.get(d.id)==="Admin")&&s.jsxs("button",{onClick:()=>t(d.id,d.name),className:"w-full flex items-center justify-center gap-2 px-3 py-2 text-sm text-blue-600 border border-blue-200 rounded-lg hover:bg-blue-50 transition-colors mt-auto",children:[s.jsx(Bi,{className:"w-4 h-4"}),"Manage User Access"]})]},d.id))})]})}function i_(){const{currentCompany:t}=ir(),[e,r]=Y.useState([{provider:"check",is_active:!1,is_test_mode:!1,config:{}},{provider:"xendit",is_active:!1,is_test_mode:!0,config:{}},{provider:"paypal",is_active:!1,is_test_mode:!0,config:{}},{provider:"custom",is_active:!1,is_test_mode:!0,config:{}}]),[n,a]=Y.useState(!0),[o,l]=Y.useState(!1);Y.useEffect(()=>{t&&c()},[t]);const c=async()=>{if(!t)return;a(!0);const{data:d}=await ge.from("payment_gateway_configs").select("*").eq("company_id",t.id),h=[{provider:"check",is_active:!1,is_test_mode:!1,config:{}},{provider:"xendit",is_active:!1,is_test_mode:!0,config:{}},{provider:"paypal",is_active:!1,is_test_mode:!0,config:{}},{provider:"custom",is_active:!1,is_test_mode:!0,config:{}}];if(d&&d.length>0){const f=h.map(w=>d.find(B=>B.provider===w.provider)||w);r(f)}else r(h);a(!1)},A=(d,h)=>{r(f=>f.map(w=>w.provider===d?{...w,[h]:!w[h]}:w))},u=(d,h,f)=>{r(w=>w.map(j=>j.provider===d?{...j,config:{...j.config,[h]:f}}:j))},i=async()=>{if(t){l(!0);try{for(const d of e)if(d.id){const{error:h}=await ge.from("payment_gateway_configs").update({is_active:d.is_active,is_test_mode:d.is_test_mode,config:d.config}).eq("id",d.id);if(h)throw console.error(`Error updating ${d.provider}:`,h),h}else{const{error:h}=await ge.from("payment_gateway_configs").insert({company_id:t.id,provider:d.provider,is_active:d.is_active,is_test_mode:d.is_test_mode,config:d.config});if(h)throw console.error(`Error inserting ${d.provider}:`,h),h}alert(`Payment gateway settings saved successfully for ${t.name}!`),await c()}catch(d){console.error("Error saving gateways:",d),alert("Failed to save settings: "+d.message)}finally{l(!1)}}};return n?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"text-slate-600",children:"Loading payment settings..."})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Payment Gateways"}),s.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Configure payment methods for accepting quotation payments"}),t&&s.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 px-3 py-1 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium",children:[s.jsx(fl,{className:"w-4 h-4"}),s.jsxs("span",{children:["Business Unit: ",t.name]})]})]}),s.jsxs("button",{onClick:i,disabled:o,className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 disabled:opacity-50",children:[s.jsx(FA,{className:"w-4 h-4"}),o?"Saving...":"Save Settings"]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start gap-3",children:[s.jsx(Wd,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"Test Mode vs Live Mode"}),s.jsxs("p",{children:["Enable ",s.jsx("strong",{children:"Test Mode"})," to simulate payments without real transactions. When ready for production, disable Test Mode to accept real payments through the configured gateway."]})]})]}),s.jsx("div",{className:"space-y-4",children:e.map(d=>s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-6",children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-slate-100 rounded-lg",children:s.jsx(fl,{className:"w-5 h-5 text-slate-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-slate-900 capitalize",children:d.provider==="custom"?"Custom API":d.provider==="check"?"Check Payment":d.provider}),s.jsxs("p",{className:"text-sm text-slate-600",children:[d.provider==="check"&&"Manual check payment processing with Finance verification",d.provider==="paypal"&&"PayPal payment processing",d.provider==="xendit"&&"Xendit payment gateway",d.provider==="custom"&&"Custom payment API integration"]})]})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[s.jsx("div",{children:s.jsxs("button",{onClick:()=>A(d.provider,"is_active"),className:`w-full flex items-center justify-between p-3 rounded-lg border-2 transition-colors ${d.is_active?"border-green-500 bg-green-50":"border-slate-300 bg-slate-50"}`,children:[s.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Active"}),d.is_active?s.jsx(pw,{className:"w-6 h-6 text-green-600"}):s.jsx(mw,{className:"w-6 h-6 text-slate-400"})]})}),d.provider!=="check"&&s.jsx("div",{children:s.jsxs("button",{onClick:()=>A(d.provider,"is_test_mode"),className:`w-full flex items-center justify-between p-3 rounded-lg border-2 transition-colors ${d.is_test_mode?"border-blue-500 bg-blue-50":"border-slate-300 bg-slate-50"}`,children:[s.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Test Mode"}),d.is_test_mode?s.jsx(pw,{className:"w-6 h-6 text-blue-600"}):s.jsx(mw,{className:"w-6 h-6 text-slate-400"})]})}),d.provider==="check"&&s.jsx("div",{className:"flex items-center justify-center p-3 rounded-lg border-2 border-slate-200 bg-slate-50",children:s.jsx("span",{className:"text-sm text-slate-600",children:"Manual verification required"})})]}),d.is_active&&s.jsxs("div",{className:"space-y-3 pt-4 border-t border-slate-200",children:[s.jsx("p",{className:"text-xs font-medium text-slate-700 uppercase tracking-wide",children:"Configuration"}),d.provider==="check"&&s.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[s.jsxs("p",{className:"text-sm text-amber-800",children:[s.jsx("strong",{children:"Check Payment Gateway"})," is now active. Customers can submit check payment details which will require Finance Officer verification before being marked as paid."]}),s.jsx("p",{className:"text-sm text-amber-700 mt-2",children:"No additional configuration needed. Make sure Finance Officers have proper permissions to verify payments."})]}),d.provider==="paypal"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Client ID"}),s.jsx("input",{type:"text",value:d.config.client_id||"",onChange:h=>u(d.provider,"client_id",h.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500",placeholder:"PayPal Client ID"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Secret Key"}),s.jsx("input",{type:"password",value:d.config.secret_key||"",onChange:h=>u(d.provider,"secret_key",h.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500",placeholder:"PayPal Secret Key"})]})]}),d.provider==="xendit"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"API Key"}),s.jsx("input",{type:"password",value:d.config.api_key||"",onChange:h=>u(d.provider,"api_key",h.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500",placeholder:"Xendit API Key"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Webhook Secret"}),s.jsx("input",{type:"password",value:d.config.webhook_secret||"",onChange:h=>u(d.provider,"webhook_secret",h.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500",placeholder:"Webhook Secret"})]})]}),d.provider==="custom"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"API Endpoint"}),s.jsx("input",{type:"url",value:d.config.api_endpoint||"",onChange:h=>u(d.provider,"api_endpoint",h.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500",placeholder:"https://api.example.com/payments"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"API Key"}),s.jsx("input",{type:"password",value:d.config.api_key||"",onChange:h=>u(d.provider,"api_key",h.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500",placeholder:"API Key or Bearer Token"})]})]})]})]},d.provider))})]})}function A_({companyId:t,companyName:e,onClose:r}){const{user:n}=Jr(),{hasAllAccess:a,permissions:o}=ir(),[l,c]=Y.useState([]),[A,u]=Y.useState(new Map),[i,d]=Y.useState([]),[h,f]=Y.useState(!0),[w,j]=Y.useState(!1),[B,p]=Y.useState(null),[x,C]=Y.useState(!0);Y.useEffect(()=>{(async()=>{var T;if(!n){C(!1);return}if(a){p("superadmin"),C(!1);return}const{data:F}=await ge.from("user_company_roles").select("roles(name)").eq("user_id",n.id).eq("company_id",t).eq("is_active",!0).single(),k=(T=F==null?void 0:F.roles)==null?void 0:T.name;p(k||null),C(!1)})()},[n,t,a]),Y.useEffect(()=>{!x&&(a||B==="Admin")&&E()},[t,x,a,B]);const S=a||B==="Admin";if(x)return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg p-8",children:s.jsx("div",{className:"text-slate-500",children:"Checking permissions..."})})});if(!S)return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Access Denied"}),s.jsx("button",{onClick:r,className:"text-slate-400 hover:text-slate-600",children:s.jsx(mr,{className:"w-6 h-6"})})]}),s.jsxs("p",{className:"text-slate-600 mb-4",children:["You need Admin access to manage user permissions for this business unit. Your current role: ",B||"No access"]}),s.jsx("button",{onClick:r,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Close"})]})});const E=async()=>{f(!0);try{const[U,F,k]=await Promise.all([ge.from("users").select("id, email, full_name, has_all_access").eq("is_active",!0).order("email"),ge.from("roles").select("id, name").is("company_id",null).order("name"),ge.from("user_company_roles").select("user_id, role_id, roles(name)").eq("company_id",t)]);if(U.data&&c(U.data),F.data&&d(F.data),k.data){const T=new Map;k.data.forEach(P=>{var $;T.set(P.user_id,{user_id:P.user_id,role_id:P.role_id,role_name:(($=P.roles)==null?void 0:$.name)||null})}),u(T)}}catch(U){console.error("Error loading data:",U)}finally{f(!1)}},I=(U,F)=>{if(U===(n==null?void 0:n.id)){alert("You cannot modify your own access permissions.");return}const k=l.find(P=>P.id===U);if(!a&&(k!=null&&k.has_all_access)){alert("You cannot modify access for users with higher privileges.");return}const T=new Map(A);if(F===null)T.delete(U);else{const P=i.find($=>$.id===F);T.set(U,{user_id:U,role_id:F,role_name:(P==null?void 0:P.name)||null})}u(T)},H=async U=>{if(U===(n==null?void 0:n.id)){alert("You cannot grant all access to yourself.");return}if(!a){alert("Only superadmins can grant all access to other users.");return}j(!0);try{const{error:F}=await ge.from("users").update({has_all_access:!0}).eq("id",U);if(F)throw console.error("Error updating user:",F),new Error(`Failed to update user: ${F.message}`);const k=i.find(T=>T.name==="Admin");if(k){const{error:T}=await ge.from("user_company_roles").upsert({user_id:U,company_id:t,role_id:k.id,is_active:!0},{onConflict:"user_id,company_id"});if(T)throw console.error("Error adding user to company:",T),new Error(`Failed to add user to company: ${T.message}`)}alert("All access granted successfully!"),await E()}catch(F){console.error("Error granting all access:",F),alert(F.message||"Failed to grant all access. Please try again.")}finally{j(!1)}},M=async()=>{var U;j(!0);try{const F=await ge.from("user_company_roles").select("user_id, role_id").eq("company_id",t);if(F.error)throw console.error("Error fetching existing access:",F.error),new Error("Failed to fetch existing access");const k=new Map(((U=F.data)==null?void 0:U.map($=>[$.user_id,$.role_id]))||[]),T=[],P=[];if(k.forEach(($,ee)=>{A.has(ee)||T.push(ee)}),A.forEach(($,ee)=>{$.role_id&&P.push({user_id:ee,company_id:t,role_id:$.role_id,is_active:!0})}),T.length>0){const $=await ge.from("user_company_roles").delete().eq("company_id",t).in("user_id",T);if($.error)throw console.error("Error deleting user access:",$.error),new Error(`Failed to remove access: ${$.error.message}`)}if(P.length>0){const $=await ge.from("user_company_roles").upsert(P,{onConflict:"user_id,company_id"});if($.error)throw console.error("Error upserting user access:",$.error),new Error(`Failed to save access: ${$.error.message}`)}alert("User access updated successfully!"),r()}catch(F){console.error("Error saving user access:",F),alert(F.message||"Failed to save changes. Please try again.")}finally{j(!1)}};if(h)return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg p-8",children:s.jsx("div",{className:"text-slate-500",children:"Loading..."})})});const D=l.filter(U=>U.has_all_access),K=l.filter(U=>!U.has_all_access);return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Manage User Access"}),s.jsx("p",{className:"text-sm text-slate-600 mt-1",children:e})]}),s.jsx("button",{onClick:r,className:"text-slate-400 hover:text-slate-600",disabled:w,children:s.jsx(mr,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[D.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Access to All Business Units"}),s.jsx("div",{className:"space-y-2",children:D.map(U=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900",children:U.email}),U.full_name&&s.jsx("div",{className:"text-sm text-slate-600",children:U.full_name}),s.jsx("div",{className:"text-xs text-purple-600 font-medium mt-1",children:"Has access to all"})]}),s.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 text-sm font-medium rounded-full",children:"All Access"})]},U.id))})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-semibold text-slate-700 mb-3",children:[e," - Specific Access"]}),s.jsx("div",{className:"space-y-2",children:K.map(U=>{const F=A.get(U.id),k=!!(F!=null&&F.role_id),T=U.id===(n==null?void 0:n.id),P=U.has_all_access,$=!T&&(a||!P);return s.jsxs("div",{className:"flex items-center justify-between p-3 border border-slate-200 rounded-lg hover:border-slate-300 transition-colors",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"font-medium text-slate-900",children:[U.email,T&&s.jsx("span",{className:"text-xs text-blue-600 ml-2",children:"(You)"})]}),U.full_name&&s.jsx("div",{className:"text-sm text-slate-600",children:U.full_name})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("select",{value:(F==null?void 0:F.role_id)||"",onChange:ee=>I(U.id,ee.target.value||null),className:"px-3 py-1.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:w||!$,children:[s.jsx("option",{value:"",children:"No Access"}),i.map(ee=>s.jsx("option",{value:ee.id,children:ee.name},ee.id))]}),!k&&a&&!T&&s.jsx("button",{onClick:()=>H(U.id),className:"px-3 py-1.5 text-xs text-purple-600 border border-purple-200 rounded-lg hover:bg-purple-50",disabled:w,children:"Grant All Access"}),k&&s.jsx("span",{className:"px-3 py-1 bg-emerald-100 text-emerald-700 text-sm font-medium rounded-full",children:"Has Access"}),!k&&s.jsx("span",{className:"px-3 py-1 bg-slate-100 text-slate-600 text-sm font-medium rounded-full",children:"No Access"})]})]},U.id)})})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-slate-200",children:[s.jsx("button",{onClick:r,className:"px-4 py-2 text-slate-700 border border-slate-300 rounded-lg hover:bg-slate-50",disabled:w,children:"Cancel"}),s.jsx("button",{onClick:M,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",disabled:w,children:w?"Saving...":"Save Changes"})]})]})})}function l_(){const{hasAllAccess:t}=ir(),[e,r]=Y.useState("business-units"),[n,a]=Y.useState(null),o=(l,c)=>{a({id:l,name:c})};return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex gap-2 mb-6 border-b border-slate-200",children:[t&&s.jsxs("button",{onClick:()=>r("roles"),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${e==="roles"?"border-slate-900 text-slate-900":"border-transparent text-slate-600 hover:text-slate-900"}`,children:[s.jsx(Qj,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Roles & Permissions"})]}),t&&s.jsxs("button",{onClick:()=>r("users"),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${e==="users"?"border-slate-900 text-slate-900":"border-transparent text-slate-600 hover:text-slate-900"}`,children:[s.jsx(Bi,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"User Management"})]}),s.jsxs("button",{onClick:()=>r("pipeline"),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${e==="pipeline"?"border-slate-900 text-slate-900":"border-transparent text-slate-600 hover:text-slate-900"}`,children:[s.jsx(gE,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Pipeline"})]}),s.jsxs("button",{onClick:()=>r("events"),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${e==="events"?"border-slate-900 text-slate-900":"border-transparent text-slate-600 hover:text-slate-900"}`,children:[s.jsx(Ro,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Event Types"})]}),s.jsxs("button",{onClick:()=>r("business-units"),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${e==="business-units"?"border-slate-900 text-slate-900":"border-transparent text-slate-600 hover:text-slate-900"}`,children:[s.jsx(nu,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Business Units"})]}),s.jsxs("button",{onClick:()=>r("payments"),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${e==="payments"?"border-slate-900 text-slate-900":"border-transparent text-slate-600 hover:text-slate-900"}`,children:[s.jsx(fl,{className:"w-4 h-4"}),s.jsx("span",{className:"font-medium",children:"Payment Gateways"})]})]}),e==="roles"&&t&&s.jsx(r_,{}),e==="users"&&t&&s.jsx(n_,{}),e==="pipeline"&&s.jsx(s_,{}),e==="events"&&s.jsx(a_,{}),e==="business-units"&&s.jsx(o_,{onManageAccess:o}),e==="payments"&&s.jsx(i_,{}),n&&s.jsx(A_,{companyId:n.id,companyName:n.name,onClose:()=>a(null)})]})}function c_({onViewQuotation:t}){var k,T;const{currentCompany:e,permissions:r}=ir(),[n,a]=Y.useState([]),[o,l]=Y.useState(!0),[c,A]=Y.useState(""),[u,i]=Y.useState("all"),[d,h]=Y.useState("all"),[f,w]=Y.useState("all"),[j,B]=Y.useState("all"),[p,x]=Y.useState(!1),C=((k=r==null?void 0:r.quotations)==null?void 0:k.create)??!1,S=((T=r==null?void 0:r.quotations)==null?void 0:T.read)??!1;Y.useEffect(()=>{e&&r&&E()},[e,r]);const E=async()=>{var oe,O;if(!e||!S)return;l(!0);const{data:P,error:$}=await ge.from("quotations").select(`
        *,
        customer:customers(name, email),
        lead:leads(event_name),
        creator:users!quotations_created_by_fkey(email)
      `).eq("company_id",e.id).order("created_at",{ascending:!1});if($){console.error("Error loading quotations:",$),l(!1);return}const ee=P||[],V=((oe=r==null?void 0:r.role)==null?void 0:oe.name)==="Admin",W=((O=r==null?void 0:r.role)==null?void 0:O.name)==="Finance Officer",te=V||W;if(ee.length>0){const{data:z}=await ge.from("payments").select("quotation_id, verification_status, is_locked, payment_status, amount").in("quotation_id",ee.map(ne=>ne.id));if(z){const ne=z.reduce((q,Ae)=>(te&&!Ae.is_locked&&Ae.verification_status!=="verified"&&Ae.payment_status==="paid"&&(q[Ae.quotation_id]=(q[Ae.quotation_id]||0)+1),q),{}),Z=z.reduce((q,Ae)=>(Ae.payment_status==="paid"&&Ae.verification_status!=="rejected"&&(q[Ae.quotation_id]=(q[Ae.quotation_id]||0)+parseFloat(Ae.amount)),q),{});ee.forEach(q=>{q.pendingPayments=ne[q.id]||0,q.totalPaid=Z[q.id]||0;const Ae=parseFloat(q.total_amount);q.totalPaid>=Ae-.01?q.paymentStatus="paid":q.totalPaid>0?q.paymentStatus="deposit":q.paymentStatus="pending"})}}a(ee),l(!1)},I=P=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(P),H=P=>new Date(P).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),M=Array.from(new Set(n.map(P=>{var $;return($=P.customer)==null?void 0:$.name}).filter(Boolean))),D=Array.from(new Set(n.map(P=>{var $;return($=P.lead)==null?void 0:$.event_name}).filter(Boolean))),K=Array.from(new Set(n.map(P=>{var $;return($=P.creator)==null?void 0:$.email}).filter(Boolean))),U=n.filter(P=>{var $,ee,V,W,te,oe,O;if(u!=="all"&&P.status!==u||d!=="all"&&(($=P.customer)==null?void 0:$.name)!==d||f!=="all"&&((ee=P.lead)==null?void 0:ee.event_name)!==f||j!=="all"&&((V=P.creator)==null?void 0:V.email)!==j)return!1;if(c.trim()){const z=c.toLowerCase(),ne=P.quotation_no.toLowerCase(),Z=((te=(W=P.customer)==null?void 0:W.name)==null?void 0:te.toLowerCase())||"",q=((O=(oe=P.lead)==null?void 0:oe.event_name)==null?void 0:O.toLowerCase())||"";return ne.includes(z)||Z.includes(z)||q.includes(z)}return!0}),F={total:n.length,draft:n.filter(P=>P.status==="draft").length,sent:n.filter(P=>P.status==="sent").length,accepted:n.filter(P=>P.status==="accepted").length,totalValue:n.filter(P=>P.status==="accepted"||P.status==="paid").reduce((P,$)=>P+$.total_amount,0)};return!r||o?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"text-slate-600",children:"Loading quotations..."})})}):S?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6 flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Quotations"}),s.jsx("p",{className:"text-slate-600",children:"Manage and track all your quotations"})]}),C&&s.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 font-medium",children:[s.jsx(mn,{className:"w-5 h-5"}),"Create Quotation"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"Total Quotations"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:F.total})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-blue-600 mb-1",children:"Sent"}),s.jsx("p",{className:"text-2xl font-bold text-blue-700",children:F.sent})]}),s.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-emerald-600 mb-1",children:"Accepted"}),s.jsx("p",{className:"text-2xl font-bold text-emerald-700",children:F.accepted})]}),s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-green-600 mb-1",children:"Total Value"}),s.jsx("p",{className:"text-2xl font-bold text-green-700",children:I(F.totalValue)})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200",children:[s.jsx("div",{className:"p-4 border-b border-slate-200",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(jl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),s.jsx("input",{type:"text",placeholder:"Search by quotation number, customer, or event...",value:c,onChange:P=>A(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-slate-900"})]}),s.jsx(Ej,{className:"w-5 h-5 text-slate-400 flex-shrink-0"})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("select",{value:u,onChange:P=>i(P.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-slate-900 text-sm",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"draft",children:"Draft"}),s.jsx("option",{value:"finalized",children:"Finalized"})]}),s.jsxs("select",{value:d,onChange:P=>h(P.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-slate-900 text-sm",children:[s.jsx("option",{value:"all",children:"All Customers"}),M.map(P=>s.jsx("option",{value:P,children:P},P))]}),s.jsxs("select",{value:f,onChange:P=>w(P.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-slate-900 text-sm",children:[s.jsx("option",{value:"all",children:"All Events"}),D.map(P=>s.jsx("option",{value:P,children:P},P))]}),s.jsxs("select",{value:j,onChange:P=>B(P.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-slate-900 text-sm",children:[s.jsx("option",{value:"all",children:"All Creators"}),K.map(P=>s.jsx("option",{value:P,children:P},P))]})]})]})}),U.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(ys,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),s.jsx("p",{className:"text-slate-600",children:c||u!=="all"?"No quotations found matching your filters":"No quotations yet"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"Quotation #"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"Customer"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"Event"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-600 uppercase",children:"Amount"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-600 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:U.map(P=>{var $,ee,V;return s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"font-medium text-slate-900",children:P.quotation_no})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:($=P.customer)==null?void 0:$.name}),s.jsx("p",{className:"text-sm text-slate-500",children:(ee=P.customer)==null?void 0:ee.email})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"text-slate-900",children:((V=P.lead)==null?void 0:V.event_name)||"N/A"})}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:H(P.quotation_date)}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium w-fit ${P.status==="draft"?"bg-slate-100 text-slate-700":"bg-blue-100 text-blue-700"}`,children:P.status==="draft"?"Draft":"Finalized"}),P.paymentStatus==="paid"&&s.jsx("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700 w-fit",children:"Paid"}),P.paymentStatus==="deposit"&&s.jsx("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-700 w-fit",children:"Deposit Made"}),P.paymentStatus==="pending"&&s.jsx("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 w-fit",children:"Pending Payment"})]})}),s.jsx("td",{className:"px-6 py-4 text-right",children:s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-slate-900",children:I(P.total_amount)}),P.totalPaid&&P.totalPaid>0&&s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Paid ",I(P.totalPaid)," / ",I(P.total_amount)]})]})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsxs("button",{onClick:()=>t==null?void 0:t(P.id),className:"inline-flex items-center gap-1 px-3 py-1 text-sm text-slate-700 border border-slate-300 rounded-lg hover:bg-slate-50",children:[s.jsx(cu,{className:"w-4 h-4"}),"View"]})})]},P.id)})})]})})]})]}),p&&s.jsx(Rm,{quotation:null,onClose:()=>x(!1),onSuccess:()=>{x(!1),E()}})]}):s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"text-slate-600",children:"You do not have permission to view quotations"})})})}var Tj={exports:{}};function Nr(t){"@babel/helpers - typeof";return Nr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nr(t)}var uo=Uint8Array,wa=Uint16Array,Xv=Int32Array,Yv=new uo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),qv=new uo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),xw=new uo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Pj=function(t,e){for(var r=new wa(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var a=new Xv(r[30]),n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)a[o]=o-r[n]<<5|n;return{b:r,r:a}},Oj=Pj(Yv,2),u_=Oj.b,Og=Oj.r;u_[28]=258,Og[258]=28;var d_=Pj(qv,0),yw=d_.r,Dg=new wa(32768);for(var Hr=0;Hr<32768;++Hr){var eA=(Hr&43690)>>1|(Hr&21845)<<1;eA=(eA&52428)>>2|(eA&13107)<<2,eA=(eA&61680)>>4|(eA&3855)<<4,Dg[Hr]=((eA&65280)>>8|(eA&255)<<8)>>1}var bd=function(t,e,r){for(var n=t.length,a=0,o=new wa(e);a<n;++a)t[a]&&++o[t[a]-1];var l=new wa(e);for(a=1;a<e;++a)l[a]=l[a-1]+o[a-1]<<1;var c;if(r){c=new wa(1<<e);var A=15-e;for(a=0;a<n;++a)if(t[a])for(var u=a<<4|t[a],i=e-t[a],d=l[t[a]-1]++<<i,h=d|(1<<i)-1;d<=h;++d)c[Dg[d]>>A]=u}else for(c=new wa(n),a=0;a<n;++a)t[a]&&(c[a]=Dg[l[t[a]-1]++]>>15-t[a]);return c},Bl=new uo(288);for(var Hr=0;Hr<144;++Hr)Bl[Hr]=8;for(var Hr=144;Hr<256;++Hr)Bl[Hr]=9;for(var Hr=256;Hr<280;++Hr)Bl[Hr]=7;for(var Hr=280;Hr<288;++Hr)Bl[Hr]=8;var um=new uo(32);for(var Hr=0;Hr<32;++Hr)um[Hr]=5;var f_=bd(Bl,9,0),h_=bd(um,5,0),Dj=function(t){return(t+7)/8|0},m_=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new uo(t.subarray(e,r))},ui=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},nd=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},u0=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,o=r.slice();if(!a)return{t:Hj,l:0};if(a==1){var l=new uo(r[0].s+1);return l[r[0].s]=1,{t:l,l:1}}r.sort(function(E,I){return E.f-I.f}),r.push({s:-1,f:25001});var c=r[0],A=r[1],u=0,i=1,d=2;for(r[0]={s:-1,f:c.f+A.f,l:c,r:A};i!=a-1;)c=r[r[u].f<r[d].f?u++:d++],A=r[u!=i&&r[u].f<r[d].f?u++:d++],r[i++]={s:-1,f:c.f+A.f,l:c,r:A};for(var h=o[0].s,n=1;n<a;++n)o[n].s>h&&(h=o[n].s);var f=new wa(h+1),w=Rg(r[i-1],f,0);if(w>e){var n=0,j=0,B=w-e,p=1<<B;for(o.sort(function(I,H){return f[H.s]-f[I.s]||I.f-H.f});n<a;++n){var x=o[n].s;if(f[x]>e)j+=p-(1<<w-f[x]),f[x]=e;else break}for(j>>=B;j>0;){var C=o[n].s;f[C]<e?j-=1<<e-f[C]++-1:++n}for(;n>=0&&j;--n){var S=o[n].s;f[S]==e&&(--f[S],++j)}w=e}return{t:new uo(f),l:w}},Rg=function(t,e,r){return t.s==-1?Math.max(Rg(t.l,e,r+1),Rg(t.r,e,r+1)):e[t.s]=r},ww=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new wa(++e),n=0,a=t[0],o=1,l=function(A){r[n++]=A},c=1;c<=e;++c)if(t[c]==a&&c!=e)++o;else{if(!a&&o>2){for(;o>138;o-=138)l(32754);o>2&&(l(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(l(a),--o;o>6;o-=6)l(8304);o>2&&(l(o-3<<5|8208),o=0)}for(;o--;)l(a);o=1,a=t[c]}return{c:r.subarray(0,n),n:e}},sd=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},Rj=function(t,e,r){var n=r.length,a=Dj(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var o=0;o<n;++o)t[a+o+4]=r[o];return(a+4+n)*8},bw=function(t,e,r,n,a,o,l,c,A,u,i){ui(e,i++,r),++a[256];for(var d=u0(a,15),h=d.t,f=d.l,w=u0(o,15),j=w.t,B=w.l,p=ww(h),x=p.c,C=p.n,S=ww(j),E=S.c,I=S.n,H=new wa(19),M=0;M<x.length;++M)++H[x[M]&31];for(var M=0;M<E.length;++M)++H[E[M]&31];for(var D=u0(H,7),K=D.t,U=D.l,F=19;F>4&&!K[xw[F-1]];--F);var k=u+5<<3,T=sd(a,Bl)+sd(o,um)+l,P=sd(a,h)+sd(o,j)+l+14+3*F+sd(H,K)+2*H[16]+3*H[17]+7*H[18];if(A>=0&&k<=T&&k<=P)return Rj(e,i,t.subarray(A,A+u));var $,ee,V,W;if(ui(e,i,1+(P<T)),i+=2,P<T){$=bd(h,f,0),ee=h,V=bd(j,B,0),W=j;var te=bd(K,U,0);ui(e,i,C-257),ui(e,i+5,I-1),ui(e,i+10,F-4),i+=14;for(var M=0;M<F;++M)ui(e,i+3*M,K[xw[M]]);i+=3*F;for(var oe=[x,E],O=0;O<2;++O)for(var z=oe[O],M=0;M<z.length;++M){var ne=z[M]&31;ui(e,i,te[ne]),i+=K[ne],ne>15&&(ui(e,i,z[M]>>5&127),i+=z[M]>>12)}}else $=f_,ee=Bl,V=h_,W=um;for(var M=0;M<c;++M){var Z=n[M];if(Z>255){var ne=Z>>18&31;nd(e,i,$[ne+257]),i+=ee[ne+257],ne>7&&(ui(e,i,Z>>23&31),i+=Yv[ne]);var q=Z&31;nd(e,i,V[q]),i+=W[q],q>3&&(nd(e,i,Z>>5&8191),i+=qv[q])}else nd(e,i,$[Z]),i+=ee[Z]}return nd(e,i,$[256]),i+ee[256]},p_=new Xv([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Hj=new uo(0),g_=function(t,e,r,n,a,o){var l=o.z||t.length,c=new uo(n+l+5*(1+Math.ceil(l/7e3))+a),A=c.subarray(n,c.length-a),u=o.l,i=(o.r||0)&7;if(e){i&&(A[0]=o.r>>3);for(var d=p_[e-1],h=d>>13,f=d&8191,w=(1<<r)-1,j=o.p||new wa(32768),B=o.h||new wa(w+1),p=Math.ceil(r/3),x=2*p,C=function(_e){return(t[_e]^t[_e+1]<<p^t[_e+2]<<x)&w},S=new Xv(25e3),E=new wa(288),I=new wa(32),H=0,M=0,D=o.i||0,K=0,U=o.w||0,F=0;D+2<l;++D){var k=C(D),T=D&32767,P=B[k];if(j[T]=P,B[k]=T,U<=D){var $=l-D;if((H>7e3||K>24576)&&($>423||!u)){i=bw(t,A,0,S,E,I,M,K,F,D-F,i),K=H=M=0,F=D;for(var ee=0;ee<286;++ee)E[ee]=0;for(var ee=0;ee<30;++ee)I[ee]=0}var V=2,W=0,te=f,oe=T-P&32767;if($>2&&k==C(D-oe))for(var O=Math.min(h,$)-1,z=Math.min(32767,D),ne=Math.min(258,$);oe<=z&&--te&&T!=P;){if(t[D+V]==t[D+V-oe]){for(var Z=0;Z<ne&&t[D+Z]==t[D+Z-oe];++Z);if(Z>V){if(V=Z,W=oe,Z>O)break;for(var q=Math.min(oe,Z-2),Ae=0,ee=0;ee<q;++ee){var ve=D-oe+ee&32767,be=j[ve],Ne=ve-be&32767;Ne>Ae&&(Ae=Ne,P=ve)}}}T=P,P=j[T],oe+=T-P&32767}if(W){S[K++]=268435456|Og[V]<<18|yw[W];var Te=Og[V]&31,De=yw[W]&31;M+=Yv[Te]+qv[De],++E[257+Te],++I[De],U=D+V,++H}else S[K++]=t[D],++E[t[D]]}}for(D=Math.max(D,U);D<l;++D)S[K++]=t[D],++E[t[D]];i=bw(t,A,u,S,E,I,M,K,F,D-F,i),u||(o.r=i&7|A[i/8|0]<<3,i-=7,o.h=B,o.p=j,o.i=D,o.w=U)}else{for(var D=o.w||0;D<l+u;D+=65535){var We=D+65535;We>=l&&(A[i/8|0]=u,We=l),i=Rj(A,i+1,t.subarray(D,We))}o.i=l}return m_(c,0,n+Dj(i)+a)},Mj=function(){var t=1,e=0;return{p:function(r){for(var n=t,a=e,o=r.length|0,l=0;l!=o;){for(var c=Math.min(l+2655,o);l<c;++l)a+=n+=r[l];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},v_=function(t,e,r,n,a){if(!a&&(a={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),l=new uo(o.length+t.length);l.set(o),l.set(t,o.length),t=l,a.w=o.length}return g_(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,a)},Kj=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},x_=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=Mj();a.p(e.dictionary),Kj(t,2,a.d())}};function Hg(t,e){e||(e={});var r=Mj();r.p(t);var n=v_(t,e,e.dictionary?6:2,4);return x_(n,e),Kj(n,n.length-4,r.d()),n}var y_=typeof TextDecoder<"u"&&new TextDecoder,w_=0;try{y_.decode(Hj,{stream:!0}),w_=1}catch{}function b_(t){if(Array.isArray(t))return t}function j_(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,o,l,c=[],A=!0,u=!1;try{if(o=(r=r.call(t)).next,e!==0)for(;!(A=(n=o.call(r)).done)&&(c.push(n.value),c.length!==e);A=!0);}catch(i){u=!0,a=i}finally{try{if(!A&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw a}}return c}}function jw(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function B_(t,e){if(t){if(typeof t=="string")return jw(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jw(t,e):void 0}}function C_(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bw(t,e){return b_(t)||j_(t,e)||B_(t,e)||C_()}function Cw(t,e="utf8"){return new TextDecoder(e).decode(t)}const N_=new TextEncoder;function S_(t){return N_.encode(t)}const E_=1024*8,__=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),d0={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Zv{constructor(e=E_,r={}){Cr(this,"buffer");Cr(this,"byteLength");Cr(this,"byteOffset");Cr(this,"length");Cr(this,"offset");Cr(this,"lastWrittenByte");Cr(this,"littleEndian");Cr(this,"_data");Cr(this,"_mark");Cr(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const a=r.offset?r.offset>>>0:0,o=e.byteLength-a;let l=a;(ArrayBuffer.isView(e)||e instanceof Zv)&&(e.byteLength!==e.buffer.byteLength&&(l=e.byteOffset+a),e=e.buffer),n?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=l,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,l,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=d0[r].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,o=this.buffer.slice(a,a+n);if(this.littleEndian===__&&r!=="uint8"&&r!=="int8"){const c=new Uint8Array(this.buffer.slice(a,a+n));c.reverse();const A=new d0[r](c.buffer);return this.offset+=n,A.reverse(),A}const l=new d0[r](o);return this.offset+=n,l}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return Cw(this.readBytes(e))}decodeText(e=1,r="utf8"){return Cw(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(S_(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function uu(t){let e=t.length;for(;--e>=0;)t[e]=0}const F_=3,U_=258,Gj=29,Q_=256,I_=Q_+1+Gj,Vj=30,L_=512,k_=new Array((I_+2)*2);uu(k_);const T_=new Array(Vj*2);uu(T_);const P_=new Array(L_);uu(P_);const O_=new Array(U_-F_+1);uu(O_);const D_=new Array(Gj);uu(D_);const R_=new Array(Vj);uu(R_);const H_=(t,e,r,n)=>{let a=t&65535|0,o=t>>>16&65535|0,l=0;for(;r!==0;){l=r>2e3?2e3:r,r-=l;do a=a+e[n++]|0,o=o+a|0;while(--l);a%=65521,o%=65521}return a|o<<16|0};var Mg=H_;const M_=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},K_=new Uint32Array(M_()),G_=(t,e,r,n)=>{const a=K_,o=n+r;t^=-1;for(let l=n;l<o;l++)t=t>>>8^a[(t^e[l])&255];return t^-1};var Uo=G_,Kg={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},$j={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const V_=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var $_=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)V_(r,n)&&(t[n]=r[n])}}return t},z_=t=>{let e=0;for(let n=0,a=t.length;n<a;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,a=0,o=t.length;n<o;n++){let l=t[n];r.set(l,a),a+=l.length}return r},zj={assign:$_,flattenChunks:z_};let Wj=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Wj=!1}const Jd=new Uint8Array(256);for(let t=0;t<256;t++)Jd[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Jd[254]=Jd[254]=1;var W_=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,a,o,l=t.length,c=0;for(a=0;a<l;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<l&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),c+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(c),o=0,a=0;o<c;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<l&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?e[o++]=r:r<2048?(e[o++]=192|r>>>6,e[o++]=128|r&63):r<65536?(e[o++]=224|r>>>12,e[o++]=128|r>>>6&63,e[o++]=128|r&63):(e[o++]=240|r>>>18,e[o++]=128|r>>>12&63,e[o++]=128|r>>>6&63,e[o++]=128|r&63);return e};const J_=(t,e)=>{if(e<65534&&t.subarray&&Wj)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var X_=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,a;const o=new Array(r*2);for(a=0,n=0;n<r;){let l=t[n++];if(l<128){o[a++]=l;continue}let c=Jd[l];if(c>4){o[a++]=65533,n+=c-1;continue}for(l&=c===2?31:c===3?15:7;c>1&&n<r;)l=l<<6|t[n++]&63,c--;if(c>1){o[a++]=65533;continue}l<65536?o[a++]=l:(l-=65536,o[a++]=55296|l>>10&1023,o[a++]=56320|l&1023)}return J_(o,a)},Y_=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+Jd[t[r]]>e?r:e},Gg={string2buf:W_,buf2string:X_,utf8border:Y_};function q_(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Z_=q_;const fh=16209,eF=16191;var tF=function(e,r){let n,a,o,l,c,A,u,i,d,h,f,w,j,B,p,x,C,S,E,I,H,M,D,K;const U=e.state;n=e.next_in,D=e.input,a=n+(e.avail_in-5),o=e.next_out,K=e.output,l=o-(r-e.avail_out),c=o+(e.avail_out-257),A=U.dmax,u=U.wsize,i=U.whave,d=U.wnext,h=U.window,f=U.hold,w=U.bits,j=U.lencode,B=U.distcode,p=(1<<U.lenbits)-1,x=(1<<U.distbits)-1;e:do{w<15&&(f+=D[n++]<<w,w+=8,f+=D[n++]<<w,w+=8),C=j[f&p];t:for(;;){if(S=C>>>24,f>>>=S,w-=S,S=C>>>16&255,S===0)K[o++]=C&65535;else if(S&16){E=C&65535,S&=15,S&&(w<S&&(f+=D[n++]<<w,w+=8),E+=f&(1<<S)-1,f>>>=S,w-=S),w<15&&(f+=D[n++]<<w,w+=8,f+=D[n++]<<w,w+=8),C=B[f&x];r:for(;;){if(S=C>>>24,f>>>=S,w-=S,S=C>>>16&255,S&16){if(I=C&65535,S&=15,w<S&&(f+=D[n++]<<w,w+=8,w<S&&(f+=D[n++]<<w,w+=8)),I+=f&(1<<S)-1,I>A){e.msg="invalid distance too far back",U.mode=fh;break e}if(f>>>=S,w-=S,S=o-l,I>S){if(S=I-S,S>i&&U.sane){e.msg="invalid distance too far back",U.mode=fh;break e}if(H=0,M=h,d===0){if(H+=u-S,S<E){E-=S;do K[o++]=h[H++];while(--S);H=o-I,M=K}}else if(d<S){if(H+=u+d-S,S-=d,S<E){E-=S;do K[o++]=h[H++];while(--S);if(H=0,d<E){S=d,E-=S;do K[o++]=h[H++];while(--S);H=o-I,M=K}}}else if(H+=d-S,S<E){E-=S;do K[o++]=h[H++];while(--S);H=o-I,M=K}for(;E>2;)K[o++]=M[H++],K[o++]=M[H++],K[o++]=M[H++],E-=3;E&&(K[o++]=M[H++],E>1&&(K[o++]=M[H++]))}else{H=o-I;do K[o++]=K[H++],K[o++]=K[H++],K[o++]=K[H++],E-=3;while(E>2);E&&(K[o++]=K[H++],E>1&&(K[o++]=K[H++]))}}else if(S&64){e.msg="invalid distance code",U.mode=fh;break e}else{C=B[(C&65535)+(f&(1<<S)-1)];continue r}break}}else if(S&64)if(S&32){U.mode=eF;break e}else{e.msg="invalid literal/length code",U.mode=fh;break e}else{C=j[(C&65535)+(f&(1<<S)-1)];continue t}break}}while(n<a&&o<c);E=w>>3,n-=E,w-=E<<3,f&=(1<<w)-1,e.next_in=n,e.next_out=o,e.avail_in=n<a?5+(a-n):5-(n-a),e.avail_out=o<c?257+(c-o):257-(o-c),U.hold=f,U.bits=w};const jc=15,Nw=852,Sw=592,Ew=0,f0=1,_w=2,rF=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),nF=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),sF=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),aF=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),oF=(t,e,r,n,a,o,l,c)=>{const A=c.bits;let u=0,i=0,d=0,h=0,f=0,w=0,j=0,B=0,p=0,x=0,C,S,E,I,H,M=null,D;const K=new Uint16Array(jc+1),U=new Uint16Array(jc+1);let F=null,k,T,P;for(u=0;u<=jc;u++)K[u]=0;for(i=0;i<n;i++)K[e[r+i]]++;for(f=A,h=jc;h>=1&&K[h]===0;h--);if(f>h&&(f=h),h===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,c.bits=1,0;for(d=1;d<h&&K[d]===0;d++);for(f<d&&(f=d),B=1,u=1;u<=jc;u++)if(B<<=1,B-=K[u],B<0)return-1;if(B>0&&(t===Ew||h!==1))return-1;for(U[1]=0,u=1;u<jc;u++)U[u+1]=U[u]+K[u];for(i=0;i<n;i++)e[r+i]!==0&&(l[U[e[r+i]]++]=i);if(t===Ew?(M=F=l,D=20):t===f0?(M=rF,F=nF,D=257):(M=sF,F=aF,D=0),x=0,i=0,u=d,H=o,w=f,j=0,E=-1,p=1<<f,I=p-1,t===f0&&p>Nw||t===_w&&p>Sw)return 1;for(;;){k=u-j,l[i]+1<D?(T=0,P=l[i]):l[i]>=D?(T=F[l[i]-D],P=M[l[i]-D]):(T=96,P=0),C=1<<u-j,S=1<<w,d=S;do S-=C,a[H+(x>>j)+S]=k<<24|T<<16|P|0;while(S!==0);for(C=1<<u-1;x&C;)C>>=1;if(C!==0?(x&=C-1,x+=C):x=0,i++,--K[u]===0){if(u===h)break;u=e[r+l[i]]}if(u>f&&(x&I)!==E){for(j===0&&(j=f),H+=d,w=u-j,B=1<<w;w+j<h&&(B-=K[w+j],!(B<=0));)w++,B<<=1;if(p+=1<<w,t===f0&&p>Nw||t===_w&&p>Sw)return 1;E=x&I,a[E]=f<<24|w<<16|H-o|0}}return x!==0&&(a[H+x]=u-j<<24|64<<16|0),c.bits=f,0};var jd=oF;const iF=0,Jj=1,Xj=2,{Z_FINISH:Fw,Z_BLOCK:AF,Z_TREES:hh,Z_OK:Cl,Z_STREAM_END:lF,Z_NEED_DICT:cF,Z_STREAM_ERROR:Ka,Z_DATA_ERROR:Yj,Z_MEM_ERROR:qj,Z_BUF_ERROR:uF,Z_DEFLATED:Uw}=$j,Hm=16180,Qw=16181,Iw=16182,Lw=16183,kw=16184,Tw=16185,Pw=16186,Ow=16187,Dw=16188,Rw=16189,dm=16190,di=16191,h0=16192,Hw=16193,m0=16194,Mw=16195,Kw=16196,Gw=16197,Vw=16198,mh=16199,ph=16200,$w=16201,zw=16202,Ww=16203,Jw=16204,Xw=16205,p0=16206,Yw=16207,qw=16208,zr=16209,Zj=16210,eB=16211,dF=852,fF=592,hF=15,mF=hF,Zw=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function pF(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const _l=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Hm||e.mode>eB?1:0},tB=t=>{if(_l(t))return Ka;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=Hm,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(dF),e.distcode=e.distdyn=new Int32Array(fF),e.sane=1,e.back=-1,Cl},rB=t=>{if(_l(t))return Ka;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,tB(t)},nB=(t,e)=>{let r;if(_l(t))return Ka;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Ka:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,rB(t))},sB=(t,e)=>{if(!t)return Ka;const r=new pF;t.state=r,r.strm=t,r.window=null,r.mode=Hm;const n=nB(t,e);return n!==Cl&&(t.state=null),n},gF=t=>sB(t,mF);let e1=!0,g0,v0;const vF=t=>{if(e1){g0=new Int32Array(512),v0=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(jd(Jj,t.lens,0,288,g0,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;jd(Xj,t.lens,0,32,v0,0,t.work,{bits:5}),e1=!1}t.lencode=g0,t.lenbits=9,t.distcode=v0,t.distbits=5},aB=(t,e,r,n)=>{let a;const o=t.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(e.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>n&&(a=n),o.window.set(e.subarray(r-n,r-n+a),o.wnext),n-=a,n?(o.window.set(e.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0},xF=(t,e)=>{let r,n,a,o,l,c,A,u,i,d,h,f,w,j,B=0,p,x,C,S,E,I,H,M;const D=new Uint8Array(4);let K,U;const F=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(_l(t)||!t.output||!t.input&&t.avail_in!==0)return Ka;r=t.state,r.mode===di&&(r.mode=h0),l=t.next_out,a=t.output,A=t.avail_out,o=t.next_in,n=t.input,c=t.avail_in,u=r.hold,i=r.bits,d=c,h=A,M=Cl;e:for(;;)switch(r.mode){case Hm:if(r.wrap===0){r.mode=h0;break}for(;i<16;){if(c===0)break e;c--,u+=n[o++]<<i,i+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,D[0]=u&255,D[1]=u>>>8&255,r.check=Uo(r.check,D,2,0),u=0,i=0,r.mode=Qw;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=zr;break}if((u&15)!==Uw){t.msg="unknown compression method",r.mode=zr;break}if(u>>>=4,i-=4,H=(u&15)+8,r.wbits===0&&(r.wbits=H),H>15||H>r.wbits){t.msg="invalid window size",r.mode=zr;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=u&512?Rw:di,u=0,i=0;break;case Qw:for(;i<16;){if(c===0)break e;c--,u+=n[o++]<<i,i+=8}if(r.flags=u,(r.flags&255)!==Uw){t.msg="unknown compression method",r.mode=zr;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=zr;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(D[0]=u&255,D[1]=u>>>8&255,r.check=Uo(r.check,D,2,0)),u=0,i=0,r.mode=Iw;case Iw:for(;i<32;){if(c===0)break e;c--,u+=n[o++]<<i,i+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(D[0]=u&255,D[1]=u>>>8&255,D[2]=u>>>16&255,D[3]=u>>>24&255,r.check=Uo(r.check,D,4,0)),u=0,i=0,r.mode=Lw;case Lw:for(;i<16;){if(c===0)break e;c--,u+=n[o++]<<i,i+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(D[0]=u&255,D[1]=u>>>8&255,r.check=Uo(r.check,D,2,0)),u=0,i=0,r.mode=kw;case kw:if(r.flags&1024){for(;i<16;){if(c===0)break e;c--,u+=n[o++]<<i,i+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(D[0]=u&255,D[1]=u>>>8&255,r.check=Uo(r.check,D,2,0)),u=0,i=0}else r.head&&(r.head.extra=null);r.mode=Tw;case Tw:if(r.flags&1024&&(f=r.length,f>c&&(f=c),f&&(r.head&&(H=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+f),H)),r.flags&512&&r.wrap&4&&(r.check=Uo(r.check,n,f,o)),c-=f,o+=f,r.length-=f),r.length))break e;r.length=0,r.mode=Pw;case Pw:if(r.flags&2048){if(c===0)break e;f=0;do H=n[o+f++],r.head&&H&&r.length<65536&&(r.head.name+=String.fromCharCode(H));while(H&&f<c);if(r.flags&512&&r.wrap&4&&(r.check=Uo(r.check,n,f,o)),c-=f,o+=f,H)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=Ow;case Ow:if(r.flags&4096){if(c===0)break e;f=0;do H=n[o+f++],r.head&&H&&r.length<65536&&(r.head.comment+=String.fromCharCode(H));while(H&&f<c);if(r.flags&512&&r.wrap&4&&(r.check=Uo(r.check,n,f,o)),c-=f,o+=f,H)break e}else r.head&&(r.head.comment=null);r.mode=Dw;case Dw:if(r.flags&512){for(;i<16;){if(c===0)break e;c--,u+=n[o++]<<i,i+=8}if(r.wrap&4&&u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=zr;break}u=0,i=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=di;break;case Rw:for(;i<32;){if(c===0)break e;c--,u+=n[o++]<<i,i+=8}t.adler=r.check=Zw(u),u=0,i=0,r.mode=dm;case dm:if(r.havedict===0)return t.next_out=l,t.avail_out=A,t.next_in=o,t.avail_in=c,r.hold=u,r.bits=i,cF;t.adler=r.check=1,r.mode=di;case di:if(e===AF||e===hh)break e;case h0:if(r.last){u>>>=i&7,i-=i&7,r.mode=p0;break}for(;i<3;){if(c===0)break e;c--,u+=n[o++]<<i,i+=8}switch(r.last=u&1,u>>>=1,i-=1,u&3){case 0:r.mode=Hw;break;case 1:if(vF(r),r.mode=mh,e===hh){u>>>=2,i-=2;break e}break;case 2:r.mode=Kw;break;case 3:t.msg="invalid block type",r.mode=zr}u>>>=2,i-=2;break;case Hw:for(u>>>=i&7,i-=i&7;i<32;){if(c===0)break e;c--,u+=n[o++]<<i,i+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=zr;break}if(r.length=u&65535,u=0,i=0,r.mode=m0,e===hh)break e;case m0:r.mode=Mw;case Mw:if(f=r.length,f){if(f>c&&(f=c),f>A&&(f=A),f===0)break e;a.set(n.subarray(o,o+f),l),c-=f,o+=f,A-=f,l+=f,r.length-=f;break}r.mode=di;break;case Kw:for(;i<14;){if(c===0)break e;c--,u+=n[o++]<<i,i+=8}if(r.nlen=(u&31)+257,u>>>=5,i-=5,r.ndist=(u&31)+1,u>>>=5,i-=5,r.ncode=(u&15)+4,u>>>=4,i-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=zr;break}r.have=0,r.mode=Gw;case Gw:for(;r.have<r.ncode;){for(;i<3;){if(c===0)break e;c--,u+=n[o++]<<i,i+=8}r.lens[F[r.have++]]=u&7,u>>>=3,i-=3}for(;r.have<19;)r.lens[F[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,K={bits:r.lenbits},M=jd(iF,r.lens,0,19,r.lencode,0,r.work,K),r.lenbits=K.bits,M){t.msg="invalid code lengths set",r.mode=zr;break}r.have=0,r.mode=Vw;case Vw:for(;r.have<r.nlen+r.ndist;){for(;B=r.lencode[u&(1<<r.lenbits)-1],p=B>>>24,x=B>>>16&255,C=B&65535,!(p<=i);){if(c===0)break e;c--,u+=n[o++]<<i,i+=8}if(C<16)u>>>=p,i-=p,r.lens[r.have++]=C;else{if(C===16){for(U=p+2;i<U;){if(c===0)break e;c--,u+=n[o++]<<i,i+=8}if(u>>>=p,i-=p,r.have===0){t.msg="invalid bit length repeat",r.mode=zr;break}H=r.lens[r.have-1],f=3+(u&3),u>>>=2,i-=2}else if(C===17){for(U=p+3;i<U;){if(c===0)break e;c--,u+=n[o++]<<i,i+=8}u>>>=p,i-=p,H=0,f=3+(u&7),u>>>=3,i-=3}else{for(U=p+7;i<U;){if(c===0)break e;c--,u+=n[o++]<<i,i+=8}u>>>=p,i-=p,H=0,f=11+(u&127),u>>>=7,i-=7}if(r.have+f>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=zr;break}for(;f--;)r.lens[r.have++]=H}}if(r.mode===zr)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=zr;break}if(r.lenbits=9,K={bits:r.lenbits},M=jd(Jj,r.lens,0,r.nlen,r.lencode,0,r.work,K),r.lenbits=K.bits,M){t.msg="invalid literal/lengths set",r.mode=zr;break}if(r.distbits=6,r.distcode=r.distdyn,K={bits:r.distbits},M=jd(Xj,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,K),r.distbits=K.bits,M){t.msg="invalid distances set",r.mode=zr;break}if(r.mode=mh,e===hh)break e;case mh:r.mode=ph;case ph:if(c>=6&&A>=258){t.next_out=l,t.avail_out=A,t.next_in=o,t.avail_in=c,r.hold=u,r.bits=i,tF(t,h),l=t.next_out,a=t.output,A=t.avail_out,o=t.next_in,n=t.input,c=t.avail_in,u=r.hold,i=r.bits,r.mode===di&&(r.back=-1);break}for(r.back=0;B=r.lencode[u&(1<<r.lenbits)-1],p=B>>>24,x=B>>>16&255,C=B&65535,!(p<=i);){if(c===0)break e;c--,u+=n[o++]<<i,i+=8}if(x&&!(x&240)){for(S=p,E=x,I=C;B=r.lencode[I+((u&(1<<S+E)-1)>>S)],p=B>>>24,x=B>>>16&255,C=B&65535,!(S+p<=i);){if(c===0)break e;c--,u+=n[o++]<<i,i+=8}u>>>=S,i-=S,r.back+=S}if(u>>>=p,i-=p,r.back+=p,r.length=C,x===0){r.mode=Xw;break}if(x&32){r.back=-1,r.mode=di;break}if(x&64){t.msg="invalid literal/length code",r.mode=zr;break}r.extra=x&15,r.mode=$w;case $w:if(r.extra){for(U=r.extra;i<U;){if(c===0)break e;c--,u+=n[o++]<<i,i+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,i-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=zw;case zw:for(;B=r.distcode[u&(1<<r.distbits)-1],p=B>>>24,x=B>>>16&255,C=B&65535,!(p<=i);){if(c===0)break e;c--,u+=n[o++]<<i,i+=8}if(!(x&240)){for(S=p,E=x,I=C;B=r.distcode[I+((u&(1<<S+E)-1)>>S)],p=B>>>24,x=B>>>16&255,C=B&65535,!(S+p<=i);){if(c===0)break e;c--,u+=n[o++]<<i,i+=8}u>>>=S,i-=S,r.back+=S}if(u>>>=p,i-=p,r.back+=p,x&64){t.msg="invalid distance code",r.mode=zr;break}r.offset=C,r.extra=x&15,r.mode=Ww;case Ww:if(r.extra){for(U=r.extra;i<U;){if(c===0)break e;c--,u+=n[o++]<<i,i+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,i-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=zr;break}r.mode=Jw;case Jw:if(A===0)break e;if(f=h-A,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=zr;break}f>r.wnext?(f-=r.wnext,w=r.wsize-f):w=r.wnext-f,f>r.length&&(f=r.length),j=r.window}else j=a,w=l-r.offset,f=r.length;f>A&&(f=A),A-=f,r.length-=f;do a[l++]=j[w++];while(--f);r.length===0&&(r.mode=ph);break;case Xw:if(A===0)break e;a[l++]=r.length,A--,r.mode=ph;break;case p0:if(r.wrap){for(;i<32;){if(c===0)break e;c--,u|=n[o++]<<i,i+=8}if(h-=A,t.total_out+=h,r.total+=h,r.wrap&4&&h&&(t.adler=r.check=r.flags?Uo(r.check,a,h,l-h):Mg(r.check,a,h,l-h)),h=A,r.wrap&4&&(r.flags?u:Zw(u))!==r.check){t.msg="incorrect data check",r.mode=zr;break}u=0,i=0}r.mode=Yw;case Yw:if(r.wrap&&r.flags){for(;i<32;){if(c===0)break e;c--,u+=n[o++]<<i,i+=8}if(r.wrap&4&&u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=zr;break}u=0,i=0}r.mode=qw;case qw:M=lF;break e;case zr:M=Yj;break e;case Zj:return qj;case eB:default:return Ka}return t.next_out=l,t.avail_out=A,t.next_in=o,t.avail_in=c,r.hold=u,r.bits=i,(r.wsize||h!==t.avail_out&&r.mode<zr&&(r.mode<p0||e!==Fw))&&aB(t,t.output,t.next_out,h-t.avail_out),d-=t.avail_in,h-=t.avail_out,t.total_in+=d,t.total_out+=h,r.total+=h,r.wrap&4&&h&&(t.adler=r.check=r.flags?Uo(r.check,a,h,t.next_out-h):Mg(r.check,a,h,t.next_out-h)),t.data_type=r.bits+(r.last?64:0)+(r.mode===di?128:0)+(r.mode===mh||r.mode===m0?256:0),(d===0&&h===0||e===Fw)&&M===Cl&&(M=uF),M},yF=t=>{if(_l(t))return Ka;let e=t.state;return e.window&&(e.window=null),t.state=null,Cl},wF=(t,e)=>{if(_l(t))return Ka;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,Cl):Ka},bF=(t,e)=>{const r=e.length;let n,a,o;return _l(t)||(n=t.state,n.wrap!==0&&n.mode!==dm)?Ka:n.mode===dm&&(a=1,a=Mg(a,e,r,0),a!==n.check)?Yj:(o=aB(t,e,r,r),o?(n.mode=Zj,qj):(n.havedict=1,Cl))};var jF=rB,BF=nB,CF=tB,NF=gF,SF=sB,EF=xF,_F=yF,FF=wF,UF=bF,QF="pako inflate (from Nodeca project)",pi={inflateReset:jF,inflateReset2:BF,inflateResetKeep:CF,inflateInit:NF,inflateInit2:SF,inflate:EF,inflateEnd:_F,inflateGetHeader:FF,inflateSetDictionary:UF,inflateInfo:QF};function IF(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var LF=IF;const oB=Object.prototype.toString,{Z_NO_FLUSH:kF,Z_FINISH:TF,Z_OK:Xd,Z_STREAM_END:x0,Z_NEED_DICT:y0,Z_STREAM_ERROR:PF,Z_DATA_ERROR:t1,Z_MEM_ERROR:OF}=$j;function of(t){this.options=zj.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Z_,this.strm.avail_out=0;let r=pi.inflateInit2(this.strm,e.windowBits);if(r!==Xd)throw new Error(Kg[r]);if(this.header=new LF,pi.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Gg.string2buf(e.dictionary):oB.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=pi.inflateSetDictionary(this.strm,e.dictionary),r!==Xd)))throw new Error(Kg[r])}of.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let o,l,c;if(this.ended)return!1;for(e===~~e?l=e:l=e===!0?TF:kF,oB.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),o=pi.inflate(r,l),o===y0&&a&&(o=pi.inflateSetDictionary(r,a),o===Xd?o=pi.inflate(r,l):o===t1&&(o=y0));r.avail_in>0&&o===x0&&r.state.wrap>0&&t[r.next_in]!==0;)pi.inflateReset(r),o=pi.inflate(r,l);switch(o){case PF:case t1:case y0:case OF:return this.onEnd(o),this.ended=!0,!1}if(c=r.avail_out,r.next_out&&(r.avail_out===0||o===x0))if(this.options.to==="string"){let A=Gg.utf8border(r.output,r.next_out),u=r.next_out-A,i=Gg.buf2string(r.output,A);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(A,A+u),0),this.onData(i)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(o===Xd&&c===0)){if(o===x0)return o=pi.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};of.prototype.onData=function(t){this.chunks.push(t)};of.prototype.onEnd=function(t){t===Xd&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=zj.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function DF(t,e){const r=new of(e);if(r.push(t),r.err)throw r.msg||Kg[r.err];return r.result}var RF=of,HF=DF,MF={Inflate:RF,inflate:HF};const{Inflate:KF,inflate:GF}=MF;var r1=KF,VF=GF;const iB=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;iB[t]=e}const n1=4294967295;function $F(t,e,r){let n=t;for(let a=0;a<r;a++)n=iB[(n^e[a])&255]^n>>>8;return n}function zF(t,e){return($F(n1,t,e)^n1)>>>0}function s1(t,e,r){const n=t.readUint32(),a=zF(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function AB(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function lB(t,e,r,n){let a=0;for(;a<n;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+e[a-n]&255}function cB(t,e,r,n){let a=0;if(r.length===0)for(;a<n;a++)e[a]=t[a];else for(;a<n;a++)e[a]=t[a]+r[a]&255}function uB(t,e,r,n,a){let o=0;if(r.length===0){for(;o<a;o++)e[o]=t[o];for(;o<n;o++)e[o]=t[o]+(e[o-a]>>1)&255}else{for(;o<a;o++)e[o]=t[o]+(r[o]>>1)&255;for(;o<n;o++)e[o]=t[o]+(e[o-a]+r[o]>>1)&255}}function dB(t,e,r,n,a){let o=0;if(r.length===0){for(;o<a;o++)e[o]=t[o];for(;o<n;o++)e[o]=t[o]+e[o-a]&255}else{for(;o<a;o++)e[o]=t[o]+r[o]&255;for(;o<n;o++)e[o]=t[o]+WF(e[o-a],r[o],r[o-a])&255}}function WF(t,e,r){const n=t+e-r,a=Math.abs(n-t),o=Math.abs(n-e),l=Math.abs(n-r);return a<=o&&a<=l?t:o<=l?e:r}function JF(t,e,r,n,a,o){switch(t){case 0:AB(e,r,a);break;case 1:lB(e,r,a,o);break;case 2:cB(e,r,n,a);break;case 3:uB(e,r,n,a,o);break;case 4:dB(e,r,n,a,o);break;default:throw new Error(`Unsupported filter: ${t}`)}}const XF=new Uint16Array([255]),YF=new Uint8Array(XF.buffer),qF=YF[0]===255;function ZF(t){const{data:e,width:r,height:n,channels:a,depth:o}=t,l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(o/8)*a,A=new Uint8Array(n*r*c);let u=0;for(let i=0;i<7;i++){const d=l[i],h=Math.ceil((r-d.x)/d.xStep),f=Math.ceil((n-d.y)/d.yStep);if(h<=0||f<=0)continue;const w=h*c,j=new Uint8Array(w);for(let B=0;B<f;B++){const p=e[u++],x=e.subarray(u,u+w);u+=w;const C=new Uint8Array(w);JF(p,x,C,j,w,c),j.set(C);for(let S=0;S<h;S++){const E=d.x+S*d.xStep,I=d.y+B*d.yStep;if(!(E>=r||I>=n))for(let H=0;H<c;H++)A[(I*r+E)*c+H]=C[S*c+H]}}}if(o===16){const i=new Uint16Array(A.buffer);if(qF)for(let d=0;d<i.length;d++)i[d]=eU(i[d]);return i}else return A}function eU(t){return(t&255)<<8|t>>8&255}const tU=new Uint16Array([255]),rU=new Uint8Array(tU.buffer),nU=rU[0]===255,sU=new Uint8Array(0);function a1(t){const{data:e,width:r,height:n,channels:a,depth:o}=t,l=Math.ceil(o/8)*a,c=Math.ceil(o/8*a*r),A=new Uint8Array(n*c);let u=sU,i=0,d,h;for(let f=0;f<n;f++){switch(d=e.subarray(i+1,i+1+c),h=A.subarray(f*c,(f+1)*c),e[i]){case 0:AB(d,h,c);break;case 1:lB(d,h,c,l);break;case 2:cB(d,h,u,c);break;case 3:uB(d,h,u,c,l);break;case 4:dB(d,h,u,c,l);break;default:throw new Error(`Unsupported filter: ${e[i]}`)}u=h,i+=c+1}if(o===16){const f=new Uint16Array(A.buffer);if(nU)for(let w=0;w<f.length;w++)f[w]=aU(f[w]);return f}else return A}function aU(t){return(t&255)<<8|t>>8&255}const kh=Uint8Array.of(137,80,78,71,13,10,26,10);function o1(t){if(!oU(t.readBytes(kh.length)))throw new Error("wrong PNG signature")}function oU(t){if(t.length<kh.length)return!1;for(let e=0;e<kh.length;e++)if(t[e]!==kh[e])return!1;return!0}const iU="tEXt",AU=0,fB=new TextDecoder("latin1");function lU(t){if(uU(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const cU=/^[\u0000-\u00FF]*$/;function uU(t){if(!cU.test(t))throw new Error("invalid latin1 text")}function dU(t,e,r){const n=hB(e);t[n]=fU(e,r-n.length-1)}function hB(t){for(t.mark();t.readByte()!==AU;);const e=t.offset;t.reset();const r=fB.decode(t.readBytes(e-t.offset-1));return t.skip(1),lU(r),r}function fU(t,e){return fB.decode(t.readBytes(e))}const ga={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},w0={UNKNOWN:-1,DEFLATE:0},i1={UNKNOWN:-1,ADAPTIVE:0},b0={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},gh={NONE:0,BACKGROUND:1,PREVIOUS:2},j0={SOURCE:0,OVER:1};class hU extends Zv{constructor(r,n={}){super(r);Cr(this,"_checkCrc");Cr(this,"_inflator");Cr(this,"_png");Cr(this,"_apng");Cr(this,"_end");Cr(this,"_hasPalette");Cr(this,"_palette");Cr(this,"_hasTransparency");Cr(this,"_transparency");Cr(this,"_compressionMethod");Cr(this,"_filterMethod");Cr(this,"_interlaceMethod");Cr(this,"_colorType");Cr(this,"_isAnimated");Cr(this,"_numberOfFrames");Cr(this,"_numberOfPlays");Cr(this,"_frames");Cr(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new r1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=w0.UNKNOWN,this._filterMethod=i1.UNKNOWN,this._interlaceMethod=b0.UNKNOWN,this._colorType=ga.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(o1(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(o1(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case iU:dU(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?s1(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?s1(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=mU(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case ga.GREYSCALE:a=1;break;case ga.TRUECOLOUR:a=3;break;case ga.INDEXED_COLOUR:a=1;break;case ga.GREYSCALE_ALPHA:a=2;break;case ga.TRUECOLOUR_ALPHA:a=4;break;case ga.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==w0.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let o=0;o<n;o++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case ga.GREYSCALE:case ga.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case ga.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case ga.UNKNOWN:case ga.GREYSCALE_ALPHA:case ga.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=hB(this),a=this.readUint8();if(a!==w0.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const o=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:VF(o)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=a1({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const o=this._apng.frames.at(r-1);this.disposeFrame(a,o,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case gh.NONE:break;case gh.BACKGROUND:for(let o=0;o<this._png.height;o++)for(let l=0;l<this._png.width;l++){const c=(o*r.width+l)*this._png.channels;for(let A=0;A<this._png.channels;A++)a.data[c+A]=0}break;case gh.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,o=(l,c)=>{const A=((l+n.yOffset)*this._png.width+n.xOffset+c)*this._png.channels,u=(l*n.width+c)*this._png.channels;return{index:A,frameIndex:u}};switch(n.blendOp){case j0.SOURCE:for(let l=0;l<n.height;l++)for(let c=0;c<n.width;c++){const{index:A,frameIndex:u}=o(l,c);for(let i=0;i<this._png.channels;i++)r.data[A+i]=n.data[u+i]}break;case j0.OVER:for(let l=0;l<n.height;l++)for(let c=0;c<n.width;c++){const{index:A,frameIndex:u}=o(l,c);for(let i=0;i<this._png.channels;i++){const d=n.data[u+this._png.channels-1]/a,h=i%(this._png.channels-1)===0?1:n.data[u+i],f=Math.floor(d*h+(1-d)*r.data[A+i]);r.data[A+i]+=f}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==i1.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===b0.NO_INTERLACE)this._png.data=a1({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===b0.ADAM7)this._png.data=ZF({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:gh.NONE,blendOp:j0.SOURCE,data:r}),this._inflator=new r1,this._writingDataChunks=!1}}function mU(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var A1;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(A1||(A1={}));function pU(t,e){return new hU(t,e).decode()}var Vt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function B0(){Vt.console&&typeof Vt.console.log=="function"&&Vt.console.log.apply(Vt.console,arguments)}var Ir={log:B0,warn:function(t){Vt.console&&(typeof Vt.console.warn=="function"?Vt.console.warn.apply(Vt.console,arguments):B0.call(null,arguments))},error:function(t){Vt.console&&(typeof Vt.console.error=="function"?Vt.console.error.apply(Vt.console,arguments):B0(t))}};function C0(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){rl(n.response,e,r)},n.onerror=function(){Ir.error("could not download file")},n.send()}function l1(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function vh(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var rl=Vt.saveAs||((typeof window>"u"?"undefined":Nr(window))!=="object"||window!==Vt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=Vt.URL||Vt.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?l1(a.href)?C0(t,e,r):vh(a,a.target="_blank"):vh(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){vh(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(l1(t))C0(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){vh(n)})}else navigator.msSaveOrOpenBlob(function(a,o){return o===void 0?o={autoBom:!1}:Nr(o)!=="object"&&(Ir.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return C0(t,e,r);var a=t.type==="application/octet-stream",o=/constructor/i.test(Vt.HTMLElement)||Vt.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&o)&&(typeof FileReader>"u"?"undefined":Nr(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var i=c.result;i=l?i:i.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=i:location=i,n=null},c.readAsDataURL(t)}else{var A=Vt.URL||Vt.webkitURL,u=A.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){A.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function mB(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,o=r[n].process,l=a.exec(t);l&&(e=o(l),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),A=this.g.toString(16),u=this.b.toString(16);return c.length==1&&(c="0"+c),A.length==1&&(A="0"+A),u.length==1&&(u="0"+u),"#"+c+A+u}}var Th=Vt.atob.bind(Vt),c1=Vt.btoa.bind(Vt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function N0(t,e){var r=t[0],n=t[1],a=t[2],o=t[3];r=ms(r,n,a,o,e[0],7,-680876936),o=ms(o,r,n,a,e[1],12,-389564586),a=ms(a,o,r,n,e[2],17,606105819),n=ms(n,a,o,r,e[3],22,-1044525330),r=ms(r,n,a,o,e[4],7,-176418897),o=ms(o,r,n,a,e[5],12,1200080426),a=ms(a,o,r,n,e[6],17,-1473231341),n=ms(n,a,o,r,e[7],22,-45705983),r=ms(r,n,a,o,e[8],7,1770035416),o=ms(o,r,n,a,e[9],12,-1958414417),a=ms(a,o,r,n,e[10],17,-42063),n=ms(n,a,o,r,e[11],22,-1990404162),r=ms(r,n,a,o,e[12],7,1804603682),o=ms(o,r,n,a,e[13],12,-40341101),a=ms(a,o,r,n,e[14],17,-1502002290),r=ps(r,n=ms(n,a,o,r,e[15],22,1236535329),a,o,e[1],5,-165796510),o=ps(o,r,n,a,e[6],9,-1069501632),a=ps(a,o,r,n,e[11],14,643717713),n=ps(n,a,o,r,e[0],20,-373897302),r=ps(r,n,a,o,e[5],5,-701558691),o=ps(o,r,n,a,e[10],9,38016083),a=ps(a,o,r,n,e[15],14,-660478335),n=ps(n,a,o,r,e[4],20,-405537848),r=ps(r,n,a,o,e[9],5,568446438),o=ps(o,r,n,a,e[14],9,-1019803690),a=ps(a,o,r,n,e[3],14,-187363961),n=ps(n,a,o,r,e[8],20,1163531501),r=ps(r,n,a,o,e[13],5,-1444681467),o=ps(o,r,n,a,e[2],9,-51403784),a=ps(a,o,r,n,e[7],14,1735328473),r=gs(r,n=ps(n,a,o,r,e[12],20,-1926607734),a,o,e[5],4,-378558),o=gs(o,r,n,a,e[8],11,-2022574463),a=gs(a,o,r,n,e[11],16,1839030562),n=gs(n,a,o,r,e[14],23,-35309556),r=gs(r,n,a,o,e[1],4,-1530992060),o=gs(o,r,n,a,e[4],11,1272893353),a=gs(a,o,r,n,e[7],16,-155497632),n=gs(n,a,o,r,e[10],23,-1094730640),r=gs(r,n,a,o,e[13],4,681279174),o=gs(o,r,n,a,e[0],11,-358537222),a=gs(a,o,r,n,e[3],16,-722521979),n=gs(n,a,o,r,e[6],23,76029189),r=gs(r,n,a,o,e[9],4,-640364487),o=gs(o,r,n,a,e[12],11,-421815835),a=gs(a,o,r,n,e[15],16,530742520),r=vs(r,n=gs(n,a,o,r,e[2],23,-995338651),a,o,e[0],6,-198630844),o=vs(o,r,n,a,e[7],10,1126891415),a=vs(a,o,r,n,e[14],15,-1416354905),n=vs(n,a,o,r,e[5],21,-57434055),r=vs(r,n,a,o,e[12],6,1700485571),o=vs(o,r,n,a,e[3],10,-1894986606),a=vs(a,o,r,n,e[10],15,-1051523),n=vs(n,a,o,r,e[1],21,-2054922799),r=vs(r,n,a,o,e[8],6,1873313359),o=vs(o,r,n,a,e[15],10,-30611744),a=vs(a,o,r,n,e[6],15,-1560198380),n=vs(n,a,o,r,e[13],21,1309151649),r=vs(r,n,a,o,e[4],6,-145523070),o=vs(o,r,n,a,e[11],10,-1120210379),a=vs(a,o,r,n,e[2],15,718787259),n=vs(n,a,o,r,e[9],21,-343485551),t[0]=dA(r,t[0]),t[1]=dA(n,t[1]),t[2]=dA(a,t[2]),t[3]=dA(o,t[3])}function Mm(t,e,r,n,a,o){return e=dA(dA(e,t),dA(n,o)),dA(e<<a|e>>>32-a,r)}function ms(t,e,r,n,a,o,l){return Mm(e&r|~e&n,t,e,a,o,l)}function ps(t,e,r,n,a,o,l){return Mm(e&n|r&~n,t,e,a,o,l)}function gs(t,e,r,n,a,o,l){return Mm(e^r^n,t,e,a,o,l)}function vs(t,e,r,n,a,o,l){return Mm(r^(e|~n),t,e,a,o,l)}function pB(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)N0(n,gU(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(N0(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*r,N0(n,a),n}function gU(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var u1="0123456789abcdef".split("");function vU(t){for(var e="",r=0;r<4;r++)e+=u1[t>>8*r+4&15]+u1[t>>8*r&15];return e}function xU(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Vg(t){return pB(t).map(xU).join("")}var yU=function(t){for(var e=0;e<t.length;e++)t[e]=vU(t[e]);return t.join("")}(pB("hello"))!="5d41402abc4b2a76b9719d911017c592";function dA(t,e){if(yU){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function $g(t,e){var r,n,a,o;if(t!==r){for(var l=(a=t,o=1+(256/t.length|0),new Array(o+1).join(a)),c=[],A=0;A<256;A++)c[A]=A;var u=0;for(A=0;A<256;A++){var i=c[A];u=(u+i+l.charCodeAt(A))%256,c[A]=c[u],c[u]=i}r=t,n=c}else c=n;var d=e.length,h=0,f=0,w="";for(A=0;A<d;A++)f=(f+(i=c[h=(h+1)%256]))%256,c[h]=c[f],c[f]=i,l=c[(c[h]+c[f])%256],w+=String.fromCharCode(e.charCodeAt(A)^l);return w}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var d1={print:4,modify:8,copy:16,"annot-forms":32};function Ec(t,e,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(c){if(d1.perm!==void 0)throw new Error("Invalid permission: "+c);a+=d1[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),l=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,l),this.P=-(1+(255^a)),this.encryptionKey=Vg(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=$g(this.encryptionKey,this.padding)}function _c(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[n]}return e}function f1(t){if(Nr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var o=Math.random().toString(35);return e[r][o]=[n,!!a],o},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var o in e[r]){var l=e[r][o];try{l[0].apply(t,n)}catch(c){Vt.console&&Ir.error("jsPDF PubSub Error",c.message,c)}l[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Yd(t){if(!(this instanceof Yd))return new Yd(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function gB(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function AA(t,e,r,n,a){if(!(this instanceof AA))return new AA(t,e,r,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,gB.call(this,n,a)}function ll(t,e,r,n,a){if(!(this instanceof ll))return new ll(t,e,r,n,a);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,gB.call(this,n,a)}function Dt(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],o=arguments[3],l=[],c=1,A=16,u="S",i=null;Nr(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,o=t.compress||t.compressPdf||o,(i=t.encryption||null)!==null&&(i.userPassword=i.userPassword||"",i.ownerPassword=i.ownerPassword||"",i.userPermissions=i.userPermissions||[]),c=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(A=t.floatPrecision),u=t.defaultPathOperation||"S"),l=t.filters||(o===!0?["FlateEncode"]:l),n=n||"mm",r=(""+(r||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,h={},f={internal:{},__private__:{}};f.__private__.PubSub=f1;var w="1.3",j=f.__private__.getPdfVersion=function(){return w};f.__private__.setPdfVersion=function(_){w=_};var B={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return B};var p=f.__private__.getPageFormat=function(_){return B[_]};a=a||"a4";var x="compat",C="advanced",S=x;function E(){this.saveGraphicsState(),de(new Qt(Pe,0,0,-Pe,0,qo()*Pe).toString()+" cm"),this.setFontSize(this.getFontSize()/Pe),u="n",S=C}function I(){this.restoreGraphicsState(),u="S",S=x}var H=f.__private__.combineFontStyleAndFontWeight=function(_,J){if(_=="bold"&&J=="normal"||_=="bold"&&J==400||_=="normal"&&J=="italic"||_=="bold"&&J=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return J&&(_=J==400||J==="normal"?_==="italic"?"italic":"normal":J!=700&&J!=="bold"||_!=="normal"?(J==700?"bold":J)+""+_:"bold"),_};f.advancedAPI=function(_){var J=S===x;return J&&E.call(this),typeof _!="function"||(_(this),J&&I.call(this)),this},f.compatAPI=function(_){var J=S===C;return J&&I.call(this),typeof _!="function"||(_(this),J&&E.call(this)),this},f.isAdvancedAPI=function(){return S===C};var M,D=function(_){if(S!==C)throw new Error(_+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},K=f.roundToPrecision=f.__private__.roundToPrecision=function(_,J){var me=e||J;if(isNaN(_)||isNaN(me))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return _.toFixed(me).replace(/0+$/,"")};M=f.hpf=f.__private__.hpf=typeof A=="number"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return K(_,A)}:A==="smart"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return K(_,_>-1&&_<1?16:5)}:function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return K(_,16)};var U=f.f2=f.__private__.f2=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f2");return K(_,2)},F=f.__private__.f3=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f3");return K(_,3)},k=f.scale=f.__private__.scale=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.scale");return S===x?_*Pe:S===C?_:void 0},T=function(_){return k(function(J){return S===x?qo()-J:S===C?J:void 0}(_))};f.__private__.setPrecision=f.setPrecision=function(_){typeof parseInt(_,10)=="number"&&(e=parseInt(_,10))};var P,$="00000000000000000000000000000000",ee=f.__private__.getFileId=function(){return $},V=f.__private__.setFileId=function(_){return $=_!==void 0&&/^[a-fA-F0-9]{32}$/.test(_)?_.toUpperCase():$.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),i!==null&&(Yr=new Ec(i.userPermissions,i.userPassword,i.ownerPassword,$)),$};f.setFileId=function(_){return V(_),this},f.getFileId=function(){return ee()};var W=f.__private__.convertDateToPDFDate=function(_){var J=_.getTimezoneOffset(),me=J<0?"+":"-",xe=Math.floor(Math.abs(J/60)),Ee=Math.abs(J%60),Ge=[me,ne(xe),"'",ne(Ee),"'"].join("");return["D:",_.getFullYear(),ne(_.getMonth()+1),ne(_.getDate()),ne(_.getHours()),ne(_.getMinutes()),ne(_.getSeconds()),Ge].join("")},te=f.__private__.convertPDFDateToDate=function(_){var J=parseInt(_.substr(2,4),10),me=parseInt(_.substr(6,2),10)-1,xe=parseInt(_.substr(8,2),10),Ee=parseInt(_.substr(10,2),10),Ge=parseInt(_.substr(12,2),10),qe=parseInt(_.substr(14,2),10);return new Date(J,me,xe,Ee,Ge,qe,0)},oe=f.__private__.setCreationDate=function(_){var J;if(_===void 0&&(_=new Date),_ instanceof Date)J=W(_);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(_))throw new Error("Invalid argument passed to jsPDF.setCreationDate");J=_}return P=J},O=f.__private__.getCreationDate=function(_){var J=P;return _==="jsDate"&&(J=te(P)),J};f.setCreationDate=function(_){return oe(_),this},f.getCreationDate=function(_){return O(_)};var z,ne=f.__private__.padd2=function(_){return("0"+parseInt(_)).slice(-2)},Z=f.__private__.padd2Hex=function(_){return("00"+(_=_.toString())).substr(_.length)},q=0,Ae=[],ve=[],be=0,Ne=[],Te=[],De=!1,We=ve;f.__private__.setCustomOutputDestination=function(_){De=!0,We=_};var _e=function(_){De||(We=_)};f.__private__.resetCustomOutputDestination=function(){De=!1,We=ve};var de=f.__private__.out=function(_){return _=_.toString(),be+=_.length+1,We.push(_),We},Ut=f.__private__.write=function(_){return de(arguments.length===1?_.toString():Array.prototype.join.call(arguments," "))},dt=f.__private__.getArrayBuffer=function(_){for(var J=_.length,me=new ArrayBuffer(J),xe=new Uint8Array(me);J--;)xe[J]=_.charCodeAt(J);return me},ot=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return ot};var ze=t.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(_){return ze=S===C?_/Pe:_,this};var gt,et=f.__private__.getFontSize=f.getFontSize=function(){return S===x?ze:ze*Pe},It=t.R2L||!1;f.__private__.setR2L=f.setR2L=function(_){return It=_,this},f.__private__.getR2L=f.getR2L=function(){return It};var vt,Tt=f.__private__.setZoomMode=function(_){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(_))gt=_;else if(isNaN(_)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(_)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+_+'" is not recognized.');gt=_}else gt=parseInt(_,10)};f.__private__.getZoomMode=function(){return gt};var Se,pe=f.__private__.setPageMode=function(_){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(_)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+_+'" is not recognized.');vt=_};f.__private__.getPageMode=function(){return vt};var Ie=f.__private__.setLayoutMode=function(_){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(_)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+_+'" is not recognized.');Se=_};f.__private__.getLayoutMode=function(){return Se},f.__private__.setDisplayMode=f.setDisplayMode=function(_,J,me){return Tt(_),Ie(J),pe(me),this};var ke={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(_){if(Object.keys(ke).indexOf(_)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ke[_]},f.__private__.getDocumentProperties=function(){return ke},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(_){for(var J in ke)ke.hasOwnProperty(J)&&_[J]&&(ke[J]=_[J]);return this},f.__private__.setDocumentProperty=function(_,J){if(Object.keys(ke).indexOf(_)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ke[_]=J};var Ye,Pe,Xe,Ct,bt,ft={},Me={},ct=[],nt={},ut={},at={},Le={},lt=null,tt=0,Ve=[],it=new f1(f),jt=t.hotfixes||[],Pt={},nr={},sr=[],Qt=function _(J,me,xe,Ee,Ge,qe){if(!(this instanceof _))return new _(J,me,xe,Ee,Ge,qe);isNaN(J)&&(J=1),isNaN(me)&&(me=0),isNaN(xe)&&(xe=0),isNaN(Ee)&&(Ee=1),isNaN(Ge)&&(Ge=0),isNaN(qe)&&(qe=0),this._matrix=[J,me,xe,Ee,Ge,qe]};Object.defineProperty(Qt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(Qt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(Qt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(Qt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(Qt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(Qt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(Qt.prototype,"a",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(Qt.prototype,"b",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(Qt.prototype,"c",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(Qt.prototype,"d",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(Qt.prototype,"e",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(Qt.prototype,"f",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(Qt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Qt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Qt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Qt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Qt.prototype.join=function(_){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(M).join(_)},Qt.prototype.multiply=function(_){var J=_.sx*this.sx+_.shy*this.shx,me=_.sx*this.shy+_.shy*this.sy,xe=_.shx*this.sx+_.sy*this.shx,Ee=_.shx*this.shy+_.sy*this.sy,Ge=_.tx*this.sx+_.ty*this.shx+this.tx,qe=_.tx*this.shy+_.ty*this.sy+this.ty;return new Qt(J,me,xe,Ee,Ge,qe)},Qt.prototype.decompose=function(){var _=this.sx,J=this.shy,me=this.shx,xe=this.sy,Ee=this.tx,Ge=this.ty,qe=Math.sqrt(_*_+J*J),St=(_/=qe)*me+(J/=qe)*xe;me-=_*St,xe-=J*St;var Lt=Math.sqrt(me*me+xe*xe);return St/=Lt,_*(xe/=Lt)<J*(me/=Lt)&&(_=-_,J=-J,St=-St,qe=-qe),{scale:new Qt(qe,0,0,Lt,0,0),translate:new Qt(1,0,0,1,Ee,Ge),rotate:new Qt(_,J,-J,_,0,0),skew:new Qt(1,0,St,1,0,0)}},Qt.prototype.toString=function(_){return this.join(" ")},Qt.prototype.inversed=function(){var _=this.sx,J=this.shy,me=this.shx,xe=this.sy,Ee=this.tx,Ge=this.ty,qe=1/(_*xe-J*me),St=xe*qe,Lt=-J*qe,Mt=-me*qe,$t=_*qe;return new Qt(St,Lt,Mt,$t,-St*Ee-Mt*Ge,-Lt*Ee-$t*Ge)},Qt.prototype.applyToPoint=function(_){var J=_.x*this.sx+_.y*this.shx+this.tx,me=_.x*this.shy+_.y*this.sy+this.ty;return new Jo(J,me)},Qt.prototype.applyToRectangle=function(_){var J=this.applyToPoint(_),me=this.applyToPoint(new Jo(_.x+_.w,_.y+_.h));return new ln(J.x,J.y,me.x-J.x,me.y-J.y)},Qt.prototype.clone=function(){var _=this.sx,J=this.shy,me=this.shx,xe=this.sy,Ee=this.tx,Ge=this.ty;return new Qt(_,J,me,xe,Ee,Ge)},f.Matrix=Qt;var Xr=f.matrixMult=function(_,J){return J.multiply(_)},Kn=new Qt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Kn;var Kr=function(_,J){if(!ut[_]){var me=(J instanceof AA?"Sh":"P")+(Object.keys(nt).length+1).toString(10);J.id=me,ut[_]=me,nt[me]=J,it.publish("addPattern",J)}};f.ShadingPattern=AA,f.TilingPattern=ll,f.addShadingPattern=function(_,J){return D("addShadingPattern()"),Kr(_,J),this},f.beginTilingPattern=function(_){D("beginTilingPattern()"),_a(_.boundingBox[0],_.boundingBox[1],_.boundingBox[2]-_.boundingBox[0],_.boundingBox[3]-_.boundingBox[1],_.matrix)},f.endTilingPattern=function(_,J){D("endTilingPattern()"),J.stream=Te[z].join(`
`),Kr(_,J),it.publish("endTilingPattern",J),sr.pop().restore()};var Ln,st=f.__private__.newObject=function(){var _=Lr();return Er(_,!0),_},Lr=f.__private__.newObjectDeferred=function(){return q++,Ae[q]=function(){return be},q},Er=function(_,J){return J=typeof J=="boolean"&&J,Ae[_]=be,J&&de(_+" 0 obj"),_},an=f.__private__.newAdditionalObject=function(){var _={objId:Lr(),content:""};return Ne.push(_),_},kn=Lr(),as=Lr(),Xn=f.__private__.decodeColorString=function(_){var J=_.split(" ");if(J.length!==2||J[1]!=="g"&&J[1]!=="G")J.length!==5||J[4]!=="k"&&J[4]!=="K"||(J=[(1-J[0])*(1-J[3]),(1-J[1])*(1-J[3]),(1-J[2])*(1-J[3]),"r"]);else{var me=parseFloat(J[0]);J=[me,me,me,"r"]}for(var xe="#",Ee=0;Ee<3;Ee++)xe+=("0"+Math.floor(255*parseFloat(J[Ee])).toString(16)).slice(-2);return xe},Gn=f.__private__.encodeColorString=function(_){var J;typeof _=="string"&&(_={ch1:_});var me=_.ch1,xe=_.ch2,Ee=_.ch3,Ge=_.ch4,qe=_.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof me=="string"&&me.charAt(0)!=="#"){var St=new mB(me);if(St.ok)me=St.toHex();else if(!/^\d*\.?\d*$/.test(me))throw new Error('Invalid color "'+me+'" passed to jsPDF.encodeColorString.')}if(typeof me=="string"&&/^#[0-9A-Fa-f]{3}$/.test(me)&&(me="#"+me[1]+me[1]+me[2]+me[2]+me[3]+me[3]),typeof me=="string"&&/^#[0-9A-Fa-f]{6}$/.test(me)){var Lt=parseInt(me.substr(1),16);me=Lt>>16&255,xe=Lt>>8&255,Ee=255&Lt}if(xe===void 0||Ge===void 0&&me===xe&&xe===Ee)J=typeof me=="string"?me+" "+qe[0]:_.precision===2?U(me/255)+" "+qe[0]:F(me/255)+" "+qe[0];else if(Ge===void 0||Nr(Ge)==="object"){if(Ge&&!isNaN(Ge.a)&&Ge.a===0)return["1.","1.","1.",qe[1]].join(" ");J=typeof me=="string"?[me,xe,Ee,qe[1]].join(" "):_.precision===2?[U(me/255),U(xe/255),U(Ee/255),qe[1]].join(" "):[F(me/255),F(xe/255),F(Ee/255),qe[1]].join(" ")}else J=typeof me=="string"?[me,xe,Ee,Ge,qe[2]].join(" "):_.precision===2?[U(me),U(xe),U(Ee),U(Ge),qe[2]].join(" "):[F(me),F(xe),F(Ee),F(Ge),qe[2]].join(" ");return J},os=f.__private__.getFilters=function(){return l},Ts=f.__private__.putStream=function(_){var J=(_=_||{}).data||"",me=_.filters||os(),xe=_.alreadyAppliedFilters||[],Ee=_.addLength1||!1,Ge=J.length,qe=_.objectId,St=function(pn){return pn};if(i!==null&&qe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");i!==null&&(St=Yr.encryptor(qe,0));var Lt={};me===!0&&(me=["FlateEncode"]);var Mt=_.additionalKeyValues||[],$t=(Lt=Dt.API.processDataByFilters!==void 0?Dt.API.processDataByFilters(J,me):{data:J,reverseChain:[]}).reverseChain+(Array.isArray(xe)?xe.join(" "):xe.toString());if(Lt.data.length!==0&&(Mt.push({key:"Length",value:Lt.data.length}),Ee===!0&&Mt.push({key:"Length1",value:Ge})),$t.length!=0)if($t.split("/").length-1==1)Mt.push({key:"Filter",value:$t});else{Mt.push({key:"Filter",value:"["+$t+"]"});for(var ur=0;ur<Mt.length;ur+=1)if(Mt[ur].key==="DecodeParms"){for(var Or=[],cn=0;cn<Lt.reverseChain.split("/").length-1;cn+=1)Or.push("null");Or.push(Mt[ur].value),Mt[ur].value="["+Or.join(" ")+"]"}}de("<<");for(var vr=0;vr<Mt.length;vr++)de("/"+Mt[vr].key+" "+Mt[vr].value);de(">>"),Lt.data.length!==0&&(de("stream"),de(St(Lt.data)),de("endstream"))},Mo=f.__private__.putPage=function(_){var J=_.number,me=_.data,xe=_.objId,Ee=_.contentsObjId;Er(xe,!0),de("<</Type /Page"),de("/Parent "+_.rootDictionaryObjId+" 0 R"),de("/Resources "+_.resourceDictionaryObjId+" 0 R"),de("/MediaBox ["+parseFloat(M(_.mediaBox.bottomLeftX))+" "+parseFloat(M(_.mediaBox.bottomLeftY))+" "+M(_.mediaBox.topRightX)+" "+M(_.mediaBox.topRightY)+"]"),_.cropBox!==null&&de("/CropBox ["+M(_.cropBox.bottomLeftX)+" "+M(_.cropBox.bottomLeftY)+" "+M(_.cropBox.topRightX)+" "+M(_.cropBox.topRightY)+"]"),_.bleedBox!==null&&de("/BleedBox ["+M(_.bleedBox.bottomLeftX)+" "+M(_.bleedBox.bottomLeftY)+" "+M(_.bleedBox.topRightX)+" "+M(_.bleedBox.topRightY)+"]"),_.trimBox!==null&&de("/TrimBox ["+M(_.trimBox.bottomLeftX)+" "+M(_.trimBox.bottomLeftY)+" "+M(_.trimBox.topRightX)+" "+M(_.trimBox.topRightY)+"]"),_.artBox!==null&&de("/ArtBox ["+M(_.artBox.bottomLeftX)+" "+M(_.artBox.bottomLeftY)+" "+M(_.artBox.topRightX)+" "+M(_.artBox.topRightY)+"]"),typeof _.userUnit=="number"&&_.userUnit!==1&&de("/UserUnit "+_.userUnit),it.publish("putPage",{objId:xe,pageContext:Ve[J],pageNumber:J,page:me}),de("/Contents "+Ee+" 0 R"),de(">>"),de("endobj");var Ge=me.join(`
`);return S===C&&(Ge+=`
Q`),Er(Ee,!0),Ts({data:Ge,filters:os(),objectId:Ee}),de("endobj"),xe},Ps=f.__private__.putPages=function(){var _,J,me=[];for(_=1;_<=tt;_++)Ve[_].objId=Lr(),Ve[_].contentsObjId=Lr();for(_=1;_<=tt;_++)me.push(Mo({number:_,data:Te[_],objId:Ve[_].objId,contentsObjId:Ve[_].contentsObjId,mediaBox:Ve[_].mediaBox,cropBox:Ve[_].cropBox,bleedBox:Ve[_].bleedBox,trimBox:Ve[_].trimBox,artBox:Ve[_].artBox,userUnit:Ve[_].userUnit,rootDictionaryObjId:kn,resourceDictionaryObjId:as}));Er(kn,!0),de("<</Type /Pages");var xe="/Kids [";for(J=0;J<tt;J++)xe+=me[J]+" 0 R ";de(xe+"]"),de("/Count "+tt),de(">>"),de("endobj"),it.publish("postPutPages")},mo=function(_){it.publish("putFont",{font:_,out:de,newObject:st,putStream:Ts}),_.isAlreadyPutted!==!0&&(_.objectNumber=st(),de("<<"),de("/Type /Font"),de("/BaseFont /"+_c(_.postScriptName)),de("/Subtype /Type1"),typeof _.encoding=="string"&&de("/Encoding /"+_.encoding),de("/FirstChar 32"),de("/LastChar 255"),de(">>"),de("endobj"))},Ni=function(_){_.objectNumber=st();var J=[];J.push({key:"Type",value:"/XObject"}),J.push({key:"Subtype",value:"/Form"}),J.push({key:"BBox",value:"["+[M(_.x),M(_.y),M(_.x+_.width),M(_.y+_.height)].join(" ")+"]"}),J.push({key:"Matrix",value:"["+_.matrix.toString()+"]"});var me=_.pages[1].join(`
`);Ts({data:me,additionalKeyValues:J,objectId:_.objectNumber}),de("endobj")},Si=function(_,J){J||(J=21);var me=st(),xe=function(qe,St){var Lt,Mt=[],$t=1/(St-1);for(Lt=0;Lt<1;Lt+=$t)Mt.push(Lt);if(Mt.push(1),qe[0].offset!=0){var ur={offset:0,color:qe[0].color};qe.unshift(ur)}if(qe[qe.length-1].offset!=1){var Or={offset:1,color:qe[qe.length-1].color};qe.push(Or)}for(var cn="",vr=0,pn=0;pn<Mt.length;pn++){for(Lt=Mt[pn];Lt>qe[vr+1].offset;)vr++;var un=qe[vr].offset,Tn=(Lt-un)/(qe[vr+1].offset-un),Hs=qe[vr].color,As=qe[vr+1].color;cn+=Z(Math.round((1-Tn)*Hs[0]+Tn*As[0]).toString(16))+Z(Math.round((1-Tn)*Hs[1]+Tn*As[1]).toString(16))+Z(Math.round((1-Tn)*Hs[2]+Tn*As[2]).toString(16))}return cn.trim()}(_.colors,J),Ee=[];Ee.push({key:"FunctionType",value:"0"}),Ee.push({key:"Domain",value:"[0.0 1.0]"}),Ee.push({key:"Size",value:"["+J+"]"}),Ee.push({key:"BitsPerSample",value:"8"}),Ee.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ee.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ts({data:xe,additionalKeyValues:Ee,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:me}),de("endobj"),_.objectNumber=st(),de("<< /ShadingType "+_.type),de("/ColorSpace /DeviceRGB");var Ge="/Coords ["+M(parseFloat(_.coords[0]))+" "+M(parseFloat(_.coords[1]))+" ";_.type===2?Ge+=M(parseFloat(_.coords[2]))+" "+M(parseFloat(_.coords[3])):Ge+=M(parseFloat(_.coords[2]))+" "+M(parseFloat(_.coords[3]))+" "+M(parseFloat(_.coords[4]))+" "+M(parseFloat(_.coords[5])),de(Ge+="]"),_.matrix&&de("/Matrix ["+_.matrix.toString()+"]"),de("/Function "+me+" 0 R"),de("/Extend [true true]"),de(">>"),de("endobj")},Ei=function(_,J){var me=Lr(),xe=st();J.push({resourcesOid:me,objectOid:xe}),_.objectNumber=xe;var Ee=[];Ee.push({key:"Type",value:"/Pattern"}),Ee.push({key:"PatternType",value:"1"}),Ee.push({key:"PaintType",value:"1"}),Ee.push({key:"TilingType",value:"1"}),Ee.push({key:"BBox",value:"["+_.boundingBox.map(M).join(" ")+"]"}),Ee.push({key:"XStep",value:M(_.xStep)}),Ee.push({key:"YStep",value:M(_.yStep)}),Ee.push({key:"Resources",value:me+" 0 R"}),_.matrix&&Ee.push({key:"Matrix",value:"["+_.matrix.toString()+"]"}),Ts({data:_.stream,additionalKeyValues:Ee,objectId:_.objectNumber}),de("endobj")},du=function(_){for(var J in _.objectNumber=st(),de("<<"),_)switch(J){case"opacity":de("/ca "+U(_[J]));break;case"stroke-opacity":de("/CA "+U(_[J]))}de(">>"),de("endobj")},UA=function(_){Er(_.resourcesOid,!0),de("<<"),de("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var J in de("/Font <<"),ft)ft.hasOwnProperty(J)&&(d===!1||d===!0&&h.hasOwnProperty(J))&&de("/"+J+" "+ft[J].objectNumber+" 0 R");de(">>")}(),function(){if(Object.keys(nt).length>0){for(var J in de("/Shading <<"),nt)nt.hasOwnProperty(J)&&nt[J]instanceof AA&&nt[J].objectNumber>=0&&de("/"+J+" "+nt[J].objectNumber+" 0 R");it.publish("putShadingPatternDict"),de(">>")}}(),function(J){if(Object.keys(nt).length>0){for(var me in de("/Pattern <<"),nt)nt.hasOwnProperty(me)&&nt[me]instanceof f.TilingPattern&&nt[me].objectNumber>=0&&nt[me].objectNumber<J&&de("/"+me+" "+nt[me].objectNumber+" 0 R");it.publish("putTilingPatternDict"),de(">>")}}(_.objectOid),function(){if(Object.keys(at).length>0){var J;for(J in de("/ExtGState <<"),at)at.hasOwnProperty(J)&&at[J].objectNumber>=0&&de("/"+J+" "+at[J].objectNumber+" 0 R");it.publish("putGStateDict"),de(">>")}}(),function(){for(var J in de("/XObject <<"),Pt)Pt.hasOwnProperty(J)&&Pt[J].objectNumber>=0&&de("/"+J+" "+Pt[J].objectNumber+" 0 R");it.publish("putXobjectDict"),de(">>")}(),de(">>"),de("endobj")},Ul=function(_){Me[_.fontName]=Me[_.fontName]||{},Me[_.fontName][_.fontStyle]=_.id},po=function(_,J,me,xe,Ee){var Ge={id:"F"+(Object.keys(ft).length+1).toString(10),postScriptName:_,fontName:J,fontStyle:me,encoding:xe,isStandardFont:Ee||!1,metadata:{}};return it.publish("addFont",{font:Ge,instance:this}),ft[Ge.id]=Ge,Ul(Ge),Ge.id},bs=f.__private__.pdfEscape=f.pdfEscape=function(_,J){return function(me,xe){var Ee,Ge,qe,St,Lt,Mt,$t,ur,Or;if(qe=(xe=xe||{}).sourceEncoding||"Unicode",Lt=xe.outputEncoding,(xe.autoencode||Lt)&&ft[Ye].metadata&&ft[Ye].metadata[qe]&&ft[Ye].metadata[qe].encoding&&(St=ft[Ye].metadata[qe].encoding,!Lt&&ft[Ye].encoding&&(Lt=ft[Ye].encoding),!Lt&&St.codePages&&(Lt=St.codePages[0]),typeof Lt=="string"&&(Lt=St[Lt]),Lt)){for($t=!1,Mt=[],Ee=0,Ge=me.length;Ee<Ge;Ee++)(ur=Lt[me.charCodeAt(Ee)])?Mt.push(String.fromCharCode(ur)):Mt.push(me[Ee]),Mt[Ee].charCodeAt(0)>>8&&($t=!0);me=Mt.join("")}for(Ee=me.length;$t===void 0&&Ee!==0;)me.charCodeAt(Ee-1)>>8&&($t=!0),Ee--;if(!$t)return me;for(Mt=xe.noBOM?[]:[254,255],Ee=0,Ge=me.length;Ee<Ge;Ee++){if((Or=(ur=me.charCodeAt(Ee))>>8)>>8)throw new Error("Character at position "+Ee+" of string '"+me+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Mt.push(Or),Mt.push(ur-(Or<<8))}return String.fromCharCode.apply(void 0,Mt)}(_,J).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},go=f.__private__.beginPage=function(_){Te[++tt]=[],Ve[tt]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(_[0]),topRightY:Number(_[1])}},Ql(tt),_e(Te[z])},QA=function(_,J){var me,xe,Ee;switch(r=J||r,typeof _=="string"&&(me=p(_.toLowerCase()),Array.isArray(me)&&(xe=me[0],Ee=me[1])),Array.isArray(_)&&(xe=_[0]*Pe,Ee=_[1]*Pe),isNaN(xe)&&(xe=a[0],Ee=a[1]),(xe>14400||Ee>14400)&&(Ir.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),xe=Math.min(14400,xe),Ee=Math.min(14400,Ee)),a=[xe,Ee],r.substr(0,1)){case"l":Ee>xe&&(a=[Ee,xe]);break;case"p":xe>Ee&&(a=[Ee,xe])}go(a),yu(kA),de($o),Ii!==0&&de(Ii+" J"),Li!==0&&de(Li+" j"),it.publish("addPage",{pageNumber:tt})},Ga=function(_){_>0&&_<=tt&&(Te.splice(_,1),Ve.splice(_,1),tt--,z>tt&&(z=tt),this.setPage(z))},Ql=function(_){_>0&&_<=tt&&(z=_)},Il=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Te.length-1},Ko=function(_,J,me){var xe,Ee=void 0;return me=me||{},_=_!==void 0?_:ft[Ye].fontName,J=J!==void 0?J:ft[Ye].fontStyle,xe=_.toLowerCase(),Me[xe]!==void 0&&Me[xe][J]!==void 0?Ee=Me[xe][J]:Me[_]!==void 0&&Me[_][J]!==void 0?Ee=Me[_][J]:me.disableWarning===!1&&Ir.warn("Unable to look up font label for font '"+_+"', '"+J+"'. Refer to getFontList() for available fonts."),Ee||me.noFallback||(Ee=Me.times[J])==null&&(Ee=Me.times.normal),Ee},Sa=f.__private__.putInfo=function(){var _=st(),J=function(xe){return xe};for(var me in i!==null&&(J=Yr.encryptor(_,0)),de("<<"),de("/Producer ("+bs(J("jsPDF "+Dt.version))+")"),ke)ke.hasOwnProperty(me)&&ke[me]&&de("/"+me.substr(0,1).toUpperCase()+me.substr(1)+" ("+bs(J(ke[me]))+")");de("/CreationDate ("+bs(J(P))+")"),de(">>"),de("endobj")},fu=f.__private__.putCatalog=function(_){var J=(_=_||{}).rootDictionaryObjId||kn;switch(st(),de("<<"),de("/Type /Catalog"),de("/Pages "+J+" 0 R"),gt||(gt="fullwidth"),gt){case"fullwidth":de("/OpenAction [3 0 R /FitH null]");break;case"fullheight":de("/OpenAction [3 0 R /FitV null]");break;case"fullpage":de("/OpenAction [3 0 R /Fit]");break;case"original":de("/OpenAction [3 0 R /XYZ null null 1]");break;default:var me=""+gt;me.substr(me.length-1)==="%"&&(gt=parseInt(gt)/100),typeof gt=="number"&&de("/OpenAction [3 0 R /XYZ null null "+U(gt)+"]")}switch(Se||(Se="continuous"),Se){case"continuous":de("/PageLayout /OneColumn");break;case"single":de("/PageLayout /SinglePage");break;case"two":case"twoleft":de("/PageLayout /TwoColumnLeft");break;case"tworight":de("/PageLayout /TwoColumnRight")}vt&&de("/PageMode /"+vt),it.publish("putCatalog"),de(">>"),de("endobj")},on=f.__private__.putTrailer=function(){de("trailer"),de("<<"),de("/Size "+(q+1)),de("/Root "+q+" 0 R"),de("/Info "+(q-1)+" 0 R"),i!==null&&de("/Encrypt "+Yr.oid+" 0 R"),de("/ID [ <"+$+"> <"+$+"> ]"),de(">>")},Ll=f.__private__.putHeader=function(){de("%PDF-"+w),de("%")},Go=f.__private__.putXRef=function(){var _="0000000000";de("xref"),de("0 "+(q+1)),de("0000000000 65535 f ");for(var J=1;J<=q;J++)typeof Ae[J]=="function"?de((_+Ae[J]()).slice(-10)+" 00000 n "):Ae[J]!==void 0?de((_+Ae[J]).slice(-10)+" 00000 n "):de("0000000000 00000 n ")},Os=f.__private__.buildDocument=function(){var _;q=0,be=0,ve=[],Ae=[],Ne=[],kn=Lr(),as=Lr(),_e(ve),it.publish("buildDocument"),Ll(),Ps(),function(){it.publish("putAdditionalObjects");for(var me=0;me<Ne.length;me++){var xe=Ne[me];Er(xe.objId,!0),de(xe.content),de("endobj")}it.publish("postPutAdditionalObjects")}(),_=[],function(){for(var me in ft)ft.hasOwnProperty(me)&&(d===!1||d===!0&&h.hasOwnProperty(me))&&mo(ft[me])}(),function(){var me;for(me in at)at.hasOwnProperty(me)&&du(at[me])}(),function(){for(var me in Pt)Pt.hasOwnProperty(me)&&Ni(Pt[me])}(),function(me){var xe;for(xe in nt)nt.hasOwnProperty(xe)&&(nt[xe]instanceof AA?Si(nt[xe]):nt[xe]instanceof ll&&Ei(nt[xe],me))}(_),it.publish("putResources"),_.forEach(UA),UA({resourcesOid:as,objectOid:Number.MAX_SAFE_INTEGER}),it.publish("postPutResources"),i!==null&&(Yr.oid=st(),de("<<"),de("/Filter /Standard"),de("/V "+Yr.v),de("/R "+Yr.r),de("/U <"+Yr.toHexString(Yr.U)+">"),de("/O <"+Yr.toHexString(Yr.O)+">"),de("/P "+Yr.P),de(">>"),de("endobj")),Sa(),fu();var J=be;return Go(),on(),de("startxref"),de(""+J),de("%%EOF"),_e(Te[z]),ve.join(`
`)},sa=f.__private__.getBlob=function(_){return new Blob([dt(_)],{type:"application/pdf"})},aa=f.output=f.__private__.output=(Ln=function(_,J){switch(typeof(J=J||{})=="string"?J={filename:J}:J.filename=J.filename||"generated.pdf",_){case void 0:return Os();case"save":f.save(J.filename);break;case"arraybuffer":return dt(Os());case"blob":return sa(Os());case"bloburi":case"bloburl":if(Vt.URL!==void 0&&typeof Vt.URL.createObjectURL=="function")return Vt.URL&&Vt.URL.createObjectURL(sa(Os()))||void 0;Ir.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var me="",xe=Os();try{me=c1(xe)}catch{me=c1(unescape(encodeURIComponent(xe)))}return"data:application/pdf;filename="+J.filename+";base64,"+me;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Vt)==="[object Window]"){var Ee="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ge=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';J.pdfObjectUrl&&(Ee=J.pdfObjectUrl,Ge="");var qe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ee+'"'+Ge+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(J)+");<\/script></body></html>",St=Vt.open();return St!==null&&St.document.write(qe),St}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Vt)==="[object Window]"){var Lt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(J.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+J.filename+'" width="500px" height="400px" /></body></html>',Mt=Vt.open();if(Mt!==null){Mt.document.write(Lt);var $t=this;Mt.document.documentElement.querySelector("#pdfViewer").onload=function(){Mt.document.title=J.filename,Mt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open($t.output("bloburl"))}}return Mt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Vt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ur='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",J)+'"></iframe></body></html>',Or=Vt.open();if(Or!==null&&(Or.document.write(ur),Or.document.title=J.filename),Or||typeof safari>"u")return Or;break;case"datauri":case"dataurl":return Vt.document.location.href=this.output("datauristring",J);default:return null}},Ln.foo=function(){try{return Ln.apply(this,arguments)}catch(me){var _=me.stack||"";~_.indexOf(" at ")&&(_=_.split(" at ")[1]);var J="Error in function "+_.split(`
`)[0].split("<")[0]+": "+me.message;if(!Vt.console)throw new Error(J);Vt.console.error(J,me),Vt.alert&&alert(J)}},Ln.foo.bar=Ln,Ln.foo),An=function(_){return Array.isArray(jt)===!0&&jt.indexOf(_)>-1};switch(n){case"pt":Pe=1;break;case"mm":Pe=72/25.4;break;case"cm":Pe=72/2.54;break;case"in":Pe=72;break;case"px":Pe=An("px_scaling")==1?.75:96/72;break;case"pc":case"em":Pe=12;break;case"ex":Pe=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Pe=n}var Yr=null;oe(),V();var IA=f.__private__.getPageInfo=f.getPageInfo=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ve[_].objId,pageNumber:_,pageContext:Ve[_]}},hu=f.__private__.getPageInfoByObjId=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var J in Ve)if(Ve[J].objId===_)break;return IA(J)},mu=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Ve[z].objId,pageNumber:z,pageContext:Ve[z]}};f.addPage=function(){return QA.apply(this,arguments),this},f.setPage=function(){return Ql.apply(this,arguments),_e.call(this,Te[z]),this},f.insertPage=function(_){return this.addPage(),this.movePage(z,_),this},f.movePage=function(_,J){var me,xe;if(_>J){me=Te[_],xe=Ve[_];for(var Ee=_;Ee>J;Ee--)Te[Ee]=Te[Ee-1],Ve[Ee]=Ve[Ee-1];Te[J]=me,Ve[J]=xe,this.setPage(J)}else if(_<J){me=Te[_],xe=Ve[_];for(var Ge=_;Ge<J;Ge++)Te[Ge]=Te[Ge+1],Ve[Ge]=Ve[Ge+1];Te[J]=me,Ve[J]=xe,this.setPage(J)}return this},f.deletePage=function(){return Ga.apply(this,arguments),this},f.__private__.text=f.text=function(_,J,me,xe,Ee){var Ge,qe,St,Lt,Mt,$t,ur,Or,cn,vr=(xe=xe||{}).scope||this;if(typeof _=="number"&&typeof J=="number"&&(typeof me=="string"||Array.isArray(me))){var pn=me;me=J,J=_,_=pn}if(arguments[3]instanceof Qt==0?(St=arguments[4],Lt=arguments[5],Nr(ur=arguments[3])==="object"&&ur!==null||(typeof St=="string"&&(Lt=St,St=null),typeof ur=="string"&&(Lt=ur,ur=null),typeof ur=="number"&&(St=ur,ur=null),xe={flags:ur,angle:St,align:Lt})):(D("The transform parameter of text() with a Matrix value"),cn=Ee),isNaN(J)||isNaN(me)||_==null)throw new Error("Invalid arguments passed to jsPDF.text");if(_.length===0)return vr;var un,Tn="",Hs=typeof xe.lineHeightFactor=="number"?xe.lineHeightFactor:Vo,As=vr.internal.scaleFactor;function Ml(fr){return fr=fr.split("	").join(Array(xe.TabLen||9).join(" ")),bs(fr,ur)}function Ti(fr){for(var jr,en=fr.concat(),xr=[],Ia=en.length;Ia--;)typeof(jr=en.shift())=="string"?xr.push(jr):Array.isArray(fr)&&(jr.length===1||jr[1]===void 0&&jr[2]===void 0)?xr.push(jr[0]):xr.push([jr[0],jr[1],jr[2]]);return xr}function Zo(fr,jr){var en;if(typeof fr=="string")en=jr(fr)[0];else if(Array.isArray(fr)){for(var xr,Ia,PA=fr.concat(),Hi=[],ai=PA.length;ai--;)typeof(xr=PA.shift())=="string"?Hi.push(jr(xr)[0]):Array.isArray(xr)&&typeof xr[0]=="string"&&(Ia=jr(xr[0],xr[1],xr[2]),Hi.push([Ia[0],Ia[1],Ia[2]]));en=Hi}return en}var Fa=!1,vo=!0;if(typeof _=="string")Fa=!0;else if(Array.isArray(_)){var xo=_.concat();qe=[];for(var Aa,qr=xo.length;qr--;)(typeof(Aa=xo.shift())!="string"||Array.isArray(Aa)&&typeof Aa[0]!="string")&&(vo=!1);Fa=vo}if(Fa===!1)throw new Error('Type of text must be string or Array. "'+_+'" is not recognized.');typeof _=="string"&&(_=_.match(/[\r?\n]/)?_.split(/\r\n|\r|\n/g):[_]);var Ar=ze/vr.internal.scaleFactor,ei=Ar*(Hs-1);switch(xe.baseline){case"bottom":me-=ei;break;case"top":me+=Ar-ei;break;case"hanging":me+=Ar-2*ei;break;case"middle":me+=Ar/2-ei}if(($t=xe.maxWidth||0)>0&&(typeof _=="string"?_=vr.splitTextToSize(_,$t):Object.prototype.toString.call(_)==="[object Array]"&&(_=_.reduce(function(fr,jr){return fr.concat(vr.splitTextToSize(jr,$t))},[]))),Ge={text:_,x:J,y:me,options:xe,mutex:{pdfEscape:bs,activeFontKey:Ye,fonts:ft,activeFontSize:ze}},it.publish("preProcessText",Ge),_=Ge.text,St=(xe=Ge.options).angle,cn instanceof Qt==0&&St&&typeof St=="number"){St*=Math.PI/180,xe.rotationDirection===0&&(St=-St),S===C&&(St=-St);var ti=Math.cos(St),Pi=Math.sin(St);cn=new Qt(ti,Pi,-Pi,ti,0,0)}else St&&St instanceof Qt&&(cn=St);S!==C||cn||(cn=Kn),(Mt=xe.charSpace||Qi)!==void 0&&(Tn+=M(k(Mt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Or=xe.horizontalScale)!==void 0&&(Tn+=M(100*Or)+` Tz
`),xe.lang;var br=-1,Nn=xe.renderingMode!==void 0?xe.renderingMode:xe.stroke,Oi=vr.internal.getCurrentPageInfo().pageContext;switch(Nn){case 0:case!1:case"fill":br=0;break;case 1:case!0:case"stroke":br=1;break;case 2:case"fillThenStroke":br=2;break;case 3:case"invisible":br=3;break;case 4:case"fillAndAddForClipping":br=4;break;case 5:case"strokeAndAddPathForClipping":br=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":br=6;break;case 7:case"addToPathForClipping":br=7}var la=Oi.usedRenderingMode!==void 0?Oi.usedRenderingMode:-1;br!==-1?Tn+=br+` Tr
`:la!==-1&&(Tn+=`0 Tr
`),br!==-1&&(Oi.usedRenderingMode=br),Lt=xe.align||"left";var dr,yo=ze*Hs,Zr=vr.internal.pageSize.getWidth(),ri=ft[Ye];Mt=xe.charSpace||Qi,$t=xe.maxWidth||0,ur=Object.assign({autoencode:!0,noBOM:!0},xe.flags);var Yn=[],ca=function(fr){return vr.getStringUnitWidth(fr,{font:ri,charSpace:Mt,fontSize:ze,doKerning:!1})*ze/As};if(Object.prototype.toString.call(_)==="[object Array]"){var tr;qe=Ti(_),Lt!=="left"&&(dr=qe.map(ca));var ls,Ja=0;if(Lt==="right"){J-=dr[0],_=[],qr=qe.length;for(var Ua=0;Ua<qr;Ua++)Ua===0?(ls=$a(J),tr=za(me)):(ls=k(Ja-dr[Ua]),tr=-yo),_.push([qe[Ua],ls,tr]),Ja=dr[Ua]}else if(Lt==="center"){J-=dr[0]/2,_=[],qr=qe.length;for(var Xa=0;Xa<qr;Xa++)Xa===0?(ls=$a(J),tr=za(me)):(ls=k((Ja-dr[Xa])/2),tr=-yo),_.push([qe[Xa],ls,tr]),Ja=dr[Xa]}else if(Lt==="left"){_=[],qr=qe.length;for(var wo=0;wo<qr;wo++)_.push(qe[wo])}else if(Lt==="justify"&&ri.encoding==="Identity-H"){_=[],qr=qe.length,$t=$t!==0?$t:Zr;for(var ni=0,Gr=0;Gr<qr;Gr++)if(tr=Gr===0?za(me):-yo,ls=Gr===0?$a(J):ni,Gr<qr-1){var qn=k(($t-dr[Gr])/(qe[Gr].split(" ").length-1)),Pn=qe[Gr].split(" ");_.push([Pn[0]+" ",ls,tr]),ni=0;for(var On=1;On<Pn.length;On++){var Vr=(ca(Pn[On-1]+" "+Pn[On])-ca(Pn[On]))*As+qn;On==Pn.length-1?_.push([Pn[On],Vr,0]):_.push([Pn[On]+" ",Vr,0]),ni-=Vr}}else _.push([qe[Gr],ls,tr]);_.push(["",ni,0])}else{if(Lt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(_=[],qr=qe.length,$t=$t!==0?$t:Zr,Gr=0;Gr<qr;Gr++){tr=Gr===0?za(me):-yo,ls=Gr===0?$a(J):0;var Ms=qe[Gr].split(" ").length-1,Di=Ms>0?($t-dr[Gr])/Ms:0;Gr<qr-1?Yn.push(M(k(Di))):Yn.push(0),_.push([qe[Gr],ls,tr])}}}(typeof xe.R2L=="boolean"?xe.R2L:It)===!0&&(_=Zo(_,function(fr,jr,en){return[fr.split("").reverse().join(""),jr,en]})),Ge={text:_,x:J,y:me,options:xe,mutex:{pdfEscape:bs,activeFontKey:Ye,fonts:ft,activeFontSize:ze}},it.publish("postProcessText",Ge),_=Ge.text,un=Ge.mutex.isHex||!1;var Ri=ft[Ye].encoding;Ri!=="WinAnsiEncoding"&&Ri!=="StandardEncoding"||(_=Zo(_,function(fr,jr,en){return[Ml(fr),jr,en]})),qe=Ti(_),_=[];for(var Qa,Ya,bo,ua=Array.isArray(qe[0])?1:0,Vn="",si=function(fr,jr,en){var xr="";return en instanceof Qt?(en=typeof xe.angle=="number"?Xr(en,new Qt(1,0,0,1,fr,jr)):Xr(new Qt(1,0,0,1,fr,jr),en),S===C&&(en=Xr(new Qt(1,0,0,-1,0,0),en)),xr=en.join(" ")+` Tm
`):xr=M(fr)+" "+M(jr)+` Td
`,xr},Ks=0;Ks<qe.length;Ks++){switch(Vn="",ua){case 1:bo=(un?"<":"(")+qe[Ks][0]+(un?">":")"),Qa=parseFloat(qe[Ks][1]),Ya=parseFloat(qe[Ks][2]);break;case 0:bo=(un?"<":"(")+qe[Ks]+(un?">":")"),Qa=$a(J),Ya=za(me)}Yn!==void 0&&Yn[Ks]!==void 0&&(Vn=Yn[Ks]+` Tw
`),Ks===0?_.push(Vn+si(Qa,Ya,cn)+bo):ua===0?_.push(Vn+bo):ua===1&&_.push(Vn+si(Qa,Ya,cn)+bo)}_=ua===0?_.join(` Tj
T* `):_.join(` Tj
`),_+=` Tj
`;var js=`BT
/`;return js+=Ye+" "+ze+` Tf
`,js+=M(ze*Hs)+` TL
`,js+=zo+`
`,js+=Tn,js+=_,de(js+="ET"),h[Ye]=!0,vr};var pu=f.__private__.clip=f.clip=function(_){return de(_==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return pu("evenodd")},f.__private__.discardPath=f.discardPath=function(){return de("n"),this};var Ea=f.__private__.isValidStyle=function(_){var J=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(_)!==-1&&(J=!0),J};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(_){return Ea(_)&&(u=_),this};var kl=f.__private__.getStyle=f.getStyle=function(_){var J=u;switch(_){case"D":case"S":J="S";break;case"F":J="f";break;case"FD":case"DF":J="B";break;case"f":case"f*":case"B":case"B*":J=_}return J},Tl=f.close=function(){return de("h"),this};f.stroke=function(){return de("S"),this},f.fill=function(_){return oa("f",_),this},f.fillEvenOdd=function(_){return oa("f*",_),this},f.fillStroke=function(_){return oa("B",_),this},f.fillStrokeEvenOdd=function(_){return oa("B*",_),this};var oa=function(_,J){Nr(J)==="object"?gu(J,_):de(_)},LA=function(_){_===null||S===C&&_===void 0||(_=kl(_),de(_))};function Pl(_,J,me,xe,Ee){var Ge=new ll(J||this.boundingBox,me||this.xStep,xe||this.yStep,this.gState,Ee||this.matrix);Ge.stream=this.stream;var qe=_+"$$"+this.cloneIndex+++"$$";return Kr(qe,Ge),Ge}var gu=function(_,J){var me=ut[_.key],xe=nt[me];if(xe instanceof AA)de("q"),de(vu(J)),xe.gState&&f.setGState(xe.gState),de(_.matrix.toString()+" cm"),de("/"+me+" sh"),de("Q");else if(xe instanceof ll){var Ee=new Qt(1,0,0,-1,0,qo());_.matrix&&(Ee=Ee.multiply(_.matrix||Kn),me=Pl.call(xe,_.key,_.boundingBox,_.xStep,_.yStep,Ee).id),de("q"),de("/Pattern cs"),de("/"+me+" scn"),xe.gState&&f.setGState(xe.gState),de(J),de("Q")}},vu=function(_){switch(_){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},_i=f.moveTo=function(_,J){return de(M(k(_))+" "+M(T(J))+" m"),this},Va=f.lineTo=function(_,J){return de(M(k(_))+" "+M(T(J))+" l"),this},is=f.curveTo=function(_,J,me,xe,Ee,Ge){return de([M(k(_)),M(T(J)),M(k(me)),M(T(xe)),M(k(Ee)),M(T(Ge)),"c"].join(" ")),this};f.__private__.line=f.line=function(_,J,me,xe,Ee){if(isNaN(_)||isNaN(J)||isNaN(me)||isNaN(xe)||!Ea(Ee))throw new Error("Invalid arguments passed to jsPDF.line");return S===x?this.lines([[me-_,xe-J]],_,J,[1,1],Ee||"S"):this.lines([[me-_,xe-J]],_,J,[1,1]).stroke()},f.__private__.lines=f.lines=function(_,J,me,xe,Ee,Ge){var qe,St,Lt,Mt,$t,ur,Or,cn,vr,pn,un,Tn;if(typeof _=="number"&&(Tn=me,me=J,J=_,_=Tn),xe=xe||[1,1],Ge=Ge||!1,isNaN(J)||isNaN(me)||!Array.isArray(_)||!Array.isArray(xe)||!Ea(Ee)||typeof Ge!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(_i(J,me),qe=xe[0],St=xe[1],Mt=_.length,pn=J,un=me,Lt=0;Lt<Mt;Lt++)($t=_[Lt]).length===2?(pn=$t[0]*qe+pn,un=$t[1]*St+un,Va(pn,un)):(ur=$t[0]*qe+pn,Or=$t[1]*St+un,cn=$t[2]*qe+pn,vr=$t[3]*St+un,pn=$t[4]*qe+pn,un=$t[5]*St+un,is(ur,Or,cn,vr,pn,un));return Ge&&Tl(),LA(Ee),this},f.path=function(_){for(var J=0;J<_.length;J++){var me=_[J],xe=me.c;switch(me.op){case"m":_i(xe[0],xe[1]);break;case"l":Va(xe[0],xe[1]);break;case"c":is.apply(this,xe);break;case"h":Tl()}}return this},f.__private__.rect=f.rect=function(_,J,me,xe,Ee){if(isNaN(_)||isNaN(J)||isNaN(me)||isNaN(xe)||!Ea(Ee))throw new Error("Invalid arguments passed to jsPDF.rect");return S===x&&(xe=-xe),de([M(k(_)),M(T(J)),M(k(me)),M(k(xe)),"re"].join(" ")),LA(Ee),this},f.__private__.triangle=f.triangle=function(_,J,me,xe,Ee,Ge,qe){if(isNaN(_)||isNaN(J)||isNaN(me)||isNaN(xe)||isNaN(Ee)||isNaN(Ge)||!Ea(qe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[me-_,xe-J],[Ee-me,Ge-xe],[_-Ee,J-Ge]],_,J,[1,1],qe,!0),this},f.__private__.roundedRect=f.roundedRect=function(_,J,me,xe,Ee,Ge,qe){if(isNaN(_)||isNaN(J)||isNaN(me)||isNaN(xe)||isNaN(Ee)||isNaN(Ge)||!Ea(qe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var St=4/3*(Math.SQRT2-1);return Ee=Math.min(Ee,.5*me),Ge=Math.min(Ge,.5*xe),this.lines([[me-2*Ee,0],[Ee*St,0,Ee,Ge-Ge*St,Ee,Ge],[0,xe-2*Ge],[0,Ge*St,-Ee*St,Ge,-Ee,Ge],[2*Ee-me,0],[-Ee*St,0,-Ee,-Ge*St,-Ee,-Ge],[0,2*Ge-xe],[0,-Ge*St,Ee*St,-Ge,Ee,-Ge]],_+Ee,J,[1,1],qe,!0),this},f.__private__.ellipse=f.ellipse=function(_,J,me,xe,Ee){if(isNaN(_)||isNaN(J)||isNaN(me)||isNaN(xe)||!Ea(Ee))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ge=4/3*(Math.SQRT2-1)*me,qe=4/3*(Math.SQRT2-1)*xe;return _i(_+me,J),is(_+me,J-qe,_+Ge,J-xe,_,J-xe),is(_-Ge,J-xe,_-me,J-qe,_-me,J),is(_-me,J+qe,_-Ge,J+xe,_,J+xe),is(_+Ge,J+xe,_+me,J+qe,_+me,J),LA(Ee),this},f.__private__.circle=f.circle=function(_,J,me,xe){if(isNaN(_)||isNaN(J)||isNaN(me)||!Ea(xe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(_,J,me,me,xe)},f.setFont=function(_,J,me){return me&&(J=H(J,me)),Ye=Ko(_,J,{disableWarning:!1}),this};var xu=f.__private__.getFont=f.getFont=function(){return ft[Ko.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var _,J,me={};for(_ in Me)if(Me.hasOwnProperty(_))for(J in me[_]=[],Me[_])Me[_].hasOwnProperty(J)&&me[_].push(J);return me},f.addFont=function(_,J,me,xe,Ee){var Ge=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ge.indexOf(arguments[3])!==-1?Ee=arguments[3]:arguments[3]&&Ge.indexOf(arguments[3])==-1&&(me=H(me,xe)),po.call(this,_,J,me,Ee=Ee||"Identity-H")};var Vo,kA=t.lineWidth||.200025,Ht=f.__private__.getLineWidth=f.getLineWidth=function(){return kA},yu=f.__private__.setLineWidth=f.setLineWidth=function(_){return kA=_,de(M(k(_))+" w"),this};f.__private__.setLineDash=Dt.API.setLineDash=Dt.API.setLineDashPattern=function(_,J){if(_=_||[],J=J||0,isNaN(J)||!Array.isArray(_))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return _=_.map(function(me){return M(k(me))}).join(" "),J=M(k(J)),de("["+_+"] "+J+" d"),this};var wu=f.__private__.getLineHeight=f.getLineHeight=function(){return ze*Vo};f.__private__.getLineHeight=f.getLineHeight=function(){return ze*Vo};var bu=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(_){return typeof(_=_||1.15)=="number"&&(Vo=_),this},ju=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Vo};bu(t.lineHeight);var $a=f.__private__.getHorizontalCoordinate=function(_){return k(_)},za=f.__private__.getVerticalCoordinate=function(_){return S===C?_:Ve[z].mediaBox.topRightY-Ve[z].mediaBox.bottomLeftY-k(_)},Ds=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(_){return M($a(_))},Ol=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(_){return M(za(_))},$o=t.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return Xn($o)},f.__private__.setStrokeColor=f.setDrawColor=function(_,J,me,xe){return $o=Gn({ch1:_,ch2:J,ch3:me,ch4:xe,pdfColorType:"draw",precision:2}),de($o),this};var Fi=t.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return Xn(Fi)},f.__private__.setFillColor=f.setFillColor=function(_,J,me,xe){return Fi=Gn({ch1:_,ch2:J,ch3:me,ch4:xe,pdfColorType:"fill",precision:2}),de(Fi),this};var zo=t.textColor||"0 g",Ui=f.__private__.getTextColor=f.getTextColor=function(){return Xn(zo)};f.__private__.setTextColor=f.setTextColor=function(_,J,me,xe){return zo=Gn({ch1:_,ch2:J,ch3:me,ch4:xe,pdfColorType:"text",precision:3}),this};var Qi=t.charSpace,Dl=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Qi||0)};f.__private__.setCharSpace=f.setCharSpace=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Qi=_,this};var Ii=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(_){var J=f.CapJoinStyles[_];if(J===void 0)throw new Error("Line cap style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ii=J,de(J+" J"),this};var Li=0;f.__private__.setLineJoin=f.setLineJoin=function(_){var J=f.CapJoinStyles[_];if(J===void 0)throw new Error("Line join style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Li=J,de(J+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(_){if(_=_||0,isNaN(_))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return de(M(k(_))+" M"),this},f.GState=Yd,f.setGState=function(_){(_=typeof _=="string"?at[Le[_]]:Wo(null,_)).equals(lt)||(de("/"+_.id+" gs"),lt=_)};var Wo=function(_,J){if(!_||!Le[_]){var me=!1;for(var xe in at)if(at.hasOwnProperty(xe)&&at[xe].equals(J)){me=!0;break}if(me)J=at[xe];else{var Ee="GS"+(Object.keys(at).length+1).toString(10);at[Ee]=J,J.id=Ee}return _&&(Le[_]=J.id),it.publish("addGState",J),J}};f.addGState=function(_,J){return Wo(_,J),this},f.saveGraphicsState=function(){return de("q"),ct.push({key:Ye,size:ze,color:zo}),this},f.restoreGraphicsState=function(){de("Q");var _=ct.pop();return Ye=_.key,ze=_.size,zo=_.color,lt=null,this},f.setCurrentTransformationMatrix=function(_){return de(_.toString()+" cm"),this},f.comment=function(_){return de("#"+_),this};var Jo=function(_,J){var me=_||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return me},set:function(Ge){isNaN(Ge)||(me=parseFloat(Ge))}});var xe=J||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return xe},set:function(Ge){isNaN(Ge)||(xe=parseFloat(Ge))}});var Ee="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ee},set:function(Ge){Ee=Ge.toString()}}),this},ln=function(_,J,me,xe){Jo.call(this,_,J),this.type="rect";var Ee=me||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ee},set:function(qe){isNaN(qe)||(Ee=parseFloat(qe))}});var Ge=xe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ge},set:function(qe){isNaN(qe)||(Ge=parseFloat(qe))}}),this},ki=function(){this.page=tt,this.currentPage=z,this.pages=Te.slice(0),this.pagesContext=Ve.slice(0),this.x=Xe,this.y=Ct,this.matrix=bt,this.width=Rl(z),this.height=Wa(z),this.outputDestination=We,this.id="",this.objectNumber=-1};ki.prototype.restore=function(){tt=this.page,z=this.currentPage,Ve=this.pagesContext,Te=this.pages,Xe=this.x,Ct=this.y,bt=this.matrix,Hl(z,this.width),Rs(z,this.height),We=this.outputDestination};var _a=function(_,J,me,xe,Ee){sr.push(new ki),tt=z=0,Te=[],Xe=_,Ct=J,bt=Ee,go([me,xe])};for(var Xo in f.beginFormObject=function(_,J,me,xe,Ee){return _a(_,J,me,xe,Ee),this},f.endFormObject=function(_){return function(J){if(nr[J])sr.pop().restore();else{var me=new ki,xe="Xo"+(Object.keys(Pt).length+1).toString(10);me.id=xe,nr[J]=xe,Pt[xe]=me,it.publish("addFormObject",me),sr.pop().restore()}}(_),this},f.doFormObject=function(_,J){var me=Pt[nr[_]];return de("q"),de(J.toString()+" cm"),de("/"+me.id+" Do"),de("Q"),this},f.getFormObject=function(_){var J=Pt[nr[_]];return{x:J.x,y:J.y,width:J.width,height:J.height,matrix:J.matrix}},f.save=function(_,J){return _=_||"generated.pdf",(J=J||{}).returnPromise=J.returnPromise||!1,J.returnPromise===!1?(rl(sa(Os()),_),typeof rl.unload=="function"&&Vt.setTimeout&&setTimeout(rl.unload,911),this):new Promise(function(me,xe){try{var Ee=rl(sa(Os()),_);typeof rl.unload=="function"&&Vt.setTimeout&&setTimeout(rl.unload,911),me(Ee)}catch(Ge){xe(Ge.message)}})},Dt.API)Dt.API.hasOwnProperty(Xo)&&(Xo==="events"&&Dt.API.events.length?function(_,J){var me,xe,Ee;for(Ee=J.length-1;Ee!==-1;Ee--)me=J[Ee][0],xe=J[Ee][1],_.subscribe.apply(_,[me].concat(typeof xe=="function"?[xe]:xe))}(it,Dt.API.events):f[Xo]=Dt.API[Xo]);function Rl(_){return Ve[_].mediaBox.topRightX-Ve[_].mediaBox.bottomLeftX}function Hl(_,J){Ve[_].mediaBox.topRightX=J+Ve[_].mediaBox.bottomLeftX}function Wa(_){return Ve[_].mediaBox.topRightY-Ve[_].mediaBox.bottomLeftY}function Rs(_,J){Ve[_].mediaBox.topRightY=J+Ve[_].mediaBox.bottomLeftY}var Yo=f.getPageWidth=function(_){return Rl(_=_||z)/Pe},TA=f.setPageWidth=function(_,J){Hl(_,J*Pe)},qo=f.getPageHeight=function(_){return Wa(_=_||z)/Pe},ia=f.setPageHeight=function(_,J){Rs(_,J*Pe)};return f.internal={pdfEscape:bs,getStyle:kl,getFont:xu,getFontSize:et,getCharSpace:Dl,getTextColor:Ui,getLineHeight:wu,getLineHeightFactor:ju,getLineWidth:Ht,write:Ut,getHorizontalCoordinate:$a,getVerticalCoordinate:za,getCoordinateString:Ds,getVerticalCoordinateString:Ol,collections:{},newObject:st,newAdditionalObject:an,newObjectDeferred:Lr,newObjectDeferredBegin:Er,getFilters:os,putStream:Ts,events:it,scaleFactor:Pe,pageSize:{getWidth:function(){return Yo(z)},setWidth:function(_){TA(z,_)},getHeight:function(){return qo(z)},setHeight:function(_){ia(z,_)}},encryptionOptions:i,encryption:Yr,getEncryptor:function(_){return i!==null?Yr.encryptor(_,0):function(J){return J}},output:aa,getNumberOfPages:Il,pages:Te,out:de,f2:U,f3:F,getPageInfo:IA,getPageInfoByObjId:hu,getCurrentPageInfo:mu,getPDFVersion:j,Point:Jo,Rectangle:ln,Matrix:Qt,hasHotfix:An},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Yo(z)},set:function(_){TA(z,_)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return qo(z)},set:function(_){ia(z,_)},enumerable:!0,configurable:!0}),(function(_){for(var J=0,me=ot.length;J<me;J++){var xe=po.call(this,_[J][0],_[J][1],_[J][2],ot[J][3],!0);d===!1&&(h[xe]=!0);var Ee=_[J][0].split("-");Ul({id:xe,fontName:Ee[0],fontStyle:Ee[1]||""})}it.publish("addFonts",{fonts:ft,dictionary:Me})}).call(f,ot),Ye="F1",QA(a,r),it.publish("initialized"),f}Ec.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Ec.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ec.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},Ec.prototype.processOwnerPassword=function(t,e){return $g(Vg(e).substr(0,5),t)},Ec.prototype.encryptor=function(t,e){var r=Vg(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return $g(r,n)}},Yd.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Nr(t)!==Nr(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},Dt.API={events:[]},Dt.version="3.0.3";var fn=Dt.API,ex=1,Fl=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bc=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Xt=function(t){return t.toFixed(2)},tA=function(t){return t.toFixed(5)};fn.__acroform__={};var na=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},h1=function(t){return t*ex},Qo=function(t){var e=new xB,r=Et.internal.getHeight(t)||0,n=Et.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Xt(n)),Number(Xt(r))],e},wU=fn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},bU=fn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},jU=fn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},jn=fn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return jU(t,e-1)},Bn=fn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return wU(t,e-1)},Cn=fn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return bU(t,e-1)},BU=fn.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],o=t[1],l=t[2],c=t[3],A={};return A.lowerLeft_X=r(a)||0,A.lowerLeft_Y=n(o+c)||0,A.upperRight_X=r(a+l)||0,A.upperRight_Y=n(o)||0,[Number(Xt(A.lowerLeft_X)),Number(Xt(A.lowerLeft_Y)),Number(Xt(A.upperRight_X)),Number(Xt(A.upperRight_Y))]},CU=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=zg(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+Xt(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=Qo(t);return o.scope=t.scope,o.stream=e.join(`
`),o}},zg=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(U){return U.split(`
`)}):a.map(function(U){return[U]});var o=r,l=Et.internal.getHeight(t)||0;l=l<0?-l:l;var c=Et.internal.getWidth(t)||0;c=c<0?-c:c;var A=function(U,F,k){if(U+1<a.length){var T=F+" "+a[U+1][0];return xh(T,t,k).width<=c-4}return!1};o++;e:for(;o>0;){e="",o--;var u,i,d=xh("3",t,o).height,h=t.multiline?l-o:(l-d)/2,f=h+=2,w=0,j=0,B=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+xh(e,t,o=12).width+", FieldWidth:"+c+`
`;break}for(var p="",x=0,C=0;C<a.length;C++)if(a.hasOwnProperty(C)){var S=!1;if(a[C].length!==1&&B!==a[C].length-1){if((d+2)*(x+2)+2>l)continue e;p+=a[C][B],S=!0,j=C,C--}else{p=(p+=a[C][B]+" ").substr(p.length-1)==" "?p.substr(0,p.length-1):p;var E=parseInt(C),I=A(E,p,o),H=C>=a.length-1;if(I&&!H){p+=" ",B=0;continue}if(I||H){if(H)j=E;else if(t.multiline&&(d+2)*(x+2)+2>l)continue e}else{if(!t.multiline||(d+2)*(x+2)+2>l)continue e;j=E}}for(var M="",D=w;D<=j;D++){var K=a[D];if(t.multiline){if(D===j){M+=K[B]+" ",B=(B+1)%K.length;continue}if(D===w){M+=K[K.length-1]+" ";continue}}M+=K[0]+" "}switch(M=M.substr(M.length-1)==" "?M.substr(0,M.length-1):M,i=xh(M,t,o).width,t.textAlign){case"right":u=c-i-2;break;case"center":u=(c-i)/2;break;default:u=2}e+=Xt(u)+" "+Xt(f)+` Td
`,e+="("+Fl(M)+`) Tj
`,e+=-Xt(u)+` 0 Td
`,f=-(o+2),i=0,w=S?j:j+1,x++,p=""}break}return n.text=e,n.fontSize=o,n},xh=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},NU={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},SU=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},EU=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(fo.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(NU)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");ex=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new yB,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var o=n[a];o.objId=void 0,o.hasAnnotation&&SU(o,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var o=!n;for(var l in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(l)){var c=n[l],A=[],u=c.Rect;if(c.Rect&&(c.Rect=BU(c.Rect,a)),a.internal.newObjectDeferredBegin(c.objId,!0),c.DA=Et.createDefaultAppearanceStream(c),Nr(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(A=c.getKeyValueListForStream()),c.Rect=u,c.hasAppearanceStream&&!c.appearanceStreamContent){var i=CU(c);A.push({key:"AP",value:"<</N "+i+">>"}),a.internal.acroformPlugin.xForms.push(i)}if(c.appearanceStreamContent){var d="";for(var h in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(h)){var f=c.appearanceStreamContent[h];if(d+="/"+h+" ",d+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var l in f)if(f.hasOwnProperty(l)){var w=f[l];typeof w=="function"&&(w=w.call(a,c)),d+="/"+l+" "+w+" ",a.internal.acroformPlugin.xForms.indexOf(w)>=0||a.internal.acroformPlugin.xForms.push(w)}}else typeof(w=f)=="function"&&(w=w.call(a,c)),d+="/"+l+" "+w,a.internal.acroformPlugin.xForms.indexOf(w)>=0||a.internal.acroformPlugin.xForms.push(w);d+=">>"}A.push({key:"AP",value:`<<
`+d+">>"})}a.internal.putStream({additionalKeyValues:A,objectId:c.objId}),a.internal.out("endobj")}o&&function(j,B){for(var p in j)if(j.hasOwnProperty(p)){var x=p,C=j[p];B.internal.newObjectDeferredBegin(C.objId,!0),Nr(C)==="object"&&typeof C.putStream=="function"&&C.putStream(),delete j[x]}}(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},vB=fn.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(l){return l};if(Array.isArray(t)){for(var a="[",o=0;o<t.length;o++)switch(o!==0&&(a+=" "),Nr(t[o])){case"boolean":case"number":case"object":a+=t[o].toString();break;case"string":t[o].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),a+="("+Fl(n(t[o].toString()))+")"):a+=t[o].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},S0=function(t,e,r){var n=function(a){return a};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+Fl(n(t))+")"},To=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};To.prototype.toString=function(){return this.objId+" 0 R"},To.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},To.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:vB(a,this.objId,this.scope)}):a instanceof To?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var xB=function(){To.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};na(xB,To);var yB=function(){To.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Fl(r(t))+")"}},set:function(r){t=r}})};na(yB,To);var fo=function t(){To.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(p){if(isNaN(p))throw new Error('Invalid value "'+p+'" for attribute F supplied.');e=p}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!jn(e,3)},set:function(p){p?this.F=Bn(e,3):this.F=Cn(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(p){if(isNaN(p))throw new Error('Invalid value "'+p+'" for attribute Ff supplied.');r=p}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(p){n=p!==void 0?p:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(p){n[0]=p}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(p){n[1]=p}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(p){n[2]=p}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(p){n[3]=p}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(p){switch(p){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=p;break;default:throw new Error('Invalid value "'+p+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof fm)return;o="FieldObject"+t.FieldNum++}var p=function(x){return x};return this.scope&&(p=this.scope.internal.getEncryptor(this.objId)),"("+Fl(p(o))+")"},set:function(p){o=p.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(p){o=p}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(p){l=p}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(p){c=p}});var A=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return A},set:function(p){A=p}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/ex:u},set:function(p){u=p}});var i="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return i},set:function(p){i=p}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof fm||this instanceof bA))return S0(d,this.objId,this.scope)},set:function(p){p=p.toString(),d=p}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Hn==0?S0(h,this.objId,this.scope):h},set:function(p){p=p.toString(),h=this instanceof Hn==0?p.substr(0,1)==="("?Bc(p.substr(1,p.length-2)):Bc(p):p}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Hn==1?Bc(h.substr(1,h.length-1)):h},set:function(p){p=p.toString(),h=this instanceof Hn==1?"/"+p:p}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(p){this.V=p}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Hn==0?S0(f,this.objId,this.scope):f},set:function(p){p=p.toString(),f=this instanceof Hn==0?p.substr(0,1)==="("?Bc(p.substr(1,p.length-2)):Bc(p):p}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Hn==1?Bc(f.substr(1,f.length-1)):f},set:function(p){p=p.toString(),f=this instanceof Hn==1?"/"+p:p}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var w,j=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return j},set:function(p){p=!!p,j=p}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(w)return w},set:function(p){w=p}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,1)},set:function(p){p?this.Ff=Bn(this.Ff,1):this.Ff=Cn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,2)},set:function(p){p?this.Ff=Bn(this.Ff,2):this.Ff=Cn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,3)},set:function(p){p?this.Ff=Bn(this.Ff,3):this.Ff=Cn(this.Ff,3)}});var B=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(B!==null)return B},set:function(p){if([0,1,2].indexOf(p)===-1)throw new Error('Invalid value "'+p+'" for attribute Q supplied.');B=p}}),Object.defineProperty(this,"textAlign",{get:function(){var p;switch(B){case 0:default:p="left";break;case 1:p="center";break;case 2:p="right"}return p},configurable:!0,enumerable:!0,set:function(p){switch(p){case"right":case 2:B=2;break;case"center":case 1:B=1;break;default:B=0}}})};na(fo,To);var hl=function(){fo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return vB(e,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(o,l,c){c||(c=1);for(var A,u=[];A=l.exec(o);)u.push(A[c]);return u}(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,18)},set:function(r){r?this.Ff=Bn(this.Ff,18):this.Ff=Cn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Bn(this.Ff,19):this.Ff=Cn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,20)},set:function(r){r?(this.Ff=Bn(this.Ff,20),e.sort()):this.Ff=Cn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,22)},set:function(r){r?this.Ff=Bn(this.Ff,22):this.Ff=Cn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,23)},set:function(r){r?this.Ff=Bn(this.Ff,23):this.Ff=Cn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,27)},set:function(r){r?this.Ff=Bn(this.Ff,27):this.Ff=Cn(this.Ff,27)}}),this.hasAppearanceStream=!1};na(hl,fo);var ml=function(){hl.call(this),this.fontName="helvetica",this.combo=!1};na(ml,hl);var pl=function(){ml.call(this),this.combo=!0};na(pl,ml);var Bd=function(){pl.call(this),this.edit=!0};na(Bd,pl);var Hn=function(){fo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,15)},set:function(r){r?this.Ff=Bn(this.Ff,15):this.Ff=Cn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,16)},set:function(r){r?this.Ff=Bn(this.Ff,16):this.Ff=Cn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,17)},set:function(r){r?this.Ff=Bn(this.Ff,17):this.Ff=Cn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,26)},set:function(r){r?this.Ff=Bn(this.Ff,26):this.Ff=Cn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(o){return o};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+Fl(r(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Nr(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};na(Hn,fo);var Cd=function(){Hn.call(this),this.pushButton=!0};na(Cd,Hn);var gl=function(){Hn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};na(gl,Hn);var fm=function(){var t,e;fo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(c){return c};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var o,l=[];for(o in l.push("<<"),n)l.push("/"+o+" ("+Fl(a(n[o]))+")");return l.push(">>"),l.join(`
`)},set:function(a){Nr(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Et.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};na(fm,fo),gl.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},gl.prototype.createOption=function(t){var e=new fm;return e.Parent=this,e.optionName=t,this.Kids.push(e),_U.call(this.scope,e),e};var Nd=function(){Hn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Et.CheckBox.createAppearanceStream()};na(Nd,Hn);var bA=function(){fo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,13)},set:function(e){e?this.Ff=Bn(this.Ff,13):this.Ff=Cn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,21)},set:function(e){e?this.Ff=Bn(this.Ff,21):this.Ff=Cn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,23)},set:function(e){e?this.Ff=Bn(this.Ff,23):this.Ff=Cn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,24)},set:function(e){e?this.Ff=Bn(this.Ff,24):this.Ff=Cn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,25)},set:function(e){e?this.Ff=Bn(this.Ff,25):this.Ff=Cn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,26)},set:function(e){e?this.Ff=Bn(this.Ff,26):this.Ff=Cn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};na(bA,fo);var Sd=function(){bA.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!jn(this.Ff,14)},set:function(t){t?this.Ff=Bn(this.Ff,14):this.Ff=Cn(this.Ff,14)}}),this.password=!0};na(Sd,bA);var Et={CheckBox:{createAppearanceStream:function(){return{N:{On:Et.CheckBox.YesNormal},D:{On:Et.CheckBox.YesPushDown,Off:Et.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Qo(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),o=zg(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Xt(Et.internal.getWidth(t))+" "+Xt(Et.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Xt(o.fontSize)+" Tf "+a),r.push("BT"),r.push(o.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=Qo(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],o=Et.internal.getHeight(t),l=Et.internal.getWidth(t),c=zg(t,t.caption);return a.push("1 g"),a.push("0 0 "+Xt(l)+" "+Xt(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Xt(l-1)+" "+Xt(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Xt(c.fontSize)+" Tf "+n),a.push(c.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=Qo(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Xt(Et.internal.getWidth(t))+" "+Xt(Et.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Et.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Et.RadioButton.Circle.YesNormal,e.D[t]=Et.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Qo(t);e.scope=t.scope;var r=[],n=Et.internal.getWidth(t)<=Et.internal.getHeight(t)?Et.internal.getWidth(t)/4:Et.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Et.internal.Bezier_C,o=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+tA(Et.internal.getWidth(t)/2)+" "+tA(Et.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Qo(t);e.scope=t.scope;var r=[],n=Et.internal.getWidth(t)<=Et.internal.getHeight(t)?Et.internal.getWidth(t)/4:Et.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),o=Number((a*Et.internal.Bezier_C).toFixed(5)),l=Number((n*Et.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+tA(Et.internal.getWidth(t)/2)+" "+tA(Et.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),r.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),r.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),r.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+tA(Et.internal.getWidth(t)/2)+" "+tA(Et.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+l+" "+l+" "+n+" 0 "+n+" c"),r.push("-"+l+" "+n+" -"+n+" "+l+" -"+n+" 0 c"),r.push("-"+n+" -"+l+" -"+l+" -"+n+" 0 -"+n+" c"),r.push(l+" -"+n+" "+n+" -"+l+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Qo(t);e.scope=t.scope;var r=[],n=Et.internal.getWidth(t)<=Et.internal.getHeight(t)?Et.internal.getWidth(t)/4:Et.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),o=Number((a*Et.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+tA(Et.internal.getWidth(t)/2)+" "+tA(Et.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),r.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),r.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),r.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Et.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Et.RadioButton.Cross.YesNormal,e.D[t]=Et.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Qo(t);e.scope=t.scope;var r=[],n=Et.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Xt(Et.internal.getWidth(t)-2)+" "+Xt(Et.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Xt(n.x1.x)+" "+Xt(n.x1.y)+" m"),r.push(Xt(n.x2.x)+" "+Xt(n.x2.y)+" l"),r.push(Xt(n.x4.x)+" "+Xt(n.x4.y)+" m"),r.push(Xt(n.x3.x)+" "+Xt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=Qo(t);e.scope=t.scope;var r=Et.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Xt(Et.internal.getWidth(t))+" "+Xt(Et.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Xt(Et.internal.getWidth(t)-2)+" "+Xt(Et.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Xt(r.x1.x)+" "+Xt(r.x1.y)+" m"),n.push(Xt(r.x2.x)+" "+Xt(r.x2.y)+" l"),n.push(Xt(r.x4.x)+" "+Xt(r.x4.y)+" m"),n.push(Xt(r.x3.x)+" "+Xt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Qo(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Xt(Et.internal.getWidth(t))+" "+Xt(Et.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};Et.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Et.internal.getWidth(t),r=Et.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},Et.internal.getWidth=function(t){var e=0;return Nr(t)==="object"&&(e=h1(t.Rect[2])),e},Et.internal.getHeight=function(t){var e=0;return Nr(t)==="object"&&(e=h1(t.Rect[3])),e};var _U=fn.addField=function(t){if(EU(this,t),!(t instanceof fo))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};fn.AcroFormChoiceField=hl,fn.AcroFormListBox=ml,fn.AcroFormComboBox=pl,fn.AcroFormEditBox=Bd,fn.AcroFormButton=Hn,fn.AcroFormPushButton=Cd,fn.AcroFormRadioButton=gl,fn.AcroFormCheckBox=Nd,fn.AcroFormTextField=bA,fn.AcroFormPasswordField=Sd,fn.AcroFormAppearance=Et,fn.AcroForm={ChoiceField:hl,ListBox:ml,ComboBox:pl,EditBox:Bd,Button:Hn,PushButton:Cd,RadioButton:gl,CheckBox:Nd,TextField:bA,PasswordField:Sd,Appearance:Et},Dt.AcroForm={ChoiceField:hl,ListBox:ml,ComboBox:pl,EditBox:Bd,Button:Hn,PushButton:Cd,RadioButton:gl,CheckBox:Nd,TextField:bA,PasswordField:Sd,Appearance:Et};var FU=Dt.AcroForm;function wB(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(U,F){var k,T,P,$,ee,V=r;if((F=F||r)==="RGBA"||U.data!==void 0&&U.data instanceof Uint8ClampedArray&&"height"in U&&"width"in U)return"RGBA";if(I(U))for(ee in n)for(P=n[ee],k=0;k<P.length;k+=1){for($=!0,T=0;T<P[k].length;T+=1)if(P[k][T]!==void 0&&P[k][T]!==U[T]){$=!1;break}if($===!0){V=ee;break}}else for(ee in n)for(P=n[ee],k=0;k<P.length;k+=1){for($=!0,T=0;T<P[k].length;T+=1)if(P[k][T]!==void 0&&P[k][T]!==U.charCodeAt(T)){$=!1;break}if($===!0){V=ee;break}}return V===r&&F!==r&&(V=F),V},o=function U(F){for(var k=this.internal.write,T=this.internal.putStream,P=(0,this.internal.getFilters)();P.indexOf("FlateEncode")!==-1;)P.splice(P.indexOf("FlateEncode"),1);F.objectId=this.internal.newObject();var $=[];if($.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Image"}),$.push({key:"Width",value:F.width}),$.push({key:"Height",value:F.height}),F.colorSpace===p.INDEXED?$.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(F.palette.length/3-1)+" "+("sMask"in F&&F.sMask!==void 0?F.objectId+2:F.objectId+1)+" 0 R]"}):($.push({key:"ColorSpace",value:"/"+F.colorSpace}),F.colorSpace===p.DEVICE_CMYK&&$.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),$.push({key:"BitsPerComponent",value:F.bitsPerComponent}),"decodeParameters"in F&&F.decodeParameters!==void 0&&$.push({key:"DecodeParms",value:"<<"+F.decodeParameters+">>"}),"transparency"in F&&Array.isArray(F.transparency)&&F.transparency.length>0){for(var ee="",V=0,W=F.transparency.length;V<W;V++)ee+=F.transparency[V]+" "+F.transparency[V]+" ";$.push({key:"Mask",value:"["+ee+"]"})}F.sMask!==void 0&&$.push({key:"SMask",value:F.objectId+1+" 0 R"});var te=F.filter!==void 0?["/"+F.filter]:void 0;if(T({data:F.data,additionalKeyValues:$,alreadyAppliedFilters:te,objectId:F.objectId}),k("endobj"),"sMask"in F&&F.sMask!==void 0){var oe,O=(oe=F.sMaskBitsPerComponent)!==null&&oe!==void 0?oe:F.bitsPerComponent,z={width:F.width,height:F.height,colorSpace:"DeviceGray",bitsPerComponent:O,data:F.sMask};"filter"in F&&(z.decodeParameters="/Predictor ".concat(F.predictor," /Colors 1 /BitsPerComponent ").concat(O," /Columns ").concat(F.width),z.filter=F.filter),U.call(this,z)}if(F.colorSpace===p.INDEXED){var ne=this.internal.newObject();T({data:M(new Uint8Array(F.palette)),objectId:ne}),k("endobj")}},l=function(){var U=this.internal.collections[e+"images"];for(var F in U)o.call(this,U[F])},c=function(){var U,F=this.internal.collections[e+"images"],k=this.internal.write;for(var T in F)k("/I"+(U=F[T]).index,U.objectId,"0","R")},A=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",c))},u=function(){var U=this.internal.collections[e+"images"];return A.call(this),U},i=function(){return Object.keys(this.internal.collections[e+"images"]).length},d=function(U){return typeof t["process"+U.toUpperCase()]=="function"},h=function(U){return Nr(U)==="object"&&U.nodeType===1},f=function(U,F){if(U.nodeName==="IMG"&&U.hasAttribute("src")){var k=""+U.getAttribute("src");if(k.indexOf("data:image/")===0)return Th(unescape(k).split("base64,").pop());var T=t.loadFile(k,!0);if(T!==void 0)return T}if(U.nodeName==="CANVAS"){if(U.width===0||U.height===0)throw new Error("Given canvas must have data. Canvas width: "+U.width+", height: "+U.height);var P;switch(F){case"PNG":P="image/png";break;case"WEBP":P="image/webp";break;default:P="image/jpeg"}return Th(U.toDataURL(P,1).split("base64,").pop())}},w=function(U){var F=this.internal.collections[e+"images"];if(F){for(var k in F)if(U===F[k].alias)return F[k]}},j=function(U,F,k){return U||F||(U=-96,F=-96),U<0&&(U=-1*k.width*72/U/this.internal.scaleFactor),F<0&&(F=-1*k.height*72/F/this.internal.scaleFactor),U===0&&(U=F*k.width/k.height),F===0&&(F=U*k.height/k.width),[U,F]},B=function(U,F,k,T,P,$){var ee=j.call(this,k,T,P),V=this.internal.getCoordinateString,W=this.internal.getVerticalCoordinateString,te=u.call(this);if(k=ee[0],T=ee[1],te[P.index]=P,$){$*=Math.PI/180;var oe=Math.cos($),O=Math.sin($),z=function(Z){return Z.toFixed(4)},ne=[z(oe),z(O),z(-1*O),z(oe),0,0,"cm"]}this.internal.write("q"),$?(this.internal.write([1,"0","0",1,V(U),W(F+T),"cm"].join(" ")),this.internal.write(ne.join(" ")),this.internal.write([V(k),"0","0",V(T),"0","0","cm"].join(" "))):this.internal.write([V(k),"0","0",V(T),V(U),W(F+T),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+P.index+" Do"),this.internal.write("Q")},p=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},C=t.__addimage__.sHashCode=function(U){var F,k,T=0;if(typeof U=="string")for(k=U.length,F=0;F<k;F++)T=(T<<5)-T+U.charCodeAt(F),T|=0;else if(I(U))for(k=U.byteLength/2,F=0;F<k;F++)T=(T<<5)-T+U[F],T|=0;return T},S=t.__addimage__.validateStringAsBase64=function(U){(U=U||"").toString().trim();var F=!0;return U.length===0&&(F=!1),U.length%4!=0&&(F=!1),/^[A-Za-z0-9+/]+$/.test(U.substr(0,U.length-2))===!1&&(F=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(U.substr(-2))===!1&&(F=!1),F},E=t.__addimage__.extractImageFromDataUrl=function(U){if(U==null||!(U=U.trim()).startsWith("data:"))return null;var F=U.indexOf(",");return F<0?null:U.substring(0,F).trim().endsWith("base64")?U.substring(F+1):null};t.__addimage__.isArrayBuffer=function(U){return U instanceof ArrayBuffer};var I=t.__addimage__.isArrayBufferView=function(U){return U instanceof Int8Array||U instanceof Uint8Array||U instanceof Uint8ClampedArray||U instanceof Int16Array||U instanceof Uint16Array||U instanceof Int32Array||U instanceof Uint32Array||U instanceof Float32Array||U instanceof Float64Array},H=t.__addimage__.binaryStringToUint8Array=function(U){for(var F=U.length,k=new Uint8Array(F),T=0;T<F;T++)k[T]=U.charCodeAt(T);return k},M=t.__addimage__.arrayBufferToBinaryString=function(U){for(var F="",k=I(U)?U:new Uint8Array(U),T=0;T<k.length;T+=8192)F+=String.fromCharCode.apply(null,k.subarray(T,T+8192));return F};t.addImage=function(){var U,F,k,T,P,$,ee,V,W;if(typeof arguments[1]=="number"?(F=r,k=arguments[1],T=arguments[2],P=arguments[3],$=arguments[4],ee=arguments[5],V=arguments[6],W=arguments[7]):(F=arguments[1],k=arguments[2],T=arguments[3],P=arguments[4],$=arguments[5],ee=arguments[6],V=arguments[7],W=arguments[8]),Nr(U=arguments[0])==="object"&&!h(U)&&"imageData"in U){var te=U;U=te.imageData,F=te.format||F||r,k=te.x||k||0,T=te.y||T||0,P=te.w||te.width||P,$=te.h||te.height||$,ee=te.alias||ee,V=te.compression||V,W=te.rotation||te.angle||W}var oe=this.internal.getFilters();if(V===void 0&&oe.indexOf("FlateEncode")!==-1&&(V="SLOW"),isNaN(k)||isNaN(T))throw new Error("Invalid coordinates passed to jsPDF.addImage");A.call(this);var O=D.call(this,U,F,ee,V);return B.call(this,k,T,P,$,O,W),this};var D=function(U,F,k,T){var P,$,ee;if(typeof U=="string"&&a(U)===r){U=unescape(U);var V=K(U,!1);(V!==""||(V=t.loadFile(U,!0))!==void 0)&&(U=V)}if(h(U)&&(U=f(U,F)),F=a(U,F),!d(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(((ee=k)==null||ee.length===0)&&(k=function(W){return typeof W=="string"||I(W)?C(W):I(W.data)?C(W.data):null}(U)),(P=w.call(this,k))||(U instanceof Uint8Array||F==="RGBA"||($=U,U=H(U)),P=this["process"+F.toUpperCase()](U,i.call(this),k,function(W){return W&&typeof W=="string"&&(W=W.toUpperCase()),W in t.image_compression?W:x.NONE}(T),$)),!P)throw new Error("An unknown error occurred whilst processing the image.");return P},K=t.__addimage__.convertBase64ToBinaryString=function(U,F){F=typeof F!="boolean"||F;var k,T="";if(typeof U=="string"){var P;k=(P=E(U))!==null&&P!==void 0?P:U;try{T=Th(k)}catch($){if(F)throw S(k)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+$.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return T};t.getImageProperties=function(U){var F,k,T="";if(h(U)&&(U=f(U)),typeof U=="string"&&a(U)===r&&((T=K(U,!1))===""&&(T=t.loadFile(U)||""),U=T),k=a(U),!d(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(U instanceof Uint8Array||(U=H(U)),!(F=this["process"+k.toUpperCase()](U)))throw new Error("An unknown error occurred whilst processing the image");return F.fileType=k,F}})(Dt.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};Dt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,o,l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,A=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,i=!1,d=0;d<u.length&&!i;d++)switch((n=u[d]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(i=!0);break;case"reference":case"text":case"freetext":i=!0}if(i!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var f=this.internal.pdfEscape,w=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var j=this.internal.newAdditionalObject(),B=this.internal.newAdditionalObject(),p=this.internal.getEncryptor(j.objId),x=n.title||"Note";o="<</Type /Annot /Subtype /Text "+(a="/Rect ["+l(n.bounds.x)+" "+c(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w)+" "+c(n.bounds.y)+"] ")+"/Contents ("+f(p(n.contents))+")",o+=" /Popup "+B.objId+" 0 R",o+=" /P "+A.objId+" 0 R",o+=" /T ("+f(p(x))+") >>",j.content=o;var C=j.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+l(n.bounds.x+30)+" "+c(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w+30)+" "+c(n.bounds.y)+"] ")+" /Parent "+C,n.open&&(o+=" /Open true"),o+=" >>",B.content=o,this.internal.write(j.objId,"0 R",B.objId,"0 R");break;case"freetext":a="/Rect ["+l(n.bounds.x)+" "+c(n.bounds.y)+" "+l(n.bounds.x+n.bounds.w)+" "+c(n.bounds.y+n.bounds.h)+"] ";var S=n.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+f(w(n.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+S+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(n.options.name){var E=this.annotations._nameMap[n.options.name];n.options.pageNumber=E.page,n.options.top=E.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",o="",n.options.url)o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+f(w(n.options.url))+") >>";else if(n.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,o+=" /FitV "+n.options.left+"]";break;default:var I=c(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),o+=" /XYZ "+n.options.left+" "+I+" "+n.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,o,l){var c=this.internal.getCurrentPageInfo(),A=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:A(r),y:u(n),w:A(r+a),h:u(n+o)},options:l,type:"link"})},t.textWithLink=function(r,n,a,o){var l,c,A=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){c=o.maxWidth;var i=this.splitTextToSize(r,c).length;l=Math.ceil(u*i)}else c=A,l=u;return this.text(r,n,a,o),a+=.2*u,o.align==="center"&&(n-=A/2),o.align==="right"&&(n-=A),this.link(n,a-u,c,l,o),A},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(Dt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(j){return e[j.charCodeAt(0)]!==void 0},l=t.__arabicParser__.isArabicLetter=function(j){return typeof j=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(j)},c=t.__arabicParser__.isArabicEndLetter=function(j){return l(j)&&o(j)&&e[j.charCodeAt(0)].length<=2},A=t.__arabicParser__.isArabicAlfLetter=function(j){return l(j)&&a.indexOf(j.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(j){return l(j)&&o(j)&&e[j.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(j){return l(j)&&o(j)&&e[j.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(j){return l(j)&&o(j)&&e[j.charCodeAt(0)].length>=3};var i=t.__arabicParser__.arabicLetterHasMedialForm=function(j){return l(j)&&o(j)&&e[j.charCodeAt(0)].length==4},d=t.__arabicParser__.resolveLigatures=function(j){var B=0,p=r,x="",C=0;for(B=0;B<j.length;B+=1)p[j.charCodeAt(B)]!==void 0?(C++,typeof(p=p[j.charCodeAt(B)])=="number"&&(x+=String.fromCharCode(p),p=r,C=0),B===j.length-1&&(p=r,x+=j.charAt(B-(C-1)),B-=C-1,C=0)):(p=r,x+=j.charAt(B-C),B-=C,C=0);return x};t.__arabicParser__.isArabicDiacritic=function(j){return j!==void 0&&n[j.charCodeAt(0)]!==void 0};var h=t.__arabicParser__.getCorrectForm=function(j,B,p){return l(j)?o(j)===!1?-1:!u(j)||!l(B)&&!l(p)||!l(p)&&c(B)||c(j)&&!l(B)||c(j)&&A(B)||c(j)&&c(B)?0:i(j)&&l(B)&&!c(B)&&l(p)&&u(p)?3:c(j)||!l(p)?1:2:-1},f=function(j){var B=0,p=0,x=0,C="",S="",E="",I=(j=j||"").split("\\s+"),H=[];for(B=0;B<I.length;B+=1){for(H.push(""),p=0;p<I[B].length;p+=1)C=I[B][p],S=I[B][p-1],E=I[B][p+1],l(C)?(x=h(C,S,E),H[B]+=x!==-1?String.fromCharCode(e[C.charCodeAt(0)][x]):C):H[B]+=C;H[B]=d(H[B])}return H.join(" ")},w=t.__arabicParser__.processArabic=t.processArabic=function(){var j,B=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,p=[];if(Array.isArray(B)){var x=0;for(p=[],x=0;x<B.length;x+=1)Array.isArray(B[x])?p.push([f(B[x][0]),B[x][1],B[x][2]]):p.push([f(B[x])]);j=p}else j=f(B);return typeof arguments[0]=="string"?j:(arguments[0].text=j,arguments[0])};t.events.push(["preProcessText",w])}(Dt.API),Dt.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(c){r=c}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(c){n=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(c){a=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(c){o=c}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(c){l=c}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Dt.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var A=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return A},set:function(j){A=j}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(j){u=j}});var i=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return i},set:function(j){i=j}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(j){d=j}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(j){h=j}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(j){f=j}});var w=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return w},set:function(j){w=j}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(A){return n.call(this),this.internal.__cell__.headerFunction=typeof A=="function"?A:void 0,this},t.getTextDimensions=function(A,u){n.call(this);var i=(u=u||{}).fontSize||this.getFontSize(),d=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,f=0,w=0,j=0,B=this;if(!Array.isArray(A)&&typeof A!="string"){if(typeof A!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");A=String(A)}var p=u.maxWidth;p>0?typeof A=="string"?A=this.splitTextToSize(A,p):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(C,S){return C.concat(B.splitTextToSize(S,p))},[])):A=Array.isArray(A)?A:[A];for(var x=0;x<A.length;x++)f<(j=this.getStringUnitWidth(A[x],{font:d})*i)&&(f=j);return f!==0&&(w=A.length),{w:f/=h,h:Math.max((w*i*this.getLineHeightFactor()-i*(this.getLineHeightFactor()-1))/h,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var A=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(A.left,A.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=t.cell=function(){var A;A=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,i=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===A.lineNumber?(A.x=(u.x||0)+(u.width||0),A.y=u.y||0):u.y+u.height+A.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),A.y=d.top,f&&h&&(this.printHeaderRow(A.lineNumber,!0),A.y+=h[0].height)):A.y=u.y+u.height||A.y),A.text[0]!==void 0&&(this.rect(A.x,A.y,A.width,A.height,r===!0?"FD":void 0),A.align==="right"?this.text(A.text,A.x+A.width-i,A.y+i,{align:"right",baseline:"top"}):A.align==="center"?this.text(A.text,A.x+A.width/2,A.y+i,{align:"center",baseline:"top",maxWidth:A.width-i-i}):this.text(A.text,A.x+i,A.y+i,{align:"left",baseline:"top",maxWidth:A.width-i-i})),this.internal.__cell__.lastCell=A,this};t.table=function(A,u,i,d,h){if(n.call(this),!i)throw new Error("No data for PDF table.");var f,w,j,B,p=[],x=[],C=[],S={},E={},I=[],H=[],M=(h=h||{}).autoSize||!1,D=h.printHeaders!==!1,K=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,U=h.margins||Object.assign({width:this.getPageWidth()},e),F=typeof h.padding=="number"?h.padding:3,k=h.headerBackgroundColor||"#c8c8c8",T=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=D,this.internal.__cell__.margins=U,this.internal.__cell__.table_font_size=K,this.internal.__cell__.padding=F,this.internal.__cell__.headerBackgroundColor=k,this.internal.__cell__.headerTextColor=T,this.setFontSize(K),d==null)x=p=Object.keys(i[0]),C=p.map(function(){return"left"});else if(Array.isArray(d)&&Nr(d[0])==="object")for(p=d.map(function(te){return te.name}),x=d.map(function(te){return te.prompt||te.name||""}),C=d.map(function(te){return te.align||"left"}),f=0;f<d.length;f+=1)E[d[f].name]=.7499990551181103*d[f].width;else Array.isArray(d)&&typeof d[0]=="string"&&(x=p=d,C=p.map(function(){return"left"}));if(M||Array.isArray(d)&&typeof d[0]=="string")for(f=0;f<p.length;f+=1){for(S[B=p[f]]=i.map(function(te){return te[B]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(x[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),w=S[B],this.setFont(void 0,"normal"),j=0;j<w.length;j+=1)I.push(this.getTextDimensions(w[j],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);E[B]=Math.max.apply(null,I)+F+F,I=[]}if(D){var P={};for(f=0;f<p.length;f+=1)P[p[f]]={},P[p[f]].text=x[f],P[p[f]].align=C[f];var $=c.call(this,P,E);H=p.map(function(te){return new o(A,u,E[te],$,P[te].text,void 0,P[te].align)}),this.setTableHeaderRow(H),this.printHeaderRow(1,!1)}var ee=d.reduce(function(te,oe){return te[oe.name]=oe.align,te},{});for(f=0;f<i.length;f+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:f,data:i[f]},this);var V=c.call(this,i[f],E);for(j=0;j<p.length;j+=1){var W=i[f][p[j]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:f,col:j,data:W},this),l.call(this,new o(A,u,E[p[j]],V,W,f+2,ee[p[j]]))}}return this.internal.__cell__.table_x=A,this.internal.__cell__.table_y=u,this};var c=function(A,u){var i=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(A).map(function(f){var w=A[f];return this.splitTextToSize(w.hasOwnProperty("text")?w.text:w,u[f]-i-i)},this).map(function(f){return this.getLineHeightFactor()*f.length*d/h+i+i},this).reduce(function(f,w){return Math.max(f,w)},0)};t.setTableHeaderRow=function(A){n.call(this),this.internal.__cell__.tableHeaderRow=A},t.printHeaderRow=function(A,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var i;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){i=this.internal.__cell__.tableHeaderRow[f].clone(),u&&(i.y=this.internal.__cell__.margins.top||0,h.push(i)),i.lineNumber=A;var w=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,i),this.setTextColor(w)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(Dt.API);var bB={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},jB=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Wg=wB(jB),BB=[100,200,300,400,500,600,700,800,900],UU=wB(BB);function E0(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(o){return bB[o=o||"normal"]?o:"normal"}(t.style),n=function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400}(t.weight),a=function(o){return typeof Wg[o=o||"normal"]=="number"?o:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,r,n].join(" ")}}}function m1(t,e,r,n){var a;for(a=r;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=r;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var QU={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},p1={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function g1(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function v1(t){return t.trimLeft()}function IU(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function LU(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var yh,x1,y1,Cc,wh,w1,b1,j1,_0=["times"];function B1(t,e,r,n,a){var o=4,l=N1;switch(a){case Dt.API.image_compression.FAST:o=1,l=C1;break;case Dt.API.image_compression.MEDIUM:o=6,l=S1;break;case Dt.API.image_compression.SLOW:o=9,l=E1}t=function(A,u,i,d){for(var h,f=A.length/u,w=new Uint8Array(A.length+f),j=[kU,C1,N1,S1,E1],B=0;B<f;B+=1){var p=B*u,x=A.subarray(p,p+u);if(d)w.set(d(x,i,h),p+B);else{for(var C=j.length,S=[],E=0;E<C;E+=1)S[E]=j[E](x,i,h);var I=PU(S.concat());w.set(S[I],p+B)}h=x}return w}(t,e,Math.ceil(r*n/8),l);var c=Hg(t,{level:o});return Dt.API.__addimage__.arrayBufferToBinaryString(c)}function kU(t){var e=Array.apply([],t);return e.unshift(0),e}function C1(t,e){var r=t.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var o=t[a-e]||0;n[a+1]=t[a]-o+256&255}return n}function N1(t,e,r){var n=t.length,a=[];a[0]=2;for(var o=0;o<n;o+=1){var l=r&&r[o]||0;a[o+1]=t[o]-l+256&255}return a}function S1(t,e,r){var n=t.length,a=[];a[0]=3;for(var o=0;o<n;o+=1){var l=t[o-e]||0,c=r&&r[o]||0;a[o+1]=t[o]+256-(l+c>>>1)&255}return a}function E1(t,e,r){var n=t.length,a=[];a[0]=4;for(var o=0;o<n;o+=1){var l=TU(t[o-e]||0,r&&r[o]||0,r&&r[o-e]||0);a[o+1]=t[o]-l+256&255}return a}function TU(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),a=Math.abs(t-r),o=Math.abs(t+e-r-r);return n<=a&&n<=o?t:a<=o?e:r}function PU(t){var e=t.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function F0(t,e,r){var n=e*r,a=Math.floor(n/8),o=16-(n-8*a+r),l=(1<<r)-1;return CB(t,a)>>o&l}function _1(t,e,r,n){var a=r*n,o=Math.floor(a/8),l=16-(a-8*o+n),c=(1<<n)-1,A=(e&c)<<l;(function(u,i,d){if(i+1<u.byteLength)u.setUint16(i,d,!1);else{var h=d>>8&255;u.setUint8(i,h)}})(t,o,CB(t,o)&~(c<<l)&65535|A)}function CB(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function OU(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],o=a>>7,l=1<<1+(7&a);t[e++],t[e++];var c=null,A=null;o&&(c=e,A=l,e+=3*l);var u=!0,i=[],d=0,h=null,f=0,w=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,w=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((U=t[e++])>=0))throw Error("Invalid block size");if(U===0)break;e+=U}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var j=t[e++];d=t[e++]|t[e++]<<8,h=t[e++],1&j||(h=null),f=j>>2&7,e++;break;case 254:for(;;){if(!((U=t[e++])>=0))throw Error("Invalid block size");if(U===0)break;e+=U}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var B=t[e++]|t[e++]<<8,p=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,C=t[e++]|t[e++]<<8,S=t[e++],E=S>>6&1,I=1<<1+(7&S),H=c,M=A,D=!1;S>>7&&(D=!0,H=e,M=I,e+=3*I);var K=e;for(e++;;){var U;if(!((U=t[e++])>=0))throw Error("Invalid block size");if(U===0)break;e+=U}i.push({x:B,y:p,width:x,height:C,has_local_palette:D,palette_offset:H,palette_size:M,data_offset:K,data_length:e-K,transparent_index:h,interlaced:!!E,delay:d,disposal:f});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return i.length},this.loopCount=function(){return w},this.frameInfo=function(F){if(F<0||F>=i.length)throw new Error("Frame index out of range.");return i[F]},this.decodeAndBlitFrameBGRA=function(F,k){var T=this.frameInfo(F),P=T.width*T.height,$=new Uint8Array(P);F1(t,T.data_offset,$,P);var ee=T.palette_offset,V=T.transparent_index;V===null&&(V=256);var W=T.width,te=r-W,oe=W,O=4*(T.y*r+T.x),z=4*((T.y+T.height)*r+T.x),ne=O,Z=4*te;T.interlaced===!0&&(Z+=4*r*7);for(var q=8,Ae=0,ve=$.length;Ae<ve;++Ae){var be=$[Ae];if(oe===0&&(oe=W,(ne+=Z)>=z&&(Z=4*te+4*r*(q-1),ne=O+(W+te)*(q<<1),q>>=1)),be===V)ne+=4;else{var Ne=t[ee+3*be],Te=t[ee+3*be+1],De=t[ee+3*be+2];k[ne++]=De,k[ne++]=Te,k[ne++]=Ne,k[ne++]=255}--oe}},this.decodeAndBlitFrameRGBA=function(F,k){var T=this.frameInfo(F),P=T.width*T.height,$=new Uint8Array(P);F1(t,T.data_offset,$,P);var ee=T.palette_offset,V=T.transparent_index;V===null&&(V=256);var W=T.width,te=r-W,oe=W,O=4*(T.y*r+T.x),z=4*((T.y+T.height)*r+T.x),ne=O,Z=4*te;T.interlaced===!0&&(Z+=4*r*7);for(var q=8,Ae=0,ve=$.length;Ae<ve;++Ae){var be=$[Ae];if(oe===0&&(oe=W,(ne+=Z)>=z&&(Z=4*te+4*r*(q-1),ne=O+(W+te)*(q<<1),q>>=1)),be===V)ne+=4;else{var Ne=t[ee+3*be],Te=t[ee+3*be+1],De=t[ee+3*be+2];k[ne++]=Ne,k[ne++]=Te,k[ne++]=De,k[ne++]=255}--oe}}}function F1(t,e,r,n){for(var a=t[e++],o=1<<a,l=o+1,c=l+1,A=a+1,u=(1<<A)-1,i=0,d=0,h=0,f=t[e++],w=new Int32Array(4096),j=null;;){for(;i<16&&f!==0;)d|=t[e++]<<i,i+=8,f===1?f=t[e++]:--f;if(i<A)break;var B=d&u;if(d>>=A,i-=A,B!==o){if(B===l)break;for(var p=B<c?B:j,x=0,C=p;C>o;)C=w[C]>>8,++x;var S=C;if(h+x+(p!==B?1:0)>n)return void Ir.log("Warning, gif stream longer than expected.");r[h++]=S;var E=h+=x;for(p!==B&&(r[h++]=S),C=p;x--;)C=w[C],r[--E]=255&C,C>>=8;j!==null&&c<4096&&(w[c++]=j<<8|S,c>=u+1&&A<12&&(++A,u=u<<1|1)),j=B}else c=l+1,u=(1<<(A=a+1))-1,j=null}return h!==n&&Ir.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function U0(t){var e,r,n,a,o,l=Math.floor,c=new Array(64),A=new Array(64),u=new Array(64),i=new Array(64),d=new Array(65535),h=new Array(65535),f=new Array(64),w=new Array(64),j=[],B=0,p=7,x=new Array(64),C=new Array(64),S=new Array(64),E=new Array(256),I=new Array(2048),H=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],M=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],U=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],T=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],P=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function $(O,z){for(var ne=0,Z=0,q=new Array,Ae=1;Ae<=16;Ae++){for(var ve=1;ve<=O[Ae];ve++)q[z[Z]]=[],q[z[Z]][0]=ne,q[z[Z]][1]=Ae,Z++,ne++;ne*=2}return q}function ee(O){for(var z=O[0],ne=O[1]-1;ne>=0;)z&1<<ne&&(B|=1<<p),ne--,--p<0&&(B==255?(V(255),V(0)):V(B),p=7,B=0)}function V(O){j.push(O)}function W(O){V(O>>8&255),V(255&O)}function te(O,z,ne,Z,q){for(var Ae,ve=q[0],be=q[240],Ne=function(ze,gt){var et,It,vt,Tt,Se,pe,Ie,ke,Ye,Pe,Xe=0;for(Ye=0;Ye<8;++Ye){et=ze[Xe],It=ze[Xe+1],vt=ze[Xe+2],Tt=ze[Xe+3],Se=ze[Xe+4],pe=ze[Xe+5],Ie=ze[Xe+6];var Ct=et+(ke=ze[Xe+7]),bt=et-ke,ft=It+Ie,Me=It-Ie,ct=vt+pe,nt=vt-pe,ut=Tt+Se,at=Tt-Se,Le=Ct+ut,lt=Ct-ut,tt=ft+ct,Ve=ft-ct;ze[Xe]=Le+tt,ze[Xe+4]=Le-tt;var it=.707106781*(Ve+lt);ze[Xe+2]=lt+it,ze[Xe+6]=lt-it;var jt=.382683433*((Le=at+nt)-(Ve=Me+bt)),Pt=.5411961*Le+jt,nr=1.306562965*Ve+jt,sr=.707106781*(tt=nt+Me),Qt=bt+sr,Xr=bt-sr;ze[Xe+5]=Xr+Pt,ze[Xe+3]=Xr-Pt,ze[Xe+1]=Qt+nr,ze[Xe+7]=Qt-nr,Xe+=8}for(Xe=0,Ye=0;Ye<8;++Ye){et=ze[Xe],It=ze[Xe+8],vt=ze[Xe+16],Tt=ze[Xe+24],Se=ze[Xe+32],pe=ze[Xe+40],Ie=ze[Xe+48];var Kn=et+(ke=ze[Xe+56]),Kr=et-ke,Ln=It+Ie,st=It-Ie,Lr=vt+pe,Er=vt-pe,an=Tt+Se,kn=Tt-Se,as=Kn+an,Xn=Kn-an,Gn=Ln+Lr,os=Ln-Lr;ze[Xe]=as+Gn,ze[Xe+32]=as-Gn;var Ts=.707106781*(os+Xn);ze[Xe+16]=Xn+Ts,ze[Xe+48]=Xn-Ts;var Mo=.382683433*((as=kn+Er)-(os=st+Kr)),Ps=.5411961*as+Mo,mo=1.306562965*os+Mo,Ni=.707106781*(Gn=Er+st),Si=Kr+Ni,Ei=Kr-Ni;ze[Xe+40]=Ei+Ps,ze[Xe+24]=Ei-Ps,ze[Xe+8]=Si+mo,ze[Xe+56]=Si-mo,Xe++}for(Ye=0;Ye<64;++Ye)Pe=ze[Ye]*gt[Ye],f[Ye]=Pe>0?Pe+.5|0:Pe-.5|0;return f}(O,z),Te=0;Te<64;++Te)w[H[Te]]=Ne[Te];var De=w[0]-ne;ne=w[0],De==0?ee(Z[0]):(ee(Z[h[Ae=32767+De]]),ee(d[Ae]));for(var We=63;We>0&&w[We]==0;)We--;if(We==0)return ee(ve),ne;for(var _e,de=1;de<=We;){for(var Ut=de;w[de]==0&&de<=We;)++de;var dt=de-Ut;if(dt>=16){_e=dt>>4;for(var ot=1;ot<=_e;++ot)ee(be);dt&=15}Ae=32767+w[de],ee(q[(dt<<4)+h[Ae]]),ee(d[Ae]),de++}return We!=63&&ee(ve),ne}function oe(O){O=Math.min(Math.max(O,1),100),o!=O&&(function(z){for(var ne=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Z=0;Z<64;Z++){var q=l((ne[Z]*z+50)/100);q=Math.min(Math.max(q,1),255),c[H[Z]]=q}for(var Ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ve=0;ve<64;ve++){var be=l((Ae[ve]*z+50)/100);be=Math.min(Math.max(be,1),255),A[H[ve]]=be}for(var Ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Te=0,De=0;De<8;De++)for(var We=0;We<8;We++)u[Te]=1/(c[H[Te]]*Ne[De]*Ne[We]*8),i[Te]=1/(A[H[Te]]*Ne[De]*Ne[We]*8),Te++}(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),o=O)}this.encode=function(O,z){z&&oe(z),j=new Array,B=0,p=7,W(65496),W(65504),W(16),V(74),V(70),V(73),V(70),V(0),V(1),V(1),V(0),W(1),W(1),V(0),V(0),function(){W(65499),W(132),V(0);for(var It=0;It<64;It++)V(c[It]);V(1);for(var vt=0;vt<64;vt++)V(A[vt])}(),function(It,vt){W(65472),W(17),V(8),W(vt),W(It),V(3),V(1),V(17),V(0),V(2),V(17),V(1),V(3),V(17),V(1)}(O.width,O.height),function(){W(65476),W(418),V(0);for(var It=0;It<16;It++)V(M[It+1]);for(var vt=0;vt<=11;vt++)V(D[vt]);V(16);for(var Tt=0;Tt<16;Tt++)V(K[Tt+1]);for(var Se=0;Se<=161;Se++)V(U[Se]);V(1);for(var pe=0;pe<16;pe++)V(F[pe+1]);for(var Ie=0;Ie<=11;Ie++)V(k[Ie]);V(17);for(var ke=0;ke<16;ke++)V(T[ke+1]);for(var Ye=0;Ye<=161;Ye++)V(P[Ye])}(),W(65498),W(12),V(3),V(1),V(0),V(2),V(17),V(3),V(17),V(0),V(63),V(0);var ne=0,Z=0,q=0;B=0,p=7,this.encode.displayName="_encode_";for(var Ae,ve,be,Ne,Te,De,We,_e,de,Ut=O.data,dt=O.width,ot=O.height,ze=4*dt,gt=0;gt<ot;){for(Ae=0;Ae<ze;){for(Te=ze*gt+Ae,We=-1,_e=0,de=0;de<64;de++)De=Te+(_e=de>>3)*ze+(We=4*(7&de)),gt+_e>=ot&&(De-=ze*(gt+1+_e-ot)),Ae+We>=ze&&(De-=Ae+We-ze+4),ve=Ut[De++],be=Ut[De++],Ne=Ut[De++],x[de]=(I[ve]+I[be+256|0]+I[Ne+512|0]>>16)-128,C[de]=(I[ve+768|0]+I[be+1024|0]+I[Ne+1280|0]>>16)-128,S[de]=(I[ve+1280|0]+I[be+1536|0]+I[Ne+1792|0]>>16)-128;ne=te(x,u,ne,e,n),Z=te(C,i,Z,r,a),q=te(S,i,q,r,a),Ae+=32}gt+=8}if(p>=0){var et=[];et[1]=p+1,et[0]=(1<<p+1)-1,ee(et)}return W(65497),new Uint8Array(j)},t=t||50,function(){for(var O=String.fromCharCode,z=0;z<256;z++)E[z]=O(z)}(),e=$(M,D),r=$(F,k),n=$(K,U),a=$(T,P),function(){for(var O=1,z=2,ne=1;ne<=15;ne++){for(var Z=O;Z<z;Z++)h[32767+Z]=ne,d[32767+Z]=[],d[32767+Z][1]=ne,d[32767+Z][0]=Z;for(var q=-(z-1);q<=-O;q++)h[32767+q]=ne,d[32767+q]=[],d[32767+q][1]=ne,d[32767+q][0]=z-1+q;O<<=1,z<<=1}}(),function(){for(var O=0;O<256;O++)I[O]=19595*O,I[O+256|0]=38470*O,I[O+512|0]=7471*O+32768,I[O+768|0]=-11059*O,I[O+1024|0]=-21709*O,I[O+1280|0]=32768*O+8421375,I[O+1536|0]=-27439*O,I[O+1792|0]=-5329*O}(),oe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function to(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function U1(t){function e(D){if(!D)throw Error("assert :P")}function r(D,K,U){for(var F=0;4>F;F++)if(D[K+F]!=U.charCodeAt(F))return!0;return!1}function n(D,K,U,F,k){for(var T=0;T<k;T++)D[K+T]=U[F+T]}function a(D,K,U,F){for(var k=0;k<F;k++)D[K+k]=U}function o(D){return new Int32Array(D)}function l(D,K){for(var U=[],F=0;F<D;F++)U.push(new K);return U}function c(D,K){var U=[];return function F(k,T,P){for(var $=P[T],ee=0;ee<$&&(k.push(P.length>T+1?[]:new K),!(P.length<T+1));ee++)F(k[ee],T+1,P)}(U,0,D),U}var A=function(){var D=this;function K(g,N){for(var Q=1<<N-1>>>0;g&Q;)Q>>>=1;return Q?(g&Q-1)+Q:g}function U(g,N,Q,R,X){e(!(R%Q));do g[N+(R-=Q)]=X;while(0<R)}function F(g,N,Q,R,X){if(e(2328>=X),512>=X)var se=o(512);else if((se=o(X))==null)return 0;return function(ae,ie,le,fe,ye,Qe){var he,je,Be=ie,Re=1<<le,Ue=o(16),Ke=o(16);for(e(ye!=0),e(fe!=null),e(ae!=null),e(0<le),je=0;je<ye;++je){if(15<fe[je])return 0;++Ue[fe[je]]}if(Ue[0]==ye)return 0;for(Ke[1]=0,he=1;15>he;++he){if(Ue[he]>1<<he)return 0;Ke[he+1]=Ke[he]+Ue[he]}for(je=0;je<ye;++je)he=fe[je],0<fe[je]&&(Qe[Ke[he]++]=je);if(Ke[15]==1)return(fe=new k).g=0,fe.value=Qe[0],U(ae,Be,1,Re,fe),Re;var $e,Ze=-1,Je=Re-1,Ot=0,Bt=1,qt=1,Ft=1<<le;for(je=0,he=1,ye=2;he<=le;++he,ye<<=1){if(Bt+=qt<<=1,0>(qt-=Ue[he]))return 0;for(;0<Ue[he];--Ue[he])(fe=new k).g=he,fe.value=Qe[je++],U(ae,Be+Ot,ye,Ft,fe),Ot=K(Ot,he)}for(he=le+1,ye=2;15>=he;++he,ye<<=1){if(Bt+=qt<<=1,0>(qt-=Ue[he]))return 0;for(;0<Ue[he];--Ue[he]){if(fe=new k,(Ot&Je)!=Ze){for(Be+=Ft,$e=1<<(Ze=he)-le;15>Ze&&!(0>=($e-=Ue[Ze]));)++Ze,$e<<=1;Re+=Ft=1<<($e=Ze-le),ae[ie+(Ze=Ot&Je)].g=$e+le,ae[ie+Ze].value=Be-ie-Ze}fe.g=he-le,fe.value=Qe[je++],U(ae,Be+(Ot>>le),ye,Ft,fe),Ot=K(Ot,he)}}return Bt!=2*Ke[15]-1?0:Re}(g,N,Q,R,X,se)}function k(){this.value=this.g=0}function T(){this.value=this.g=0}function P(){this.G=l(5,k),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(ca,T)}function $(g,N,Q,R){e(g!=null),e(N!=null),e(2147483648>R),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=N,g.pa=Q,g.Jd=N,g.Yc=Q+R,g.Zc=4<=R?Q+R-4+1:Q,ve(g)}function ee(g,N){for(var Q=0;0<N--;)Q|=Ne(g,128)<<N;return Q}function V(g,N){var Q=ee(g,N);return be(g)?-Q:Q}function W(g,N,Q,R){var X,se=0;for(e(g!=null),e(N!=null),e(4294967288>R),g.Sb=R,g.Ra=0,g.u=0,g.h=0,4<R&&(R=4),X=0;X<R;++X)se+=N[Q+X]<<8*X;g.Ra=se,g.bb=R,g.oa=N,g.pa=Q}function te(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<Ja-8>>>0,++g.bb,g.u-=8;Z(g)&&(g.h=1,g.u=0)}function oe(g,N){if(e(0<=N),!g.h&&N<=ls){var Q=ne(g)&tr[N];return g.u+=N,te(g),Q}return g.h=1,g.u=0}function O(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ne(g){return g.Ra>>>(g.u&Ja-1)>>>0}function Z(g){return e(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>Ja}function q(g,N){g.u=N,g.h=Z(g)}function Ae(g){g.u>=Ua&&(e(g.u>=Ua),te(g))}function ve(g){e(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(e(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function be(g){return ee(g,1)}function Ne(g,N){var Q=g.Ca;0>g.b&&ve(g);var R=g.b,X=Q*N>>>8,se=(g.I>>>R>X)+0;for(se?(Q-=X,g.I-=X+1<<R>>>0):Q=X+1,R=Q,X=0;256<=R;)X+=8,R>>=8;return R=7^X+Xa[R],g.b-=R,g.Ca=(Q<<R)-1,se}function Te(g,N,Q){g[N+0]=Q>>24&255,g[N+1]=Q>>16&255,g[N+2]=Q>>8&255,g[N+3]=255&Q}function De(g,N){return g[N+0]|g[N+1]<<8}function We(g,N){return De(g,N)|g[N+2]<<16}function _e(g,N){return De(g,N)|De(g,N+2)<<16}function de(g,N){var Q=1<<N;return e(g!=null),e(0<N),g.X=o(Q),g.X==null?0:(g.Mb=32-N,g.Xa=N,1)}function Ut(g,N){e(g!=null),e(N!=null),e(g.Xa==N.Xa),n(N.X,0,g.X,0,1<<N.Xa)}function dt(){this.X=[],this.Xa=this.Mb=0}function ot(g,N,Q,R){e(Q!=null),e(R!=null);var X=Q[0],se=R[0];return X==0&&(X=(g*se+N/2)/N),se==0&&(se=(N*X+g/2)/g),0>=X||0>=se?0:(Q[0]=X,R[0]=se,1)}function ze(g,N){return g+(1<<N)-1>>>N}function gt(g,N){return((4278255360&g)+(4278255360&N)>>>0&4278255360)+((16711935&g)+(16711935&N)>>>0&16711935)>>>0}function et(g,N){D[N]=function(Q,R,X,se,ae,ie,le){var fe;for(fe=0;fe<ae;++fe){var ye=D[g](ie[le+fe-1],X,se+fe);ie[le+fe]=gt(Q[R+fe],ye)}}}function It(){this.ud=this.hd=this.jd=0}function vt(g,N){return((4278124286&(g^N))>>>1)+(g&N)>>>0}function Tt(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function Se(g,N){return Tt(g+(g-N+.5>>1))}function pe(g,N,Q){return Math.abs(N-Q)-Math.abs(g-Q)}function Ie(g,N,Q,R,X,se,ae){for(R=se[ae-1],Q=0;Q<X;++Q)se[ae+Q]=R=gt(g[N+Q],R)}function ke(g,N,Q,R,X){var se;for(se=0;se<Q;++se){var ae=g[N+se],ie=ae>>8&255,le=16711935&(le=(le=16711935&ae)+((ie<<16)+ie));R[X+se]=(4278255360&ae)+le>>>0}}function Ye(g,N){N.jd=255&g,N.hd=g>>8&255,N.ud=g>>16&255}function Pe(g,N,Q,R,X,se){var ae;for(ae=0;ae<R;++ae){var ie=N[Q+ae],le=ie>>>8,fe=ie,ye=255&(ye=(ye=ie>>>16)+((g.jd<<24>>24)*(le<<24>>24)>>>5));fe=255&(fe=(fe+=(g.hd<<24>>24)*(le<<24>>24)>>>5)+((g.ud<<24>>24)*(ye<<24>>24)>>>5)),X[se+ae]=(4278255360&ie)+(ye<<16)+fe}}function Xe(g,N,Q,R,X){D[N]=function(se,ae,ie,le,fe,ye,Qe,he,je){for(le=Qe;le<he;++le)for(Qe=0;Qe<je;++Qe)fe[ye++]=X(ie[R(se[ae++])])},D[g]=function(se,ae,ie,le,fe,ye,Qe){var he=8>>se.b,je=se.Ea,Be=se.K[0],Re=se.w;if(8>he)for(se=(1<<se.b)-1,Re=(1<<he)-1;ae<ie;++ae){var Ue,Ke=0;for(Ue=0;Ue<je;++Ue)Ue&se||(Ke=R(le[fe++])),ye[Qe++]=X(Be[Ke&Re]),Ke>>=he}else D["VP8LMapColor"+Q](le,fe,Be,Re,ye,Qe,ae,ie,je)}}function Ct(g,N,Q,R,X){for(Q=N+Q;N<Q;){var se=g[N++];R[X++]=se>>16&255,R[X++]=se>>8&255,R[X++]=255&se}}function bt(g,N,Q,R,X){for(Q=N+Q;N<Q;){var se=g[N++];R[X++]=se>>16&255,R[X++]=se>>8&255,R[X++]=255&se,R[X++]=se>>24&255}}function ft(g,N,Q,R,X){for(Q=N+Q;N<Q;){var se=(ae=g[N++])>>16&240|ae>>12&15,ae=240&ae|ae>>28&15;R[X++]=se,R[X++]=ae}}function Me(g,N,Q,R,X){for(Q=N+Q;N<Q;){var se=(ae=g[N++])>>16&248|ae>>13&7,ae=ae>>5&224|ae>>3&31;R[X++]=se,R[X++]=ae}}function ct(g,N,Q,R,X){for(Q=N+Q;N<Q;){var se=g[N++];R[X++]=255&se,R[X++]=se>>8&255,R[X++]=se>>16&255}}function nt(g,N,Q,R,X,se){if(se==0)for(Q=N+Q;N<Q;)Te(R,((se=g[N++])[0]>>24|se[1]>>8&65280|se[2]<<8&16711680|se[3]<<24)>>>0),X+=32;else n(R,X,g,N,Q)}function ut(g,N){D[N][0]=D[g+"0"],D[N][1]=D[g+"1"],D[N][2]=D[g+"2"],D[N][3]=D[g+"3"],D[N][4]=D[g+"4"],D[N][5]=D[g+"5"],D[N][6]=D[g+"6"],D[N][7]=D[g+"7"],D[N][8]=D[g+"8"],D[N][9]=D[g+"9"],D[N][10]=D[g+"10"],D[N][11]=D[g+"11"],D[N][12]=D[g+"12"],D[N][13]=D[g+"13"],D[N][14]=D[g+"0"],D[N][15]=D[g+"0"]}function at(g){return g==Uu||g==Qu||g==Xl||g==Gi}function Le(){this.eb=[],this.size=this.A=this.fb=0}function lt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function tt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Le,this.f.kb=new lt,this.sd=null}function Ve(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function it(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function jt(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function Pt(g,N){var Q=g.T,R=N.ba.f.RGBA,X=R.eb,se=R.fb+g.ka*R.A,ae=$s[N.ba.S],ie=g.y,le=g.O,fe=g.f,ye=g.N,Qe=g.ea,he=g.W,je=N.cc,Be=N.dc,Re=N.Mc,Ue=N.Nc,Ke=g.ka,$e=g.ka+g.T,Ze=g.U,Je=Ze+1>>1;for(Ke==0?ae(ie,le,null,null,fe,ye,Qe,he,fe,ye,Qe,he,X,se,null,null,Ze):(ae(N.ec,N.fc,ie,le,je,Be,Re,Ue,fe,ye,Qe,he,X,se-R.A,X,se,Ze),++Q);Ke+2<$e;Ke+=2)je=fe,Be=ye,Re=Qe,Ue=he,ye+=g.Rc,he+=g.Rc,se+=2*R.A,ae(ie,(le+=2*g.fa)-g.fa,ie,le,je,Be,Re,Ue,fe,ye,Qe,he,X,se-R.A,X,se,Ze);return le+=g.fa,g.j+$e<g.o?(n(N.ec,N.fc,ie,le,Ze),n(N.cc,N.dc,fe,ye,Je),n(N.Mc,N.Nc,Qe,he,Je),Q--):1&$e||ae(ie,le,null,null,fe,ye,Qe,he,fe,ye,Qe,he,X,se+R.A,null,null,Ze),Q}function nr(g,N,Q){var R=g.F,X=[g.J];if(R!=null){var se=g.U,ae=N.ba.S,ie=ae==Jl||ae==Xl;N=N.ba.f.RGBA;var le=[0],fe=g.ka;le[0]=g.T,g.Kb&&(fe==0?--le[0]:(--fe,X[0]-=g.width),g.j+g.ka+g.T==g.o&&(le[0]=g.o-g.j-fe));var ye=N.eb;fe=N.fb+fe*N.A,g=Fu(R,X[0],g.width,se,le,ye,fe+(ie?0:3),N.A),e(Q==le),g&&at(ae)&&Mi(ye,fe,ie,se,le,N.A)}return 0}function sr(g){var N=g.ma,Q=N.ba.S,R=11>Q,X=Q==zl||Q==Wl||Q==Jl||Q==Ki||Q==12||at(Q);if(N.memory=null,N.Ib=null,N.Jb=null,N.Nd=null,!Zr(N.Oa,g,X?11:12))return 0;if(X&&at(Q)&&Ml(),g.da)alert("todo:use_scaling");else{if(R){if(N.Ib=jt,g.Kb){if(Q=g.U+1>>1,N.memory=o(g.U+2*Q),N.memory==null)return 0;N.ec=N.memory,N.fc=0,N.cc=N.ec,N.dc=N.fc+g.U,N.Mc=N.cc,N.Nc=N.dc+Q,N.Ib=Pt,Ml()}}else alert("todo:EmitYUV");X&&(N.Jb=nr,R&&Hs())}if(R&&!yf){for(g=0;256>g;++g)ap[g]=89858*(g-128)+Zl>>ql,Ap[g]=-22014*(g-128)+Zl,ip[g]=-45773*(g-128),op[g]=113618*(g-128)+Zl>>ql;for(g=Bo;g<ku;++g)N=76283*(g-16)+Zl>>ql,lp[g-Bo]=br(N,255),cp[g-Bo]=br(N+8>>4,15);yf=1}return 1}function Qt(g){var N=g.ma,Q=g.U,R=g.T;return e(!(1&g.ka)),0>=Q||0>=R?0:(Q=N.Ib(g,N),N.Jb!=null&&N.Jb(g,N,Q),N.Dc+=Q,1)}function Xr(g){g.ma.memory=null}function Kn(g,N,Q,R){return oe(g,8)!=47?0:(N[0]=oe(g,14)+1,Q[0]=oe(g,14)+1,R[0]=oe(g,1),oe(g,3)!=0?0:!g.h)}function Kr(g,N){if(4>g)return g+1;var Q=g-2>>1;return(2+(1&g)<<Q)+oe(N,Q)+1}function Ln(g,N){return 120<N?N-120:1<=(Q=((Q=$m[N-1])>>4)*g+(8-(15&Q)))?Q:1;var Q}function st(g,N,Q){var R=ne(Q),X=g[N+=255&R].g-8;return 0<X&&(q(Q,Q.u+8),R=ne(Q),N+=g[N].value,N+=R&(1<<X)-1),q(Q,Q.u+g[N].g),g[N].value}function Lr(g,N,Q){return Q.g+=g.g,Q.value+=g.value<<N>>>0,e(8>=Q.g),g.g}function Er(g,N,Q){var R=g.xc;return e((N=R==0?0:g.vc[g.md*(Q>>R)+(N>>R)])<g.Wb),g.Ya[N]}function an(g,N,Q,R){var X=g.ab,se=g.c*N,ae=g.C;N=ae+N;var ie=Q,le=R;for(R=g.Ta,Q=g.Ua;0<X--;){var fe=g.gc[X],ye=ae,Qe=N,he=ie,je=le,Be=(le=R,ie=Q,fe.Ea);switch(e(ye<Qe),e(Qe<=fe.nc),fe.hc){case 2:Gr(he,je,(Qe-ye)*Be,le,ie);break;case 0:var Re=ye,Ue=Qe,Ke=le,$e=ie,Ze=(Ft=fe).Ea;Re==0&&(wo(he,je,null,null,1,Ke,$e),Ie(he,je+1,0,0,Ze-1,Ke,$e+1),je+=Ze,$e+=Ze,++Re);for(var Je=1<<Ft.b,Ot=Je-1,Bt=ze(Ze,Ft.b),qt=Ft.K,Ft=Ft.w+(Re>>Ft.b)*Bt;Re<Ue;){var ar=qt,gn=Ft,Jt=1;for(ni(he,je,Ke,$e-Ze,1,Ke,$e);Jt<Ze;){var Oe=(Jt&~Ot)+Je;Oe>Ze&&(Oe=Ze),(0,Ms[ar[gn++]>>8&15])(he,je+ +Jt,Ke,$e+Jt-Ze,Oe-Jt,Ke,$e+Jt),Jt=Oe}je+=Ze,$e+=Ze,++Re&Ot||(Ft+=Bt)}Qe!=fe.nc&&n(le,ie-Be,le,ie+(Qe-ye-1)*Be,Be);break;case 1:for(Be=he,Ue=je,Ze=(he=fe.Ea)-($e=he&~(Ke=(je=1<<fe.b)-1)),Re=ze(he,fe.b),Je=fe.K,fe=fe.w+(ye>>fe.b)*Re;ye<Qe;){for(Ot=Je,Bt=fe,qt=new It,Ft=Ue+$e,ar=Ue+he;Ue<Ft;)Ye(Ot[Bt++],qt),Di(qt,Be,Ue,je,le,ie),Ue+=je,ie+=je;Ue<ar&&(Ye(Ot[Bt++],qt),Di(qt,Be,Ue,Ze,le,ie),Ue+=Ze,ie+=Ze),++ye&Ke||(fe+=Re)}break;case 3:if(he==le&&je==ie&&0<fe.b){for(Ue=le,he=Be=ie+(Qe-ye)*Be-($e=(Qe-ye)*ze(fe.Ea,fe.b)),je=le,Ke=ie,Re=[],$e=(Ze=$e)-1;0<=$e;--$e)Re[$e]=je[Ke+$e];for($e=Ze-1;0<=$e;--$e)Ue[he+$e]=Re[$e];qn(fe,ye,Qe,le,Be,le,ie)}else qn(fe,ye,Qe,he,je,le,ie)}ie=R,le=Q}le!=Q&&n(R,Q,ie,le,se)}function kn(g,N){var Q=g.V,R=g.Ba+g.c*g.C,X=N-g.C;if(e(N<=g.l.o),e(16>=X),0<X){var se=g.l,ae=g.Ta,ie=g.Ua,le=se.width;if(an(g,X,Q,R),X=ie=[ie],e((Q=g.C)<(R=N)),e(se.v<se.va),R>se.o&&(R=se.o),Q<se.j){var fe=se.j-Q;Q=se.j,X[0]+=fe*le}if(Q>=R?Q=0:(X[0]+=4*se.v,se.ka=Q-se.j,se.U=se.va-se.v,se.T=R-Q,Q=1),Q){if(ie=ie[0],11>(Q=g.ca).S){var ye=Q.f.RGBA,Qe=(R=Q.S,X=se.U,se=se.T,fe=ye.eb,ye.A),he=se;for(ye=ye.fb+g.Ma*ye.A;0<he--;){var je=ae,Be=ie,Re=X,Ue=fe,Ke=ye;switch(R){case $l:Ri(je,Be,Re,Ue,Ke);break;case zl:Qa(je,Be,Re,Ue,Ke);break;case Uu:Qa(je,Be,Re,Ue,Ke),Mi(Ue,Ke,0,Re,1,0);break;case oi:ua(je,Be,Re,Ue,Ke);break;case Wl:nt(je,Be,Re,Ue,Ke,1);break;case Qu:nt(je,Be,Re,Ue,Ke,1),Mi(Ue,Ke,0,Re,1,0);break;case Jl:nt(je,Be,Re,Ue,Ke,0);break;case Xl:nt(je,Be,Re,Ue,Ke,0),Mi(Ue,Ke,1,Re,1,0);break;case Ki:Ya(je,Be,Re,Ue,Ke);break;case Gi:Ya(je,Be,Re,Ue,Ke),_u(Ue,Ke,Re,1,0);break;case ff:bo(je,Be,Re,Ue,Ke);break;default:e(0)}ie+=le,ye+=Qe}g.Ma+=se}else alert("todo:EmitRescaledRowsYUVA");e(g.Ma<=Q.height)}}g.C=N,e(g.C<=g.i)}function as(g){var N;if(0<g.ua)return 0;for(N=0;N<g.Wb;++N){var Q=g.Ya[N].G,R=g.Ya[N].H;if(0<Q[1][R[1]+0].g||0<Q[2][R[2]+0].g||0<Q[3][R[3]+0].g)return 0}return 1}function Xn(g,N,Q,R,X,se){if(g.Z!=0){var ae=g.qd,ie=g.rd;for(e(qa[g.Z]!=null);N<Q;++N)qa[g.Z](ae,ie,R,X,R,X,se),ae=R,ie=X,X+=se;g.qd=ae,g.rd=ie}}function Gn(g,N){var Q=g.l.ma,R=Q.Z==0||Q.Z==1?g.l.j:g.C;if(R=g.C<R?R:g.C,e(N<=g.l.o),N>R){var X=g.l.width,se=Q.ca,ae=Q.tb+X*R,ie=g.V,le=g.Ba+g.c*R,fe=g.gc;e(g.ab==1),e(fe[0].hc==3),On(fe[0],R,N,ie,le,se,ae),Xn(Q,R,N,se,ae,X)}g.C=g.Ma=N}function os(g,N,Q,R,X,se,ae){var ie=g.$/R,le=g.$%R,fe=g.m,ye=g.s,Qe=Q+g.$,he=Qe;X=Q+R*X;var je=Q+R*se,Be=280+ye.ua,Re=g.Pb?ie:16777216,Ue=0<ye.ua?ye.Wa:null,Ke=ye.wc,$e=Qe<je?Er(ye,le,ie):null;e(g.C<se),e(je<=X);var Ze=!1;e:for(;;){for(;Ze||Qe<je;){var Je=0;if(ie>=Re){var Ot=Qe-Q;e((Re=g).Pb),Re.wd=Re.m,Re.xd=Ot,0<Re.s.ua&&Ut(Re.s.Wa,Re.s.vb),Re=ie+Wm}if(le&Ke||($e=Er(ye,le,ie)),e($e!=null),$e.Qb&&(N[Qe]=$e.qb,Ze=!0),!Ze)if(Ae(fe),$e.jc){Je=fe,Ot=N;var Bt=Qe,qt=$e.pd[ne(Je)&ca-1];e($e.jc),256>qt.g?(q(Je,Je.u+qt.g),Ot[Bt]=qt.value,Je=0):(q(Je,Je.u+qt.g-256),e(256<=qt.value),Je=qt.value),Je==0&&(Ze=!0)}else Je=st($e.G[0],$e.H[0],fe);if(fe.h)break;if(Ze||256>Je){if(!Ze)if($e.nd)N[Qe]=($e.qb|Je<<8)>>>0;else{if(Ae(fe),Ze=st($e.G[1],$e.H[1],fe),Ae(fe),Ot=st($e.G[2],$e.H[2],fe),Bt=st($e.G[3],$e.H[3],fe),fe.h)break;N[Qe]=(Bt<<24|Ze<<16|Je<<8|Ot)>>>0}if(Ze=!1,++Qe,++le>=R&&(le=0,++ie,ae!=null&&ie<=se&&!(ie%16)&&ae(g,ie),Ue!=null))for(;he<Qe;)Je=N[he++],Ue.X[(506832829*Je&4294967295)>>>Ue.Mb]=Je}else if(280>Je){if(Je=Kr(Je-256,fe),Ot=st($e.G[4],$e.H[4],fe),Ae(fe),Ot=Ln(R,Ot=Kr(Ot,fe)),fe.h)break;if(Qe-Q<Ot||X-Qe<Je)break e;for(Bt=0;Bt<Je;++Bt)N[Qe+Bt]=N[Qe+Bt-Ot];for(Qe+=Je,le+=Je;le>=R;)le-=R,++ie,ae!=null&&ie<=se&&!(ie%16)&&ae(g,ie);if(e(Qe<=X),le&Ke&&($e=Er(ye,le,ie)),Ue!=null)for(;he<Qe;)Je=N[he++],Ue.X[(506832829*Je&4294967295)>>>Ue.Mb]=Je}else{if(!(Je<Be))break e;for(Ze=Je-280,e(Ue!=null);he<Qe;)Je=N[he++],Ue.X[(506832829*Je&4294967295)>>>Ue.Mb]=Je;Je=Qe,e(!(Ze>>>(Ot=Ue).Xa)),N[Je]=Ot.X[Ze],Ze=!0}Ze||e(fe.h==Z(fe))}if(g.Pb&&fe.h&&Qe<X)e(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&Ut(g.s.vb,g.s.Wa);else{if(fe.h)break e;ae!=null&&ae(g,ie>se?se:ie),g.a=0,g.$=Qe-Q}return 1}return g.a=3,0}function Ts(g){e(g!=null),g.vc=null,g.yc=null,g.Ya=null;var N=g.Wa;N!=null&&(N.X=null),g.vb=null,e(g!=null)}function Mo(){var g=new Lt;return g==null?null:(g.a=0,g.xb=pf,ut("Predictor","VP8LPredictors"),ut("Predictor","VP8LPredictors_C"),ut("PredictorAdd","VP8LPredictorsAdd"),ut("PredictorAdd","VP8LPredictorsAdd_C"),Gr=ke,Di=Pe,Ri=Ct,Qa=bt,Ya=ft,bo=Me,ua=ct,D.VP8LMapColor32b=Pn,D.VP8LMapColor8b=Vr,g)}function Ps(g,N,Q,R,X){var se=1,ae=[g],ie=[N],le=R.m,fe=R.s,ye=null,Qe=0;e:for(;;){if(Q)for(;se&&oe(le,1);){var he=ae,je=ie,Be=R,Re=1,Ue=Be.m,Ke=Be.gc[Be.ab],$e=oe(Ue,2);if(Be.Oc&1<<$e)se=0;else{switch(Be.Oc|=1<<$e,Ke.hc=$e,Ke.Ea=he[0],Ke.nc=je[0],Ke.K=[null],++Be.ab,e(4>=Be.ab),$e){case 0:case 1:Ke.b=oe(Ue,3)+2,Re=Ps(ze(Ke.Ea,Ke.b),ze(Ke.nc,Ke.b),0,Be,Ke.K),Ke.K=Ke.K[0];break;case 3:var Ze,Je=oe(Ue,8)+1,Ot=16<Je?0:4<Je?1:2<Je?2:3;if(he[0]=ze(Ke.Ea,Ot),Ke.b=Ot,Ze=Re=Ps(Je,1,0,Be,Ke.K)){var Bt,qt=Je,Ft=Ke,ar=1<<(8>>Ft.b),gn=o(ar);if(gn==null)Ze=0;else{var Jt=Ft.K[0],Oe=Ft.w;for(gn[0]=Ft.K[0][0],Bt=1;Bt<1*qt;++Bt)gn[Bt]=gt(Jt[Oe+Bt],gn[Bt-1]);for(;Bt<4*ar;++Bt)gn[Bt]=0;Ft.K[0]=null,Ft.K[0]=gn,Ze=1}}Re=Ze;break;case 2:break;default:e(0)}se=Re}}if(ae=ae[0],ie=ie[0],se&&oe(le,1)&&!(se=1<=(Qe=oe(le,4))&&11>=Qe)){R.a=3;break e}var ht;if(ht=se)t:{var tn,Kt,Wt,Ur=R,Sn=ae,vn=ie,Qr=Qe,$n=Q,Zn=Ur.m,xn=Ur.s,Zt=[null],hr=1,kr=0,yr=zm[Qr];r:for(;;){if($n&&oe(Zn,1)){var En=oe(Zn,3)+2,fa=ze(Sn,En),Dr=ze(vn,En),cs=fa*Dr;if(!Ps(fa,Dr,0,Ur,Zt))break r;for(Zt=Zt[0],xn.xc=En,tn=0;tn<cs;++tn){var Br=Zt[tn]>>8&65535;Zt[tn]=Br,Br>=hr&&(hr=Br+1)}}if(Zn.h)break r;for(Kt=0;5>Kt;++Kt){var yn=hf[Kt];!Kt&&0<Qr&&(yn+=1<<Qr),kr<yn&&(kr=yn)}var Cs=l(hr*yr,k),es=hr,Ns=l(es,P);if(Ns==null)var Ss=null;else e(65536>=es),Ss=Ns;var us=o(kr);if(Ss==null||us==null||Cs==null){Ur.a=1;break r}var ds=Cs;for(tn=Wt=0;tn<hr;++tn){var _r=Ss[tn],Es=_r.G,ha=_r.H,Co=0,Za=1,dn=0;for(Kt=0;5>Kt;++Kt){yn=hf[Kt],Es[Kt]=ds,ha[Kt]=Wt,!Kt&&0<Qr&&(yn+=1<<Qr);s:{var tc,HA=yn,$i=Ur,zi=us,Bf=ds,dp=Wt,rc=0,La=$i.m,Tu=oe(La,1);if(a(zi,0,0,HA),Tu){var Cf=oe(La,1)+1,Nf=oe(La,1),Pu=oe(La,Nf==0?1:8);zi[Pu]=1,Cf==2&&(zi[Pu=oe(La,8)]=1);var MA=1}else{var nc=o(19),Sf=oe(La,4)+4;if(19<Sf){$i.a=3;var sc=0;break s}for(tc=0;tc<Sf;++tc)nc[Yl[tc]]=oe(La,3);var Ou=void 0,zn=void 0,ac=$i,fp=nc,oc=HA,Ef=zi,Du=0,No=ac.m,_f=8,Ff=l(128,k);n:for(;F(Ff,0,7,fp,19);){if(oe(No,1)){var hp=2+2*oe(No,3);if((Ou=2+oe(No,hp))>oc)break n}else Ou=oc;for(zn=0;zn<oc&&Ou--;){Ae(No);var Uf=Ff[0+(127&ne(No))];q(No,No.u+Uf.g);var ii=Uf.value;if(16>ii)Ef[zn++]=ii,ii!=0&&(_f=ii);else{var mp=ii==16,ic=ii-16,Qf=Gm[ic],_n=oe(No,Km[ic])+Qf;if(zn+_n>oc)break n;for(var KA=mp?_f:0;0<_n--;)Ef[zn++]=KA}}Du=1;break n}Du||(ac.a=3),MA=Du}(MA=MA&&!La.h)&&(rc=F(Bf,dp,8,zi,HA)),MA&&rc!=0?sc=rc:($i.a=3,sc=0)}if(sc==0)break r;if(Za&&Vm[Kt]==1&&(Za=ds[Wt].g==0),Co+=ds[Wt].g,Wt+=sc,3>=Kt){var GA,Ru=us[0];for(GA=1;GA<yn;++GA)us[GA]>Ru&&(Ru=us[GA]);dn+=Ru}}if(_r.nd=Za,_r.Qb=0,Za&&(_r.qb=(Es[3][ha[3]+0].value<<24|Es[1][ha[1]+0].value<<16|Es[2][ha[2]+0].value)>>>0,Co==0&&256>Es[0][ha[0]+0].value&&(_r.Qb=1,_r.qb+=Es[0][ha[0]+0].value<<8)),_r.jc=!_r.Qb&&6>dn,_r.jc){var VA,ma=_r;for(VA=0;VA<ca;++VA){var So=VA,Eo=ma.pd[So],Ac=ma.G[0][ma.H[0]+So];256<=Ac.value?(Eo.g=Ac.g+256,Eo.value=Ac.value):(Eo.g=0,Eo.value=0,So>>=Lr(Ac,8,Eo),So>>=Lr(ma.G[1][ma.H[1]+So],16,Eo),So>>=Lr(ma.G[2][ma.H[2]+So],0,Eo),Lr(ma.G[3][ma.H[3]+So],24,Eo))}}}xn.vc=Zt,xn.Wb=hr,xn.Ya=Ss,xn.yc=Cs,ht=1;break t}ht=0}if(!(se=ht)){R.a=3;break e}if(0<Qe){if(fe.ua=1<<Qe,!de(fe.Wa,Qe)){R.a=1,se=0;break e}}else fe.ua=0;var Hu=R,If=ae,pp=ie,Mu=Hu.s,Ku=Mu.xc;if(Hu.c=If,Hu.i=pp,Mu.md=ze(If,Ku),Mu.wc=Ku==0?-1:(1<<Ku)-1,Q){R.xb=tp;break e}if((ye=o(ae*ie))==null){R.a=1,se=0;break e}se=(se=os(R,ye,0,ae,ie,ie,null))&&!le.h;break e}return se?(X!=null?X[0]=ye:(e(ye==null),e(Q)),R.$=0,Q||Ts(fe)):Ts(fe),se}function mo(g,N){var Q=g.c*g.i,R=Q+N+16*N;return e(g.c<=N),g.V=o(R),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+Q+N,1)}function Ni(g,N){var Q=g.C,R=N-Q,X=g.V,se=g.Ba+g.c*Q;for(e(N<=g.l.o);0<R;){var ae=16<R?16:R,ie=g.l.ma,le=g.l.width,fe=le*ae,ye=ie.ca,Qe=ie.tb+le*Q,he=g.Ta,je=g.Ua;an(g,ae,X,se),lf(he,je,ye,Qe,fe),Xn(ie,Q,Q+ae,ye,Qe,le),R-=ae,X+=ae*g.c,Q+=ae}e(Q==N),g.C=g.Ma=N}function Si(){this.ub=this.yd=this.td=this.Rb=0}function Ei(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function du(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function UA(){this.Yb=function(){var g=[];return function N(Q,R,X){for(var se=X[R],ae=0;ae<se&&(Q.push(X.length>R+1?[]:0),!(X.length<R+1));ae++)N(Q[ae],R+1,X)}(g,0,[3,11]),g}()}function Ul(){this.jb=o(3),this.Wc=c([4,8],UA),this.Xc=c([4,17],UA)}function po(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function bs(){this.ld=this.La=this.dd=this.tc=0}function go(){this.Na=this.la=0}function QA(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ga(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ql(){this.uc=this.M=this.Nb=0,this.wa=Array(new bs),this.Y=0,this.ya=Array(new Ga),this.aa=0,this.l=new Sa}function Il(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Ko(){this.cb=this.a=0,this.sc="",this.m=new O,this.Od=new Si,this.Kc=new Ei,this.ed=new po,this.Qa=new du,this.Ic=this.$c=this.Aa=0,this.D=new Ql,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,O),this.ia=0,this.pb=l(4,QA),this.Pa=new Ul,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Il),this.Hd=0,this.rb=Array(new go),this.sb=0,this.wa=Array(new bs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ga),this.L=this.aa=0,this.gd=c([4,2],bs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Sa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function fu(){var g=new Ko;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,DA||(DA=Os)),g}function on(g,N,Q){return g.a==0&&(g.a=N,g.sc=Q,g.cb=0),0}function Ll(g,N,Q){return 3<=Q&&g[N+0]==157&&g[N+1]==1&&g[N+2]==42}function Go(g,N){if(g==null)return 0;if(g.a=0,g.sc="OK",N==null)return on(g,2,"null VP8Io passed to VP8GetHeaders()");var Q=N.data,R=N.w,X=N.ha;if(4>X)return on(g,7,"Truncated header.");var se=Q[R+0]|Q[R+1]<<8|Q[R+2]<<16,ae=g.Od;if(ae.Rb=!(1&se),ae.td=se>>1&7,ae.yd=se>>4&1,ae.ub=se>>5,3<ae.td)return on(g,3,"Incorrect keyframe parameters.");if(!ae.yd)return on(g,4,"Frame not displayable.");R+=3,X-=3;var ie=g.Kc;if(ae.Rb){if(7>X)return on(g,7,"cannot parse picture header");if(!Ll(Q,R,X))return on(g,3,"Bad code word");ie.c=16383&(Q[R+4]<<8|Q[R+3]),ie.Td=Q[R+4]>>6,ie.i=16383&(Q[R+6]<<8|Q[R+5]),ie.Ud=Q[R+6]>>6,R+=7,X-=7,g.za=ie.c+15>>4,g.Ub=ie.i+15>>4,N.width=ie.c,N.height=ie.i,N.Da=0,N.j=0,N.v=0,N.va=N.width,N.o=N.height,N.da=0,N.ib=N.width,N.hb=N.height,N.U=N.width,N.T=N.height,a((se=g.Pa).jb,0,255,se.jb.length),e((se=g.Qa)!=null),se.Cb=0,se.Bb=0,se.Fb=1,a(se.Zb,0,0,se.Zb.length),a(se.Lb,0,0,se.Lb)}if(ae.ub>X)return on(g,7,"bad partition length");$(se=g.m,Q,R,ae.ub),R+=ae.ub,X-=ae.ub,ae.Rb&&(ie.Ld=be(se),ie.Kd=be(se)),ie=g.Qa;var le,fe=g.Pa;if(e(se!=null),e(ie!=null),ie.Cb=be(se),ie.Cb){if(ie.Bb=be(se),be(se)){for(ie.Fb=be(se),le=0;4>le;++le)ie.Zb[le]=be(se)?V(se,7):0;for(le=0;4>le;++le)ie.Lb[le]=be(se)?V(se,6):0}if(ie.Bb)for(le=0;3>le;++le)fe.jb[le]=be(se)?ee(se,8):255}else ie.Bb=0;if(se.Ka)return on(g,3,"cannot parse segment header");if((ie=g.ed).zd=be(se),ie.Tb=ee(se,6),ie.wb=ee(se,3),ie.Pc=be(se),ie.Pc&&be(se)){for(fe=0;4>fe;++fe)be(se)&&(ie.vd[fe]=V(se,6));for(fe=0;4>fe;++fe)be(se)&&(ie.od[fe]=V(se,6))}if(g.L=ie.Tb==0?0:ie.zd?1:2,se.Ka)return on(g,3,"cannot parse filter header");var ye=X;if(X=le=R,R=le+ye,ie=ye,g.Xb=(1<<ee(g.m,2))-1,ye<3*(fe=g.Xb))Q=7;else{for(le+=3*fe,ie-=3*fe,ye=0;ye<fe;++ye){var Qe=Q[X+0]|Q[X+1]<<8|Q[X+2]<<16;Qe>ie&&(Qe=ie),$(g.Jc[+ye],Q,le,Qe),le+=Qe,ie-=Qe,X+=3}$(g.Jc[+fe],Q,le,ie),Q=le<R?0:5}if(Q!=0)return on(g,Q,"cannot parse partitions");for(Q=ee(le=g.m,7),X=be(le)?V(le,4):0,R=be(le)?V(le,4):0,ie=be(le)?V(le,4):0,fe=be(le)?V(le,4):0,le=be(le)?V(le,4):0,ye=g.Qa,Qe=0;4>Qe;++Qe){if(ye.Cb){var he=ye.Zb[Qe];ye.Fb||(he+=Q)}else{if(0<Qe){g.pb[Qe]=g.pb[0];continue}he=Q}var je=g.pb[Qe];je.Sc[0]=Iu[br(he+X,127)],je.Sc[1]=Vi[br(he+0,127)],je.Eb[0]=2*Iu[br(he+R,127)],je.Eb[1]=101581*Vi[br(he+ie,127)]>>16,8>je.Eb[1]&&(je.Eb[1]=8),je.Qc[0]=Iu[br(he+fe,117)],je.Qc[1]=Vi[br(he+le,127)],je.lc=he+le}if(!ae.Rb)return on(g,4,"Not a key frame.");for(be(se),ae=g.Pa,Q=0;4>Q;++Q){for(X=0;8>X;++X)for(R=0;3>R;++R)for(ie=0;11>ie;++ie)fe=Ne(se,Zm[Q][X][R][ie])?ee(se,8):Ym[Q][X][R][ie],ae.Wc[Q][X].Yb[R][ie]=fe;for(X=0;17>X;++X)ae.Xc[Q][X]=ae.Wc[Q][ep[X]]}return g.kc=be(se),g.kc&&(g.Bd=ee(se,8)),g.cb=1}function Os(g,N,Q,R,X,se,ae){var ie=N[X].Yb[Q];for(Q=0;16>X;++X){if(!Ne(g,ie[Q+0]))return X;for(;!Ne(g,ie[Q+1]);)if(ie=N[++X].Yb[0],Q=0,X==16)return 16;var le=N[X+1].Yb;if(Ne(g,ie[Q+2])){var fe=g,ye=0;if(Ne(fe,(he=ie)[(Qe=Q)+3]))if(Ne(fe,he[Qe+6])){for(ie=0,Qe=2*(ye=Ne(fe,he[Qe+8]))+(he=Ne(fe,he[Qe+9+ye])),ye=0,he=Jm[Qe];he[ie];++ie)ye+=ye+Ne(fe,he[ie]);ye+=3+(8<<Qe)}else Ne(fe,he[Qe+7])?(ye=7+2*Ne(fe,165),ye+=Ne(fe,145)):ye=5+Ne(fe,159);else ye=Ne(fe,he[Qe+4])?3+Ne(fe,he[Qe+5]):2;ie=le[2]}else ye=1,ie=le[1];le=ae+Xm[X],0>(fe=g).b&&ve(fe);var Qe,he=fe.b,je=(Qe=fe.Ca>>1)-(fe.I>>he)>>31;--fe.b,fe.Ca+=je,fe.Ca|=1,fe.I-=(Qe+1&je)<<he,se[le]=((ye^je)-je)*R[(0<X)+0]}return 16}function sa(g){var N=g.rb[g.sb-1];N.la=0,N.Na=0,a(g.zc,0,0,g.zc.length),g.ja=0}function aa(g,N,Q,R,X){X=g[N+Q+32*R]+(X>>3),g[N+Q+32*R]=-256&X?0>X?0:255:X}function An(g,N,Q,R,X,se){aa(g,N,0,Q,R+X),aa(g,N,1,Q,R+se),aa(g,N,2,Q,R-se),aa(g,N,3,Q,R-X)}function Yr(g){return(20091*g>>16)+g}function IA(g,N,Q,R){var X,se=0,ae=o(16);for(X=0;4>X;++X){var ie=g[N+0]+g[N+8],le=g[N+0]-g[N+8],fe=(35468*g[N+4]>>16)-Yr(g[N+12]),ye=Yr(g[N+4])+(35468*g[N+12]>>16);ae[se+0]=ie+ye,ae[se+1]=le+fe,ae[se+2]=le-fe,ae[se+3]=ie-ye,se+=4,N++}for(X=se=0;4>X;++X)ie=(g=ae[se+0]+4)+ae[se+8],le=g-ae[se+8],fe=(35468*ae[se+4]>>16)-Yr(ae[se+12]),aa(Q,R,0,0,ie+(ye=Yr(ae[se+4])+(35468*ae[se+12]>>16))),aa(Q,R,1,0,le+fe),aa(Q,R,2,0,le-fe),aa(Q,R,3,0,ie-ye),se++,R+=32}function hu(g,N,Q,R){var X=g[N+0]+4,se=35468*g[N+4]>>16,ae=Yr(g[N+4]),ie=35468*g[N+1]>>16;An(Q,R,0,X+ae,g=Yr(g[N+1]),ie),An(Q,R,1,X+se,g,ie),An(Q,R,2,X-se,g,ie),An(Q,R,3,X-ae,g,ie)}function mu(g,N,Q,R,X){IA(g,N,Q,R),X&&IA(g,N+16,Q,R+4)}function pu(g,N,Q,R){si(g,N+0,Q,R,1),si(g,N+32,Q,R+128,1)}function Ea(g,N,Q,R){var X;for(g=g[N+0]+4,X=0;4>X;++X)for(N=0;4>N;++N)aa(Q,R,N,X,g)}function kl(g,N,Q,R){g[N+0]&&fr(g,N+0,Q,R),g[N+16]&&fr(g,N+16,Q,R+4),g[N+32]&&fr(g,N+32,Q,R+128),g[N+48]&&fr(g,N+48,Q,R+128+4)}function Tl(g,N,Q,R){var X,se=o(16);for(X=0;4>X;++X){var ae=g[N+0+X]+g[N+12+X],ie=g[N+4+X]+g[N+8+X],le=g[N+4+X]-g[N+8+X],fe=g[N+0+X]-g[N+12+X];se[0+X]=ae+ie,se[8+X]=ae-ie,se[4+X]=fe+le,se[12+X]=fe-le}for(X=0;4>X;++X)ae=(g=se[0+4*X]+3)+se[3+4*X],ie=se[1+4*X]+se[2+4*X],le=se[1+4*X]-se[2+4*X],fe=g-se[3+4*X],Q[R+0]=ae+ie>>3,Q[R+16]=fe+le>>3,Q[R+32]=ae-ie>>3,Q[R+48]=fe-le>>3,R+=64}function oa(g,N,Q){var R,X=N-32,se=Bs,ae=255-g[X-1];for(R=0;R<Q;++R){var ie,le=se,fe=ae+g[N-1];for(ie=0;ie<Q;++ie)g[N+ie]=le[fe+g[X+ie]];N+=32}}function LA(g,N){oa(g,N,4)}function Pl(g,N){oa(g,N,8)}function gu(g,N){oa(g,N,16)}function vu(g,N){var Q;for(Q=0;16>Q;++Q)n(g,N+32*Q,g,N-32,16)}function _i(g,N){var Q;for(Q=16;0<Q;--Q)a(g,N,g[N-1],16),N+=32}function Va(g,N,Q){var R;for(R=0;16>R;++R)a(N,Q+32*R,g,16)}function is(g,N){var Q,R=16;for(Q=0;16>Q;++Q)R+=g[N-1+32*Q]+g[N+Q-32];Va(R>>5,g,N)}function xu(g,N){var Q,R=8;for(Q=0;16>Q;++Q)R+=g[N-1+32*Q];Va(R>>4,g,N)}function Vo(g,N){var Q,R=8;for(Q=0;16>Q;++Q)R+=g[N+Q-32];Va(R>>4,g,N)}function kA(g,N){Va(128,g,N)}function Ht(g,N,Q){return g+2*N+Q+2>>2}function yu(g,N){var Q,R=N-32;for(R=new Uint8Array([Ht(g[R-1],g[R+0],g[R+1]),Ht(g[R+0],g[R+1],g[R+2]),Ht(g[R+1],g[R+2],g[R+3]),Ht(g[R+2],g[R+3],g[R+4])]),Q=0;4>Q;++Q)n(g,N+32*Q,R,0,R.length)}function wu(g,N){var Q=g[N-1],R=g[N-1+32],X=g[N-1+64],se=g[N-1+96];Te(g,N+0,16843009*Ht(g[N-1-32],Q,R)),Te(g,N+32,16843009*Ht(Q,R,X)),Te(g,N+64,16843009*Ht(R,X,se)),Te(g,N+96,16843009*Ht(X,se,se))}function bu(g,N){var Q,R=4;for(Q=0;4>Q;++Q)R+=g[N+Q-32]+g[N-1+32*Q];for(R>>=3,Q=0;4>Q;++Q)a(g,N+32*Q,R,4)}function ju(g,N){var Q=g[N-1+0],R=g[N-1+32],X=g[N-1+64],se=g[N-1-32],ae=g[N+0-32],ie=g[N+1-32],le=g[N+2-32],fe=g[N+3-32];g[N+0+96]=Ht(R,X,g[N-1+96]),g[N+1+96]=g[N+0+64]=Ht(Q,R,X),g[N+2+96]=g[N+1+64]=g[N+0+32]=Ht(se,Q,R),g[N+3+96]=g[N+2+64]=g[N+1+32]=g[N+0+0]=Ht(ae,se,Q),g[N+3+64]=g[N+2+32]=g[N+1+0]=Ht(ie,ae,se),g[N+3+32]=g[N+2+0]=Ht(le,ie,ae),g[N+3+0]=Ht(fe,le,ie)}function $a(g,N){var Q=g[N+1-32],R=g[N+2-32],X=g[N+3-32],se=g[N+4-32],ae=g[N+5-32],ie=g[N+6-32],le=g[N+7-32];g[N+0+0]=Ht(g[N+0-32],Q,R),g[N+1+0]=g[N+0+32]=Ht(Q,R,X),g[N+2+0]=g[N+1+32]=g[N+0+64]=Ht(R,X,se),g[N+3+0]=g[N+2+32]=g[N+1+64]=g[N+0+96]=Ht(X,se,ae),g[N+3+32]=g[N+2+64]=g[N+1+96]=Ht(se,ae,ie),g[N+3+64]=g[N+2+96]=Ht(ae,ie,le),g[N+3+96]=Ht(ie,le,le)}function za(g,N){var Q=g[N-1+0],R=g[N-1+32],X=g[N-1+64],se=g[N-1-32],ae=g[N+0-32],ie=g[N+1-32],le=g[N+2-32],fe=g[N+3-32];g[N+0+0]=g[N+1+64]=se+ae+1>>1,g[N+1+0]=g[N+2+64]=ae+ie+1>>1,g[N+2+0]=g[N+3+64]=ie+le+1>>1,g[N+3+0]=le+fe+1>>1,g[N+0+96]=Ht(X,R,Q),g[N+0+64]=Ht(R,Q,se),g[N+0+32]=g[N+1+96]=Ht(Q,se,ae),g[N+1+32]=g[N+2+96]=Ht(se,ae,ie),g[N+2+32]=g[N+3+96]=Ht(ae,ie,le),g[N+3+32]=Ht(ie,le,fe)}function Ds(g,N){var Q=g[N+0-32],R=g[N+1-32],X=g[N+2-32],se=g[N+3-32],ae=g[N+4-32],ie=g[N+5-32],le=g[N+6-32],fe=g[N+7-32];g[N+0+0]=Q+R+1>>1,g[N+1+0]=g[N+0+64]=R+X+1>>1,g[N+2+0]=g[N+1+64]=X+se+1>>1,g[N+3+0]=g[N+2+64]=se+ae+1>>1,g[N+0+32]=Ht(Q,R,X),g[N+1+32]=g[N+0+96]=Ht(R,X,se),g[N+2+32]=g[N+1+96]=Ht(X,se,ae),g[N+3+32]=g[N+2+96]=Ht(se,ae,ie),g[N+3+64]=Ht(ae,ie,le),g[N+3+96]=Ht(ie,le,fe)}function Ol(g,N){var Q=g[N-1+0],R=g[N-1+32],X=g[N-1+64],se=g[N-1+96];g[N+0+0]=Q+R+1>>1,g[N+2+0]=g[N+0+32]=R+X+1>>1,g[N+2+32]=g[N+0+64]=X+se+1>>1,g[N+1+0]=Ht(Q,R,X),g[N+3+0]=g[N+1+32]=Ht(R,X,se),g[N+3+32]=g[N+1+64]=Ht(X,se,se),g[N+3+64]=g[N+2+64]=g[N+0+96]=g[N+1+96]=g[N+2+96]=g[N+3+96]=se}function $o(g,N){var Q=g[N-1+0],R=g[N-1+32],X=g[N-1+64],se=g[N-1+96],ae=g[N-1-32],ie=g[N+0-32],le=g[N+1-32],fe=g[N+2-32];g[N+0+0]=g[N+2+32]=Q+ae+1>>1,g[N+0+32]=g[N+2+64]=R+Q+1>>1,g[N+0+64]=g[N+2+96]=X+R+1>>1,g[N+0+96]=se+X+1>>1,g[N+3+0]=Ht(ie,le,fe),g[N+2+0]=Ht(ae,ie,le),g[N+1+0]=g[N+3+32]=Ht(Q,ae,ie),g[N+1+32]=g[N+3+64]=Ht(R,Q,ae),g[N+1+64]=g[N+3+96]=Ht(X,R,Q),g[N+1+96]=Ht(se,X,R)}function Fi(g,N){var Q;for(Q=0;8>Q;++Q)n(g,N+32*Q,g,N-32,8)}function zo(g,N){var Q;for(Q=0;8>Q;++Q)a(g,N,g[N-1],8),N+=32}function Ui(g,N,Q){var R;for(R=0;8>R;++R)a(N,Q+32*R,g,8)}function Qi(g,N){var Q,R=8;for(Q=0;8>Q;++Q)R+=g[N+Q-32]+g[N-1+32*Q];Ui(R>>4,g,N)}function Dl(g,N){var Q,R=4;for(Q=0;8>Q;++Q)R+=g[N+Q-32];Ui(R>>3,g,N)}function Ii(g,N){var Q,R=4;for(Q=0;8>Q;++Q)R+=g[N-1+32*Q];Ui(R>>3,g,N)}function Li(g,N){Ui(128,g,N)}function Wo(g,N,Q){var R=g[N-Q],X=g[N+0],se=3*(X-R)+Gl[1020+g[N-2*Q]-g[N+Q]],ae=Vl[112+(se+4>>3)];g[N-Q]=Bs[255+R+Vl[112+(se+3>>3)]],g[N+0]=Bs[255+X-ae]}function Jo(g,N,Q,R){var X=g[N+0],se=g[N+Q];return Gs[255+g[N-2*Q]-g[N-Q]]>R||Gs[255+se-X]>R}function ln(g,N,Q,R){return 4*Gs[255+g[N-Q]-g[N+0]]+Gs[255+g[N-2*Q]-g[N+Q]]<=R}function ki(g,N,Q,R,X){var se=g[N-3*Q],ae=g[N-2*Q],ie=g[N-Q],le=g[N+0],fe=g[N+Q],ye=g[N+2*Q],Qe=g[N+3*Q];return 4*Gs[255+ie-le]+Gs[255+ae-fe]>R?0:Gs[255+g[N-4*Q]-se]<=X&&Gs[255+se-ae]<=X&&Gs[255+ae-ie]<=X&&Gs[255+Qe-ye]<=X&&Gs[255+ye-fe]<=X&&Gs[255+fe-le]<=X}function _a(g,N,Q,R){var X=2*R+1;for(R=0;16>R;++R)ln(g,N+R,Q,X)&&Wo(g,N+R,Q)}function Xo(g,N,Q,R){var X=2*R+1;for(R=0;16>R;++R)ln(g,N+R*Q,1,X)&&Wo(g,N+R*Q,1)}function Rl(g,N,Q,R){var X;for(X=3;0<X;--X)_a(g,N+=4*Q,Q,R)}function Hl(g,N,Q,R){var X;for(X=3;0<X;--X)Xo(g,N+=4,Q,R)}function Wa(g,N,Q,R,X,se,ae,ie){for(se=2*se+1;0<X--;){if(ki(g,N,Q,se,ae))if(Jo(g,N,Q,ie))Wo(g,N,Q);else{var le=g,fe=N,ye=Q,Qe=le[fe-2*ye],he=le[fe-ye],je=le[fe+0],Be=le[fe+ye],Re=le[fe+2*ye],Ue=27*($e=Gl[1020+3*(je-he)+Gl[1020+Qe-Be]])+63>>7,Ke=18*$e+63>>7,$e=9*$e+63>>7;le[fe-3*ye]=Bs[255+le[fe-3*ye]+$e],le[fe-2*ye]=Bs[255+Qe+Ke],le[fe-ye]=Bs[255+he+Ue],le[fe+0]=Bs[255+je-Ue],le[fe+ye]=Bs[255+Be-Ke],le[fe+2*ye]=Bs[255+Re-$e]}N+=R}}function Rs(g,N,Q,R,X,se,ae,ie){for(se=2*se+1;0<X--;){if(ki(g,N,Q,se,ae))if(Jo(g,N,Q,ie))Wo(g,N,Q);else{var le=g,fe=N,ye=Q,Qe=le[fe-ye],he=le[fe+0],je=le[fe+ye],Be=Vl[112+(4+(Re=3*(he-Qe))>>3)],Re=Vl[112+(Re+3>>3)],Ue=Be+1>>1;le[fe-2*ye]=Bs[255+le[fe-2*ye]+Ue],le[fe-ye]=Bs[255+Qe+Re],le[fe+0]=Bs[255+he-Be],le[fe+ye]=Bs[255+je-Ue]}N+=R}}function Yo(g,N,Q,R,X,se){Wa(g,N,Q,1,16,R,X,se)}function TA(g,N,Q,R,X,se){Wa(g,N,1,Q,16,R,X,se)}function qo(g,N,Q,R,X,se){var ae;for(ae=3;0<ae;--ae)Rs(g,N+=4*Q,Q,1,16,R,X,se)}function ia(g,N,Q,R,X,se){var ae;for(ae=3;0<ae;--ae)Rs(g,N+=4,1,Q,16,R,X,se)}function _(g,N,Q,R,X,se,ae,ie){Wa(g,N,X,1,8,se,ae,ie),Wa(Q,R,X,1,8,se,ae,ie)}function J(g,N,Q,R,X,se,ae,ie){Wa(g,N,1,X,8,se,ae,ie),Wa(Q,R,1,X,8,se,ae,ie)}function me(g,N,Q,R,X,se,ae,ie){Rs(g,N+4*X,X,1,8,se,ae,ie),Rs(Q,R+4*X,X,1,8,se,ae,ie)}function xe(g,N,Q,R,X,se,ae,ie){Rs(g,N+4,1,X,8,se,ae,ie),Rs(Q,R+4,1,X,8,se,ae,ie)}function Ee(){this.ba=new tt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new it,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ge(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function qe(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function St(){this.ua=0,this.Wa=new dt,this.vb=new dt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new P,this.yc=new k}function Lt(){this.xb=this.a=0,this.l=new Sa,this.ca=new tt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new z,this.Pb=0,this.wd=new z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new St,this.ab=0,this.gc=l(4,qe),this.Oc=0}function Mt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Sa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function $t(g,N,Q,R,X,se,ae){for(g=g==null?0:g[N+0],N=0;N<ae;++N)X[se+N]=g+Q[R+N]&255,g=X[se+N]}function ur(g,N,Q,R,X,se,ae){var ie;if(g==null)$t(null,null,Q,R,X,se,ae);else for(ie=0;ie<ae;++ie)X[se+ie]=g[N+ie]+Q[R+ie]&255}function Or(g,N,Q,R,X,se,ae){if(g==null)$t(null,null,Q,R,X,se,ae);else{var ie,le=g[N+0],fe=le,ye=le;for(ie=0;ie<ae;++ie)fe=ye+(le=g[N+ie])-fe,ye=Q[R+ie]+(-256&fe?0>fe?0:255:fe)&255,fe=le,X[se+ie]=ye}}function cn(g,N,Q,R){var X=N.width,se=N.o;if(e(g!=null&&N!=null),0>Q||0>=R||Q+R>se)return null;if(!g.Cc){if(g.ga==null){var ae;if(g.ga=new Mt,(ae=g.ga==null)||(ae=N.width*N.o,e(g.Gb.length==0),g.Gb=o(ae),g.Uc=0,g.Gb==null?ae=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,ae=1),ae=!ae),!ae){ae=g.ga;var ie=g.Fa,le=g.P,fe=g.qc,ye=g.mb,Qe=g.nb,he=le+1,je=fe-1,Be=ae.l;if(e(ie!=null&&ye!=null&&N!=null),qa[0]=null,qa[1]=$t,qa[2]=ur,qa[3]=Or,ae.ca=ye,ae.tb=Qe,ae.c=N.width,ae.i=N.height,e(0<ae.c&&0<ae.i),1>=fe)N=0;else if(ae.$a=3&ie[le+0],ae.Z=ie[le+0]>>2&3,ae.Lc=ie[le+0]>>4&3,le=ie[le+0]>>6&3,0>ae.$a||1<ae.$a||4<=ae.Z||1<ae.Lc||le)N=0;else if(Be.put=Qt,Be.ac=sr,Be.bc=Xr,Be.ma=ae,Be.width=N.width,Be.height=N.height,Be.Da=N.Da,Be.v=N.v,Be.va=N.va,Be.j=N.j,Be.o=N.o,ae.$a)e:{e(ae.$a==1),N=Mo();t:for(;;){if(N==null){N=0;break e}if(e(ae!=null),ae.mc=N,N.c=ae.c,N.i=ae.i,N.l=ae.l,N.l.ma=ae,N.l.width=ae.c,N.l.height=ae.i,N.a=0,W(N.m,ie,he,je),!Ps(ae.c,ae.i,1,N,null)||(N.ab==1&&N.gc[0].hc==3&&as(N.s)?(ae.ic=1,ie=N.c*N.i,N.Ta=null,N.Ua=0,N.V=o(ie),N.Ba=0,N.V==null?(N.a=1,N=0):N=1):(ae.ic=0,N=mo(N,ae.c)),!N))break t;N=1;break e}ae.mc=null,N=0}else N=je>=ae.c*ae.i;ae=!N}if(ae)return null;g.ga.Lc!=1?g.Ga=0:R=se-Q}e(g.ga!=null),e(Q+R<=se);e:{if(N=(ie=g.ga).c,se=ie.l.o,ie.$a==0){if(he=g.rc,je=g.Vc,Be=g.Fa,le=g.P+1+Q*N,fe=g.mb,ye=g.nb+Q*N,e(le<=g.P+g.qc),ie.Z!=0)for(e(qa[ie.Z]!=null),ae=0;ae<R;++ae)qa[ie.Z](he,je,Be,le,fe,ye,N),he=fe,je=ye,ye+=N,le+=N;else for(ae=0;ae<R;++ae)n(fe,ye,Be,le,N),he=fe,je=ye,ye+=N,le+=N;g.rc=he,g.Vc=je}else{if(e(ie.mc!=null),N=Q+R,e((ae=ie.mc)!=null),e(N<=ae.i),ae.C>=N)N=1;else if(ie.ic||Hs(),ie.ic){ie=ae.V,he=ae.Ba,je=ae.c;var Re=ae.i,Ue=(Be=1,le=ae.$/je,fe=ae.$%je,ye=ae.m,Qe=ae.s,ae.$),Ke=je*Re,$e=je*N,Ze=Qe.wc,Je=Ue<$e?Er(Qe,fe,le):null;e(Ue<=Ke),e(N<=Re),e(as(Qe));t:for(;;){for(;!ye.h&&Ue<$e;){if(fe&Ze||(Je=Er(Qe,fe,le)),e(Je!=null),Ae(ye),256>(Re=st(Je.G[0],Je.H[0],ye)))ie[he+Ue]=Re,++Ue,++fe>=je&&(fe=0,++le<=N&&!(le%16)&&Gn(ae,le));else{if(!(280>Re)){Be=0;break t}Re=Kr(Re-256,ye);var Ot,Bt=st(Je.G[4],Je.H[4],ye);if(Ae(ye),!(Ue>=(Bt=Ln(je,Bt=Kr(Bt,ye)))&&Ke-Ue>=Re)){Be=0;break t}for(Ot=0;Ot<Re;++Ot)ie[he+Ue+Ot]=ie[he+Ue+Ot-Bt];for(Ue+=Re,fe+=Re;fe>=je;)fe-=je,++le<=N&&!(le%16)&&Gn(ae,le);Ue<$e&&fe&Ze&&(Je=Er(Qe,fe,le))}e(ye.h==Z(ye))}Gn(ae,le>N?N:le);break t}!Be||ye.h&&Ue<Ke?(Be=0,ae.a=ye.h?5:3):ae.$=Ue,N=Be}else N=os(ae,ae.V,ae.Ba,ae.c,ae.i,N,Ni);if(!N){R=0;break e}}Q+R>=se&&(g.Cc=1),R=1}if(!R)return null;if(g.Cc&&((R=g.ga)!=null&&(R.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+Q*X}function vr(g,N,Q,R,X,se){for(;0<X--;){var ae,ie=g,le=N+(Q?1:0),fe=g,ye=N+(Q?0:3);for(ae=0;ae<R;++ae){var Qe=fe[ye+4*ae];Qe!=255&&(Qe*=32897,ie[le+4*ae+0]=ie[le+4*ae+0]*Qe>>23,ie[le+4*ae+1]=ie[le+4*ae+1]*Qe>>23,ie[le+4*ae+2]=ie[le+4*ae+2]*Qe>>23)}N+=se}}function pn(g,N,Q,R,X){for(;0<R--;){var se;for(se=0;se<Q;++se){var ae=g[N+2*se+0],ie=15&(fe=g[N+2*se+1]),le=4369*ie,fe=(240&fe|fe>>4)*le>>16;g[N+2*se+0]=(240&ae|ae>>4)*le>>16&240|(15&ae|ae<<4)*le>>16>>4&15,g[N+2*se+1]=240&fe|ie}N+=X}}function un(g,N,Q,R,X,se,ae,ie){var le,fe,ye=255;for(fe=0;fe<X;++fe){for(le=0;le<R;++le){var Qe=g[N+le];se[ae+4*le]=Qe,ye&=Qe}N+=Q,ae+=ie}return ye!=255}function Tn(g,N,Q,R,X){var se;for(se=0;se<X;++se)Q[R+se]=g[N+se]>>8}function Hs(){Mi=vr,_u=pn,Fu=un,lf=Tn}function As(g,N,Q){D[g]=function(R,X,se,ae,ie,le,fe,ye,Qe,he,je,Be,Re,Ue,Ke,$e,Ze){var Je,Ot=Ze-1>>1,Bt=ie[le+0]|fe[ye+0]<<16,qt=Qe[he+0]|je[Be+0]<<16;e(R!=null);var Ft=3*Bt+qt+131074>>2;for(N(R[X+0],255&Ft,Ft>>16,Re,Ue),se!=null&&(Ft=3*qt+Bt+131074>>2,N(se[ae+0],255&Ft,Ft>>16,Ke,$e)),Je=1;Je<=Ot;++Je){var ar=ie[le+Je]|fe[ye+Je]<<16,gn=Qe[he+Je]|je[Be+Je]<<16,Jt=Bt+ar+qt+gn+524296,Oe=Jt+2*(ar+qt)>>3;Ft=Oe+Bt>>1,Bt=(Jt=Jt+2*(Bt+gn)>>3)+ar>>1,N(R[X+2*Je-1],255&Ft,Ft>>16,Re,Ue+(2*Je-1)*Q),N(R[X+2*Je-0],255&Bt,Bt>>16,Re,Ue+(2*Je-0)*Q),se!=null&&(Ft=Jt+qt>>1,Bt=Oe+gn>>1,N(se[ae+2*Je-1],255&Ft,Ft>>16,Ke,$e+(2*Je-1)*Q),N(se[ae+2*Je+0],255&Bt,Bt>>16,Ke,$e+(2*Je+0)*Q)),Bt=ar,qt=gn}1&Ze||(Ft=3*Bt+qt+131074>>2,N(R[X+Ze-1],255&Ft,Ft>>16,Re,Ue+(Ze-1)*Q),se!=null&&(Ft=3*qt+Bt+131074>>2,N(se[ae+Ze-1],255&Ft,Ft>>16,Ke,$e+(Ze-1)*Q)))}}function Ml(){$s[$l]=rp,$s[zl]=RA,$s[oi]=Lu,$s[Wl]=gf,$s[Jl]=vf,$s[Ki]=xf,$s[ff]=np,$s[Uu]=RA,$s[Qu]=gf,$s[Xl]=vf,$s[Gi]=xf}function Ti(g){return g&-16384?0>g?0:255:g>>sp}function Zo(g,N){return Ti((19077*g>>8)+(26149*N>>8)-14234)}function Fa(g,N,Q){return Ti((19077*g>>8)-(6419*N>>8)-(13320*Q>>8)+8708)}function vo(g,N){return Ti((19077*g>>8)+(33050*N>>8)-17685)}function xo(g,N,Q,R,X){R[X+0]=Zo(g,Q),R[X+1]=Fa(g,N,Q),R[X+2]=vo(g,N)}function Aa(g,N,Q,R,X){R[X+0]=vo(g,N),R[X+1]=Fa(g,N,Q),R[X+2]=Zo(g,Q)}function qr(g,N,Q,R,X){var se=Fa(g,N,Q);N=se<<3&224|vo(g,N)>>3,R[X+0]=248&Zo(g,Q)|se>>5,R[X+1]=N}function Ar(g,N,Q,R,X){var se=240&vo(g,N)|15;R[X+0]=240&Zo(g,Q)|Fa(g,N,Q)>>4,R[X+1]=se}function ei(g,N,Q,R,X){R[X+0]=255,xo(g,N,Q,R,X+1)}function ti(g,N,Q,R,X){Aa(g,N,Q,R,X),R[X+3]=255}function Pi(g,N,Q,R,X){xo(g,N,Q,R,X),R[X+3]=255}function br(g,N){return 0>g?0:g>N?N:g}function Nn(g,N,Q){D[g]=function(R,X,se,ae,ie,le,fe,ye,Qe){for(var he=ye+(-2&Qe)*Q;ye!=he;)N(R[X+0],se[ae+0],ie[le+0],fe,ye),N(R[X+1],se[ae+0],ie[le+0],fe,ye+Q),X+=2,++ae,++le,ye+=2*Q;1&Qe&&N(R[X+0],se[ae+0],ie[le+0],fe,ye)}}function Oi(g,N,Q){return Q==0?g==0?N==0?6:5:N==0?4:0:Q}function la(g,N,Q,R,X){switch(g>>>30){case 3:si(N,Q,R,X,0);break;case 2:Ks(N,Q,R,X);break;case 1:fr(N,Q,R,X)}}function dr(g,N){var Q,R,X=N.M,se=N.Nb,ae=g.oc,ie=g.pc+40,le=g.oc,fe=g.pc+584,ye=g.oc,Qe=g.pc+600;for(Q=0;16>Q;++Q)ae[ie+32*Q-1]=129;for(Q=0;8>Q;++Q)le[fe+32*Q-1]=129,ye[Qe+32*Q-1]=129;for(0<X?ae[ie-1-32]=le[fe-1-32]=ye[Qe-1-32]=129:(a(ae,ie-32-1,127,21),a(le,fe-32-1,127,9),a(ye,Qe-32-1,127,9)),R=0;R<g.za;++R){var he=N.ya[N.aa+R];if(0<R){for(Q=-1;16>Q;++Q)n(ae,ie+32*Q-4,ae,ie+32*Q+12,4);for(Q=-1;8>Q;++Q)n(le,fe+32*Q-4,le,fe+32*Q+4,4),n(ye,Qe+32*Q-4,ye,Qe+32*Q+4,4)}var je=g.Gd,Be=g.Hd+R,Re=he.ad,Ue=he.Hc;if(0<X&&(n(ae,ie-32,je[Be].y,0,16),n(le,fe-32,je[Be].f,0,8),n(ye,Qe-32,je[Be].ea,0,8)),he.Za){var Ke=ae,$e=ie-32+16;for(0<X&&(R>=g.za-1?a(Ke,$e,je[Be].y[15],4):n(Ke,$e,je[Be+1].y,0,4)),Q=0;4>Q;Q++)Ke[$e+128+Q]=Ke[$e+256+Q]=Ke[$e+384+Q]=Ke[$e+0+Q];for(Q=0;16>Q;++Q,Ue<<=2)Ke=ae,$e=ie+wf[Q],da[he.Ob[Q]](Ke,$e),la(Ue,Re,16*+Q,Ke,$e)}else if(Ke=Oi(R,X,he.Ob[0]),jo[Ke](ae,ie),Ue!=0)for(Q=0;16>Q;++Q,Ue<<=2)la(Ue,Re,16*+Q,ae,ie+wf[Q]);for(Q=he.Gc,Ke=Oi(R,X,he.Dd),Vs[Ke](le,fe),Vs[Ke](ye,Qe),Ue=Re,Ke=le,$e=fe,255&(he=0|Q)&&(170&he?js(Ue,256,Ke,$e):jr(Ue,256,Ke,$e)),he=ye,Ue=Qe,255&(Q>>=8)&&(170&Q?js(Re,320,he,Ue):jr(Re,320,he,Ue)),X<g.Ub-1&&(n(je[Be].y,0,ae,ie+480,16),n(je[Be].f,0,le,fe+224,8),n(je[Be].ea,0,ye,Qe+224,8)),Q=8*se*g.B,je=g.sa,Be=g.ta+16*R+16*se*g.R,Re=g.qa,he=g.ra+8*R+Q,Ue=g.Ha,Ke=g.Ia+8*R+Q,Q=0;16>Q;++Q)n(je,Be+Q*g.R,ae,ie+32*Q,16);for(Q=0;8>Q;++Q)n(Re,he+Q*g.B,le,fe+32*Q,8),n(Ue,Ke+Q*g.B,ye,Qe+32*Q,8)}}function yo(g,N,Q,R,X,se,ae,ie,le){var fe=[0],ye=[0],Qe=0,he=le!=null?le.kd:0,je=le??new Ge;if(g==null||12>Q)return 7;je.data=g,je.w=N,je.ha=Q,N=[N],Q=[Q],je.gb=[je.gb];e:{var Be=N,Re=Q,Ue=je.gb;if(e(g!=null),e(Re!=null),e(Ue!=null),Ue[0]=0,12<=Re[0]&&!r(g,Be[0],"RIFF")){if(r(g,Be[0]+8,"WEBP")){Ue=3;break e}var Ke=_e(g,Be[0]+4);if(12>Ke||4294967286<Ke){Ue=3;break e}if(he&&Ke>Re[0]-8){Ue=7;break e}Ue[0]=Ke,Be[0]+=12,Re[0]-=12}Ue=0}if(Ue!=0)return Ue;for(Ke=0<je.gb[0],Q=Q[0];;){e:{var $e=g;Re=N,Ue=Q;var Ze=fe,Je=ye,Ot=Be=[0];if((Ft=Qe=[Qe])[0]=0,8>Ue[0])Ue=7;else{if(!r($e,Re[0],"VP8X")){if(_e($e,Re[0]+4)!=10){Ue=3;break e}if(18>Ue[0]){Ue=7;break e}var Bt=_e($e,Re[0]+8),qt=1+We($e,Re[0]+12);if(2147483648<=qt*($e=1+We($e,Re[0]+15))){Ue=3;break e}Ot!=null&&(Ot[0]=Bt),Ze!=null&&(Ze[0]=qt),Je!=null&&(Je[0]=$e),Re[0]+=18,Ue[0]-=18,Ft[0]=1}Ue=0}}if(Qe=Qe[0],Be=Be[0],Ue!=0)return Ue;if(Re=!!(2&Be),!Ke&&Qe)return 3;if(se!=null&&(se[0]=!!(16&Be)),ae!=null&&(ae[0]=Re),ie!=null&&(ie[0]=0),ae=fe[0],Be=ye[0],Qe&&Re&&le==null){Ue=0;break}if(4>Q){Ue=7;break}if(Ke&&Qe||!Ke&&!Qe&&!r(g,N[0],"ALPH")){Q=[Q],je.na=[je.na],je.P=[je.P],je.Sa=[je.Sa];e:{Bt=g,Ue=N,Ke=Q;var Ft=je.gb;Ze=je.na,Je=je.P,Ot=je.Sa,qt=22,e(Bt!=null),e(Ke!=null),$e=Ue[0];var ar=Ke[0];for(e(Ze!=null),e(Ot!=null),Ze[0]=null,Je[0]=null,Ot[0]=0;;){if(Ue[0]=$e,Ke[0]=ar,8>ar){Ue=7;break e}var gn=_e(Bt,$e+4);if(4294967286<gn){Ue=3;break e}var Jt=8+gn+1&-2;if(qt+=Jt,0<Ft&&qt>Ft){Ue=3;break e}if(!r(Bt,$e,"VP8 ")||!r(Bt,$e,"VP8L")){Ue=0;break e}if(ar[0]<Jt){Ue=7;break e}r(Bt,$e,"ALPH")||(Ze[0]=Bt,Je[0]=$e+8,Ot[0]=gn),$e+=Jt,ar-=Jt}}if(Q=Q[0],je.na=je.na[0],je.P=je.P[0],je.Sa=je.Sa[0],Ue!=0)break}Q=[Q],je.Ja=[je.Ja],je.xa=[je.xa];e:if(Ft=g,Ue=N,Ke=Q,Ze=je.gb[0],Je=je.Ja,Ot=je.xa,Bt=Ue[0],$e=!r(Ft,Bt,"VP8 "),qt=!r(Ft,Bt,"VP8L"),e(Ft!=null),e(Ke!=null),e(Je!=null),e(Ot!=null),8>Ke[0])Ue=7;else{if($e||qt){if(Ft=_e(Ft,Bt+4),12<=Ze&&Ft>Ze-12){Ue=3;break e}if(he&&Ft>Ke[0]-8){Ue=7;break e}Je[0]=Ft,Ue[0]+=8,Ke[0]-=8,Ot[0]=qt}else Ot[0]=5<=Ke[0]&&Ft[Bt+0]==47&&!(Ft[Bt+4]>>5),Je[0]=Ke[0];Ue=0}if(Q=Q[0],je.Ja=je.Ja[0],je.xa=je.xa[0],N=N[0],Ue!=0)break;if(4294967286<je.Ja)return 3;if(ie==null||Re||(ie[0]=je.xa?2:1),ae=[ae],Be=[Be],je.xa){if(5>Q){Ue=7;break}ie=ae,he=Be,Re=se,g==null||5>Q?g=0:5<=Q&&g[N+0]==47&&!(g[N+4]>>5)?(Ke=[0],Ft=[0],Ze=[0],W(Je=new z,g,N,Q),Kn(Je,Ke,Ft,Ze)?(ie!=null&&(ie[0]=Ke[0]),he!=null&&(he[0]=Ft[0]),Re!=null&&(Re[0]=Ze[0]),g=1):g=0):g=0}else{if(10>Q){Ue=7;break}ie=Be,g==null||10>Q||!Ll(g,N+3,Q-3)?g=0:(he=g[N+0]|g[N+1]<<8|g[N+2]<<16,Re=16383&(g[N+7]<<8|g[N+6]),g=16383&(g[N+9]<<8|g[N+8]),1&he||3<(he>>1&7)||!(he>>4&1)||he>>5>=je.Ja||!Re||!g?g=0:(ae&&(ae[0]=Re),ie&&(ie[0]=g),g=1))}if(!g||(ae=ae[0],Be=Be[0],Qe&&(fe[0]!=ae||ye[0]!=Be)))return 3;le!=null&&(le[0]=je,le.offset=N-le.w,e(4294967286>N-le.w),e(le.offset==le.ha-Q));break}return Ue==0||Ue==7&&Qe&&le==null?(se!=null&&(se[0]|=je.na!=null&&0<je.na.length),R!=null&&(R[0]=ae),X!=null&&(X[0]=Be),0):Ue}function Zr(g,N,Q){var R=N.width,X=N.height,se=0,ae=0,ie=R,le=X;if(N.Da=g!=null&&0<g.Da,N.Da&&(ie=g.cd,le=g.bd,se=g.v,ae=g.j,11>Q||(se&=-2,ae&=-2),0>se||0>ae||0>=ie||0>=le||se+ie>R||ae+le>X))return 0;if(N.v=se,N.j=ae,N.va=se+ie,N.o=ae+le,N.U=ie,N.T=le,N.da=g!=null&&0<g.da,N.da){if(!ot(ie,le,Q=[g.ib],se=[g.hb]))return 0;N.ib=Q[0],N.hb=se[0]}return N.ob=g!=null&&g.ob,N.Kb=g==null||!g.Sd,N.da&&(N.ob=N.ib<3*R/4&&N.hb<3*X/4,N.Kb=0),1}function ri(g){if(g==null)return 2;if(11>g.S){var N=g.f.RGBA;N.fb+=(g.height-1)*N.A,N.A=-N.A}else N=g.f.kb,g=g.height,N.O+=(g-1)*N.fa,N.fa=-N.fa,N.N+=(g-1>>1)*N.Ab,N.Ab=-N.Ab,N.W+=(g-1>>1)*N.Db,N.Db=-N.Db,N.F!=null&&(N.J+=(g-1)*N.lb,N.lb=-N.lb);return 0}function Yn(g,N,Q,R){if(R==null||0>=g||0>=N)return 2;if(Q!=null){if(Q.Da){var X=Q.cd,se=Q.bd,ae=-2&Q.v,ie=-2&Q.j;if(0>ae||0>ie||0>=X||0>=se||ae+X>g||ie+se>N)return 2;g=X,N=se}if(Q.da){if(!ot(g,N,X=[Q.ib],se=[Q.hb]))return 2;g=X[0],N=se[0]}}R.width=g,R.height=N;e:{var le=R.width,fe=R.height;if(g=R.S,0>=le||0>=fe||!(g>=$l&&13>g))g=2;else{if(0>=R.Rd&&R.sd==null){ae=se=X=N=0;var ye=(ie=le*jf[g])*fe;if(11>g||(se=(fe+1)/2*(N=(le+1)/2),g==12&&(ae=(X=le)*fe)),(fe=o(ye+2*se+ae))==null){g=1;break e}R.sd=fe,11>g?((le=R.f.RGBA).eb=fe,le.fb=0,le.A=ie,le.size=ye):((le=R.f.kb).y=fe,le.O=0,le.fa=ie,le.Fd=ye,le.f=fe,le.N=0+ye,le.Ab=N,le.Cd=se,le.ea=fe,le.W=0+ye+se,le.Db=N,le.Ed=se,g==12&&(le.F=fe,le.J=0+ye+2*se),le.Tc=ae,le.lb=X)}if(N=1,X=R.S,se=R.width,ae=R.height,X>=$l&&13>X)if(11>X)g=R.f.RGBA,N&=(ie=Math.abs(g.A))*(ae-1)+se<=g.size,N&=ie>=se*jf[X],N&=g.eb!=null;else{g=R.f.kb,ie=(se+1)/2,ye=(ae+1)/2,le=Math.abs(g.fa),fe=Math.abs(g.Ab);var Qe=Math.abs(g.Db),he=Math.abs(g.lb),je=he*(ae-1)+se;N&=le*(ae-1)+se<=g.Fd,N&=fe*(ye-1)+ie<=g.Cd,N=(N&=Qe*(ye-1)+ie<=g.Ed)&le>=se&fe>=ie&Qe>=ie,N&=g.y!=null,N&=g.f!=null,N&=g.ea!=null,X==12&&(N&=he>=se,N&=je<=g.Tc,N&=g.F!=null)}else N=0;g=N?0:2}}return g!=0||Q!=null&&Q.fd&&(g=ri(R)),g}var ca=64,tr=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ls=24,Ja=32,Ua=8,Xa=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];et("Predictor0","PredictorAdd0"),D.Predictor0=function(){return 4278190080},D.Predictor1=function(g){return g},D.Predictor2=function(g,N,Q){return N[Q+0]},D.Predictor3=function(g,N,Q){return N[Q+1]},D.Predictor4=function(g,N,Q){return N[Q-1]},D.Predictor5=function(g,N,Q){return vt(vt(g,N[Q+1]),N[Q+0])},D.Predictor6=function(g,N,Q){return vt(g,N[Q-1])},D.Predictor7=function(g,N,Q){return vt(g,N[Q+0])},D.Predictor8=function(g,N,Q){return vt(N[Q-1],N[Q+0])},D.Predictor9=function(g,N,Q){return vt(N[Q+0],N[Q+1])},D.Predictor10=function(g,N,Q){return vt(vt(g,N[Q-1]),vt(N[Q+0],N[Q+1]))},D.Predictor11=function(g,N,Q){var R=N[Q+0];return 0>=pe(R>>24&255,g>>24&255,(N=N[Q-1])>>24&255)+pe(R>>16&255,g>>16&255,N>>16&255)+pe(R>>8&255,g>>8&255,N>>8&255)+pe(255&R,255&g,255&N)?R:g},D.Predictor12=function(g,N,Q){var R=N[Q+0];return(Tt((g>>24&255)+(R>>24&255)-((N=N[Q-1])>>24&255))<<24|Tt((g>>16&255)+(R>>16&255)-(N>>16&255))<<16|Tt((g>>8&255)+(R>>8&255)-(N>>8&255))<<8|Tt((255&g)+(255&R)-(255&N)))>>>0},D.Predictor13=function(g,N,Q){var R=N[Q-1];return(Se((g=vt(g,N[Q+0]))>>24&255,R>>24&255)<<24|Se(g>>16&255,R>>16&255)<<16|Se(g>>8&255,R>>8&255)<<8|Se(255&g,255&R))>>>0};var wo=D.PredictorAdd0;D.PredictorAdd1=Ie,et("Predictor2","PredictorAdd2"),et("Predictor3","PredictorAdd3"),et("Predictor4","PredictorAdd4"),et("Predictor5","PredictorAdd5"),et("Predictor6","PredictorAdd6"),et("Predictor7","PredictorAdd7"),et("Predictor8","PredictorAdd8"),et("Predictor9","PredictorAdd9"),et("Predictor10","PredictorAdd10"),et("Predictor11","PredictorAdd11"),et("Predictor12","PredictorAdd12"),et("Predictor13","PredictorAdd13");var ni=D.PredictorAdd2;Xe("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),Xe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var Gr,qn=D.ColorIndexInverseTransform,Pn=D.MapARGB,On=D.VP8LColorIndexInverseTransformAlpha,Vr=D.MapAlpha,Ms=D.VP8LPredictorsAdd=[];Ms.length=16,(D.VP8LPredictors=[]).length=16,(D.VP8LPredictorsAdd_C=[]).length=16,(D.VP8LPredictors_C=[]).length=16;var Di,Ri,Qa,Ya,bo,ua,Vn,si,Ks,js,fr,jr,en,xr,Ia,PA,Hi,ai,Af,Bu,Cu,Nu,Su,Eu,Mi,_u,Fu,lf,OA=o(511),cf=o(2041),uf=o(225),Kl=o(767),df=0,Gl=cf,Vl=uf,Bs=Kl,Gs=OA,$l=0,zl=1,oi=2,Wl=3,Jl=4,Ki=5,ff=6,Uu=7,Qu=8,Xl=9,Gi=10,Km=[2,3,7],Gm=[3,3,11],hf=[280,256,256,256,40],Vm=[0,1,1,1,0],Yl=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],$m=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],zm=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Wm=8,Iu=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Vi=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],DA=null,Jm=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Xm=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],mf=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ym=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],qm=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Zm=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ep=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],jo=[],da=[],Vs=[],tp=1,pf=2,qa=[],$s=[];As("UpsampleRgbLinePair",xo,3),As("UpsampleBgrLinePair",Aa,3),As("UpsampleRgbaLinePair",Pi,4),As("UpsampleBgraLinePair",ti,4),As("UpsampleArgbLinePair",ei,4),As("UpsampleRgba4444LinePair",Ar,2),As("UpsampleRgb565LinePair",qr,2);var rp=D.UpsampleRgbLinePair,Lu=D.UpsampleBgrLinePair,RA=D.UpsampleRgbaLinePair,gf=D.UpsampleBgraLinePair,vf=D.UpsampleArgbLinePair,xf=D.UpsampleRgba4444LinePair,np=D.UpsampleRgb565LinePair,ql=16,Zl=1<<ql-1,Bo=-227,ku=482,sp=6,yf=0,ap=o(256),op=o(256),ip=o(256),Ap=o(256),lp=o(ku-Bo),cp=o(ku-Bo);Nn("YuvToRgbRow",xo,3),Nn("YuvToBgrRow",Aa,3),Nn("YuvToRgbaRow",Pi,4),Nn("YuvToBgraRow",ti,4),Nn("YuvToArgbRow",ei,4),Nn("YuvToRgba4444Row",Ar,2),Nn("YuvToRgb565Row",qr,2);var wf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ec=[0,2,8],up=[8,7,6,4,4,2,2,2,1,1,1,1],bf=1;this.WebPDecodeRGBA=function(g,N,Q,R,X){var se=zl,ae=new Ee,ie=new tt;ae.ba=ie,ie.S=se,ie.width=[ie.width],ie.height=[ie.height];var le=ie.width,fe=ie.height,ye=new Ve;if(ye==null||g==null)var Qe=2;else e(ye!=null),Qe=yo(g,N,Q,ye.width,ye.height,ye.Pd,ye.Qd,ye.format,null);if(Qe!=0?le=0:(le!=null&&(le[0]=ye.width[0]),fe!=null&&(fe[0]=ye.height[0]),le=1),le){ie.width=ie.width[0],ie.height=ie.height[0],R!=null&&(R[0]=ie.width),X!=null&&(X[0]=ie.height);e:{if(R=new Sa,(X=new Ge).data=g,X.w=N,X.ha=Q,X.kd=1,N=[0],e(X!=null),((g=yo(X.data,X.w,X.ha,null,null,null,N,null,X))==0||g==7)&&N[0]&&(g=4),(N=g)==0){if(e(ae!=null),R.data=X.data,R.w=X.w+X.offset,R.ha=X.ha-X.offset,R.put=Qt,R.ac=sr,R.bc=Xr,R.ma=ae,X.xa){if((g=Mo())==null){ae=1;break e}if(function(he,je){var Be=[0],Re=[0],Ue=[0];t:for(;;){if(he==null)return 0;if(je==null)return he.a=2,0;if(he.l=je,he.a=0,W(he.m,je.data,je.w,je.ha),!Kn(he.m,Be,Re,Ue)){he.a=3;break t}if(he.xb=pf,je.width=Be[0],je.height=Re[0],!Ps(Be[0],Re[0],1,he,null))break t;return 1}return e(he.a!=0),0}(g,R)){if(R=(N=Yn(R.width,R.height,ae.Oa,ae.ba))==0){t:{R=g;r:for(;;){if(R==null){R=0;break t}if(e(R.s.yc!=null),e(R.s.Ya!=null),e(0<R.s.Wb),e((Q=R.l)!=null),e((X=Q.ma)!=null),R.xb!=0){if(R.ca=X.ba,R.tb=X.tb,e(R.ca!=null),!Zr(X.Oa,Q,Wl)){R.a=2;break r}if(!mo(R,Q.width)||Q.da)break r;if((Q.da||at(R.ca.S))&&Hs(),11>R.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),R.ca.f.kb.F!=null&&Hs()),R.Pb&&0<R.s.ua&&R.s.vb.X==null&&!de(R.s.vb,R.s.Wa.Xa)){R.a=1;break r}R.xb=0}if(!os(R,R.V,R.Ba,R.c,R.i,Q.o,kn))break r;X.Dc=R.Ma,R=1;break t}e(R.a!=0),R=0}R=!R}R&&(N=g.a)}else N=g.a}else{if((g=new fu)==null){ae=1;break e}if(g.Fa=X.na,g.P=X.P,g.qc=X.Sa,Go(g,R)){if((N=Yn(R.width,R.height,ae.Oa,ae.ba))==0){if(g.Aa=0,Q=ae.Oa,e((X=g)!=null),Q!=null){if(0<(le=0>(le=Q.Md)?0:100<le?255:255*le/100)){for(fe=ye=0;4>fe;++fe)12>(Qe=X.pb[fe]).lc&&(Qe.ia=le*up[0>Qe.lc?0:Qe.lc]>>3),ye|=Qe.ia;ye&&(alert("todo:VP8InitRandom"),X.ia=1)}X.Ga=Q.Id,100<X.Ga?X.Ga=100:0>X.Ga&&(X.Ga=0)}(function(he,je){if(he==null)return 0;if(je==null)return on(he,2,"NULL VP8Io parameter in VP8Decode().");if(!he.cb&&!Go(he,je))return 0;if(e(he.cb),je.ac==null||je.ac(je)){je.ob&&(he.L=0);var Be=ec[he.L];if(he.L==2?(he.yb=0,he.zb=0):(he.yb=je.v-Be>>4,he.zb=je.j-Be>>4,0>he.yb&&(he.yb=0),0>he.zb&&(he.zb=0)),he.Va=je.o+15+Be>>4,he.Hb=je.va+15+Be>>4,he.Hb>he.za&&(he.Hb=he.za),he.Va>he.Ub&&(he.Va=he.Ub),0<he.L){var Re=he.ed;for(Be=0;4>Be;++Be){var Ue;if(he.Qa.Cb){var Ke=he.Qa.Lb[Be];he.Qa.Fb||(Ke+=Re.Tb)}else Ke=Re.Tb;for(Ue=0;1>=Ue;++Ue){var $e=he.gd[Be][Ue],Ze=Ke;if(Re.Pc&&(Ze+=Re.vd[0],Ue&&(Ze+=Re.od[0])),0<(Ze=0>Ze?0:63<Ze?63:Ze)){var Je=Ze;0<Re.wb&&(Je=4<Re.wb?Je>>2:Je>>1)>9-Re.wb&&(Je=9-Re.wb),1>Je&&(Je=1),$e.dd=Je,$e.tc=2*Ze+Je,$e.ld=40<=Ze?2:15<=Ze?1:0}else $e.tc=0;$e.La=Ue}}}Be=0}else on(he,6,"Frame setup failed"),Be=he.a;if(Be=Be==0){if(Be){he.$c=0,0<he.Aa||(he.Ic=bf);t:{Be=he.Ic,Re=4*(Je=he.za);var Ot=32*Je,Bt=Je+1,qt=0<he.L?Je*(0<he.Aa?2:1):0,Ft=(he.Aa==2?2:1)*Je;if(($e=Re+832+(Ue=3*(16*Be+ec[he.L])/2*Ot)+(Ke=he.Fa!=null&&0<he.Fa.length?he.Kc.c*he.Kc.i:0))!=$e)Be=0;else{if($e>he.Vb){if(he.Vb=0,he.Ec=o($e),he.Fc=0,he.Ec==null){Be=on(he,1,"no memory during frame initialization.");break t}he.Vb=$e}$e=he.Ec,Ze=he.Fc,he.Ac=$e,he.Bc=Ze,Ze+=Re,he.Gd=l(Ot,Il),he.Hd=0,he.rb=l(Bt+1,go),he.sb=1,he.wa=qt?l(qt,bs):null,he.Y=0,he.D.Nb=0,he.D.wa=he.wa,he.D.Y=he.Y,0<he.Aa&&(he.D.Y+=Je),e(!0),he.oc=$e,he.pc=Ze,Ze+=832,he.ya=l(Ft,Ga),he.aa=0,he.D.ya=he.ya,he.D.aa=he.aa,he.Aa==2&&(he.D.aa+=Je),he.R=16*Je,he.B=8*Je,Je=(Ot=ec[he.L])*he.R,Ot=Ot/2*he.B,he.sa=$e,he.ta=Ze+Je,he.qa=he.sa,he.ra=he.ta+16*Be*he.R+Ot,he.Ha=he.qa,he.Ia=he.ra+8*Be*he.B+Ot,he.$c=0,Ze+=Ue,he.mb=Ke?$e:null,he.nb=Ke?Ze:null,e(Ze+Ke<=he.Fc+he.Vb),sa(he),a(he.Ac,he.Bc,0,Re),Be=1}}if(Be){if(je.ka=0,je.y=he.sa,je.O=he.ta,je.f=he.qa,je.N=he.ra,je.ea=he.Ha,je.Vd=he.Ia,je.fa=he.R,je.Rc=he.B,je.F=null,je.J=0,!df){for(Be=-255;255>=Be;++Be)OA[255+Be]=0>Be?-Be:Be;for(Be=-1020;1020>=Be;++Be)cf[1020+Be]=-128>Be?-128:127<Be?127:Be;for(Be=-112;112>=Be;++Be)uf[112+Be]=-16>Be?-16:15<Be?15:Be;for(Be=-255;510>=Be;++Be)Kl[255+Be]=0>Be?0:255<Be?255:Be;df=1}Vn=Tl,si=mu,js=pu,fr=Ea,jr=kl,Ks=hu,en=Yo,xr=TA,Ia=_,PA=J,Hi=qo,ai=ia,Af=me,Bu=xe,Cu=_a,Nu=Xo,Su=Rl,Eu=Hl,da[0]=bu,da[1]=LA,da[2]=yu,da[3]=wu,da[4]=ju,da[5]=za,da[6]=$a,da[7]=Ds,da[8]=$o,da[9]=Ol,jo[0]=is,jo[1]=gu,jo[2]=vu,jo[3]=_i,jo[4]=xu,jo[5]=Vo,jo[6]=kA,Vs[0]=Qi,Vs[1]=Pl,Vs[2]=Fi,Vs[3]=zo,Vs[4]=Ii,Vs[5]=Dl,Vs[6]=Li,Be=1}else Be=0}Be&&(Be=function(ar,gn){for(ar.M=0;ar.M<ar.Va;++ar.M){var Jt,Oe=ar.Jc[ar.M&ar.Xb],ht=ar.m,tn=ar;for(Jt=0;Jt<tn.za;++Jt){var Kt=ht,Wt=tn,Ur=Wt.Ac,Sn=Wt.Bc+4*Jt,vn=Wt.zc,Qr=Wt.ya[Wt.aa+Jt];if(Wt.Qa.Bb?Qr.$b=Ne(Kt,Wt.Pa.jb[0])?2+Ne(Kt,Wt.Pa.jb[2]):Ne(Kt,Wt.Pa.jb[1]):Qr.$b=0,Wt.kc&&(Qr.Ad=Ne(Kt,Wt.Bd)),Qr.Za=!Ne(Kt,145)+0,Qr.Za){var $n=Qr.Ob,Zn=0;for(Wt=0;4>Wt;++Wt){var xn,Zt=vn[0+Wt];for(xn=0;4>xn;++xn){Zt=qm[Ur[Sn+xn]][Zt];for(var hr=mf[Ne(Kt,Zt[0])];0<hr;)hr=mf[2*hr+Ne(Kt,Zt[hr])];Zt=-hr,Ur[Sn+xn]=Zt}n($n,Zn,Ur,Sn,4),Zn+=4,vn[0+Wt]=Zt}}else Zt=Ne(Kt,156)?Ne(Kt,128)?1:3:Ne(Kt,163)?2:0,Qr.Ob[0]=Zt,a(Ur,Sn,Zt,4),a(vn,0,Zt,4);Qr.Dd=Ne(Kt,142)?Ne(Kt,114)?Ne(Kt,183)?1:3:2:0}if(tn.m.Ka)return on(ar,7,"Premature end-of-partition0 encountered.");for(;ar.ja<ar.za;++ar.ja){if(tn=Oe,Kt=(ht=ar).rb[ht.sb-1],Ur=ht.rb[ht.sb+ht.ja],Jt=ht.ya[ht.aa+ht.ja],Sn=ht.kc?Jt.Ad:0)Kt.la=Ur.la=0,Jt.Za||(Kt.Na=Ur.Na=0),Jt.Hc=0,Jt.Gc=0,Jt.ia=0;else{var kr,yr;if(Kt=Ur,Ur=tn,Sn=ht.Pa.Xc,vn=ht.ya[ht.aa+ht.ja],Qr=ht.pb[vn.$b],Wt=vn.ad,$n=0,Zn=ht.rb[ht.sb-1],Zt=xn=0,a(Wt,$n,0,384),vn.Za)var En=0,fa=Sn[3];else{hr=o(16);var Dr=Kt.Na+Zn.Na;if(Dr=DA(Ur,Sn[1],Dr,Qr.Eb,0,hr,0),Kt.Na=Zn.Na=(0<Dr)+0,1<Dr)Vn(hr,0,Wt,$n);else{var cs=hr[0]+3>>3;for(hr=0;256>hr;hr+=16)Wt[$n+hr]=cs}En=1,fa=Sn[0]}var Br=15&Kt.la,yn=15&Zn.la;for(hr=0;4>hr;++hr){var Cs=1&yn;for(cs=yr=0;4>cs;++cs)Br=Br>>1|(Cs=(Dr=DA(Ur,fa,Dr=Cs+(1&Br),Qr.Sc,En,Wt,$n))>En)<<7,yr=yr<<2|(3<Dr?3:1<Dr?2:Wt[$n+0]!=0),$n+=16;Br>>=4,yn=yn>>1|Cs<<7,xn=(xn<<8|yr)>>>0}for(fa=Br,En=yn>>4,kr=0;4>kr;kr+=2){for(yr=0,Br=Kt.la>>4+kr,yn=Zn.la>>4+kr,hr=0;2>hr;++hr){for(Cs=1&yn,cs=0;2>cs;++cs)Dr=Cs+(1&Br),Br=Br>>1|(Cs=0<(Dr=DA(Ur,Sn[2],Dr,Qr.Qc,0,Wt,$n)))<<3,yr=yr<<2|(3<Dr?3:1<Dr?2:Wt[$n+0]!=0),$n+=16;Br>>=2,yn=yn>>1|Cs<<5}Zt|=yr<<4*kr,fa|=Br<<4<<kr,En|=(240&yn)<<kr}Kt.la=fa,Zn.la=En,vn.Hc=xn,vn.Gc=Zt,vn.ia=43690&Zt?0:Qr.ia,Sn=!(xn|Zt)}if(0<ht.L&&(ht.wa[ht.Y+ht.ja]=ht.gd[Jt.$b][Jt.Za],ht.wa[ht.Y+ht.ja].La|=!Sn),tn.Ka)return on(ar,7,"Premature end-of-file encountered.")}if(sa(ar),ht=gn,tn=1,Jt=(Oe=ar).D,Kt=0<Oe.L&&Oe.M>=Oe.zb&&Oe.M<=Oe.Va,Oe.Aa==0)t:{if(Jt.M=Oe.M,Jt.uc=Kt,dr(Oe,Jt),tn=1,Jt=(yr=Oe.D).Nb,Kt=(Zt=ec[Oe.L])*Oe.R,Ur=Zt/2*Oe.B,hr=16*Jt*Oe.R,cs=8*Jt*Oe.B,Sn=Oe.sa,vn=Oe.ta-Kt+hr,Qr=Oe.qa,Wt=Oe.ra-Ur+cs,$n=Oe.Ha,Zn=Oe.Ia-Ur+cs,yn=(Br=yr.M)==0,xn=Br>=Oe.Va-1,Oe.Aa==2&&dr(Oe,yr),yr.uc)for(Cs=(Dr=Oe).D.M,e(Dr.D.uc),yr=Dr.yb;yr<Dr.Hb;++yr){En=yr,fa=Cs;var es=(Ns=(dn=Dr).D).Nb;kr=dn.R;var Ns=Ns.wa[Ns.Y+En],Ss=dn.sa,us=dn.ta+16*es*kr+16*En,ds=Ns.dd,_r=Ns.tc;if(_r!=0)if(e(3<=_r),dn.L==1)0<En&&Nu(Ss,us,kr,_r+4),Ns.La&&Eu(Ss,us,kr,_r),0<fa&&Cu(Ss,us,kr,_r+4),Ns.La&&Su(Ss,us,kr,_r);else{var Es=dn.B,ha=dn.qa,Co=dn.ra+8*es*Es+8*En,Za=dn.Ha,dn=dn.Ia+8*es*Es+8*En;es=Ns.ld,0<En&&(xr(Ss,us,kr,_r+4,ds,es),PA(ha,Co,Za,dn,Es,_r+4,ds,es)),Ns.La&&(ai(Ss,us,kr,_r,ds,es),Bu(ha,Co,Za,dn,Es,_r,ds,es)),0<fa&&(en(Ss,us,kr,_r+4,ds,es),Ia(ha,Co,Za,dn,Es,_r+4,ds,es)),Ns.La&&(Hi(Ss,us,kr,_r,ds,es),Af(ha,Co,Za,dn,Es,_r,ds,es))}}if(Oe.ia&&alert("todo:DitherRow"),ht.put!=null){if(yr=16*Br,Br=16*(Br+1),yn?(ht.y=Oe.sa,ht.O=Oe.ta+hr,ht.f=Oe.qa,ht.N=Oe.ra+cs,ht.ea=Oe.Ha,ht.W=Oe.Ia+cs):(yr-=Zt,ht.y=Sn,ht.O=vn,ht.f=Qr,ht.N=Wt,ht.ea=$n,ht.W=Zn),xn||(Br-=Zt),Br>ht.o&&(Br=ht.o),ht.F=null,ht.J=null,Oe.Fa!=null&&0<Oe.Fa.length&&yr<Br&&(ht.J=cn(Oe,ht,yr,Br-yr),ht.F=Oe.mb,ht.F==null&&ht.F.length==0)){tn=on(Oe,3,"Could not decode alpha data.");break t}yr<ht.j&&(Zt=ht.j-yr,yr=ht.j,e(!(1&Zt)),ht.O+=Oe.R*Zt,ht.N+=Oe.B*(Zt>>1),ht.W+=Oe.B*(Zt>>1),ht.F!=null&&(ht.J+=ht.width*Zt)),yr<Br&&(ht.O+=ht.v,ht.N+=ht.v>>1,ht.W+=ht.v>>1,ht.F!=null&&(ht.J+=ht.v),ht.ka=yr-ht.j,ht.U=ht.va-ht.v,ht.T=Br-yr,tn=ht.put(ht))}Jt+1!=Oe.Ic||xn||(n(Oe.sa,Oe.ta-Kt,Sn,vn+16*Oe.R,Kt),n(Oe.qa,Oe.ra-Ur,Qr,Wt+8*Oe.B,Ur),n(Oe.Ha,Oe.Ia-Ur,$n,Zn+8*Oe.B,Ur))}if(!tn)return on(ar,6,"Output aborted.")}return 1}(he,je)),je.bc!=null&&je.bc(je),Be&=1}return Be?(he.cb=0,Be):0})(g,R)||(N=g.a)}}else N=g.a}N==0&&ae.Oa!=null&&ae.Oa.fd&&(N=ri(ae.ba))}ae=N}se=ae!=0?null:11>se?ie.f.RGBA.eb:ie.f.kb.y}else se=null;return se};var jf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(D,K){for(var U="",F=0;F<4;F++)U+=String.fromCharCode(D[K++]);return U}function i(D,K){return D[K+0]|D[K+1]<<8}function d(D,K){return(D[K+0]|D[K+1]<<8|D[K+2]<<16)>>>0}function h(D,K){return(D[K+0]|D[K+1]<<8|D[K+2]<<16|D[K+3]<<24)>>>0}new A;var f=[0],w=[0],j=[],B=new A,p=t,x=function(D,K){var U={},F=0,k=!1,T=0,P=0;if(U.frames=[],!function(O,z){for(var ne=0;ne<4;ne++)if(O[z+ne]!="RIFF".charCodeAt(ne))return!0;return!1}(D,K)){for(h(D,K+=4),K+=8;K<D.length;){var $=u(D,K),ee=h(D,K+=4);K+=4;var V=ee+(1&ee);switch($){case"VP8 ":case"VP8L":U.frames[F]===void 0&&(U.frames[F]={}),(oe=U.frames[F]).src_off=k?P:K-8,oe.src_size=T+ee+8,F++,k&&(k=!1,T=0,P=0);break;case"VP8X":(oe=U.header={}).feature_flags=D[K];var W=K+4;oe.canvas_width=1+d(D,W),W+=3,oe.canvas_height=1+d(D,W),W+=3;break;case"ALPH":k=!0,T=V+8,P=K-8;break;case"ANIM":(oe=U.header).bgcolor=h(D,K),W=K+4,oe.loop_count=i(D,W),W+=2;break;case"ANMF":var te,oe;(oe=U.frames[F]={}).offset_x=2*d(D,K),K+=3,oe.offset_y=2*d(D,K),K+=3,oe.width=1+d(D,K),K+=3,oe.height=1+d(D,K),K+=3,oe.duration=d(D,K),K+=3,te=D[K++],oe.dispose=1&te,oe.blend=te>>1&1}$!="ANMF"&&(K+=V)}return U}}(p,0);x.response=p,x.rgbaoutput=!0,x.dataurl=!1;var C=x.header?x.header:null,S=x.frames?x.frames:null;if(C){C.loop_counter=C.loop_count,f=[C.canvas_height],w=[C.canvas_width];for(var E=0;E<S.length&&S[E].blend!=0;E++);}var I=S[0],H=B.WebPDecodeRGBA(p,I.src_off,I.src_size,w,f);I.rgba=H,I.imgwidth=w[0],I.imgheight=f[0];for(var M=0;M<w[0]*f[0]*4;M++)j[M]=H[M];return this.width=w,this.height=f,this.data=j,this}(function(t){var e,r,n,a,o,l,c,A,u,i=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new A,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new l,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new l,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,l=this.internal.Point,c=this.internal.Rectangle,A=this.internal.Matrix,u=new i}]);var d=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=O;Object.defineProperty(this,"pdf",{get:function(){return z}});var ne=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ne},set:function(_e){ne=!!_e}});var Z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Z},set:function(_e){Z=!!_e}});var q=0;Object.defineProperty(this,"posX",{get:function(){return q},set:function(_e){isNaN(_e)||(q=_e)}});var Ae=0;Object.defineProperty(this,"posY",{get:function(){return Ae},set:function(_e){isNaN(_e)||(Ae=_e)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(_e){var de;typeof _e=="number"?de=[_e,_e,_e,_e]:((de=new Array(4))[0]=_e[0],de[1]=_e.length>=2?_e[1]:de[0],de[2]=_e.length>=3?_e[2]:de[0],de[3]=_e.length>=4?_e[3]:de[1]),u.margin=de}});var ve=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ve},set:function(_e){ve=_e}});var be=0;Object.defineProperty(this,"lastBreak",{get:function(){return be},set:function(_e){be=_e}});var Ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ne},set:function(_e){Ne=_e}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(_e){_e instanceof i&&(u=_e)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(_e){u.path=_e}});var Te=[];Object.defineProperty(this,"ctxStack",{get:function(){return Te},set:function(_e){Te=_e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(_e){var de;de=h(_e),this.ctx.fillStyle=de.style,this.ctx.isFillTransparent=de.a===0,this.ctx.fillOpacity=de.a,this.pdf.setFillColor(de.r,de.g,de.b,{a:de.a}),this.pdf.setTextColor(de.r,de.g,de.b,{a:de.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(_e){var de=h(_e);this.ctx.strokeStyle=de.style,this.ctx.isStrokeTransparent=de.a===0,this.ctx.strokeOpacity=de.a,de.a===0?this.pdf.setDrawColor(255,255,255):(de.a,this.pdf.setDrawColor(de.r,de.g,de.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(_e){["butt","round","square"].indexOf(_e)!==-1&&(this.ctx.lineCap=_e,this.pdf.setLineCap(_e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(_e){isNaN(_e)||(this.ctx.lineWidth=_e,this.pdf.setLineWidth(_e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(_e){["bevel","round","miter"].indexOf(_e)!==-1&&(this.ctx.lineJoin=_e,this.pdf.setLineJoin(_e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(_e){isNaN(_e)||(this.ctx.miterLimit=_e,this.pdf.setMiterLimit(_e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(_e){this.ctx.textBaseline=_e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(_e){["right","end","center","left","start"].indexOf(_e)!==-1&&(this.ctx.textAlign=_e)}});var De=null,We=null;Object.defineProperty(this,"fontFaces",{get:function(){return We},set:function(_e){De=null,We=_e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(_e){var de;if(this.ctx.font=_e,(de=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(_e))!==null){var Ut=de[1];de[2];var dt=de[3],ot=de[4];de[5];var ze=de[6],gt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ot)[2];ot=Math.floor(gt==="px"?parseFloat(ot)*this.pdf.internal.scaleFactor:gt==="em"?parseFloat(ot)*this.pdf.getFontSize():parseFloat(ot)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ot);var et=function(Pe){var Xe,Ct,bt=[],ft=Pe.trim();if(ft==="")return _0;if(ft in p1)return[p1[ft]];for(;ft!=="";){switch(Ct=null,Xe=(ft=v1(ft)).charAt(0)){case'"':case"'":Ct=IU(ft.substring(1),Xe);break;default:Ct=LU(ft)}if(Ct===null||(bt.push(Ct[0]),(ft=v1(Ct[1]))!==""&&ft.charAt(0)!==","))return _0;ft=ft.replace(/^,/,"")}return bt}(ze);if(this.fontFaces){var It=function(Pe,Xe){if(De===null){var Ct=function(bt){var ft=[];return Object.keys(bt).forEach(function(Me){bt[Me].forEach(function(ct){var nt=null;switch(ct){case"bold":nt={family:Me,weight:"bold"};break;case"italic":nt={family:Me,style:"italic"};break;case"bolditalic":nt={family:Me,weight:"bold",style:"italic"};break;case"":case"normal":nt={family:Me}}nt!==null&&(nt.ref={name:Me,style:ct},ft.push(nt))})}),ft}(Pe.getFontList());De=function(bt){for(var ft={},Me=0;Me<bt.length;++Me){var ct=E0(bt[Me]),nt=ct.family,ut=ct.stretch,at=ct.style,Le=ct.weight;ft[nt]=ft[nt]||{},ft[nt][ut]=ft[nt][ut]||{},ft[nt][ut][at]=ft[nt][ut][at]||{},ft[nt][ut][at][Le]=ct}return ft}(Ct.concat(Xe))}return De}(this.pdf,this.fontFaces),vt=et.map(function(Pe){return{family:Pe,stretch:"normal",weight:dt,style:Ut}}),Tt=function(Pe,Xe,Ct){for(var bt=(Ct=Ct||{}).defaultFontFamily||"times",ft=Object.assign({},QU,Ct.genericFontFamilies||{}),Me=null,ct=null,nt=0;nt<Xe.length;++nt)if(ft[(Me=E0(Xe[nt])).family]&&(Me.family=ft[Me.family]),Pe.hasOwnProperty(Me.family)){ct=Pe[Me.family];break}if(!(ct=ct||Pe[bt]))throw new Error("Could not find a font-family for the rule '"+g1(Me)+"' and default family '"+bt+"'.");if(ct=function(ut,at){if(at[ut])return at[ut];var Le=Wg[ut],lt=Le<=Wg.normal?-1:1,tt=m1(at,jB,Le,lt);if(!tt)throw new Error("Could not find a matching font-stretch value for "+ut);return tt}(Me.stretch,ct),ct=function(ut,at){if(at[ut])return at[ut];for(var Le=bB[ut],lt=0;lt<Le.length;++lt)if(at[Le[lt]])return at[Le[lt]];throw new Error("Could not find a matching font-style for "+ut)}(Me.style,ct),!(ct=function(ut,at){if(at[ut])return at[ut];if(ut===400&&at[500])return at[500];if(ut===500&&at[400])return at[400];var Le=UU[ut],lt=m1(at,BB,Le,ut<400?-1:1);if(!lt)throw new Error("Could not find a matching font-weight for value "+ut);return lt}(Me.weight,ct)))throw new Error("Failed to resolve a font for the rule '"+g1(Me)+"'.");return ct}(It,vt);this.pdf.setFont(Tt.ref.name,Tt.ref.style)}else{var Se="";(dt==="bold"||parseInt(dt,10)>=700||Ut==="bold")&&(Se="bold"),Ut==="italic"&&(Se+="italic"),Se.length===0&&(Se="normal");for(var pe="",Ie={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ke=0;ke<et.length;ke++){if(this.pdf.internal.getFont(et[ke],Se,{noFallback:!0,disableWarning:!0})!==void 0){pe=et[ke];break}if(Se==="bolditalic"&&this.pdf.internal.getFont(et[ke],"bold",{noFallback:!0,disableWarning:!0})!==void 0)pe=et[ke],Se="bold";else if(this.pdf.internal.getFont(et[ke],"normal",{noFallback:!0,disableWarning:!0})!==void 0){pe=et[ke],Se="normal";break}}if(pe===""){for(var Ye=0;Ye<et.length;Ye++)if(Ie[et[Ye]]){pe=Ie[et[Ye]];break}}pe=pe===""?"Times":pe,this.pdf.setFont(pe,Se)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(_e){this.ctx.globalCompositeOperation=_e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(_e){this.ctx.globalAlpha=_e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(_e){this.ctx.lineDashOffset=_e,oe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(_e){this.ctx.lineDash=_e,oe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(_e){this.ctx.ignoreClearRect=!!_e}})};d.prototype.setLineDash=function(O){this.lineDash=O},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){S.call(this,"fill",!1)},d.prototype.stroke=function(){S.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(O,z){if(isNaN(O)||isNaN(z))throw Ir.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ne=this.ctx.transform.applyToPoint(new l(O,z));this.path.push({type:"mt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new l(O,z)},d.prototype.closePath=function(){var O=new l(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&Nr(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){O=new l(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(O.x,O.y)},d.prototype.lineTo=function(O,z){if(isNaN(O)||isNaN(z))throw Ir.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ne=this.ctx.transform.applyToPoint(new l(O,z));this.path.push({type:"lt",x:ne.x,y:ne.y}),this.ctx.lastPoint=new l(ne.x,ne.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),S.call(this,null,!0)},d.prototype.quadraticCurveTo=function(O,z,ne,Z){if(isNaN(ne)||isNaN(Z)||isNaN(O)||isNaN(z))throw Ir.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var q=this.ctx.transform.applyToPoint(new l(ne,Z)),Ae=this.ctx.transform.applyToPoint(new l(O,z));this.path.push({type:"qct",x1:Ae.x,y1:Ae.y,x:q.x,y:q.y}),this.ctx.lastPoint=new l(q.x,q.y)},d.prototype.bezierCurveTo=function(O,z,ne,Z,q,Ae){if(isNaN(q)||isNaN(Ae)||isNaN(O)||isNaN(z)||isNaN(ne)||isNaN(Z))throw Ir.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ve=this.ctx.transform.applyToPoint(new l(q,Ae)),be=this.ctx.transform.applyToPoint(new l(O,z)),Ne=this.ctx.transform.applyToPoint(new l(ne,Z));this.path.push({type:"bct",x1:be.x,y1:be.y,x2:Ne.x,y2:Ne.y,x:ve.x,y:ve.y}),this.ctx.lastPoint=new l(ve.x,ve.y)},d.prototype.arc=function(O,z,ne,Z,q,Ae){if(isNaN(O)||isNaN(z)||isNaN(ne)||isNaN(Z)||isNaN(q))throw Ir.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ae=!!Ae,!this.ctx.transform.isIdentity){var ve=this.ctx.transform.applyToPoint(new l(O,z));O=ve.x,z=ve.y;var be=this.ctx.transform.applyToPoint(new l(0,ne)),Ne=this.ctx.transform.applyToPoint(new l(0,0));ne=Math.sqrt(Math.pow(be.x-Ne.x,2)+Math.pow(be.y-Ne.y,2))}Math.abs(q-Z)>=2*Math.PI&&(Z=0,q=2*Math.PI),this.path.push({type:"arc",x:O,y:z,radius:ne,startAngle:Z,endAngle:q,counterclockwise:Ae})},d.prototype.arcTo=function(O,z,ne,Z,q){throw new Error("arcTo not implemented.")},d.prototype.rect=function(O,z,ne,Z){if(isNaN(O)||isNaN(z)||isNaN(ne)||isNaN(Z))throw Ir.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,z),this.lineTo(O+ne,z),this.lineTo(O+ne,z+Z),this.lineTo(O,z+Z),this.lineTo(O,z),this.lineTo(O+ne,z),this.lineTo(O,z)},d.prototype.fillRect=function(O,z,ne,Z){if(isNaN(O)||isNaN(z)||isNaN(ne)||isNaN(Z))throw Ir.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var q={};this.lineCap!=="butt"&&(q.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(q.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,z,ne,Z),this.fill(),q.hasOwnProperty("lineCap")&&(this.lineCap=q.lineCap),q.hasOwnProperty("lineJoin")&&(this.lineJoin=q.lineJoin)}},d.prototype.strokeRect=function(O,z,ne,Z){if(isNaN(O)||isNaN(z)||isNaN(ne)||isNaN(Z))throw Ir.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");w.call(this)||(this.beginPath(),this.rect(O,z,ne,Z),this.stroke())},d.prototype.clearRect=function(O,z,ne,Z){if(isNaN(O)||isNaN(z)||isNaN(ne)||isNaN(Z))throw Ir.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,z,ne,Z))},d.prototype.save=function(O){O=typeof O!="boolean"||O;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var Z=new i(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Z}},d.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,ne=0;ne<this.pdf.internal.getNumberOfPages();ne++)this.pdf.setPage(ne+1),this.pdf.internal.out("Q");this.pdf.setPage(z),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(O){var z,ne,Z,q;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))z=0,ne=0,Z=0,q=0;else{var Ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(Ae!==null)z=parseInt(Ae[1]),ne=parseInt(Ae[2]),Z=parseInt(Ae[3]),q=1;else if((Ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)z=parseInt(Ae[1]),ne=parseInt(Ae[2]),Z=parseInt(Ae[3]),q=parseFloat(Ae[4]);else{if(q=1,typeof O=="string"&&O.charAt(0)!=="#"){var ve=new mB(O);O=ve.ok?ve.toHex():"#000000"}O.length===4?(z=O.substring(1,2),z+=z,ne=O.substring(2,3),ne+=ne,Z=O.substring(3,4),Z+=Z):(z=O.substring(1,3),ne=O.substring(3,5),Z=O.substring(5,7)),z=parseInt(z,16),ne=parseInt(ne,16),Z=parseInt(Z,16)}}return{r:z,g:ne,b:Z,a:q,style:O}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},w=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(O,z,ne,Z){if(isNaN(z)||isNaN(ne)||typeof O!="string")throw Ir.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Z=isNaN(Z)?void 0:Z,!f.call(this)){var q=V(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;F.call(this,{text:O,x:z,y:ne,scale:Ae,angle:q,align:this.textAlign,maxWidth:Z})}},d.prototype.strokeText=function(O,z,ne,Z){if(isNaN(z)||isNaN(ne)||typeof O!="string")throw Ir.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!w.call(this)){Z=isNaN(Z)?void 0:Z;var q=V(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;F.call(this,{text:O,x:z,y:ne,scale:Ae,renderingMode:"stroke",angle:q,align:this.textAlign,maxWidth:Z})}},d.prototype.measureText=function(O){if(typeof O!="string")throw Ir.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,ne=this.pdf.internal.scaleFactor,Z=z.internal.getFontSize(),q=z.getStringUnitWidth(O)*Z/z.internal.scaleFactor;return new function(Ae){var ve=(Ae=Ae||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ve}}),this}({width:q*=Math.round(96*ne/72*1e4)/1e4})},d.prototype.scale=function(O,z){if(isNaN(O)||isNaN(z))throw Ir.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ne=new A(O,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(ne)},d.prototype.rotate=function(O){if(isNaN(O))throw Ir.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new A(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},d.prototype.translate=function(O,z){if(isNaN(O)||isNaN(z))throw Ir.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ne=new A(1,0,0,1,O,z);this.ctx.transform=this.ctx.transform.multiply(ne)},d.prototype.transform=function(O,z,ne,Z,q,Ae){if(isNaN(O)||isNaN(z)||isNaN(ne)||isNaN(Z)||isNaN(q)||isNaN(Ae))throw Ir.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ve=new A(O,z,ne,Z,q,Ae);this.ctx.transform=this.ctx.transform.multiply(ve)},d.prototype.setTransform=function(O,z,ne,Z,q,Ae){O=isNaN(O)?1:O,z=isNaN(z)?0:z,ne=isNaN(ne)?0:ne,Z=isNaN(Z)?1:Z,q=isNaN(q)?0:q,Ae=isNaN(Ae)?0:Ae,this.ctx.transform=new A(O,z,ne,Z,q,Ae)};var j=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(O,z,ne,Z,q,Ae,ve,be,Ne){var Te=this.pdf.getImageProperties(O),De=1,We=1,_e=1,de=1;Z!==void 0&&be!==void 0&&(_e=be/Z,de=Ne/q,De=Te.width/Z*be/Z,We=Te.height/q*Ne/q),Ae===void 0&&(Ae=z,ve=ne,z=0,ne=0),Z!==void 0&&be===void 0&&(be=Z,Ne=q),Z===void 0&&be===void 0&&(be=Te.width,Ne=Te.height);for(var Ut,dt=this.ctx.transform.decompose(),ot=V(dt.rotate.shx),ze=new A,gt=(ze=(ze=(ze=ze.multiply(dt.translate)).multiply(dt.skew)).multiply(dt.scale)).applyToRectangle(new c(Ae-z*_e,ve-ne*de,Z*De,q*We)),et=B.call(this,gt),It=[],vt=0;vt<et.length;vt+=1)It.indexOf(et[vt])===-1&&It.push(et[vt]);if(C(It),this.autoPaging)for(var Tt=It[0],Se=It[It.length-1],pe=Tt;pe<Se+1;pe++){this.pdf.setPage(pe);var Ie=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ke=pe===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xe=pe===1?0:Ye+(pe-2)*Pe;if(this.ctx.clip_path.length!==0){var Ct=this.path;Ut=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(Ut,this.posX+this.margin[3],-Xe+ke+this.ctx.prevPageLastElemOffset),E.call(this,"fill",!0),this.path=Ct}var bt=JSON.parse(JSON.stringify(gt));bt=x([bt],this.posX+this.margin[3],-Xe+ke+this.ctx.prevPageLastElemOffset)[0];var ft=(pe>Tt||pe<Se)&&j.call(this);ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ie,Pe,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",bt.x,bt.y,bt.w,bt.h,null,null,ot),ft&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(O,"JPEG",gt.x,gt.y,gt.w,gt.h,null,null,ot)};var B=function(O,z,ne){var Z=[];z=z||this.pdf.internal.pageSize.width,ne=ne||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var q=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":Z.push(Math.floor((O.y+q)/ne)+1);break;case"arc":Z.push(Math.floor((O.y+q-O.radius)/ne)+1),Z.push(Math.floor((O.y+q+O.radius)/ne)+1);break;case"qct":var Ae=W(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);Z.push(Math.floor((Ae.y+q)/ne)+1),Z.push(Math.floor((Ae.y+Ae.h+q)/ne)+1);break;case"bct":var ve=te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);Z.push(Math.floor((ve.y+q)/ne)+1),Z.push(Math.floor((ve.y+ve.h+q)/ne)+1);break;case"rect":Z.push(Math.floor((O.y+q)/ne)+1),Z.push(Math.floor((O.y+O.h+q)/ne)+1)}for(var be=0;be<Z.length;be+=1)for(;this.pdf.internal.getNumberOfPages()<Z[be];)p.call(this);return Z},p=function(){var O=this.fillStyle,z=this.strokeStyle,ne=this.font,Z=this.lineCap,q=this.lineWidth,Ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=z,this.font=ne,this.lineCap=Z,this.lineWidth=q,this.lineJoin=Ae},x=function(O,z,ne){for(var Z=0;Z<O.length;Z++)switch(O[Z].type){case"bct":O[Z].x2+=z,O[Z].y2+=ne;case"qct":O[Z].x1+=z,O[Z].y1+=ne;default:O[Z].x+=z,O[Z].y+=ne}return O},C=function(O){return O.sort(function(z,ne){return z-ne})},S=function(O,z){for(var ne,Z,q=this.fillStyle,Ae=this.strokeStyle,ve=this.lineCap,be=this.lineWidth,Ne=Math.abs(be*this.ctx.transform.scaleX),Te=this.lineJoin,De=JSON.parse(JSON.stringify(this.path)),We=JSON.parse(JSON.stringify(this.path)),_e=[],de=0;de<We.length;de++)if(We[de].x!==void 0)for(var Ut=B.call(this,We[de]),dt=0;dt<Ut.length;dt+=1)_e.indexOf(Ut[dt])===-1&&_e.push(Ut[dt]);for(var ot=0;ot<_e.length;ot++)for(;this.pdf.internal.getNumberOfPages()<_e[ot];)p.call(this);if(C(_e),this.autoPaging)for(var ze=_e[0],gt=_e[_e.length-1],et=ze;et<gt+1;et++){this.pdf.setPage(et),this.fillStyle=q,this.strokeStyle=Ae,this.lineCap=ve,this.lineWidth=Ne,this.lineJoin=Te;var It=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],vt=et===1?this.posY+this.margin[0]:this.margin[0],Tt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Se=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pe=et===1?0:Tt+(et-2)*Se;if(this.ctx.clip_path.length!==0){var Ie=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(ne,this.posX+this.margin[3],-pe+vt+this.ctx.prevPageLastElemOffset),E.call(this,O,!0),this.path=Ie}if(Z=JSON.parse(JSON.stringify(De)),this.path=x(Z,this.posX+this.margin[3],-pe+vt+this.ctx.prevPageLastElemOffset),z===!1||et===0){var ke=(et>ze||et<gt)&&j.call(this);ke&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],It,Se,null).clip().discardPath()),E.call(this,O,z),ke&&this.pdf.restoreGraphicsState()}this.lineWidth=be}else this.lineWidth=Ne,E.call(this,O,z),this.lineWidth=be;this.path=De},E=function(O,z){if((O!=="stroke"||z||!w.call(this))&&(O==="stroke"||z||!f.call(this))){for(var ne,Z,q=[],Ae=this.path,ve=0;ve<Ae.length;ve++){var be=Ae[ve];switch(be.type){case"begin":q.push({begin:!0});break;case"close":q.push({close:!0});break;case"mt":q.push({start:be,deltas:[],abs:[]});break;case"lt":var Ne=q.length;if(Ae[ve-1]&&!isNaN(Ae[ve-1].x)&&(ne=[be.x-Ae[ve-1].x,be.y-Ae[ve-1].y],Ne>0)){for(;Ne>=0;Ne--)if(q[Ne-1].close!==!0&&q[Ne-1].begin!==!0){q[Ne-1].deltas.push(ne),q[Ne-1].abs.push(be);break}}break;case"bct":ne=[be.x1-Ae[ve-1].x,be.y1-Ae[ve-1].y,be.x2-Ae[ve-1].x,be.y2-Ae[ve-1].y,be.x-Ae[ve-1].x,be.y-Ae[ve-1].y],q[q.length-1].deltas.push(ne);break;case"qct":var Te=Ae[ve-1].x+2/3*(be.x1-Ae[ve-1].x),De=Ae[ve-1].y+2/3*(be.y1-Ae[ve-1].y),We=be.x+2/3*(be.x1-be.x),_e=be.y+2/3*(be.y1-be.y),de=be.x,Ut=be.y;ne=[Te-Ae[ve-1].x,De-Ae[ve-1].y,We-Ae[ve-1].x,_e-Ae[ve-1].y,de-Ae[ve-1].x,Ut-Ae[ve-1].y],q[q.length-1].deltas.push(ne);break;case"arc":q.push({deltas:[],abs:[],arc:!0}),Array.isArray(q[q.length-1].abs)&&q[q.length-1].abs.push(be)}}Z=z?null:O==="stroke"?"stroke":"fill";for(var dt=!1,ot=0;ot<q.length;ot++)if(q[ot].arc)for(var ze=q[ot].abs,gt=0;gt<ze.length;gt++){var et=ze[gt];et.type==="arc"?M.call(this,et.x,et.y,et.radius,et.startAngle,et.endAngle,et.counterclockwise,void 0,z,!dt):k.call(this,et.x,et.y),dt=!0}else if(q[ot].close===!0)this.pdf.internal.out("h"),dt=!1;else if(q[ot].begin!==!0){var It=q[ot].start.x,vt=q[ot].start.y;T.call(this,q[ot].deltas,It,vt),dt=!0}Z&&D.call(this,Z),z&&K.call(this)}},I=function(O){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ne=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-ne;case"top":return O+z-ne;case"hanging":return O+z-2*ne;case"middle":return O+z/2-ne;default:return O}},H=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(z,ne){this.colorStops.push([z,ne])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var M=function(O,z,ne,Z,q,Ae,ve,be,Ne){for(var Te=$.call(this,ne,Z,q,Ae),De=0;De<Te.length;De++){var We=Te[De];De===0&&(Ne?U.call(this,We.x1+O,We.y1+z):k.call(this,We.x1+O,We.y1+z)),P.call(this,O,z,We.x2,We.y2,We.x3,We.y3,We.x4,We.y4)}be?K.call(this):D.call(this,ve)},D=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},K=function(){this.pdf.clip(),this.pdf.discardPath()},U=function(O,z){this.pdf.internal.out(r(O)+" "+n(z)+" m")},F=function(O){var z;switch(O.align){case"right":case"end":z="right";break;case"center":z="center";break;default:z="left"}var ne=this.pdf.getTextDimensions(O.text),Z=I.call(this,O.y),q=H.call(this,Z)-ne.h,Ae=this.ctx.transform.applyToPoint(new l(O.x,Z)),ve=this.ctx.transform.decompose(),be=new A;be=(be=(be=be.multiply(ve.translate)).multiply(ve.skew)).multiply(ve.scale);for(var Ne,Te,De,We=this.ctx.transform.applyToRectangle(new c(O.x,Z,ne.w,ne.h)),_e=be.applyToRectangle(new c(O.x,q,ne.w,ne.h)),de=B.call(this,_e),Ut=[],dt=0;dt<de.length;dt+=1)Ut.indexOf(de[dt])===-1&&Ut.push(de[dt]);if(C(Ut),this.autoPaging)for(var ot=Ut[0],ze=Ut[Ut.length-1],gt=ot;gt<ze+1;gt++){this.pdf.setPage(gt);var et=gt===1?this.posY+this.margin[0]:this.margin[0],It=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],vt=this.pdf.internal.pageSize.height-this.margin[2],Tt=vt-this.margin[0],Se=this.pdf.internal.pageSize.width-this.margin[1],pe=Se-this.margin[3],Ie=gt===1?0:It+(gt-2)*Tt;if(this.ctx.clip_path.length!==0){var ke=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(Ne,this.posX+this.margin[3],-1*Ie+et),E.call(this,"fill",!0),this.path=ke}var Ye=x([JSON.parse(JSON.stringify(_e))],this.posX+this.margin[3],-Ie+et+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(Te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Te*O.scale),De=this.lineWidth,this.lineWidth=De*O.scale);var Pe=this.autoPaging!=="text";if(Pe||Ye.y+Ye.h<=vt){if(Pe||Ye.y>=et&&Ye.x<=Se){var Xe=Pe?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||Se-Ye.x)[0],Ct=x([JSON.parse(JSON.stringify(We))],this.posX+this.margin[3],-Ie+et+this.ctx.prevPageLastElemOffset)[0],bt=Pe&&(gt>ot||gt<ze)&&j.call(this);bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pe,Tt,null).clip().discardPath()),this.pdf.text(Xe,Ct.x,Ct.y,{angle:O.angle,align:z,renderingMode:O.renderingMode}),bt&&this.pdf.restoreGraphicsState()}}else Ye.y<vt&&(this.ctx.prevPageLastElemOffset+=vt-Ye.y);O.scale>=.01&&(this.pdf.setFontSize(Te),this.lineWidth=De)}else O.scale>=.01&&(Te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Te*O.scale),De=this.lineWidth,this.lineWidth=De*O.scale),this.pdf.text(O.text,Ae.x+this.posX,Ae.y+this.posY,{angle:O.angle,align:z,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(Te),this.lineWidth=De)},k=function(O,z,ne,Z){ne=ne||0,Z=Z||0,this.pdf.internal.out(r(O+ne)+" "+n(z+Z)+" l")},T=function(O,z,ne){return this.pdf.lines(O,z,ne,null,null)},P=function(O,z,ne,Z,q,Ae,ve,be){this.pdf.internal.out([e(a(ne+O)),e(o(Z+z)),e(a(q+O)),e(o(Ae+z)),e(a(ve+O)),e(o(be+z)),"c"].join(" "))},$=function(O,z,ne,Z){for(var q=2*Math.PI,Ae=Math.PI/2;z>ne;)z-=q;var ve=Math.abs(ne-z);ve<q&&Z&&(ve=q-ve);for(var be=[],Ne=Z?-1:1,Te=z;ve>1e-5;){var De=Te+Ne*Math.min(ve,Ae);be.push(ee.call(this,O,Te,De)),ve-=Math.abs(De-Te),Te=De}return be},ee=function(O,z,ne){var Z=(ne-z)/2,q=O*Math.cos(Z),Ae=O*Math.sin(Z),ve=q,be=-Ae,Ne=ve*ve+be*be,Te=Ne+ve*q+be*Ae,De=4/3*(Math.sqrt(2*Ne*Te)-Te)/(ve*Ae-be*q),We=ve-De*be,_e=be+De*ve,de=We,Ut=-_e,dt=Z+z,ot=Math.cos(dt),ze=Math.sin(dt);return{x1:O*Math.cos(z),y1:O*Math.sin(z),x2:We*ot-_e*ze,y2:We*ze+_e*ot,x3:de*ot-Ut*ze,y3:de*ze+Ut*ot,x4:O*Math.cos(ne),y4:O*Math.sin(ne)}},V=function(O){return 180*O/Math.PI},W=function(O,z,ne,Z,q,Ae){var ve=O+.5*(ne-O),be=z+.5*(Z-z),Ne=q+.5*(ne-q),Te=Ae+.5*(Z-Ae),De=Math.min(O,q,ve,Ne),We=Math.max(O,q,ve,Ne),_e=Math.min(z,Ae,be,Te),de=Math.max(z,Ae,be,Te);return new c(De,_e,We-De,de-_e)},te=function(O,z,ne,Z,q,Ae,ve,be){var Ne,Te,De,We,_e,de,Ut,dt,ot,ze,gt,et,It,vt,Tt=ne-O,Se=Z-z,pe=q-ne,Ie=Ae-Z,ke=ve-q,Ye=be-Ae;for(Te=0;Te<41;Te++)ot=(Ut=(De=O+(Ne=Te/40)*Tt)+Ne*((_e=ne+Ne*pe)-De))+Ne*(_e+Ne*(q+Ne*ke-_e)-Ut),ze=(dt=(We=z+Ne*Se)+Ne*((de=Z+Ne*Ie)-We))+Ne*(de+Ne*(Ae+Ne*Ye-de)-dt),Te==0?(gt=ot,et=ze,It=ot,vt=ze):(gt=Math.min(gt,ot),et=Math.min(et,ze),It=Math.max(It,ot),vt=Math.max(vt,ze));return new c(Math.round(gt),Math.round(et),Math.round(It-gt),Math.round(vt-et))},oe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,z,ne=(O=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:z}));this.prevLineDash!==ne&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ne)}}})(Dt.API),function(t){var e=function(l){var c,A,u,i,d,h,f,w,j,B;for(A=[],u=0,i=(l+=c="\0\0\0\0".slice(l.length%4||4)).length;i>u;u+=4)(d=(l.charCodeAt(u)<<24)+(l.charCodeAt(u+1)<<16)+(l.charCodeAt(u+2)<<8)+l.charCodeAt(u+3))!==0?(h=(d=((d=((d=((d=(d-(B=d%85))/85)-(j=d%85))/85)-(w=d%85))/85)-(f=d%85))/85)%85,A.push(h+33,f+33,w+33,j+33,B+33)):A.push(122);return function(p,x){for(var C=x;C>0;C--)p.pop()}(A,c.length),String.fromCharCode.apply(String,A)+"~>"},r=function(l){var c,A,u,i,d,h=String,f="length",w=255,j="charCodeAt",B="slice",p="replace";for(l[B](-2),l=l[B](0,-2)[p](/\s/g,"")[p]("z","!!!!!"),u=[],i=0,d=(l+=c="uuuuu"[B](l[f]%5||5))[f];d>i;i+=5)A=52200625*(l[j](i)-33)+614125*(l[j](i+1)-33)+7225*(l[j](i+2)-33)+85*(l[j](i+3)-33)+(l[j](i+4)-33),u.push(w&A>>24,w&A>>16,w&A>>8,w&A);return function(x,C){for(var S=C;S>0;S--)x.pop()}(u,c[f]),h.fromCharCode.apply(h,u)},n=function(l){return l.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(l){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),c.test(l)===!1)return"";for(var A="",u=0;u<l.length;u+=2)A+=String.fromCharCode("0x"+(l[u]+l[u+1]));return A},o=function(l){for(var c=new Uint8Array(l.length),A=l.length;A--;)c[A]=l.charCodeAt(A);return(c=Hg(c)).reduce(function(u,i){return u+String.fromCharCode(i)},"")};t.processDataByFilters=function(l,c){var A=0,u=l||"",i=[];for(typeof(c=c||[])=="string"&&(c=[c]),A=0;A<c.length;A+=1)switch(c[A]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),i.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),i.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),i.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),i.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=o(u),i.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[A]+'" is not implemented')}return{data:u,reverseChain:i.reverse().join(" ")}}}(Dt.API),function(t){t.loadFile=function(e,r,n){return function(a,o,l){o=o!==!1,l=typeof l=="function"?l:function(){};var c=void 0;try{c=function(A,u,i){var d=new XMLHttpRequest,h=0,f=function(w){var j=w.length,B=[],p=String.fromCharCode;for(h=0;h<j;h+=1)B.push(p(255&w.charCodeAt(h)));return B.join("")};if(d.open("GET",A,!u),d.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(d.onload=function(){d.status===200?i(f(this.responseText)):i(void 0)}),d.send(null),u&&d.status===200)return f(d.responseText)}(a,o,l)}catch{}return c}(e,r,n)},t.loadImageFile=t.loadFile}(Dt.API),function(t){function e(){return(Vt.html2canvas?Promise.resolve(Vt.html2canvas):wA(()=>import("./html2canvas-Dzbnu-ot.js").then(c=>c.h),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function r(){return(Vt.DOMPurify?Promise.resolve(Vt.DOMPurify):wA(()=>import("dompurify"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var n=function(c){var A=Nr(c);return A==="undefined"?"undefined":A==="string"||c instanceof String?"string":A==="number"||c instanceof Number?"number":A==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":A==="object"?"object":"unknown"},a=function(c,A){var u=document.createElement(c);for(var i in A.className&&(u.className=A.className),A.innerHTML&&A.dompurify&&(u.innerHTML=A.dompurify.sanitize(A.innerHTML)),A.style)u.style[i]=A.style[i];return u},o=function c(A,u){for(var i=A.nodeType===3?document.createTextNode(A.nodeValue):A.cloneNode(!1),d=A.firstChild;d;d=d.nextSibling)u!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||i.appendChild(c(d,u));return A.nodeType===1&&(A.nodeName==="CANVAS"?(i.width=A.width,i.height=A.height,i.getContext("2d").drawImage(A,0,0)):A.nodeName!=="TEXTAREA"&&A.nodeName!=="SELECT"||(i.value=A.value),i.addEventListener("load",function(){i.scrollTop=A.scrollTop,i.scrollLeft=A.scrollLeft},!0)),i},l=function c(A){var u=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),i=c.convert(Promise.resolve(),u);return(i=i.setProgress(1,c,1,[c])).set(A)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(c,A){return c.__proto__=A||l.prototype,c},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(c,A){return this.then(function(){switch(A=A||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c),A){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:c,dompurify:u})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},l.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},A=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);A.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(A),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(A){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,A(this.prop.container,u)}).then(function(A){(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(A){var u=this.opt.jsPDF,i=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=i,i)for(var f=0;f<i.length;++f){var w=i[f],j=w.src.find(function(B){return B.format==="truetype"});j&&u.addFont(j.url,w.ref.name,w.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,u.context2d.save(!0),A(this.prop.container,h)}).then(function(A){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(c,A,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(c,A):this.outputPdf(c,A)},l.prototype.outputPdf=function(c,A){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,A)})},l.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},l.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(c){if(n(c)!=="object")return this;var A=Object.keys(c||{}).map(function(u){if(u in l.template.prop)return function(){this.prop[u]=c[u]};switch(u){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[u]=c[u]}}},this);return this.then(function(){return this.thenList(A)})},l.prototype.get=function(c,A){return this.then(function(){var u=c in l.template.prop?this.prop[c]:this.opt[c];return A?A(u):u})},l.prototype.setMargin=function(c){return this.then(function(){switch(n(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},l.prototype.setPageSize=function(c){function A(u,i){return Math.floor(u*i/72*96)}return this.then(function(){(c=c||Dt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:A(c.inner.width,c.k),height:A(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},l.prototype.setProgress=function(c,A,u,i){return c!=null&&(this.progress.val=c),A!=null&&(this.progress.state=A),u!=null&&(this.progress.n=u),i!=null&&(this.progress.stack=i),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(c,A,u,i){return this.setProgress(c?this.progress.val+c:null,A||null,u?this.progress.n+u:null,i?this.progress.stack.concat(i):null)},l.prototype.then=function(c,A){var u=this;return this.thenCore(c,A,function(i,d){return u.updateProgress(null,null,1,[i]),Promise.prototype.then.call(this,function(h){return u.updateProgress(null,i),h}).then(i,d).then(function(h){return u.updateProgress(1),h})})},l.prototype.thenCore=function(c,A,u){u=u||Promise.prototype.then;var i=this;c&&(c=c.bind(i)),A&&(A=A.bind(i));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?i:l.convert(Object.assign({},i),Promise.prototype),h=u.call(d,c,A);return l.convert(h,i.__proto__)},l.prototype.thenExternal=function(c,A){return Promise.prototype.then.call(this,c,A)},l.prototype.thenList=function(c){var A=this;return c.forEach(function(u){A=A.thenCore(u)}),A},l.prototype.catch=function(c){c&&(c=c.bind(this));var A=Promise.prototype.catch.call(this,c);return l.convert(A,this)},l.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},l.prototype.error=function(c){return this.then(function(){throw new Error(c)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,Dt.getPageSize=function(c,A,u){if(Nr(c)==="object"){var i=c;c=i.orientation,A=i.unit||A,u=i.format||u}A=A||"mm",u=u||"a4",c=(""+(c||"P")).toLowerCase();var d,h=(""+u).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(A){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+A}var w,j=0,B=0;if(f.hasOwnProperty(h))j=f[h][1]/d,B=f[h][0]/d;else try{j=u[1],B=u[0]}catch{throw new Error("Invalid format: "+u)}if(c==="p"||c==="portrait")c="p",B>j&&(w=B,B=j,j=w);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",j>B&&(w=B,B=j,j=w)}return{width:B,height:j,unit:A,k:d,orientation:c}},t.html=function(c,A){(A=A||{}).callback=A.callback||function(){},A.html2canvas=A.html2canvas||{},A.html2canvas.canvas=A.html2canvas.canvas||this.canvas,A.jsPDF=A.jsPDF||this,A.fontFaces=A.fontFaces?A.fontFaces.map(E0):null;var u=new l(A);return A.worker?u:u.from(c).doCallback()}}(Dt.API),Dt.API.addJS=function(t){return y1=t,this.internal.events.subscribe("postPutResources",function(){yh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(yh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),x1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+y1+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){yh!==void 0&&x1!==void 0&&this.internal.out("/Names <</JavaScript "+yh+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),o=0;o<a.length;o++){var l=a[o],c=n.exec(l);if(c!=null){var A=c[1];r.internal.newObjectDeferredBegin(A,!1)}r.internal.write(l)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,i=[];for(o=0;o<u;o++){var d=r.internal.newObject();i.push(d);var h=r.internal.getPageInfo(o+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var f=r.internal.newObject();for(r.internal.write("<< /Names [ "),o=0;o<i.length;o++)r.internal.write("(page_"+(o+1)+")"+i[o]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+f+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,o){var l={title:a,options:o,children:[]};return n==null&&(n=this.root),n.children.push(l),l},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<n.children.length;o++){var l=n.children[o];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(n)),o>0&&this.line("/Prev "+this.makeRef(n.children[o-1])),o<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[o+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var c=this.count=this.count_r({count:0},l);if(c>0&&this.line("/Count "+c),l.options&&l.options.pageNumber){var A=r.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+A.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var o=0;o<a.children.length;o++)n.count++,this.count_r(n,a.children[o]);return n.count}}])}(Dt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,o,l,c){var A,u=this.decode.DCT_DECODE,i=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=l||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,A=function(d){for(var h,f=256*d.charCodeAt(4)+d.charCodeAt(5),w=d.length,j={width:0,height:0,numcomponents:1},B=4;B<w;B+=2){if(B+=f,e.indexOf(d.charCodeAt(B+1))!==-1){h=256*d.charCodeAt(B+5)+d.charCodeAt(B+6),j={width:256*d.charCodeAt(B+7)+d.charCodeAt(B+8),height:h,numcomponents:d.charCodeAt(B+9)};break}f=256*d.charCodeAt(B+2)+d.charCodeAt(B+3)}return j}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),A.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}i={data:r,width:A.width,height:A.height,colorSpace:c,bitsPerComponent:8,filter:u,index:n,alias:a}}return i}}(Dt.API),Dt.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,o=pU(t,{checkCrc:!0}),l=o.width,c=o.height,A=o.channels,u=o.palette,i=o.depth;a=u&&A===1?function(M){for(var D=M.width,K=M.height,U=M.data,F=M.palette,k=M.depth,T=!1,P=[],$=[],ee=void 0,V=!1,W=0,te=0;te<F.length;te++){var oe=Bw(F[te],4),O=oe[0],z=oe[1],ne=oe[2],Z=oe[3];P.push(O,z,ne),Z!=null&&(Z===0?(W++,$.length<1&&$.push(te)):Z<255&&(V=!0))}if(V||W>1){T=!0,$=void 0;var q=D*K;ee=new Uint8Array(q);for(var Ae=new DataView(U.buffer),ve=0;ve<q;ve++){var be=F0(Ae,ve,k),Ne=Bw(F[be],4)[3];ee[ve]=Ne}}else W===0&&($=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:T?8:void 0,colorBytes:U,alphaBytes:ee,needSMask:T,palette:P,mask:$}}(o):A===2||A===4?function(M){for(var D=M.data,K=M.width,U=M.height,F=M.channels,k=M.depth,T=F===2?"DeviceGray":"DeviceRGB",P=F-1,$=K*U,ee=P,V=$*ee,W=1*$,te=Math.ceil(V*k/8),oe=Math.ceil(W*k/8),O=new Uint8Array(te),z=new Uint8Array(oe),ne=new DataView(D.buffer),Z=new DataView(O.buffer),q=new DataView(z.buffer),Ae=!1,ve=0;ve<$;ve++){for(var be=ve*F,Ne=0;Ne<ee;Ne++)_1(Z,F0(ne,be+Ne,k),ve*ee+Ne,k);var Te=F0(ne,be+ee,k);Te<(1<<k)-1&&(Ae=!0),_1(q,Te,1*ve,k)}return{colorSpace:T,colorsPerPixel:P,sMaskBitsPerComponent:Ae?k:void 0,colorBytes:O,alphaBytes:z,needSMask:Ae}}(o):function(M){var D=M.data,K=M.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:K,colorsPerPixel:K==="DeviceGray"?1:3,colorBytes:D instanceof Uint16Array?function(U){for(var F=U.length,k=new Uint8Array(2*F),T=new DataView(k.buffer,k.byteOffset,k.byteLength),P=0;P<F;P++)T.setUint16(2*P,U[P],!1);return k}(D):D,needSMask:!1}}(o);var d,h,f,w=a,j=w.colorSpace,B=w.colorsPerPixel,p=w.sMaskBitsPerComponent,x=w.colorBytes,C=w.alphaBytes,S=w.needSMask,E=w.palette,I=w.mask,H=null;return n!==Dt.API.image_compression.NONE&&typeof Hg=="function"?(H=function(M){var D;switch(M){case Dt.API.image_compression.FAST:D=11;break;case Dt.API.image_compression.MEDIUM:D=13;break;case Dt.API.image_compression.SLOW:D=14;break;default:D=12}return D}(n),d=this.decode.FLATE_DECODE,h="/Predictor ".concat(H," /Colors ").concat(B," /BitsPerComponent ").concat(i," /Columns ").concat(l),t=B1(x,Math.ceil(l*B*i/8),B,i,n),S&&(f=B1(C,Math.ceil(l*p/8),1,p,n))):(d=void 0,h=void 0,t=x,S&&(f=C)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:r,data:t,index:e,filter:d,decodeParameters:h,transparency:I,palette:E,sMask:f,predictor:H,width:l,height:c,bitsPerComponent:i,sMaskBitsPerComponent:p,colorSpace:j}}},function(t){t.processGIF89A=function(e,r,n,a){var o=new OU(e),l=o.width,c=o.height,A=[];o.decodeAndBlitFrameRGBA(0,A);var u={data:A,width:l,height:c},i=new U0(100).encode(u,100);return t.processJPEG.call(this,i,r,n,a)},t.processGIF87A=t.processGIF89A}(Dt.API),to.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:r,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},to.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){Ir.log("bit decode error:"+r)}},to.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var o=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+8*a*4,c=0;c<8&&8*a+c<this.width;c++){var A=this.palette[o>>7-c&1];this.data[l+4*c]=A.blue,this.data[l+4*c+1]=A.green,this.data[l+4*c+2]=A.red,this.data[l+4*c+3]=255}r!==0&&(this.pos+=4-r)}},to.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var o=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+2*a*4,c=o>>4,A=15&o,u=this.palette[c];if(this.data[l]=u.blue,this.data[l+1]=u.green,this.data[l+2]=u.red,this.data[l+3]=255,2*a+1>=this.width)break;u=this.palette[A],this.data[l+4]=u.blue,this.data[l+4+1]=u.green,this.data[l+4+2]=u.red,this.data[l+4+3]=255}e!==0&&(this.pos+=4-e)}},to.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+4*n;if(a<this.palette.length){var l=this.palette[a];this.data[o]=l.red,this.data[o+1]=l.green,this.data[o+2]=l.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}t!==0&&(this.pos+=4-t)}},to.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&e)/e*255|0,A=(o>>10&e)/e*255|0,u=o>>15?255:0,i=n*this.width*4+4*a;this.data[i]=A,this.data[i+1]=c,this.data[i+2]=l,this.data[i+3]=u}this.pos+=t}},to.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(l&e)/e*255|0,A=(l>>5&r)/r*255|0,u=(l>>11)/e*255|0,i=a*this.width*4+4*o;this.data[i]=u,this.data[i+1]=A,this.data[i+2]=c,this.data[i+3]=255}this.pos+=t}},to.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*r;this.data[l]=o,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=255}this.pos+=this.width%4}},to.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*r;this.data[c]=o,this.data[c+1]=a,this.data[c+2]=n,this.data[c+3]=l}},to.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,a){var o=new to(e,!1),l=o.width,c=o.height,A={data:o.getData(),width:l,height:c},u=new U0(100).encode(A,100);return t.processJPEG.call(this,u,r,n,a)}}(Dt.API),U1.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,a){var o=new U1(e),l=o.width,c=o.height,A={data:o.getData(),width:l,height:c},u=new U0(100).encode(A,100);return t.processJPEG.call(this,u,r,n,a)}}(Dt.API),Dt.API.processRGBA=function(t,e,r){for(var n=t.data,a=n.length,o=new Uint8Array(a/4*3),l=new Uint8Array(a/4),c=0,A=0,u=0;u<a;u+=4){var i=n[u],d=n[u+1],h=n[u+2],f=n[u+3];o[c++]=i,o[c++]=d,o[c++]=h,l[A++]=f}var w=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:w,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Dt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Cc=Dt.API,wh=Cc.getCharWidthsArray=function(t,e){var r,n,a=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),l=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:a.metadata.Unicode.widths,A=c.fof?c.fof:1,u=e.kerning?e.kerning:a.metadata.Unicode.kerning,i=u.fof?u.fof:1,d=e.doKerning!==!1,h=0,f=t.length,w=0,j=c[0]||A,B=[];for(r=0;r<f;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?B.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+l*(1e3/o)||0)/1e3):(h=d&&Nr(u[n])==="object"&&!isNaN(parseInt(u[n][w],10))?u[n][w]/i:0,B.push((c[n]||j)/A+h)),w=n;return B},w1=Cc.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Cc.processArabic&&(t=Cc.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:wh.apply(this,arguments).reduce(function(o,l){return o+l},0)},b1=function(t,e,r,n){for(var a=[],o=0,l=t.length,c=0;o!==l&&c+e[o]<r;)c+=e[o],o++;a.push(t.slice(0,o));var A=o;for(c=0;o!==l;)c+e[o]>n&&(a.push(t.slice(A,o)),c=0,A=o),c+=e[o],o++;return A!==o&&a.push(t.slice(A,o)),a},j1=function(t,e,r){r||(r={});var n,a,o,l,c,A,u,i=[],d=[i],h=r.textIndent||0,f=0,w=0,j=t.split(" "),B=wh.apply(this,[" ",r])[0];if(A=r.lineIndent===-1?j[0].length+2:r.lineIndent||0){var p=Array(A).join(" "),x=[];j.map(function(S){(S=S.split(/\s*\n/)).length>1?x=x.concat(S.map(function(E,I){return(I&&E.length?`
`:"")+E})):x.push(S[0])}),j=x,A=w1.apply(this,[p,r])}for(o=0,l=j.length;o<l;o++){var C=0;if(n=j[o],A&&n[0]==`
`&&(n=n.substr(1),C=1),h+f+(w=(a=wh.apply(this,[n,r])).reduce(function(S,E){return S+E},0))>e||C){if(w>e){for(c=b1.apply(this,[n,a,e-(h+f),e]),i.push(c.shift()),i=[c.pop()];c.length;)d.push([c.shift()]);w=a.slice(n.length-(i[0]?i[0].length:0)).reduce(function(S,E){return S+E},0)}else i=[n];d.push(i),h=w+A,f=B}else i.push(n),h+=f+w,f=B}return u=A?function(S,E){return(E?p:"")+S.join(" ")}:function(S){return S.join(" ")},d.map(u)},Cc.splitTextToSize=function(t,e,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),o=(function(i){if(i.widths&&i.kerning)return{widths:i.widths,kerning:i.kerning};var d=this.internal.getFont(i.fontName,i.fontStyle),h="Unicode";return d.metadata[h]?{widths:d.metadata[h].widths||{0:1},kerning:d.metadata[h].kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var l=1*this.internal.scaleFactor*e/a;o.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=r.lineIndent;var c,A,u=[];for(c=0,A=n.length;c<A;c++)u=u.concat(j1.apply(this,[n[c],l,o]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},o=0;o<16;o++)n[r[o]]=e[o],a[e[o]]=r[o];var l=function(h){return"0x"+parseInt(h,10).toString(16)},c=t.__fontmetrics__.compress=function(h){var f,w,j,B,p=["{"];for(var x in h){if(f=h[x],isNaN(parseInt(x,10))?w="'"+x+"'":(x=parseInt(x,10),w=(w=l(x).slice(2)).slice(0,-1)+a[w.slice(-1)]),typeof f=="number")f<0?(j=l(f).slice(3),B="-"):(j=l(f).slice(2),B=""),j=B+j.slice(0,-1)+a[j.slice(-1)];else{if(Nr(f)!=="object")throw new Error("Don't know what to do with value type "+Nr(f)+".");j=c(f)}p.push(w+j)}return p.push("}"),p.join("")},A=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,w,j,B,p={},x=1,C=p,S=[],E="",I="",H=h.length-1,M=1;M<H;M+=1)(B=h[M])=="'"?f?(j=f.join(""),f=void 0):f=[]:f?f.push(B):B=="{"?(S.push([C,j]),C={},j=void 0):B=="}"?((w=S.pop())[0][w[1]]=C,j=void 0,C=w[0]):B=="-"?x=-1:j===void 0?n.hasOwnProperty(B)?(E+=n[B],j=parseInt(E,16)*x,x=1,E=""):E+=B:n.hasOwnProperty(B)?(I+=n[B],C[j]=parseInt(I,16)*x,x=1,j=void 0,I=""):I+=B;return p},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:A("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},i={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},d={Unicode:{"Courier-Oblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":A("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":A("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:A("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:A("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":A("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":A("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var f=h.font,w=d.Unicode[f.postScriptName];w&&(f.metadata.Unicode={},f.metadata.Unicode.widths=w.widths,f.metadata.Unicode.kerning=w.kerning);var j=i.Unicode[f.postScriptName];j&&(f.metadata.Unicode.encoding=j,f.encoding=j.codePages[0])}])}(Dt.API),function(t){var e=function(r){for(var n=r.length,a=new Uint8Array(n),o=0;o<n;o++)a[o]=r.charCodeAt(o);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,o=r.instance;if(!a.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=o.existsFileInVFS(a.postScriptName)===!1?o.loadFile(a.postScriptName):o.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(l,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e(Th(c)),l.metadata=t.API.TTFFont.open(c),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(a,n)}}])}(Dt),Dt.API.addSvgAsImage=function(t,e,r,n,a,o,l,c){if(isNaN(e)||isNaN(r))throw Ir.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw Ir.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var A=document.createElement("canvas");A.width=n,A.height=a;var u=A.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,A.width,A.height);var i={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return(Vt.canvg?Promise.resolve(Vt.canvg):wA(()=>import("canvg"),[])).catch(function(h){return Promise.reject(new Error("Could not load canvg: "+h))}).then(function(h){return h.default?h.default:h}).then(function(h){return h.fromString(u,t,i)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(h){return h.render(i)}).then(function(){d.addImage(A.toDataURL("image/jpeg",1),e,r,n,a,l,c)})},Dt.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,r);return this},Dt.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,a,o,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(l),A=[],u=0,i=0,d=0;function h(w,j){var B,p=!1;for(B=0;B<w.length;B+=1)w[B]===j&&(p=!0);return p}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var f=c.length;for(d=0;d<f;d+=1)r[c[d]].value=r[c[d]].defaultValue,r[c[d]].explicitSet=!1}if(Nr(t)==="object"){for(a in t)if(o=t[a],h(c,a)&&o!==void 0){if(r[a].type==="boolean"&&typeof o=="boolean")r[a].value=o;else if(r[a].type==="name"&&h(r[a].valueSet,o))r[a].value=o;else if(r[a].type==="integer"&&Number.isInteger(o))r[a].value=o;else if(r[a].type==="array"){for(u=0;u<o.length;u+=1)if(n=!0,o[u].length===1&&typeof o[u][0]=="number")A.push(String(o[u]-1));else if(o[u].length>1){for(i=0;i<o[u].length;i+=1)typeof o[u][i]!="number"&&(n=!1);n===!0&&A.push([o[u][0]-1,o[u][1]-1].join(" "))}r[a].value="["+A.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var w,j=[];for(w in r)r[w].explicitSet===!0&&(r[w].type==="name"?j.push("/"+w+" /"+r[w].value):j.push("/"+w+" "+r[w].value));j.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+j.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(n)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),A=unescape(encodeURIComponent("</x:xmpmeta>")),u=o.length+l.length+c.length+a.length+A.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+o+l+c+A),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(Dt.API),function(t){var e=t.API,r=e.pdfEscape16=function(o,l){for(var c,A=l.metadata.Unicode.widths,u=["","0","00","000","0000"],i=[""],d=0,h=o.length;d<h;++d){if(c=l.metadata.characterToGlyph(o.charCodeAt(d)),l.metadata.glyIdsUsed.push(c),l.metadata.toUnicode[c]=o.charCodeAt(d),A.indexOf(c)==-1&&(A.push(c),A.push([parseInt(l.metadata.widthOfGlyph(c),10)])),c=="0")return i.join("");c=c.toString(16),i.push(u[4-c.length],c)}return i.join("")},n=function(o){var l,c,A,u,i,d,h;for(i=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,A=[],d=0,h=(c=Object.keys(o).sort(function(f,w){return f-w})).length;d<h;d++)l=c[d],A.length>=100&&(i+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar`,A=[]),o[l]!==void 0&&o[l]!==null&&typeof o[l].toString=="function"&&(u=("0000"+o[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),A.push("<"+l+"><"+u+">"));return A.length&&(i+=`
`+A.length+` beginbfchar
`+A.join(`
`)+`
endbfchar
`),i+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(l){var c=l.font,A=l.out,u=l.newObject,i=l.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="Identity-H"){for(var d=c.metadata.Unicode.widths,h=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),f="",w=0;w<h.length;w++)f+=String.fromCharCode(h[w]);var j=u();i({data:f,addLength1:!0,objectId:j}),A("endobj");var B=u();i({data:n(c.metadata.toUnicode),addLength1:!0,objectId:B}),A("endobj");var p=u();A("<<"),A("/Type /FontDescriptor"),A("/FontName /"+_c(c.fontName)),A("/FontFile2 "+j+" 0 R"),A("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),A("/Flags "+c.metadata.flags),A("/StemV "+c.metadata.stemV),A("/ItalicAngle "+c.metadata.italicAngle),A("/Ascent "+c.metadata.ascender),A("/Descent "+c.metadata.decender),A("/CapHeight "+c.metadata.capHeight),A(">>"),A("endobj");var x=u();A("<<"),A("/Type /Font"),A("/BaseFont /"+_c(c.fontName)),A("/FontDescriptor "+p+" 0 R"),A("/W "+t.API.PDFObject.convert(d)),A("/CIDToGIDMap /Identity"),A("/DW 1000"),A("/Subtype /CIDFontType2"),A("/CIDSystemInfo"),A("<<"),A("/Supplement 0"),A("/Registry (Adobe)"),A("/Ordering ("+c.encoding+")"),A(">>"),A(">>"),A("endobj"),c.objectNumber=u(),A("<<"),A("/Type /Font"),A("/Subtype /Type0"),A("/ToUnicode "+B+" 0 R"),A("/BaseFont /"+_c(c.fontName)),A("/Encoding /"+c.encoding),A("/DescendantFonts ["+x+" 0 R]"),A(">>"),A("endobj"),c.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(l){var c=l.font,A=l.out,u=l.newObject,i=l.putStream;if(c.metadata instanceof t.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var d=c.metadata.rawData,h="",f=0;f<d.length;f++)h+=String.fromCharCode(d[f]);var w=u();i({data:h,addLength1:!0,objectId:w}),A("endobj");var j=u();i({data:n(c.metadata.toUnicode),addLength1:!0,objectId:j}),A("endobj");var B=u();A("<<"),A("/Descent "+c.metadata.decender),A("/CapHeight "+c.metadata.capHeight),A("/StemV "+c.metadata.stemV),A("/Type /FontDescriptor"),A("/FontFile2 "+w+" 0 R"),A("/Flags 96"),A("/FontBBox "+t.API.PDFObject.convert(c.metadata.bbox)),A("/FontName /"+_c(c.fontName)),A("/ItalicAngle "+c.metadata.italicAngle),A("/Ascent "+c.metadata.ascender),A(">>"),A("endobj"),c.objectNumber=u();for(var p=0;p<c.metadata.hmtx.widths.length;p++)c.metadata.hmtx.widths[p]=parseInt(c.metadata.hmtx.widths[p]*(1e3/c.metadata.head.unitsPerEm));A("<</Subtype/TrueType/Type/Font/ToUnicode "+j+" 0 R/BaseFont/"+_c(c.fontName)+"/FontDescriptor "+B+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),A("endobj"),c.isAlreadyPutted=!0}})(o)}]);var a=function(o){var l,c=o.text||"",A=o.x,u=o.y,i=o.options||{},d=o.mutex||{},h=d.pdfEscape,f=d.activeFontKey,w=d.fonts,j=f,B="",p=0,x="",C=w[j].encoding;if(w[j].encoding!=="Identity-H")return{text:c,x:A,y:u,options:i,mutex:d};for(x=c,j=f,Array.isArray(c)&&(x=c[0]),p=0;p<x.length;p+=1)w[j].metadata.hasOwnProperty("cmap")&&(l=w[j].metadata.cmap.unicode.codeMap[x[p].charCodeAt(0)]),l||x[p].charCodeAt(0)<256&&w[j].metadata.hasOwnProperty("Unicode")?B+=x[p]:B+="";var S="";return parseInt(j.slice(1))<14||C==="WinAnsiEncoding"?S=h(B,j).split("").map(function(E){return E.charCodeAt(0).toString(16)}).join(""):C==="Identity-H"&&(S=r(B,w[j])),d.isHex=!0,{text:S,x:A,y:u,options:i,mutex:d}};e.events.push(["postProcessText",function(o){var l=o.text||"",c=[],A={text:l,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(l)){var u=0;for(u=0;u<l.length;u+=1)Array.isArray(l[u])&&l[u].length===3?c.push([a(Object.assign({},A,{text:l[u][0]})).text,l[u][1],l[u][2]]):c.push(a(Object.assign({},A,{text:l[u]})).text);o.text=c}else o.text=a(Object.assign({},A,{text:l})).text}])}(Dt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Dt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,o,l,c,A,u,i,d=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],w={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},j={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},B=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],p=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),x=!1,C=0;this.__bidiEngine__={};var S=function(U){var F=U.charCodeAt(),k=F>>8,T=j[k];return T!==void 0?d[256*T+(255&F)]:k===252||k===253?"AL":p.test(k)?"L":k===8?"R":"N"},E=function(U){for(var F,k=0;k<U.length;k++){if((F=S(U.charAt(k)))==="L")return!1;if(F==="R")return!0}return!1},I=function(U,F,k,T){var P,$,ee,V,W=F[T];switch(W){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":x=!1;break;case"N":case"AN":break;case"EN":x&&(W="AN");break;case"AL":x=!0,W="R";break;case"WS":case"BN":W="N";break;case"CS":T<1||T+1>=F.length||(P=k[T-1])!=="EN"&&P!=="AN"||($=F[T+1])!=="EN"&&$!=="AN"?W="N":x&&($="AN"),W=$===P?$:"N";break;case"ES":W=(P=T>0?k[T-1]:"B")==="EN"&&T+1<F.length&&F[T+1]==="EN"?"EN":"N";break;case"ET":if(T>0&&k[T-1]==="EN"){W="EN";break}if(x){W="N";break}for(ee=T+1,V=F.length;ee<V&&F[ee]==="ET";)ee++;W=ee<V&&F[ee]==="EN"?"EN":"N";break;case"NSM":if(l&&!c){for(V=F.length,ee=T+1;ee<V&&F[ee]==="NSM";)ee++;if(ee<V){var te=U[T],oe=te>=1425&&te<=2303||te===64286;if(P=F[ee],oe&&(P==="R"||P==="AL")){W="R";break}}}W=T<1||(P=F[T-1])==="B"?"N":k[T-1];break;case"B":x=!1,a=!0,W=C;break;case"S":o=!0,W="N"}return W},H=function(U,F,k){var T=U.split("");return k&&M(T,k,{hiLevel:C}),T.reverse(),F&&F.reverse(),T.join("")},M=function(U,F,k){var T,P,$,ee,V,W=-1,te=U.length,oe=0,O=[],z=C?f:h,ne=[];for(x=!1,a=!1,o=!1,P=0;P<te;P++)ne[P]=S(U[P]);for($=0;$<te;$++){if(V=oe,O[$]=I(U,ne,O,$),T=240&(oe=z[V][w[O[$]]]),oe&=15,F[$]=ee=z[oe][5],T>0)if(T===16){for(P=W;P<$;P++)F[P]=1;W=-1}else W=-1;if(z[oe][6])W===-1&&(W=$);else if(W>-1){for(P=W;P<$;P++)F[P]=ee;W=-1}ne[$]==="B"&&(F[$]=0),k.hiLevel|=ee}o&&function(Z,q,Ae){for(var ve=0;ve<Ae;ve++)if(Z[ve]==="S"){q[ve]=C;for(var be=ve-1;be>=0&&Z[be]==="WS";be--)q[be]=C}}(ne,F,te)},D=function(U,F,k,T,P){if(!(P.hiLevel<U)){if(U===1&&C===1&&!a)return F.reverse(),void(k&&k.reverse());for(var $,ee,V,W,te=F.length,oe=0;oe<te;){if(T[oe]>=U){for(V=oe+1;V<te&&T[V]>=U;)V++;for(W=oe,ee=V-1;W<ee;W++,ee--)$=F[W],F[W]=F[ee],F[ee]=$,k&&($=k[W],k[W]=k[ee],k[ee]=$);oe=V}oe++}}},K=function(U,F,k){var T=U.split(""),P={hiLevel:C};return k||(k=[]),M(T,k,P),function($,ee,V){if(V.hiLevel!==0&&i)for(var W,te=0;te<$.length;te++)ee[te]===1&&(W=B.indexOf($[te]))>=0&&($[te]=B[W+1])}(T,k,P),D(2,T,F,k,P),D(1,T,F,k,P),T.join("")};return this.__bidiEngine__.doBidiReorder=function(U,F,k){if(function(P,$){if($)for(var ee=0;ee<P.length;ee++)$[ee]=ee;c===void 0&&(c=E(P)),u===void 0&&(u=E(P))}(U,F),l||!A||u)if(l&&A&&c^u)C=c?1:0,U=H(U,F,k);else if(!l&&A&&u)C=c?1:0,U=K(U,F,k),U=H(U,F);else if(!l||c||A||u){if(l&&!A&&c^u)U=H(U,F),c?(C=0,U=K(U,F,k)):(C=1,U=K(U,F,k),U=H(U,F));else if(l&&c&&!A&&u)C=1,U=K(U,F,k),U=H(U,F);else if(!l&&!A&&c^u){var T=i;c?(C=1,U=K(U,F,k),C=0,i=!1,U=K(U,F,k),i=T):(C=0,U=K(U,F,k),U=H(U,F),C=1,i=!1,U=K(U,F,k),i=T,U=H(U,F))}}else C=0,U=K(U,F,k);else C=c?1:0,U=K(U,F,k);return U},this.__bidiEngine__.setOptions=function(U){U&&(l=U.isInputVisual,A=U.isOutputVisual,c=U.isInputRtl,u=U.isOutputRtl,i=U.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var o=n.options||{};n.mutex,o.lang;var l=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,r.setOptions(o),Object.prototype.toString.call(a)==="[object Array]"){var c=0;for(l=[],c=0;c<a.length;c+=1)Object.prototype.toString.call(a[c])==="[object Array]"?l.push([r.doBidiReorder(a[c][0]),a[c][1],a[c][2]]):l.push([r.doBidiReorder(a[c])]);n.text=l}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Dt),Dt.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new CA(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new ZU(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new DU(this.contents),this.head=new HU(this),this.name=new $U(this),this.cmap=new NB(this),this.toUnicode={},this.hhea=new MU(this),this.maxp=new zU(this),this.hmtx=new WU(this),this.post=new GU(this),this.os2=new KU(this),this.loca=new qU(this),this.glyf=new JU(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,a,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,c,A,u;for(u=[],l=0,c=(A=this.bbox).length;l<c;l++)e=A[l],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var a,o,l,c;for(l=0,o=0,c=(e=""+e).length;0<=c?o<c:o>c;o=0<=c?++o:--o)a=e.charCodeAt(o),l+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return l*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var ho,CA=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,a;for(a=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(e.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,a,o,l,c,A;return e=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),A=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^o)+65536*(255^l)+256*(255^c)+(255^A)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*a+16777216*o+65536*l+256*c+A},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,a,o;for(o=[],n=0,a=e.length;n<a;n++)r=e[n],o.push(this.writeByte(r));return o},t}(),DU=function(){var t;function e(r){var n,a,o;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,o=this.tableCount;0<=o?a<o:a>o;a=0<=o?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,a,o,l,c,A,u,i,d,h,f,w,j;for(j in f=Object.keys(r).length,A=Math.log(2),d=16*Math.floor(Math.log(f)/A),l=Math.floor(d/A),i=16*f-d,(a=new CA).writeInt(this.scalarType),a.writeShort(f),a.writeShort(d),a.writeShort(l),a.writeShort(i),o=16*f,u=a.pos+o,c=null,w=[],r)for(h=r[j],a.writeString(j),a.writeInt(t(h)),a.writeInt(u),a.writeInt(h.length),w=w.concat(h),j==="head"&&(c=u),u+=h.length;u%4;)w.push(0),u++;return a.write(w),n=2981146554-t(a.data),a.pos=c+8,a.writeUInt32(n),a.data},t=function(r){var n,a,o,l;for(r=SB.call(r);r.length%4;)r.push(0);for(o=new CA(r),a=0,n=0,l=r.length;n<l;n=n+=4)a+=o.readUInt32();return 4294967295&a},e}(),RU={}.hasOwnProperty,Ho=function(t,e){for(var r in e)RU.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};ho=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var HU=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ho(t,ho),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new CA).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),Q1=function(){function t(e,r){var n,a,o,l,c,A,u,i,d,h,f,w,j,B,p,x,C;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(A=0;A<256;++A)this.codeMap[A]=e.readByte();break;case 4:for(f=e.readUInt16(),h=f/2,e.pos+=6,o=function(){var S,E;for(E=[],A=S=0;0<=h?S<h:S>h;A=0<=h?++S:--S)E.push(e.readUInt16());return E}(),e.pos+=2,j=function(){var S,E;for(E=[],A=S=0;0<=h?S<h:S>h;A=0<=h?++S:--S)E.push(e.readUInt16());return E}(),u=function(){var S,E;for(E=[],A=S=0;0<=h?S<h:S>h;A=0<=h?++S:--S)E.push(e.readUInt16());return E}(),i=function(){var S,E;for(E=[],A=S=0;0<=h?S<h:S>h;A=0<=h?++S:--S)E.push(e.readUInt16());return E}(),a=(this.length-e.pos+this.offset)/2,c=function(){var S,E;for(E=[],A=S=0;0<=a?S<a:S>a;A=0<=a?++S:--S)E.push(e.readUInt16());return E}(),A=p=0,C=o.length;p<C;A=++p)for(B=o[A],n=x=w=j[A];w<=B?x<=B:x>=B;n=w<=B?++x:--x)i[A]===0?l=n+u[A]:(l=c[i[A]/2+(n-w)-(h-A)]||0)!==0&&(l+=u[A]),this.codeMap[n]=65535&l}e.pos=d}return t.encode=function(e,r){var n,a,o,l,c,A,u,i,d,h,f,w,j,B,p,x,C,S,E,I,H,M,D,K,U,F,k,T,P,$,ee,V,W,te,oe,O,z,ne,Z,q,Ae,ve,be,Ne,Te,De;switch(T=new CA,l=Object.keys(e).sort(function(We,_e){return We-_e}),r){case"macroman":for(j=0,B=function(){var We=[];for(w=0;w<256;++w)We.push(0);return We}(),x={0:0},o={},P=0,W=l.length;P<W;P++)x[be=e[a=l[P]]]==null&&(x[be]=++j),o[a]={old:e[a],new:x[e[a]]},B[a]=x[e[a]];return T.writeUInt16(1),T.writeUInt16(0),T.writeUInt32(12),T.writeUInt16(0),T.writeUInt16(262),T.writeUInt16(0),T.write(B),{charMap:o,subtable:T.data,maxGlyphID:j+1};case"unicode":for(F=[],d=[],C=0,x={},n={},p=u=null,$=0,te=l.length;$<te;$++)x[E=e[a=l[$]]]==null&&(x[E]=++C),n[a]={old:E,new:x[E]},c=x[E]-a,p!=null&&c===u||(p&&d.push(p),F.push(a),u=c),p=a;for(p&&d.push(p),d.push(65535),F.push(65535),K=2*(D=F.length),M=2*Math.pow(Math.log(D)/Math.LN2,2),h=Math.log(M/2)/Math.LN2,H=2*D-M,A=[],I=[],f=[],w=ee=0,oe=F.length;ee<oe;w=++ee){if(U=F[w],i=d[w],U===65535){A.push(0),I.push(0);break}if(U-(k=n[U].new)>=32768)for(A.push(0),I.push(2*(f.length+D-w)),a=V=U;U<=i?V<=i:V>=i;a=U<=i?++V:--V)f.push(n[a].new);else A.push(k-U),I.push(0)}for(T.writeUInt16(3),T.writeUInt16(1),T.writeUInt32(12),T.writeUInt16(4),T.writeUInt16(16+8*D+2*f.length),T.writeUInt16(0),T.writeUInt16(K),T.writeUInt16(M),T.writeUInt16(h),T.writeUInt16(H),Ae=0,O=d.length;Ae<O;Ae++)a=d[Ae],T.writeUInt16(a);for(T.writeUInt16(0),ve=0,z=F.length;ve<z;ve++)a=F[ve],T.writeUInt16(a);for(Ne=0,ne=A.length;Ne<ne;Ne++)c=A[Ne],T.writeUInt16(c);for(Te=0,Z=I.length;Te<Z;Te++)S=I[Te],T.writeUInt16(S);for(De=0,q=f.length;De<q;De++)j=f[De],T.writeUInt16(j);return{charMap:n,subtable:T.data,maxGlyphID:C+1}}},t}(),NB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ho(t,ho),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new Q1(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,a;return r==null&&(r="macroman"),n=Q1.encode(e,r),(a=new CA).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},t}(),MU=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ho(t,ho),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),KU=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ho(t,ho),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),GU=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ho(t,ho),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(n=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)r=e.readByte(),a.push(this.names.push(e.readString(r)));return a;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var l,c,A;for(A=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)A.push(e.readUInt32());return A}).call(this)}},t}(),VU=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},$U=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ho(t,ho),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,a,o,l,c,A,u,i,d,h;for(e.pos=this.offset,e.readShort(),r=e.readShort(),c=e.readShort(),n=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+c+e.readShort()});for(A={},o=i=0,d=n.length;i<d;o=++i)a=n[o],e.pos=a.offset,u=e.readString(a.length),l=new VU(u,a),A[h=a.nameID]==null&&(A[h]=[]),A[a.nameID].push(l);this.strings=A,this.copyright=A[0],this.fontFamily=A[1],this.fontSubfamily=A[2],this.uniqueSubfamily=A[3],this.fontName=A[4],this.version=A[5];try{this.postscriptName=A[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=A[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=A[7],this.manufacturer=A[8],this.designer=A[9],this.description=A[10],this.vendorUrl=A[11],this.designerUrl=A[12],this.license=A[13],this.licenseUrl=A[14],this.preferredFamily=A[15],this.preferredSubfamily=A[17],this.compatibleFull=A[18],this.sampleText=A[19]},t}(),zU=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ho(t,ho),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),WU=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ho(t,ho),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,a,o,l,c,A;for(e.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,i;for(i=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)i.push(e.readInt16());return i}(),this.widths=(function(){var u,i,d,h;for(h=[],u=0,i=(d=this.metrics).length;u<i;u++)o=d[u],h.push(o.advance);return h}).call(this),n=this.widths[this.widths.length-1],A=[],r=l=0;0<=a?l<a:l>a;r=0<=a?++l:--l)A.push(this.widths.push(n));return A},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),SB=[].slice,JU=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ho(t,ho),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,a,o,l,c,A,u,i,d;return e in this.cache?this.cache[e]:(o=this.file.loca,r=this.file.contents,n=o.indexOf(e),(a=o.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,l=(c=new CA(r.read(a))).readShort(),u=c.readShort(),d=c.readShort(),A=c.readShort(),i=c.readShort(),this.cache[e]=l===-1?new YU(c,u,d,A,i):new XU(c,l,u,d,A,i),this.cache[e]))},t.prototype.encode=function(e,r,n){var a,o,l,c,A;for(l=[],o=[],c=0,A=r.length;c<A;c++)a=e[r[c]],o.push(l.length),a&&(l=l.concat(a.encode(n)));return o.push(l.length),{table:l,offsets:o}},t}(),XU=function(){function t(e,r,n,a,o,l){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=o,this.yMax=l,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),YU=function(){function t(e,r,n,a,o){var l,c;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;c=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&c;)l.pos+=1&c?4:2,128&c?l.pos+=8:64&c?l.pos+=4:8&c&&(l.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new CA(SB.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),qU=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Ho(t,ho),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,o;for(o=[],n=0,a=this.length;n<a;n+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],n=0,a=this.length;n<a;n+=4)o.push(e.readUInt32());return o}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),a=0,o=0,l=0;l<n.length;++l)if(n[l]=a,o<r.length&&r[o]==l){++o,n[l]=a;var c=this.offsets[l],A=this.offsets[l+1]-c;A>0&&(a+=A)}for(var u=new Array(4*n.length),i=0;i<n.length;++i)u[4*i+3]=255&n[i],u[4*i+2]=(65280&n[i])>>8,u[4*i+1]=(16711680&n[i])>>16,u[4*i]=(4278190080&n[i])>>24;return u},t}(),ZU=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,a,o;for(r in a=this.font.cmap.tables[0].codeMap,e={},o=this.subset)n=o[r],e[r]=a[n];return e},t.prototype.glyphsFor=function(e){var r,n,a,o,l,c,A;for(a={},l=0,c=e.length;l<c;l++)a[o=e[l]]=this.font.glyf.glyphFor(o);for(o in r=[],a)(n=a[o])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(o in A=this.glyphsFor(r))n=A[o],a[o]=n;return a},t.prototype.encode=function(e,r){var n,a,o,l,c,A,u,i,d,h,f,w,j,B,p;for(a in n=NB.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(e),f={0:0},p=n.charMap)f[(A=p[a]).old]=A.new;for(w in h=n.maxGlyphID,l)w in f||(f[w]=h++);return i=function(x){var C,S;for(C in S={},x)S[x[C]]=C;return S}(f),d=Object.keys(i).sort(function(x,C){return x-C}),j=function(){var x,C,S;for(S=[],x=0,C=d.length;x<C;x++)c=d[x],S.push(i[c]);return S}(),o=this.font.glyf.encode(l,j,f),u=this.font.loca.encode(o.offsets,j),B={cmap:this.font.cmap.raw(),glyf:o.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(B["OS/2"]=this.font.os2.raw()),this.font.directory.encode(B)},t}();Dt.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,a,o,l;if(Array.isArray(r))return"["+function(){var c,A,u;for(u=[],c=0,A=r.length;c<A;c++)n=r[c],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in o=["<<"],r)l=r[a],o.push("/"+a+" "+e.convert(l));return o.push(">>"),o.join(`
`)}return""+r},e}();const e6=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:FU,AcroFormAppearance:Et,AcroFormButton:Hn,AcroFormCheckBox:Nd,AcroFormChoiceField:hl,AcroFormComboBox:pl,AcroFormEditBox:Bd,AcroFormListBox:ml,AcroFormPasswordField:Sd,AcroFormPushButton:Cd,AcroFormRadioButton:gl,AcroFormTextField:bA,GState:Yd,ShadingPattern:AA,TilingPattern:ll,default:Dt,jsPDF:Dt},Symbol.toStringTag,{value:"Module"})),t6=L1(e6);var Q0={exports:{}};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */var I1;function r6(){return I1||(I1=1,function(t,e){(function(r,n){t.exports=n()})(Qs,function(){/*! *****************************************************************************
		    Copyright (c) Microsoft Corporation.

		    Permission to use, copy, modify, and/or distribute this software for any
		    purpose with or without fee is hereby granted.

		    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		    PERFORMANCE OF THIS SOFTWARE.
		    ***************************************************************************** */var r=function(v,m){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,y){b.__proto__=y}||function(b,y){for(var L in y)Object.prototype.hasOwnProperty.call(y,L)&&(b[L]=y[L])},r(v,m)};function n(v,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");r(v,m);function b(){this.constructor=v}v.prototype=m===null?Object.create(m):(b.prototype=m.prototype,new b)}var a=function(){return a=Object.assign||function(m){for(var b,y=1,L=arguments.length;y<L;y++){b=arguments[y];for(var G in b)Object.prototype.hasOwnProperty.call(b,G)&&(m[G]=b[G])}return m},a.apply(this,arguments)};function o(v,m,b,y){function L(G){return G instanceof b?G:new b(function(re){re(G)})}return new(b||(b=Promise))(function(G,re){function ue(Ce){try{we(y.next(Ce))}catch(Fe){re(Fe)}}function ce(Ce){try{we(y.throw(Ce))}catch(Fe){re(Fe)}}function we(Ce){Ce.done?G(Ce.value):L(Ce.value).then(ue,ce)}we((y=y.apply(v,[])).next())})}function l(v,m){var b={label:0,sent:function(){if(G[0]&1)throw G[1];return G[1]},trys:[],ops:[]},y,L,G,re;return re={next:ue(0),throw:ue(1),return:ue(2)},typeof Symbol=="function"&&(re[Symbol.iterator]=function(){return this}),re;function ue(we){return function(Ce){return ce([we,Ce])}}function ce(we){if(y)throw new TypeError("Generator is already executing.");for(;b;)try{if(y=1,L&&(G=we[0]&2?L.return:we[0]?L.throw||((G=L.return)&&G.call(L),0):L.next)&&!(G=G.call(L,we[1])).done)return G;switch(L=0,G&&(we=[we[0]&2,G.value]),we[0]){case 0:case 1:G=we;break;case 4:return b.label++,{value:we[1],done:!1};case 5:b.label++,L=we[1],we=[0];continue;case 7:we=b.ops.pop(),b.trys.pop();continue;default:if(G=b.trys,!(G=G.length>0&&G[G.length-1])&&(we[0]===6||we[0]===2)){b=0;continue}if(we[0]===3&&(!G||we[1]>G[0]&&we[1]<G[3])){b.label=we[1];break}if(we[0]===6&&b.label<G[1]){b.label=G[1],G=we;break}if(G&&b.label<G[2]){b.label=G[2],b.ops.push(we);break}G[2]&&b.ops.pop(),b.trys.pop();continue}we=m.call(v,b)}catch(Ce){we=[6,Ce],L=0}finally{y=G=0}if(we[0]&5)throw we[1];return{value:we[0]?we[1]:void 0,done:!0}}}function c(v,m,b){if(arguments.length===2)for(var y=0,L=m.length,G;y<L;y++)(G||!(y in m))&&(G||(G=Array.prototype.slice.call(m,0,y)),G[y]=m[y]);return v.concat(G||m)}for(var A=function(){function v(m,b,y,L){this.left=m,this.top=b,this.width=y,this.height=L}return v.prototype.add=function(m,b,y,L){return new v(this.left+m,this.top+b,this.width+y,this.height+L)},v.fromClientRect=function(m,b){return new v(b.left+m.windowBounds.left,b.top+m.windowBounds.top,b.width,b.height)},v.fromDOMRectList=function(m,b){var y=Array.from(b).find(function(L){return L.width!==0});return y?new v(y.left+m.windowBounds.left,y.top+m.windowBounds.top,y.width,y.height):v.EMPTY},v.EMPTY=new v(0,0,0,0),v}(),u=function(v,m){return A.fromClientRect(v,m.getBoundingClientRect())},i=function(v){var m=v.body,b=v.documentElement;if(!m||!b)throw new Error("Unable to get document size");var y=Math.max(Math.max(m.scrollWidth,b.scrollWidth),Math.max(m.offsetWidth,b.offsetWidth),Math.max(m.clientWidth,b.clientWidth)),L=Math.max(Math.max(m.scrollHeight,b.scrollHeight),Math.max(m.offsetHeight,b.offsetHeight),Math.max(m.clientHeight,b.clientHeight));return new A(0,0,y,L)},d=function(v){for(var m=[],b=0,y=v.length;b<y;){var L=v.charCodeAt(b++);if(L>=55296&&L<=56319&&b<y){var G=v.charCodeAt(b++);(G&64512)===56320?m.push(((L&1023)<<10)+(G&1023)+65536):(m.push(L),b--)}else m.push(L)}return m},h=function(){for(var v=[],m=0;m<arguments.length;m++)v[m]=arguments[m];if(String.fromCodePoint)return String.fromCodePoint.apply(String,v);var b=v.length;if(!b)return"";for(var y=[],L=-1,G="";++L<b;){var re=v[L];re<=65535?y.push(re):(re-=65536,y.push((re>>10)+55296,re%1024+56320)),(L+1===b||y.length>16384)&&(G+=String.fromCharCode.apply(String,y),y.length=0)}return G},f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=typeof Uint8Array>"u"?[]:new Uint8Array(256),j=0;j<f.length;j++)w[f.charCodeAt(j)]=j;for(var B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=typeof Uint8Array>"u"?[]:new Uint8Array(256),x=0;x<B.length;x++)p[B.charCodeAt(x)]=x;for(var C=function(v){var m=v.length*.75,b=v.length,y,L=0,G,re,ue,ce;v[v.length-1]==="="&&(m--,v[v.length-2]==="="&&m--);var we=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(m):new Array(m),Ce=Array.isArray(we)?we:new Uint8Array(we);for(y=0;y<b;y+=4)G=p[v.charCodeAt(y)],re=p[v.charCodeAt(y+1)],ue=p[v.charCodeAt(y+2)],ce=p[v.charCodeAt(y+3)],Ce[L++]=G<<2|re>>4,Ce[L++]=(re&15)<<4|ue>>2,Ce[L++]=(ue&3)<<6|ce&63;return we},S=function(v){for(var m=v.length,b=[],y=0;y<m;y+=2)b.push(v[y+1]<<8|v[y]);return b},E=function(v){for(var m=v.length,b=[],y=0;y<m;y+=4)b.push(v[y+3]<<24|v[y+2]<<16|v[y+1]<<8|v[y]);return b},I=5,H=11,M=2,D=H-I,K=65536>>I,U=1<<I,F=U-1,k=1024>>I,T=K+k,P=T,$=32,ee=P+$,V=65536>>H,W=1<<D,te=W-1,oe=function(v,m,b){return v.slice?v.slice(m,b):new Uint16Array(Array.prototype.slice.call(v,m,b))},O=function(v,m,b){return v.slice?v.slice(m,b):new Uint32Array(Array.prototype.slice.call(v,m,b))},z=function(v,m){var b=C(v),y=Array.isArray(b)?E(b):new Uint32Array(b),L=Array.isArray(b)?S(b):new Uint16Array(b),G=24,re=oe(L,G/2,y[4]/2),ue=y[5]===2?oe(L,(G+y[4])/2):O(y,Math.ceil((G+y[4])/4));return new ne(y[0],y[1],y[2],y[3],re,ue)},ne=function(){function v(m,b,y,L,G,re){this.initialValue=m,this.errorValue=b,this.highStart=y,this.highValueIndex=L,this.index=G,this.data=re}return v.prototype.get=function(m){var b;if(m>=0){if(m<55296||m>56319&&m<=65535)return b=this.index[m>>I],b=(b<<M)+(m&F),this.data[b];if(m<=65535)return b=this.index[K+(m-55296>>I)],b=(b<<M)+(m&F),this.data[b];if(m<this.highStart)return b=ee-V+(m>>H),b=this.index[b],b+=m>>I&te,b=this.index[b],b=(b<<M)+(m&F),this.data[b];if(m<=1114111)return this.data[this.highValueIndex]}return this.errorValue},v}(),Z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",q=typeof Uint8Array>"u"?[]:new Uint8Array(256),Ae=0;Ae<Z.length;Ae++)q[Z.charCodeAt(Ae)]=Ae;var ve="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",be=50,Ne=1,Te=2,De=3,We=4,_e=5,de=7,Ut=8,dt=9,ot=10,ze=11,gt=12,et=13,It=14,vt=15,Tt=16,Se=17,pe=18,Ie=19,ke=20,Ye=21,Pe=22,Xe=23,Ct=24,bt=25,ft=26,Me=27,ct=28,nt=29,ut=30,at=31,Le=32,lt=33,tt=34,Ve=35,it=36,jt=37,Pt=38,nr=39,sr=40,Qt=41,Xr=42,Kn=43,Kr=[9001,65288],Ln="!",st="",Lr="",Er=z(ve),an=[ut,it],kn=[Ne,Te,De,_e],as=[ot,Ut],Xn=[Me,ft],Gn=kn.concat(as),os=[Pt,nr,sr,tt,Ve],Ts=[vt,et],Mo=function(v,m){m===void 0&&(m="strict");var b=[],y=[],L=[];return v.forEach(function(G,re){var ue=Er.get(G);if(ue>be?(L.push(!0),ue-=be):L.push(!1),["normal","auto","loose"].indexOf(m)!==-1&&[8208,8211,12316,12448].indexOf(G)!==-1)return y.push(re),b.push(Tt);if(ue===We||ue===ze){if(re===0)return y.push(re),b.push(ut);var ce=b[re-1];return Gn.indexOf(ce)===-1?(y.push(y[re-1]),b.push(ce)):(y.push(re),b.push(ut))}if(y.push(re),ue===at)return b.push(m==="strict"?Ye:jt);if(ue===Xr||ue===nt)return b.push(ut);if(ue===Kn)return G>=131072&&G<=196605||G>=196608&&G<=262141?b.push(jt):b.push(ut);b.push(ue)}),[y,b,L]},Ps=function(v,m,b,y){var L=y[b];if(Array.isArray(v)?v.indexOf(L)!==-1:v===L)for(var G=b;G<=y.length;){G++;var re=y[G];if(re===m)return!0;if(re!==ot)break}if(L===ot)for(var G=b;G>0;){G--;var ue=y[G];if(Array.isArray(v)?v.indexOf(ue)!==-1:v===ue)for(var ce=b;ce<=y.length;){ce++;var re=y[ce];if(re===m)return!0;if(re!==ot)break}if(ue!==ot)break}return!1},mo=function(v,m){for(var b=v;b>=0;){var y=m[b];if(y===ot)b--;else return y}return 0},Ni=function(v,m,b,y,L){if(b[y]===0)return st;var G=y-1;if(Array.isArray(L)&&L[G]===!0)return st;var re=G-1,ue=G+1,ce=m[G],we=re>=0?m[re]:0,Ce=m[ue];if(ce===Te&&Ce===De)return st;if(kn.indexOf(ce)!==-1)return Ln;if(kn.indexOf(Ce)!==-1||as.indexOf(Ce)!==-1)return st;if(mo(G,m)===Ut)return Lr;if(Er.get(v[G])===ze||(ce===Le||ce===lt)&&Er.get(v[ue])===ze||ce===de||Ce===de||ce===dt||[ot,et,vt].indexOf(ce)===-1&&Ce===dt||[Se,pe,Ie,Ct,ct].indexOf(Ce)!==-1||mo(G,m)===Pe||Ps(Xe,Pe,G,m)||Ps([Se,pe],Ye,G,m)||Ps(gt,gt,G,m))return st;if(ce===ot)return Lr;if(ce===Xe||Ce===Xe)return st;if(Ce===Tt||ce===Tt)return Lr;if([et,vt,Ye].indexOf(Ce)!==-1||ce===It||we===it&&Ts.indexOf(ce)!==-1||ce===ct&&Ce===it||Ce===ke||an.indexOf(Ce)!==-1&&ce===bt||an.indexOf(ce)!==-1&&Ce===bt||ce===Me&&[jt,Le,lt].indexOf(Ce)!==-1||[jt,Le,lt].indexOf(ce)!==-1&&Ce===ft||an.indexOf(ce)!==-1&&Xn.indexOf(Ce)!==-1||Xn.indexOf(ce)!==-1&&an.indexOf(Ce)!==-1||[Me,ft].indexOf(ce)!==-1&&(Ce===bt||[Pe,vt].indexOf(Ce)!==-1&&m[ue+1]===bt)||[Pe,vt].indexOf(ce)!==-1&&Ce===bt||ce===bt&&[bt,ct,Ct].indexOf(Ce)!==-1)return st;if([bt,ct,Ct,Se,pe].indexOf(Ce)!==-1)for(var Fe=G;Fe>=0;){var He=m[Fe];if(He===bt)return st;if([ct,Ct].indexOf(He)!==-1)Fe--;else break}if([Me,ft].indexOf(Ce)!==-1)for(var Fe=[Se,pe].indexOf(ce)!==-1?re:G;Fe>=0;){var He=m[Fe];if(He===bt)return st;if([ct,Ct].indexOf(He)!==-1)Fe--;else break}if(Pt===ce&&[Pt,nr,tt,Ve].indexOf(Ce)!==-1||[nr,tt].indexOf(ce)!==-1&&[nr,sr].indexOf(Ce)!==-1||[sr,Ve].indexOf(ce)!==-1&&Ce===sr||os.indexOf(ce)!==-1&&[ke,ft].indexOf(Ce)!==-1||os.indexOf(Ce)!==-1&&ce===Me||an.indexOf(ce)!==-1&&an.indexOf(Ce)!==-1||ce===Ct&&an.indexOf(Ce)!==-1||an.concat(bt).indexOf(ce)!==-1&&Ce===Pe&&Kr.indexOf(v[ue])===-1||an.concat(bt).indexOf(Ce)!==-1&&ce===pe)return st;if(ce===Qt&&Ce===Qt){for(var wt=b[G],At=1;wt>0&&(wt--,m[wt]===Qt);)At++;if(At%2!==0)return st}return ce===Le&&Ce===lt?st:Lr},Si=function(v,m){m||(m={lineBreak:"normal",wordBreak:"normal"});var b=Mo(v,m.lineBreak),y=b[0],L=b[1],G=b[2];(m.wordBreak==="break-all"||m.wordBreak==="break-word")&&(L=L.map(function(ue){return[bt,ut,Xr].indexOf(ue)!==-1?jt:ue}));var re=m.wordBreak==="keep-all"?G.map(function(ue,ce){return ue&&v[ce]>=19968&&v[ce]<=40959}):void 0;return[y,L,re]},Ei=function(){function v(m,b,y,L){this.codePoints=m,this.required=b===Ln,this.start=y,this.end=L}return v.prototype.slice=function(){return h.apply(void 0,this.codePoints.slice(this.start,this.end))},v}(),du=function(v,m){var b=d(v),y=Si(b,m),L=y[0],G=y[1],re=y[2],ue=b.length,ce=0,we=0;return{next:function(){if(we>=ue)return{done:!0,value:null};for(var Ce=st;we<ue&&(Ce=Ni(b,G,L,++we,re))===st;);if(Ce!==st||we===ue){var Fe=new Ei(b,Ce,ce,we);return ce=we,{value:Fe,done:!1}}return{done:!0,value:null}}}},UA=1,Ul=2,po=4,bs=8,go=10,QA=47,Ga=92,Ql=9,Il=32,Ko=34,Sa=61,fu=35,on=36,Ll=37,Go=39,Os=40,sa=41,aa=95,An=45,Yr=33,IA=60,hu=62,mu=64,pu=91,Ea=93,kl=61,Tl=123,oa=63,LA=125,Pl=124,gu=126,vu=128,_i=65533,Va=42,is=43,xu=44,Vo=58,kA=59,Ht=46,yu=0,wu=8,bu=11,ju=14,$a=31,za=127,Ds=-1,Ol=48,$o=97,Fi=101,zo=102,Ui=117,Qi=122,Dl=65,Ii=69,Li=70,Wo=85,Jo=90,ln=function(v){return v>=Ol&&v<=57},ki=function(v){return v>=55296&&v<=57343},_a=function(v){return ln(v)||v>=Dl&&v<=Li||v>=$o&&v<=zo},Xo=function(v){return v>=$o&&v<=Qi},Rl=function(v){return v>=Dl&&v<=Jo},Hl=function(v){return Xo(v)||Rl(v)},Wa=function(v){return v>=vu},Rs=function(v){return v===go||v===Ql||v===Il},Yo=function(v){return Hl(v)||Wa(v)||v===aa},TA=function(v){return Yo(v)||ln(v)||v===An},qo=function(v){return v>=yu&&v<=wu||v===bu||v>=ju&&v<=$a||v===za},ia=function(v,m){return v!==Ga?!1:m!==go},_=function(v,m,b){return v===An?Yo(m)||ia(m,b):Yo(v)?!0:!!(v===Ga&&ia(v,m))},J=function(v,m,b){return v===is||v===An?ln(m)?!0:m===Ht&&ln(b):ln(v===Ht?m:v)},me=function(v){var m=0,b=1;(v[m]===is||v[m]===An)&&(v[m]===An&&(b=-1),m++);for(var y=[];ln(v[m]);)y.push(v[m++]);var L=y.length?parseInt(h.apply(void 0,y),10):0;v[m]===Ht&&m++;for(var G=[];ln(v[m]);)G.push(v[m++]);var re=G.length,ue=re?parseInt(h.apply(void 0,G),10):0;(v[m]===Ii||v[m]===Fi)&&m++;var ce=1;(v[m]===is||v[m]===An)&&(v[m]===An&&(ce=-1),m++);for(var we=[];ln(v[m]);)we.push(v[m++]);var Ce=we.length?parseInt(h.apply(void 0,we),10):0;return b*(L+ue*Math.pow(10,-re))*Math.pow(10,ce*Ce)},xe={type:2},Ee={type:3},Ge={type:4},qe={type:13},St={type:8},Lt={type:21},Mt={type:9},$t={type:10},ur={type:11},Or={type:12},cn={type:14},vr={type:23},pn={type:1},un={type:25},Tn={type:24},Hs={type:26},As={type:27},Ml={type:28},Ti={type:29},Zo={type:31},Fa={type:32},vo=function(){function v(){this._value=[]}return v.prototype.write=function(m){this._value=this._value.concat(d(m))},v.prototype.read=function(){for(var m=[],b=this.consumeToken();b!==Fa;)m.push(b),b=this.consumeToken();return m},v.prototype.consumeToken=function(){var m=this.consumeCodePoint();switch(m){case Ko:return this.consumeStringToken(Ko);case fu:var b=this.peekCodePoint(0),y=this.peekCodePoint(1),L=this.peekCodePoint(2);if(TA(b)||ia(y,L)){var G=_(b,y,L)?Ul:UA,re=this.consumeName();return{type:5,value:re,flags:G}}break;case on:if(this.peekCodePoint(0)===Sa)return this.consumeCodePoint(),qe;break;case Go:return this.consumeStringToken(Go);case Os:return xe;case sa:return Ee;case Va:if(this.peekCodePoint(0)===Sa)return this.consumeCodePoint(),cn;break;case is:if(J(m,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(m),this.consumeNumericToken();break;case xu:return Ge;case An:var ue=m,ce=this.peekCodePoint(0),we=this.peekCodePoint(1);if(J(ue,ce,we))return this.reconsumeCodePoint(m),this.consumeNumericToken();if(_(ue,ce,we))return this.reconsumeCodePoint(m),this.consumeIdentLikeToken();if(ce===An&&we===hu)return this.consumeCodePoint(),this.consumeCodePoint(),Tn;break;case Ht:if(J(m,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(m),this.consumeNumericToken();break;case QA:if(this.peekCodePoint(0)===Va)for(this.consumeCodePoint();;){var Ce=this.consumeCodePoint();if(Ce===Va&&(Ce=this.consumeCodePoint(),Ce===QA))return this.consumeToken();if(Ce===Ds)return this.consumeToken()}break;case Vo:return Hs;case kA:return As;case IA:if(this.peekCodePoint(0)===Yr&&this.peekCodePoint(1)===An&&this.peekCodePoint(2)===An)return this.consumeCodePoint(),this.consumeCodePoint(),un;break;case mu:var Fe=this.peekCodePoint(0),He=this.peekCodePoint(1),wt=this.peekCodePoint(2);if(_(Fe,He,wt)){var re=this.consumeName();return{type:7,value:re}}break;case pu:return Ml;case Ga:if(ia(m,this.peekCodePoint(0)))return this.reconsumeCodePoint(m),this.consumeIdentLikeToken();break;case Ea:return Ti;case kl:if(this.peekCodePoint(0)===Sa)return this.consumeCodePoint(),St;break;case Tl:return ur;case LA:return Or;case Ui:case Wo:var At=this.peekCodePoint(0),pt=this.peekCodePoint(1);return At===is&&(_a(pt)||pt===oa)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(m),this.consumeIdentLikeToken();case Pl:if(this.peekCodePoint(0)===Sa)return this.consumeCodePoint(),Mt;if(this.peekCodePoint(0)===Pl)return this.consumeCodePoint(),Lt;break;case gu:if(this.peekCodePoint(0)===Sa)return this.consumeCodePoint(),$t;break;case Ds:return Fa}return Rs(m)?(this.consumeWhiteSpace(),Zo):ln(m)?(this.reconsumeCodePoint(m),this.consumeNumericToken()):Yo(m)?(this.reconsumeCodePoint(m),this.consumeIdentLikeToken()):{type:6,value:h(m)}},v.prototype.consumeCodePoint=function(){var m=this._value.shift();return typeof m>"u"?-1:m},v.prototype.reconsumeCodePoint=function(m){this._value.unshift(m)},v.prototype.peekCodePoint=function(m){return m>=this._value.length?-1:this._value[m]},v.prototype.consumeUnicodeRangeToken=function(){for(var m=[],b=this.consumeCodePoint();_a(b)&&m.length<6;)m.push(b),b=this.consumeCodePoint();for(var y=!1;b===oa&&m.length<6;)m.push(b),b=this.consumeCodePoint(),y=!0;if(y){var L=parseInt(h.apply(void 0,m.map(function(ce){return ce===oa?Ol:ce})),16),G=parseInt(h.apply(void 0,m.map(function(ce){return ce===oa?Li:ce})),16);return{type:30,start:L,end:G}}var re=parseInt(h.apply(void 0,m),16);if(this.peekCodePoint(0)===An&&_a(this.peekCodePoint(1))){this.consumeCodePoint(),b=this.consumeCodePoint();for(var ue=[];_a(b)&&ue.length<6;)ue.push(b),b=this.consumeCodePoint();var G=parseInt(h.apply(void 0,ue),16);return{type:30,start:re,end:G}}else return{type:30,start:re,end:re}},v.prototype.consumeIdentLikeToken=function(){var m=this.consumeName();return m.toLowerCase()==="url"&&this.peekCodePoint(0)===Os?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Os?(this.consumeCodePoint(),{type:19,value:m}):{type:20,value:m}},v.prototype.consumeUrlToken=function(){var m=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ds)return{type:22,value:""};var b=this.peekCodePoint(0);if(b===Go||b===Ko){var y=this.consumeStringToken(this.consumeCodePoint());return y.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ds||this.peekCodePoint(0)===sa)?(this.consumeCodePoint(),{type:22,value:y.value}):(this.consumeBadUrlRemnants(),vr)}for(;;){var L=this.consumeCodePoint();if(L===Ds||L===sa)return{type:22,value:h.apply(void 0,m)};if(Rs(L))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Ds||this.peekCodePoint(0)===sa?(this.consumeCodePoint(),{type:22,value:h.apply(void 0,m)}):(this.consumeBadUrlRemnants(),vr);if(L===Ko||L===Go||L===Os||qo(L))return this.consumeBadUrlRemnants(),vr;if(L===Ga)if(ia(L,this.peekCodePoint(0)))m.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),vr;else m.push(L)}},v.prototype.consumeWhiteSpace=function(){for(;Rs(this.peekCodePoint(0));)this.consumeCodePoint()},v.prototype.consumeBadUrlRemnants=function(){for(;;){var m=this.consumeCodePoint();if(m===sa||m===Ds)return;ia(m,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},v.prototype.consumeStringSlice=function(m){for(var b=5e4,y="";m>0;){var L=Math.min(b,m);y+=h.apply(void 0,this._value.splice(0,L)),m-=L}return this._value.shift(),y},v.prototype.consumeStringToken=function(m){var b="",y=0;do{var L=this._value[y];if(L===Ds||L===void 0||L===m)return b+=this.consumeStringSlice(y),{type:0,value:b};if(L===go)return this._value.splice(0,y),pn;if(L===Ga){var G=this._value[y+1];G!==Ds&&G!==void 0&&(G===go?(b+=this.consumeStringSlice(y),y=-1,this._value.shift()):ia(L,G)&&(b+=this.consumeStringSlice(y),b+=h(this.consumeEscapedCodePoint()),y=-1))}y++}while(!0)},v.prototype.consumeNumber=function(){var m=[],b=po,y=this.peekCodePoint(0);for((y===is||y===An)&&m.push(this.consumeCodePoint());ln(this.peekCodePoint(0));)m.push(this.consumeCodePoint());y=this.peekCodePoint(0);var L=this.peekCodePoint(1);if(y===Ht&&ln(L))for(m.push(this.consumeCodePoint(),this.consumeCodePoint()),b=bs;ln(this.peekCodePoint(0));)m.push(this.consumeCodePoint());y=this.peekCodePoint(0),L=this.peekCodePoint(1);var G=this.peekCodePoint(2);if((y===Ii||y===Fi)&&((L===is||L===An)&&ln(G)||ln(L)))for(m.push(this.consumeCodePoint(),this.consumeCodePoint()),b=bs;ln(this.peekCodePoint(0));)m.push(this.consumeCodePoint());return[me(m),b]},v.prototype.consumeNumericToken=function(){var m=this.consumeNumber(),b=m[0],y=m[1],L=this.peekCodePoint(0),G=this.peekCodePoint(1),re=this.peekCodePoint(2);if(_(L,G,re)){var ue=this.consumeName();return{type:15,number:b,flags:y,unit:ue}}return L===Ll?(this.consumeCodePoint(),{type:16,number:b,flags:y}):{type:17,number:b,flags:y}},v.prototype.consumeEscapedCodePoint=function(){var m=this.consumeCodePoint();if(_a(m)){for(var b=h(m);_a(this.peekCodePoint(0))&&b.length<6;)b+=h(this.consumeCodePoint());Rs(this.peekCodePoint(0))&&this.consumeCodePoint();var y=parseInt(b,16);return y===0||ki(y)||y>1114111?_i:y}return m===Ds?_i:m},v.prototype.consumeName=function(){for(var m="";;){var b=this.consumeCodePoint();if(TA(b))m+=h(b);else if(ia(b,this.peekCodePoint(0)))m+=h(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(b),m}},v}(),xo=function(){function v(m){this._tokens=m}return v.create=function(m){var b=new vo;return b.write(m),new v(b.read())},v.parseValue=function(m){return v.create(m).parseComponentValue()},v.parseValues=function(m){return v.create(m).parseComponentValues()},v.prototype.parseComponentValue=function(){for(var m=this.consumeToken();m.type===31;)m=this.consumeToken();if(m.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(m);var b=this.consumeComponentValue();do m=this.consumeToken();while(m.type===31);if(m.type===32)return b;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},v.prototype.parseComponentValues=function(){for(var m=[];;){var b=this.consumeComponentValue();if(b.type===32)return m;m.push(b),m.push()}},v.prototype.consumeComponentValue=function(){var m=this.consumeToken();switch(m.type){case 11:case 28:case 2:return this.consumeSimpleBlock(m.type);case 19:return this.consumeFunction(m)}return m},v.prototype.consumeSimpleBlock=function(m){for(var b={type:m,values:[]},y=this.consumeToken();;){if(y.type===32||Oi(y,m))return b;this.reconsumeToken(y),b.values.push(this.consumeComponentValue()),y=this.consumeToken()}},v.prototype.consumeFunction=function(m){for(var b={name:m.value,values:[],type:18};;){var y=this.consumeToken();if(y.type===32||y.type===3)return b;this.reconsumeToken(y),b.values.push(this.consumeComponentValue())}},v.prototype.consumeToken=function(){var m=this._tokens.shift();return typeof m>"u"?Fa:m},v.prototype.reconsumeToken=function(m){this._tokens.unshift(m)},v}(),Aa=function(v){return v.type===15},qr=function(v){return v.type===17},Ar=function(v){return v.type===20},ei=function(v){return v.type===0},ti=function(v,m){return Ar(v)&&v.value===m},Pi=function(v){return v.type!==31},br=function(v){return v.type!==31&&v.type!==4},Nn=function(v){var m=[],b=[];return v.forEach(function(y){if(y.type===4){if(b.length===0)throw new Error("Error parsing function args, zero tokens for arg");m.push(b),b=[];return}y.type!==31&&b.push(y)}),b.length&&m.push(b),m},Oi=function(v,m){return m===11&&v.type===12||m===28&&v.type===29?!0:m===2&&v.type===3},la=function(v){return v.type===17||v.type===15},dr=function(v){return v.type===16||la(v)},yo=function(v){return v.length>1?[v[0],v[1]]:[v[0]]},Zr={type:17,number:0,flags:po},ri={type:16,number:50,flags:po},Yn={type:16,number:100,flags:po},ca=function(v,m,b){var y=v[0],L=v[1];return[tr(y,m),tr(typeof L<"u"?L:y,b)]},tr=function(v,m){if(v.type===16)return v.number/100*m;if(Aa(v))switch(v.unit){case"rem":case"em":return 16*v.number;case"px":default:return v.number}return v.number},ls="deg",Ja="grad",Ua="rad",Xa="turn",wo={name:"angle",parse:function(v,m){if(m.type===15)switch(m.unit){case ls:return Math.PI*m.number/180;case Ja:return Math.PI/200*m.number;case Ua:return m.number;case Xa:return Math.PI*2*m.number}throw new Error("Unsupported angle type")}},ni=function(v){return v.type===15&&(v.unit===ls||v.unit===Ja||v.unit===Ua||v.unit===Xa)},Gr=function(v){var m=v.filter(Ar).map(function(b){return b.value}).join(" ");switch(m){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Zr,Zr];case"to top":case"bottom":return qn(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Zr,Yn];case"to right":case"left":return qn(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Yn,Yn];case"to bottom":case"top":return qn(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Yn,Zr];case"to left":case"right":return qn(270)}return 0},qn=function(v){return Math.PI*v/180},Pn={name:"color",parse:function(v,m){if(m.type===18){var b=bo[m.name];if(typeof b>"u")throw new Error('Attempting to parse an unsupported color function "'+m.name+'"');return b(v,m.values)}if(m.type===5){if(m.value.length===3){var y=m.value.substring(0,1),L=m.value.substring(1,2),G=m.value.substring(2,3);return Ms(parseInt(y+y,16),parseInt(L+L,16),parseInt(G+G,16),1)}if(m.value.length===4){var y=m.value.substring(0,1),L=m.value.substring(1,2),G=m.value.substring(2,3),re=m.value.substring(3,4);return Ms(parseInt(y+y,16),parseInt(L+L,16),parseInt(G+G,16),parseInt(re+re,16)/255)}if(m.value.length===6){var y=m.value.substring(0,2),L=m.value.substring(2,4),G=m.value.substring(4,6);return Ms(parseInt(y,16),parseInt(L,16),parseInt(G,16),1)}if(m.value.length===8){var y=m.value.substring(0,2),L=m.value.substring(2,4),G=m.value.substring(4,6),re=m.value.substring(6,8);return Ms(parseInt(y,16),parseInt(L,16),parseInt(G,16),parseInt(re,16)/255)}}if(m.type===20){var ue=Vn[m.value.toUpperCase()];if(typeof ue<"u")return ue}return Vn.TRANSPARENT}},On=function(v){return(255&v)===0},Vr=function(v){var m=255&v,b=255&v>>8,y=255&v>>16,L=255&v>>24;return m<255?"rgba("+L+","+y+","+b+","+m/255+")":"rgb("+L+","+y+","+b+")"},Ms=function(v,m,b,y){return(v<<24|m<<16|b<<8|Math.round(y*255)<<0)>>>0},Di=function(v,m){if(v.type===17)return v.number;if(v.type===16){var b=m===3?1:255;return m===3?v.number/100*b:Math.round(v.number/100*b)}return 0},Ri=function(v,m){var b=m.filter(br);if(b.length===3){var y=b.map(Di),L=y[0],G=y[1],re=y[2];return Ms(L,G,re,1)}if(b.length===4){var ue=b.map(Di),L=ue[0],G=ue[1],re=ue[2],ce=ue[3];return Ms(L,G,re,ce)}return 0};function Qa(v,m,b){return b<0&&(b+=1),b>=1&&(b-=1),b<1/6?(m-v)*b*6+v:b<1/2?m:b<2/3?(m-v)*6*(2/3-b)+v:v}var Ya=function(v,m){var b=m.filter(br),y=b[0],L=b[1],G=b[2],re=b[3],ue=(y.type===17?qn(y.number):wo.parse(v,y))/(Math.PI*2),ce=dr(L)?L.number/100:0,we=dr(G)?G.number/100:0,Ce=typeof re<"u"&&dr(re)?tr(re,1):1;if(ce===0)return Ms(we*255,we*255,we*255,1);var Fe=we<=.5?we*(ce+1):we+ce-we*ce,He=we*2-Fe,wt=Qa(He,Fe,ue+1/3),At=Qa(He,Fe,ue),pt=Qa(He,Fe,ue-1/3);return Ms(wt*255,At*255,pt*255,Ce)},bo={hsl:Ya,hsla:Ya,rgb:Ri,rgba:Ri},ua=function(v,m){return Pn.parse(v,xo.create(m).parseComponentValue())},Vn={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},si={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(v,m){return m.map(function(b){if(Ar(b))switch(b.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Ks={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},js=function(v,m){var b=Pn.parse(v,m[0]),y=m[1];return y&&dr(y)?{color:b,stop:y}:{color:b,stop:null}},fr=function(v,m){var b=v[0],y=v[v.length-1];b.stop===null&&(b.stop=Zr),y.stop===null&&(y.stop=Yn);for(var L=[],G=0,re=0;re<v.length;re++){var ue=v[re].stop;if(ue!==null){var ce=tr(ue,m);ce>G?L.push(ce):L.push(G),G=ce}else L.push(null)}for(var we=null,re=0;re<L.length;re++){var Ce=L[re];if(Ce===null)we===null&&(we=re);else if(we!==null){for(var Fe=re-we,He=L[we-1],wt=(Ce-He)/(Fe+1),At=1;At<=Fe;At++)L[we+At-1]=wt*At;we=null}}return v.map(function(pt,er){var kt=pt.color;return{color:kt,stop:Math.max(Math.min(1,L[er]/m),0)}})},jr=function(v,m,b){var y=m/2,L=b/2,G=tr(v[0],m)-y,re=L-tr(v[1],b);return(Math.atan2(re,G)+Math.PI*2)%(Math.PI*2)},en=function(v,m,b){var y=typeof v=="number"?v:jr(v,m,b),L=Math.abs(m*Math.sin(y))+Math.abs(b*Math.cos(y)),G=m/2,re=b/2,ue=L/2,ce=Math.sin(y-Math.PI/2)*ue,we=Math.cos(y-Math.PI/2)*ue;return[L,G-we,G+we,re-ce,re+ce]},xr=function(v,m){return Math.sqrt(v*v+m*m)},Ia=function(v,m,b,y,L){var G=[[0,0],[0,m],[v,0],[v,m]];return G.reduce(function(re,ue){var ce=ue[0],we=ue[1],Ce=xr(b-ce,y-we);return(L?Ce<re.optimumDistance:Ce>re.optimumDistance)?{optimumCorner:ue,optimumDistance:Ce}:re},{optimumDistance:L?1/0:-1/0,optimumCorner:null}).optimumCorner},PA=function(v,m,b,y,L){var G=0,re=0;switch(v.size){case 0:v.shape===0?G=re=Math.min(Math.abs(m),Math.abs(m-y),Math.abs(b),Math.abs(b-L)):v.shape===1&&(G=Math.min(Math.abs(m),Math.abs(m-y)),re=Math.min(Math.abs(b),Math.abs(b-L)));break;case 2:if(v.shape===0)G=re=Math.min(xr(m,b),xr(m,b-L),xr(m-y,b),xr(m-y,b-L));else if(v.shape===1){var ue=Math.min(Math.abs(b),Math.abs(b-L))/Math.min(Math.abs(m),Math.abs(m-y)),ce=Ia(y,L,m,b,!0),we=ce[0],Ce=ce[1];G=xr(we-m,(Ce-b)/ue),re=ue*G}break;case 1:v.shape===0?G=re=Math.max(Math.abs(m),Math.abs(m-y),Math.abs(b),Math.abs(b-L)):v.shape===1&&(G=Math.max(Math.abs(m),Math.abs(m-y)),re=Math.max(Math.abs(b),Math.abs(b-L)));break;case 3:if(v.shape===0)G=re=Math.max(xr(m,b),xr(m,b-L),xr(m-y,b),xr(m-y,b-L));else if(v.shape===1){var ue=Math.max(Math.abs(b),Math.abs(b-L))/Math.max(Math.abs(m),Math.abs(m-y)),Fe=Ia(y,L,m,b,!1),we=Fe[0],Ce=Fe[1];G=xr(we-m,(Ce-b)/ue),re=ue*G}break}return Array.isArray(v.size)&&(G=tr(v.size[0],y),re=v.size.length===2?tr(v.size[1],L):G),[G,re]},Hi=function(v,m){var b=qn(180),y=[];return Nn(m).forEach(function(L,G){if(G===0){var re=L[0];if(re.type===20&&re.value==="to"){b=Gr(L);return}else if(ni(re)){b=wo.parse(v,re);return}}var ue=js(v,L);y.push(ue)}),{angle:b,stops:y,type:1}},ai=function(v,m){var b=qn(180),y=[];return Nn(m).forEach(function(L,G){if(G===0){var re=L[0];if(re.type===20&&["top","left","right","bottom"].indexOf(re.value)!==-1){b=Gr(L);return}else if(ni(re)){b=(wo.parse(v,re)+qn(270))%qn(360);return}}var ue=js(v,L);y.push(ue)}),{angle:b,stops:y,type:1}},Af=function(v,m){var b=qn(180),y=[],L=1,G=0,re=3,ue=[];return Nn(m).forEach(function(ce,we){var Ce=ce[0];if(we===0){if(Ar(Ce)&&Ce.value==="linear"){L=1;return}else if(Ar(Ce)&&Ce.value==="radial"){L=2;return}}if(Ce.type===18){if(Ce.name==="from"){var Fe=Pn.parse(v,Ce.values[0]);y.push({stop:Zr,color:Fe})}else if(Ce.name==="to"){var Fe=Pn.parse(v,Ce.values[0]);y.push({stop:Yn,color:Fe})}else if(Ce.name==="color-stop"){var He=Ce.values.filter(br);if(He.length===2){var Fe=Pn.parse(v,He[1]),wt=He[0];qr(wt)&&y.push({stop:{type:16,number:wt.number*100,flags:wt.flags},color:Fe})}}}}),L===1?{angle:(b+qn(180))%qn(360),stops:y,type:L}:{size:re,shape:G,stops:y,position:ue,type:L}},Bu="closest-side",Cu="farthest-side",Nu="closest-corner",Su="farthest-corner",Eu="circle",Mi="ellipse",_u="cover",Fu="contain",lf=function(v,m){var b=0,y=3,L=[],G=[];return Nn(m).forEach(function(re,ue){var ce=!0;if(ue===0){var we=!1;ce=re.reduce(function(Fe,He){if(we)if(Ar(He))switch(He.value){case"center":return G.push(ri),Fe;case"top":case"left":return G.push(Zr),Fe;case"right":case"bottom":return G.push(Yn),Fe}else(dr(He)||la(He))&&G.push(He);else if(Ar(He))switch(He.value){case Eu:return b=0,!1;case Mi:return b=1,!1;case"at":return we=!0,!1;case Bu:return y=0,!1;case _u:case Cu:return y=1,!1;case Fu:case Nu:return y=2,!1;case Su:return y=3,!1}else if(la(He)||dr(He))return Array.isArray(y)||(y=[]),y.push(He),!1;return Fe},ce)}if(ce){var Ce=js(v,re);L.push(Ce)}}),{size:y,shape:b,stops:L,position:G,type:2}},OA=function(v,m){var b=0,y=3,L=[],G=[];return Nn(m).forEach(function(re,ue){var ce=!0;if(ue===0?ce=re.reduce(function(Ce,Fe){if(Ar(Fe))switch(Fe.value){case"center":return G.push(ri),!1;case"top":case"left":return G.push(Zr),!1;case"right":case"bottom":return G.push(Yn),!1}else if(dr(Fe)||la(Fe))return G.push(Fe),!1;return Ce},ce):ue===1&&(ce=re.reduce(function(Ce,Fe){if(Ar(Fe))switch(Fe.value){case Eu:return b=0,!1;case Mi:return b=1,!1;case Fu:case Bu:return y=0,!1;case Cu:return y=1,!1;case Nu:return y=2,!1;case _u:case Su:return y=3,!1}else if(la(Fe)||dr(Fe))return Array.isArray(y)||(y=[]),y.push(Fe),!1;return Ce},ce)),ce){var we=js(v,re);L.push(we)}}),{size:y,shape:b,stops:L,position:G,type:2}},cf=function(v){return v.type===1},uf=function(v){return v.type===2},Kl={name:"image",parse:function(v,m){if(m.type===22){var b={url:m.value,type:0};return v.cache.addImage(m.value),b}if(m.type===18){var y=Gl[m.name];if(typeof y>"u")throw new Error('Attempting to parse an unsupported image function "'+m.name+'"');return y(v,m.values)}throw new Error("Unsupported image type "+m.type)}};function df(v){return!(v.type===20&&v.value==="none")&&(v.type!==18||!!Gl[v.name])}var Gl={"linear-gradient":Hi,"-moz-linear-gradient":ai,"-ms-linear-gradient":ai,"-o-linear-gradient":ai,"-webkit-linear-gradient":ai,"radial-gradient":lf,"-moz-radial-gradient":OA,"-ms-radial-gradient":OA,"-o-radial-gradient":OA,"-webkit-radial-gradient":OA,"-webkit-gradient":Af},Vl={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(v,m){if(m.length===0)return[];var b=m[0];return b.type===20&&b.value==="none"?[]:m.filter(function(y){return br(y)&&df(y)}).map(function(y){return Kl.parse(v,y)})}},Bs={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(v,m){return m.map(function(b){if(Ar(b))switch(b.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Gs={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(v,m){return Nn(m).map(function(b){return b.filter(dr)}).map(yo)}},$l={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(v,m){return Nn(m).map(function(b){return b.filter(Ar).map(function(y){return y.value}).join(" ")}).map(zl)}},zl=function(v){switch(v){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},oi;(function(v){v.AUTO="auto",v.CONTAIN="contain",v.COVER="cover"})(oi||(oi={}));var Wl={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(v,m){return Nn(m).map(function(b){return b.filter(Jl)})}},Jl=function(v){return Ar(v)||dr(v)},Ki=function(v){return{name:"border-"+v+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},ff=Ki("top"),Uu=Ki("right"),Qu=Ki("bottom"),Xl=Ki("left"),Gi=function(v){return{name:"border-radius-"+v,initialValue:"0 0",prefix:!1,type:1,parse:function(m,b){return yo(b.filter(dr))}}},Km=Gi("top-left"),Gm=Gi("top-right"),hf=Gi("bottom-right"),Vm=Gi("bottom-left"),Yl=function(v){return{name:"border-"+v+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(m,b){switch(b){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},$m=Yl("top"),zm=Yl("right"),Wm=Yl("bottom"),Iu=Yl("left"),Vi=function(v){return{name:"border-"+v+"-width",initialValue:"0",type:0,prefix:!1,parse:function(m,b){return Aa(b)?b.number:0}}},DA=Vi("top"),Jm=Vi("right"),Xm=Vi("bottom"),mf=Vi("left"),Ym={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},qm={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(v,m){switch(m){case"rtl":return 1;case"ltr":default:return 0}}},Zm={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(v,m){return m.filter(Ar).reduce(function(b,y){return b|ep(y.value)},0)}},ep=function(v){switch(v){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},jo={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(v,m){switch(m){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},da={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(v,m){return m.type===20&&m.value==="normal"?0:m.type===17||m.type===15?m.number:0}},Vs;(function(v){v.NORMAL="normal",v.STRICT="strict"})(Vs||(Vs={}));var tp={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(v,m){switch(m){case"strict":return Vs.STRICT;case"normal":default:return Vs.NORMAL}}},pf={name:"line-height",initialValue:"normal",prefix:!1,type:4},qa=function(v,m){return Ar(v)&&v.value==="normal"?1.2*m:v.type===17?m*v.number:dr(v)?tr(v,m):m},$s={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(v,m){return m.type===20&&m.value==="none"?null:Kl.parse(v,m)}},rp={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(v,m){switch(m){case"inside":return 0;case"outside":default:return 1}}},Lu={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(v,m){switch(m){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},RA=function(v){return{name:"margin-"+v,initialValue:"0",prefix:!1,type:4}},gf=RA("top"),vf=RA("right"),xf=RA("bottom"),np=RA("left"),ql={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(v,m){return m.filter(Ar).map(function(b){switch(b.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Zl={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(v,m){switch(m){case"break-word":return"break-word";case"normal":default:return"normal"}}},Bo=function(v){return{name:"padding-"+v,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},ku=Bo("top"),sp=Bo("right"),yf=Bo("bottom"),ap=Bo("left"),op={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(v,m){switch(m){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},ip={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(v,m){switch(m){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Ap={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(v,m){return m.length===1&&ti(m[0],"none")?[]:Nn(m).map(function(b){for(var y={color:Vn.TRANSPARENT,offsetX:Zr,offsetY:Zr,blur:Zr},L=0,G=0;G<b.length;G++){var re=b[G];la(re)?(L===0?y.offsetX=re:L===1?y.offsetY=re:y.blur=re,L++):y.color=Pn.parse(v,re)}return y})}},lp={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(v,m){switch(m){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},cp={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(v,m){if(m.type===20&&m.value==="none")return null;if(m.type===18){var b=up[m.name];if(typeof b>"u")throw new Error('Attempting to parse an unsupported transform function "'+m.name+'"');return b(m.values)}return null}},wf=function(v){var m=v.filter(function(b){return b.type===17}).map(function(b){return b.number});return m.length===6?m:null},ec=function(v){var m=v.filter(function(ce){return ce.type===17}).map(function(ce){return ce.number}),b=m[0],y=m[1];m[2],m[3];var L=m[4],G=m[5];m[6],m[7],m[8],m[9],m[10],m[11];var re=m[12],ue=m[13];return m[14],m[15],m.length===16?[b,y,L,G,re,ue]:null},up={matrix:wf,matrix3d:ec},bf={type:16,number:50,flags:po},jf=[bf,bf],g={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(v,m){var b=m.filter(dr);return b.length!==2?jf:[b[0],b[1]]}},N={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(v,m){switch(m){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Q;(function(v){v.NORMAL="normal",v.BREAK_ALL="break-all",v.KEEP_ALL="keep-all"})(Q||(Q={}));for(var R={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(v,m){switch(m){case"break-all":return Q.BREAK_ALL;case"keep-all":return Q.KEEP_ALL;case"normal":default:return Q.NORMAL}}},X={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(v,m){if(m.type===20)return{auto:!0,order:0};if(qr(m))return{auto:!1,order:m.number};throw new Error("Invalid z-index number parsed")}},se={name:"time",parse:function(v,m){if(m.type===15)switch(m.unit.toLowerCase()){case"s":return 1e3*m.number;case"ms":return m.number}throw new Error("Unsupported time type")}},ae={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(v,m){return qr(m)?m.number:1}},ie={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},le={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(v,m){return m.filter(Ar).map(function(b){switch(b.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(b){return b!==0})}},fe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(v,m){var b=[],y=[];return m.forEach(function(L){switch(L.type){case 20:case 0:b.push(L.value);break;case 17:b.push(L.number.toString());break;case 4:y.push(b.join(" ")),b.length=0;break}}),b.length&&y.push(b.join(" ")),y.map(function(L){return L.indexOf(" ")===-1?L:"'"+L+"'"})}},ye={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Qe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(v,m){if(qr(m))return m.number;if(Ar(m))switch(m.value){case"bold":return 700;case"normal":default:return 400}return 400}},he={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(v,m){return m.filter(Ar).map(function(b){return b.value})}},je={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(v,m){switch(m){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Be=function(v,m){return(v&m)!==0},Re={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(v,m){if(m.length===0)return[];var b=m[0];return b.type===20&&b.value==="none"?[]:m}},Ue={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(v,m){if(m.length===0)return null;var b=m[0];if(b.type===20&&b.value==="none")return null;for(var y=[],L=m.filter(Pi),G=0;G<L.length;G++){var re=L[G],ue=L[G+1];if(re.type===20){var ce=ue&&qr(ue)?ue.number:1;y.push({counter:re.value,increment:ce})}}return y}},Ke={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(v,m){if(m.length===0)return[];for(var b=[],y=m.filter(Pi),L=0;L<y.length;L++){var G=y[L],re=y[L+1];if(Ar(G)&&G.value!=="none"){var ue=re&&qr(re)?re.number:0;b.push({counter:G.value,reset:ue})}}return b}},$e={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(v,m){return m.filter(Aa).map(function(b){return se.parse(v,b)})}},Ze={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(v,m){if(m.length===0)return null;var b=m[0];if(b.type===20&&b.value==="none")return null;var y=[],L=m.filter(ei);if(L.length%2!==0)return null;for(var G=0;G<L.length;G+=2){var re=L[G].value,ue=L[G+1].value;y.push({open:re,close:ue})}return y}},Je=function(v,m,b){if(!v)return"";var y=v[Math.min(m,v.length-1)];return y?b?y.open:y.close:""},Ot={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(v,m){return m.length===1&&ti(m[0],"none")?[]:Nn(m).map(function(b){for(var y={color:255,offsetX:Zr,offsetY:Zr,blur:Zr,spread:Zr,inset:!1},L=0,G=0;G<b.length;G++){var re=b[G];ti(re,"inset")?y.inset=!0:la(re)?(L===0?y.offsetX=re:L===1?y.offsetY=re:L===2?y.blur=re:y.spread=re,L++):y.color=Pn.parse(v,re)}return y})}},Bt={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(v,m){var b=[0,1,2],y=[];return m.filter(Ar).forEach(function(L){switch(L.value){case"stroke":y.push(1);break;case"fill":y.push(0);break;case"markers":y.push(2);break}}),b.forEach(function(L){y.indexOf(L)===-1&&y.push(L)}),y}},qt={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Ft={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(v,m){return Aa(m)?m.number:0}},ar=function(){function v(m,b){var y,L;this.animationDuration=Oe(m,$e,b.animationDuration),this.backgroundClip=Oe(m,si,b.backgroundClip),this.backgroundColor=Oe(m,Ks,b.backgroundColor),this.backgroundImage=Oe(m,Vl,b.backgroundImage),this.backgroundOrigin=Oe(m,Bs,b.backgroundOrigin),this.backgroundPosition=Oe(m,Gs,b.backgroundPosition),this.backgroundRepeat=Oe(m,$l,b.backgroundRepeat),this.backgroundSize=Oe(m,Wl,b.backgroundSize),this.borderTopColor=Oe(m,ff,b.borderTopColor),this.borderRightColor=Oe(m,Uu,b.borderRightColor),this.borderBottomColor=Oe(m,Qu,b.borderBottomColor),this.borderLeftColor=Oe(m,Xl,b.borderLeftColor),this.borderTopLeftRadius=Oe(m,Km,b.borderTopLeftRadius),this.borderTopRightRadius=Oe(m,Gm,b.borderTopRightRadius),this.borderBottomRightRadius=Oe(m,hf,b.borderBottomRightRadius),this.borderBottomLeftRadius=Oe(m,Vm,b.borderBottomLeftRadius),this.borderTopStyle=Oe(m,$m,b.borderTopStyle),this.borderRightStyle=Oe(m,zm,b.borderRightStyle),this.borderBottomStyle=Oe(m,Wm,b.borderBottomStyle),this.borderLeftStyle=Oe(m,Iu,b.borderLeftStyle),this.borderTopWidth=Oe(m,DA,b.borderTopWidth),this.borderRightWidth=Oe(m,Jm,b.borderRightWidth),this.borderBottomWidth=Oe(m,Xm,b.borderBottomWidth),this.borderLeftWidth=Oe(m,mf,b.borderLeftWidth),this.boxShadow=Oe(m,Ot,b.boxShadow),this.color=Oe(m,Ym,b.color),this.direction=Oe(m,qm,b.direction),this.display=Oe(m,Zm,b.display),this.float=Oe(m,jo,b.cssFloat),this.fontFamily=Oe(m,fe,b.fontFamily),this.fontSize=Oe(m,ye,b.fontSize),this.fontStyle=Oe(m,je,b.fontStyle),this.fontVariant=Oe(m,he,b.fontVariant),this.fontWeight=Oe(m,Qe,b.fontWeight),this.letterSpacing=Oe(m,da,b.letterSpacing),this.lineBreak=Oe(m,tp,b.lineBreak),this.lineHeight=Oe(m,pf,b.lineHeight),this.listStyleImage=Oe(m,$s,b.listStyleImage),this.listStylePosition=Oe(m,rp,b.listStylePosition),this.listStyleType=Oe(m,Lu,b.listStyleType),this.marginTop=Oe(m,gf,b.marginTop),this.marginRight=Oe(m,vf,b.marginRight),this.marginBottom=Oe(m,xf,b.marginBottom),this.marginLeft=Oe(m,np,b.marginLeft),this.opacity=Oe(m,ae,b.opacity);var G=Oe(m,ql,b.overflow);this.overflowX=G[0],this.overflowY=G[G.length>1?1:0],this.overflowWrap=Oe(m,Zl,b.overflowWrap),this.paddingTop=Oe(m,ku,b.paddingTop),this.paddingRight=Oe(m,sp,b.paddingRight),this.paddingBottom=Oe(m,yf,b.paddingBottom),this.paddingLeft=Oe(m,ap,b.paddingLeft),this.paintOrder=Oe(m,Bt,b.paintOrder),this.position=Oe(m,ip,b.position),this.textAlign=Oe(m,op,b.textAlign),this.textDecorationColor=Oe(m,ie,(y=b.textDecorationColor)!==null&&y!==void 0?y:b.color),this.textDecorationLine=Oe(m,le,(L=b.textDecorationLine)!==null&&L!==void 0?L:b.textDecoration),this.textShadow=Oe(m,Ap,b.textShadow),this.textTransform=Oe(m,lp,b.textTransform),this.transform=Oe(m,cp,b.transform),this.transformOrigin=Oe(m,g,b.transformOrigin),this.visibility=Oe(m,N,b.visibility),this.webkitTextStrokeColor=Oe(m,qt,b.webkitTextStrokeColor),this.webkitTextStrokeWidth=Oe(m,Ft,b.webkitTextStrokeWidth),this.wordBreak=Oe(m,R,b.wordBreak),this.zIndex=Oe(m,X,b.zIndex)}return v.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},v.prototype.isTransparent=function(){return On(this.backgroundColor)},v.prototype.isTransformed=function(){return this.transform!==null},v.prototype.isPositioned=function(){return this.position!==0},v.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},v.prototype.isFloating=function(){return this.float!==0},v.prototype.isInlineLevel=function(){return Be(this.display,4)||Be(this.display,33554432)||Be(this.display,268435456)||Be(this.display,536870912)||Be(this.display,67108864)||Be(this.display,134217728)},v}(),gn=function(){function v(m,b){this.content=Oe(m,Re,b.content),this.quotes=Oe(m,Ze,b.quotes)}return v}(),Jt=function(){function v(m,b){this.counterIncrement=Oe(m,Ue,b.counterIncrement),this.counterReset=Oe(m,Ke,b.counterReset)}return v}(),Oe=function(v,m,b){var y=new vo,L=b!==null&&typeof b<"u"?b.toString():m.initialValue;y.write(L);var G=new xo(y.read());switch(m.type){case 2:var re=G.parseComponentValue();return m.parse(v,Ar(re)?re.value:m.initialValue);case 0:return m.parse(v,G.parseComponentValue());case 1:return m.parse(v,G.parseComponentValues());case 4:return G.parseComponentValue();case 3:switch(m.format){case"angle":return wo.parse(v,G.parseComponentValue());case"color":return Pn.parse(v,G.parseComponentValue());case"image":return Kl.parse(v,G.parseComponentValue());case"length":var ue=G.parseComponentValue();return la(ue)?ue:Zr;case"length-percentage":var ce=G.parseComponentValue();return dr(ce)?ce:Zr;case"time":return se.parse(v,G.parseComponentValue())}break}},ht="data-html2canvas-debug",tn=function(v){var m=v.getAttribute(ht);switch(m){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Kt=function(v,m){var b=tn(v);return b===1||m===b},Wt=function(){function v(m,b){if(this.context=m,this.textNodes=[],this.elements=[],this.flags=0,Kt(b,3))debugger;this.styles=new ar(m,window.getComputedStyle(b,null)),xp(b)&&(this.styles.animationDuration.some(function(y){return y>0})&&(b.style.animationDuration="0s"),this.styles.transform!==null&&(b.style.transform="none")),this.bounds=u(this.context,b),Kt(b,4)&&(this.flags|=16)}return v}(),Ur="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Sn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vn=typeof Uint8Array>"u"?[]:new Uint8Array(256),Qr=0;Qr<Sn.length;Qr++)vn[Sn.charCodeAt(Qr)]=Qr;for(var $n=function(v){var m=v.length*.75,b=v.length,y,L=0,G,re,ue,ce;v[v.length-1]==="="&&(m--,v[v.length-2]==="="&&m--);var we=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(m):new Array(m),Ce=Array.isArray(we)?we:new Uint8Array(we);for(y=0;y<b;y+=4)G=vn[v.charCodeAt(y)],re=vn[v.charCodeAt(y+1)],ue=vn[v.charCodeAt(y+2)],ce=vn[v.charCodeAt(y+3)],Ce[L++]=G<<2|re>>4,Ce[L++]=(re&15)<<4|ue>>2,Ce[L++]=(ue&3)<<6|ce&63;return we},Zn=function(v){for(var m=v.length,b=[],y=0;y<m;y+=2)b.push(v[y+1]<<8|v[y]);return b},xn=function(v){for(var m=v.length,b=[],y=0;y<m;y+=4)b.push(v[y+3]<<24|v[y+2]<<16|v[y+1]<<8|v[y]);return b},Zt=5,hr=11,kr=2,yr=hr-Zt,En=65536>>Zt,fa=1<<Zt,Dr=fa-1,cs=1024>>Zt,Br=En+cs,yn=Br,Cs=32,es=yn+Cs,Ns=65536>>hr,Ss=1<<yr,us=Ss-1,ds=function(v,m,b){return v.slice?v.slice(m,b):new Uint16Array(Array.prototype.slice.call(v,m,b))},_r=function(v,m,b){return v.slice?v.slice(m,b):new Uint32Array(Array.prototype.slice.call(v,m,b))},Es=function(v,m){var b=$n(v),y=Array.isArray(b)?xn(b):new Uint32Array(b),L=Array.isArray(b)?Zn(b):new Uint16Array(b),G=24,re=ds(L,G/2,y[4]/2),ue=y[5]===2?ds(L,(G+y[4])/2):_r(y,Math.ceil((G+y[4])/4));return new ha(y[0],y[1],y[2],y[3],re,ue)},ha=function(){function v(m,b,y,L,G,re){this.initialValue=m,this.errorValue=b,this.highStart=y,this.highValueIndex=L,this.index=G,this.data=re}return v.prototype.get=function(m){var b;if(m>=0){if(m<55296||m>56319&&m<=65535)return b=this.index[m>>Zt],b=(b<<kr)+(m&Dr),this.data[b];if(m<=65535)return b=this.index[En+(m-55296>>Zt)],b=(b<<kr)+(m&Dr),this.data[b];if(m<this.highStart)return b=es-Ns+(m>>hr),b=this.index[b],b+=m>>Zt&us,b=this.index[b],b=(b<<kr)+(m&Dr),this.data[b];if(m<=1114111)return this.data[this.highValueIndex]}return this.errorValue},v}(),Co="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Za=typeof Uint8Array>"u"?[]:new Uint8Array(256),dn=0;dn<Co.length;dn++)Za[Co.charCodeAt(dn)]=dn;var tc=1,HA=2,$i=3,zi=4,Bf=5,dp=7,rc=8,La=9,Tu=10,Cf=11,Nf=12,Pu=13,MA=14,nc=15,Sf=function(v){for(var m=[],b=0,y=v.length;b<y;){var L=v.charCodeAt(b++);if(L>=55296&&L<=56319&&b<y){var G=v.charCodeAt(b++);(G&64512)===56320?m.push(((L&1023)<<10)+(G&1023)+65536):(m.push(L),b--)}else m.push(L)}return m},sc=function(){for(var v=[],m=0;m<arguments.length;m++)v[m]=arguments[m];if(String.fromCodePoint)return String.fromCodePoint.apply(String,v);var b=v.length;if(!b)return"";for(var y=[],L=-1,G="";++L<b;){var re=v[L];re<=65535?y.push(re):(re-=65536,y.push((re>>10)+55296,re%1024+56320)),(L+1===b||y.length>16384)&&(G+=String.fromCharCode.apply(String,y),y.length=0)}return G},Ou=Es(Ur),zn="",ac="",fp=function(v){return Ou.get(v)},oc=function(v,m,b){var y=b-2,L=m[y],G=m[b-1],re=m[b];if(G===HA&&re===$i)return zn;if(G===HA||G===$i||G===zi||re===HA||re===$i||re===zi)return ac;if(G===rc&&[rc,La,Cf,Nf].indexOf(re)!==-1||(G===Cf||G===La)&&(re===La||re===Tu)||(G===Nf||G===Tu)&&re===Tu||re===Pu||re===Bf||re===dp||G===tc)return zn;if(G===Pu&&re===MA){for(;L===Bf;)L=m[--y];if(L===MA)return zn}if(G===nc&&re===nc){for(var ue=0;L===nc;)ue++,L=m[--y];if(ue%2===0)return zn}return ac},Ef=function(v){var m=Sf(v),b=m.length,y=0,L=0,G=m.map(fp);return{next:function(){if(y>=b)return{done:!0,value:null};for(var re=zn;y<b&&(re=oc(m,G,++y))===zn;);if(re!==zn||y===b){var ue=sc.apply(null,m.slice(L,y));return L=y,{value:ue,done:!1}}return{done:!0,value:null}}}},Du=function(v){for(var m=Ef(v),b=[],y;!(y=m.next()).done;)y.value&&b.push(y.value.slice());return b},No=function(v){var m=123;if(v.createRange){var b=v.createRange();if(b.getBoundingClientRect){var y=v.createElement("boundtest");y.style.height=m+"px",y.style.display="block",v.body.appendChild(y),b.selectNode(y);var L=b.getBoundingClientRect(),G=Math.round(L.height);if(v.body.removeChild(y),G===m)return!0}}return!1},_f=function(v){var m=v.createElement("boundtest");m.style.width="50px",m.style.display="block",m.style.fontSize="12px",m.style.letterSpacing="0px",m.style.wordSpacing="0px",v.body.appendChild(m);var b=v.createRange();m.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var y=m.firstChild,L=d(y.data).map(function(ce){return h(ce)}),G=0,re={},ue=L.every(function(ce,we){b.setStart(y,G),b.setEnd(y,G+ce.length);var Ce=b.getBoundingClientRect();G+=ce.length;var Fe=Ce.x>re.x||Ce.y>re.y;return re=Ce,we===0?!0:Fe});return v.body.removeChild(m),ue},Ff=function(){return typeof new Image().crossOrigin<"u"},hp=function(){return typeof new XMLHttpRequest().responseType=="string"},Uf=function(v){var m=new Image,b=v.createElement("canvas"),y=b.getContext("2d");if(!y)return!1;m.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{y.drawImage(m,0,0),b.toDataURL()}catch{return!1}return!0},ii=function(v){return v[0]===0&&v[1]===255&&v[2]===0&&v[3]===255},mp=function(v){var m=v.createElement("canvas"),b=100;m.width=b,m.height=b;var y=m.getContext("2d");if(!y)return Promise.reject(!1);y.fillStyle="rgb(0, 255, 0)",y.fillRect(0,0,b,b);var L=new Image,G=m.toDataURL();L.src=G;var re=ic(b,b,0,0,L);return y.fillStyle="red",y.fillRect(0,0,b,b),Qf(re).then(function(ue){y.drawImage(ue,0,0);var ce=y.getImageData(0,0,b,b).data;y.fillStyle="red",y.fillRect(0,0,b,b);var we=v.createElement("div");return we.style.backgroundImage="url("+G+")",we.style.height=b+"px",ii(ce)?Qf(ic(b,b,0,0,we)):Promise.reject(!1)}).then(function(ue){return y.drawImage(ue,0,0),ii(y.getImageData(0,0,b,b).data)}).catch(function(){return!1})},ic=function(v,m,b,y,L){var G="http://www.w3.org/2000/svg",re=document.createElementNS(G,"svg"),ue=document.createElementNS(G,"foreignObject");return re.setAttributeNS(null,"width",v.toString()),re.setAttributeNS(null,"height",m.toString()),ue.setAttributeNS(null,"width","100%"),ue.setAttributeNS(null,"height","100%"),ue.setAttributeNS(null,"x",b.toString()),ue.setAttributeNS(null,"y",y.toString()),ue.setAttributeNS(null,"externalResourcesRequired","true"),re.appendChild(ue),ue.appendChild(L),re},Qf=function(v){return new Promise(function(m,b){var y=new Image;y.onload=function(){return m(y)},y.onerror=b,y.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(v))})},_n={get SUPPORT_RANGE_BOUNDS(){var v=No(document);return Object.defineProperty(_n,"SUPPORT_RANGE_BOUNDS",{value:v}),v},get SUPPORT_WORD_BREAKING(){var v=_n.SUPPORT_RANGE_BOUNDS&&_f(document);return Object.defineProperty(_n,"SUPPORT_WORD_BREAKING",{value:v}),v},get SUPPORT_SVG_DRAWING(){var v=Uf(document);return Object.defineProperty(_n,"SUPPORT_SVG_DRAWING",{value:v}),v},get SUPPORT_FOREIGNOBJECT_DRAWING(){var v=typeof Array.from=="function"&&typeof window.fetch=="function"?mp(document):Promise.resolve(!1);return Object.defineProperty(_n,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:v}),v},get SUPPORT_CORS_IMAGES(){var v=Ff();return Object.defineProperty(_n,"SUPPORT_CORS_IMAGES",{value:v}),v},get SUPPORT_RESPONSE_TYPE(){var v=hp();return Object.defineProperty(_n,"SUPPORT_RESPONSE_TYPE",{value:v}),v},get SUPPORT_CORS_XHR(){var v="withCredentials"in new XMLHttpRequest;return Object.defineProperty(_n,"SUPPORT_CORS_XHR",{value:v}),v},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var v=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(_n,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:v}),v}},KA=function(){function v(m,b){this.text=m,this.bounds=b}return v}(),GA=function(v,m,b,y){var L=Eo(m,b),G=[],re=0;return L.forEach(function(ue){if(b.textDecorationLine.length||ue.trim().length>0)if(_n.SUPPORT_RANGE_BOUNDS){var ce=VA(y,re,ue.length).getClientRects();if(ce.length>1){var we=ma(ue),Ce=0;we.forEach(function(He){G.push(new KA(He,A.fromDOMRectList(v,VA(y,Ce+re,He.length).getClientRects()))),Ce+=He.length})}else G.push(new KA(ue,A.fromDOMRectList(v,ce)))}else{var Fe=y.splitText(ue.length);G.push(new KA(ue,Ru(v,y))),y=Fe}else _n.SUPPORT_RANGE_BOUNDS||(y=y.splitText(ue.length));re+=ue.length}),G},Ru=function(v,m){var b=m.ownerDocument;if(b){var y=b.createElement("html2canvaswrapper");y.appendChild(m.cloneNode(!0));var L=m.parentNode;if(L){L.replaceChild(y,m);var G=u(v,y);return y.firstChild&&L.replaceChild(y.firstChild,y),G}}return A.EMPTY},VA=function(v,m,b){var y=v.ownerDocument;if(!y)throw new Error("Node has no owner document");var L=y.createRange();return L.setStart(v,m),L.setEnd(v,m+b),L},ma=function(v){if(_n.SUPPORT_NATIVE_TEXT_SEGMENTATION){var m=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(m.segment(v)).map(function(b){return b.segment})}return Du(v)},So=function(v,m){if(_n.SUPPORT_NATIVE_TEXT_SEGMENTATION){var b=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(b.segment(v)).map(function(y){return y.segment})}return Hu(v,m)},Eo=function(v,m){return m.letterSpacing!==0?ma(v):So(v,m)},Ac=[32,160,4961,65792,65793,4153,4241],Hu=function(v,m){for(var b=du(v,{lineBreak:m.lineBreak,wordBreak:m.overflowWrap==="break-word"?"break-word":m.wordBreak}),y=[],L,G=function(){if(L.value){var re=L.value.slice(),ue=d(re),ce="";ue.forEach(function(we){Ac.indexOf(we)===-1?ce+=h(we):(ce.length&&y.push(ce),y.push(h(we)),ce="")}),ce.length&&y.push(ce)}};!(L=b.next()).done;)G();return y},If=function(){function v(m,b,y){this.text=pp(b.data,y.textTransform),this.textBounds=GA(m,this.text,y,b)}return v}(),pp=function(v,m){switch(m){case 1:return v.toLowerCase();case 3:return v.replace(Mu,Ku);case 2:return v.toUpperCase();default:return v}},Mu=/(^|\s|:|-|\(|\))([a-z])/g,Ku=function(v,m,b){return v.length>0?m+b.toUpperCase():v},rx=function(v){n(m,v);function m(b,y){var L=v.call(this,b,y)||this;return L.src=y.currentSrc||y.src,L.intrinsicWidth=y.naturalWidth,L.intrinsicHeight=y.naturalHeight,L.context.cache.addImage(L.src),L}return m}(Wt),nx=function(v){n(m,v);function m(b,y){var L=v.call(this,b,y)||this;return L.canvas=y,L.intrinsicWidth=y.width,L.intrinsicHeight=y.height,L}return m}(Wt),sx=function(v){n(m,v);function m(b,y){var L=v.call(this,b,y)||this,G=new XMLSerializer,re=u(b,y);return y.setAttribute("width",re.width+"px"),y.setAttribute("height",re.height+"px"),L.svg="data:image/svg+xml,"+encodeURIComponent(G.serializeToString(y)),L.intrinsicWidth=y.width.baseVal.value,L.intrinsicHeight=y.height.baseVal.value,L.context.cache.addImage(L.svg),L}return m}(Wt),ax=function(v){n(m,v);function m(b,y){var L=v.call(this,b,y)||this;return L.value=y.value,L}return m}(Wt),gp=function(v){n(m,v);function m(b,y){var L=v.call(this,b,y)||this;return L.start=y.start,L.reversed=typeof y.reversed=="boolean"&&y.reversed===!0,L}return m}(Wt),EB=[{type:15,flags:0,unit:"px",number:3}],_B=[{type:16,flags:0,number:50}],FB=function(v){return v.width>v.height?new A(v.left+(v.width-v.height)/2,v.top,v.height,v.height):v.width<v.height?new A(v.left,v.top+(v.height-v.width)/2,v.width,v.width):v},UB=function(v){var m=v.type===QB?new Array(v.value.length+1).join(""):v.value;return m.length===0?v.placeholder||"":m},Lf="checkbox",kf="radio",QB="password",ox=707406591,vp=function(v){n(m,v);function m(b,y){var L=v.call(this,b,y)||this;switch(L.type=y.type.toLowerCase(),L.checked=y.checked,L.value=UB(y),(L.type===Lf||L.type===kf)&&(L.styles.backgroundColor=3739148031,L.styles.borderTopColor=L.styles.borderRightColor=L.styles.borderBottomColor=L.styles.borderLeftColor=2779096575,L.styles.borderTopWidth=L.styles.borderRightWidth=L.styles.borderBottomWidth=L.styles.borderLeftWidth=1,L.styles.borderTopStyle=L.styles.borderRightStyle=L.styles.borderBottomStyle=L.styles.borderLeftStyle=1,L.styles.backgroundClip=[0],L.styles.backgroundOrigin=[0],L.bounds=FB(L.bounds)),L.type){case Lf:L.styles.borderTopRightRadius=L.styles.borderTopLeftRadius=L.styles.borderBottomRightRadius=L.styles.borderBottomLeftRadius=EB;break;case kf:L.styles.borderTopRightRadius=L.styles.borderTopLeftRadius=L.styles.borderBottomRightRadius=L.styles.borderBottomLeftRadius=_B;break}return L}return m}(Wt),ix=function(v){n(m,v);function m(b,y){var L=v.call(this,b,y)||this,G=y.options[y.selectedIndex||0];return L.value=G&&G.text||"",L}return m}(Wt),Ax=function(v){n(m,v);function m(b,y){var L=v.call(this,b,y)||this;return L.value=y.value,L}return m}(Wt),lx=function(v){n(m,v);function m(b,y){var L=v.call(this,b,y)||this;L.src=y.src,L.width=parseInt(y.width,10)||0,L.height=parseInt(y.height,10)||0,L.backgroundColor=L.styles.backgroundColor;try{if(y.contentWindow&&y.contentWindow.document&&y.contentWindow.document.documentElement){L.tree=ux(b,y.contentWindow.document.documentElement);var G=y.contentWindow.document.documentElement?ua(b,getComputedStyle(y.contentWindow.document.documentElement).backgroundColor):Vn.TRANSPARENT,re=y.contentWindow.document.body?ua(b,getComputedStyle(y.contentWindow.document.body).backgroundColor):Vn.TRANSPARENT;L.backgroundColor=On(G)?On(re)?L.styles.backgroundColor:re:G}}catch{}return L}return m}(Wt),IB=["OL","UL","MENU"],Tf=function(v,m,b,y){for(var L=m.firstChild,G=void 0;L;L=G)if(G=L.nextSibling,dx(L)&&L.data.trim().length>0)b.textNodes.push(new If(v,L,b.styles));else if(lc(L))if(vx(L)&&L.assignedNodes)L.assignedNodes().forEach(function(ue){return Tf(v,ue,b,y)});else{var re=cx(v,L);re.styles.isVisible()&&(LB(L,re,y)?re.flags|=4:kB(re.styles)&&(re.flags|=2),IB.indexOf(L.tagName)!==-1&&(re.flags|=8),b.elements.push(re),L.slot,L.shadowRoot?Tf(v,L.shadowRoot,re,y):!Of(L)&&!fx(L)&&!Df(L)&&Tf(v,L,re,y))}},cx=function(v,m){return wp(m)?new rx(v,m):hx(m)?new nx(v,m):fx(m)?new sx(v,m):TB(m)?new ax(v,m):PB(m)?new gp(v,m):OB(m)?new vp(v,m):Df(m)?new ix(v,m):Of(m)?new Ax(v,m):px(m)?new lx(v,m):new Wt(v,m)},ux=function(v,m){var b=cx(v,m);return b.flags|=4,Tf(v,m,b,b),b},LB=function(v,m,b){return m.styles.isPositionedWithZIndex()||m.styles.opacity<1||m.styles.isTransformed()||yp(v)&&b.styles.isTransparent()},kB=function(v){return v.isPositioned()||v.isFloating()},dx=function(v){return v.nodeType===Node.TEXT_NODE},lc=function(v){return v.nodeType===Node.ELEMENT_NODE},xp=function(v){return lc(v)&&typeof v.style<"u"&&!Pf(v)},Pf=function(v){return typeof v.className=="object"},TB=function(v){return v.tagName==="LI"},PB=function(v){return v.tagName==="OL"},OB=function(v){return v.tagName==="INPUT"},DB=function(v){return v.tagName==="HTML"},fx=function(v){return v.tagName==="svg"},yp=function(v){return v.tagName==="BODY"},hx=function(v){return v.tagName==="CANVAS"},mx=function(v){return v.tagName==="VIDEO"},wp=function(v){return v.tagName==="IMG"},px=function(v){return v.tagName==="IFRAME"},gx=function(v){return v.tagName==="STYLE"},RB=function(v){return v.tagName==="SCRIPT"},Of=function(v){return v.tagName==="TEXTAREA"},Df=function(v){return v.tagName==="SELECT"},vx=function(v){return v.tagName==="SLOT"},xx=function(v){return v.tagName.indexOf("-")>0},HB=function(){function v(){this.counters={}}return v.prototype.getCounterValue=function(m){var b=this.counters[m];return b&&b.length?b[b.length-1]:1},v.prototype.getCounterValues=function(m){var b=this.counters[m];return b||[]},v.prototype.pop=function(m){var b=this;m.forEach(function(y){return b.counters[y].pop()})},v.prototype.parse=function(m){var b=this,y=m.counterIncrement,L=m.counterReset,G=!0;y!==null&&y.forEach(function(ue){var ce=b.counters[ue.counter];ce&&ue.increment!==0&&(G=!1,ce.length||ce.push(1),ce[Math.max(0,ce.length-1)]+=ue.increment)});var re=[];return G&&L.forEach(function(ue){var ce=b.counters[ue.counter];re.push(ue.counter),ce||(ce=b.counters[ue.counter]=[]),ce.push(ue.reset)}),re},v}(),yx={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},wx={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},MB={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},KB={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},cc=function(v,m,b,y,L,G){return v<m||v>b?Vu(v,L,G.length>0):y.integers.reduce(function(re,ue,ce){for(;v>=ue;)v-=ue,re+=y.values[ce];return re},"")+G},bx=function(v,m,b,y){var L="";do b||v--,L=y(v)+L,v/=m;while(v*m>=m);return L},wn=function(v,m,b,y,L){var G=b-m+1;return(v<0?"-":"")+(bx(Math.abs(v),G,y,function(re){return h(Math.floor(re%G)+m)})+L)},$A=function(v,m,b){b===void 0&&(b=". ");var y=m.length;return bx(Math.abs(v),y,!1,function(L){return m[Math.floor(L%y)]})+b},uc=1,Wi=2,Ji=4,Gu=8,Ai=function(v,m,b,y,L,G){if(v<-9999||v>9999)return Vu(v,4,L.length>0);var re=Math.abs(v),ue=L;if(re===0)return m[0]+ue;for(var ce=0;re>0&&ce<=4;ce++){var we=re%10;we===0&&Be(G,uc)&&ue!==""?ue=m[we]+ue:we>1||we===1&&ce===0||we===1&&ce===1&&Be(G,Wi)||we===1&&ce===1&&Be(G,Ji)&&v>100||we===1&&ce>1&&Be(G,Gu)?ue=m[we]+(ce>0?b[ce-1]:"")+ue:we===1&&ce>0&&(ue=b[ce-1]+ue),re=Math.floor(re/10)}return(v<0?y:"")+ue},jx="",Bx="",Cx="",bp="",Vu=function(v,m,b){var y=b?". ":"",L=b?"":"",G=b?", ":"",re=b?" ":"";switch(m){case 0:return""+re;case 1:return""+re;case 2:return""+re;case 5:var ue=wn(v,48,57,!0,y);return ue.length<4?"0"+ue:ue;case 4:return $A(v,"",L);case 6:return cc(v,1,3999,yx,3,y).toLowerCase();case 7:return cc(v,1,3999,yx,3,y);case 8:return wn(v,945,969,!1,y);case 9:return wn(v,97,122,!1,y);case 10:return wn(v,65,90,!1,y);case 11:return wn(v,1632,1641,!0,y);case 12:case 49:return cc(v,1,9999,wx,3,y);case 35:return cc(v,1,9999,wx,3,y).toLowerCase();case 13:return wn(v,2534,2543,!0,y);case 14:case 30:return wn(v,6112,6121,!0,y);case 15:return $A(v,"",L);case 16:return $A(v,"",L);case 17:case 48:return Ai(v,"",jx,"",L,Wi|Ji|Gu);case 47:return Ai(v,"",Bx,"",L,uc|Wi|Ji|Gu);case 42:return Ai(v,"",jx,"",L,Wi|Ji|Gu);case 41:return Ai(v,"",Bx,"",L,uc|Wi|Ji|Gu);case 26:return Ai(v,"","",Cx,L,0);case 25:return Ai(v,"","",Cx,L,uc|Wi|Ji);case 31:return Ai(v,"","",bp,G,uc|Wi|Ji);case 33:return Ai(v,"","",bp,G,0);case 32:return Ai(v,"","",bp,G,uc|Wi|Ji);case 18:return wn(v,2406,2415,!0,y);case 20:return cc(v,1,19999,KB,3,y);case 21:return wn(v,2790,2799,!0,y);case 22:return wn(v,2662,2671,!0,y);case 22:return cc(v,1,10999,MB,3,y);case 23:return $A(v,"");case 24:return $A(v,"");case 27:return wn(v,3302,3311,!0,y);case 28:return $A(v,"",L);case 29:return $A(v,"",L);case 34:return wn(v,3792,3801,!0,y);case 37:return wn(v,6160,6169,!0,y);case 38:return wn(v,4160,4169,!0,y);case 39:return wn(v,2918,2927,!0,y);case 40:return wn(v,1776,1785,!0,y);case 43:return wn(v,3046,3055,!0,y);case 44:return wn(v,3174,3183,!0,y);case 45:return wn(v,3664,3673,!0,y);case 46:return wn(v,3872,3881,!0,y);case 3:default:return wn(v,48,57,!0,y)}},Nx="data-html2canvas-ignore",Sx=function(){function v(m,b,y){if(this.context=m,this.options=y,this.scrolledElements=[],this.referenceElement=b,this.counters=new HB,this.quoteDepth=0,!b.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(b.ownerDocument.documentElement,!1)}return v.prototype.toIFrame=function(m,b){var y=this,L=GB(m,b);if(!L.contentWindow)return Promise.reject("Unable to find iframe window");var G=m.defaultView.pageXOffset,re=m.defaultView.pageYOffset,ue=L.contentWindow,ce=ue.document,we=zB(L).then(function(){return o(y,void 0,void 0,function(){var Ce,Fe;return l(this,function(He){switch(He.label){case 0:return this.scrolledElements.forEach(YB),ue&&(ue.scrollTo(b.left,b.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(ue.scrollY!==b.top||ue.scrollX!==b.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(ue.scrollX-b.left,ue.scrollY-b.top,0,0))),Ce=this.options.onclone,Fe=this.clonedReferenceElement,typeof Fe>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:ce.fonts&&ce.fonts.ready?[4,ce.fonts.ready]:[3,2];case 1:He.sent(),He.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,$B(ce)]:[3,4];case 3:He.sent(),He.label=4;case 4:return typeof Ce=="function"?[2,Promise.resolve().then(function(){return Ce(ce,Fe)}).then(function(){return L})]:[2,L]}})})});return ce.open(),ce.write(JB(document.doctype)+"<html></html>"),XB(this.referenceElement.ownerDocument,G,re),ce.replaceChild(ce.adoptNode(this.documentElement),ce.documentElement),ce.close(),we},v.prototype.createElementClone=function(m){if(Kt(m,2))debugger;if(hx(m))return this.createCanvasClone(m);if(mx(m))return this.createVideoClone(m);if(gx(m))return this.createStyleClone(m);var b=m.cloneNode(!1);return wp(b)&&(wp(m)&&m.currentSrc&&m.currentSrc!==m.src&&(b.src=m.currentSrc,b.srcset=""),b.loading==="lazy"&&(b.loading="eager")),xx(b)?this.createCustomElementClone(b):b},v.prototype.createCustomElementClone=function(m){var b=document.createElement("html2canvascustomelement");return jp(m.style,b),b},v.prototype.createStyleClone=function(m){try{var b=m.sheet;if(b&&b.cssRules){var y=[].slice.call(b.cssRules,0).reduce(function(G,re){return re&&typeof re.cssText=="string"?G+re.cssText:G},""),L=m.cloneNode(!1);return L.textContent=y,L}}catch(G){if(this.context.logger.error("Unable to access cssRules property",G),G.name!=="SecurityError")throw G}return m.cloneNode(!1)},v.prototype.createCanvasClone=function(m){var b;if(this.options.inlineImages&&m.ownerDocument){var y=m.ownerDocument.createElement("img");try{return y.src=m.toDataURL(),y}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",m)}}var L=m.cloneNode(!1);try{L.width=m.width,L.height=m.height;var G=m.getContext("2d"),re=L.getContext("2d");if(re)if(!this.options.allowTaint&&G)re.putImageData(G.getImageData(0,0,m.width,m.height),0,0);else{var ue=(b=m.getContext("webgl2"))!==null&&b!==void 0?b:m.getContext("webgl");if(ue){var ce=ue.getContextAttributes();(ce==null?void 0:ce.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",m)}re.drawImage(m,0,0)}return L}catch{this.context.logger.info("Unable to clone canvas as it is tainted",m)}return L},v.prototype.createVideoClone=function(m){var b=m.ownerDocument.createElement("canvas");b.width=m.offsetWidth,b.height=m.offsetHeight;var y=b.getContext("2d");try{return y&&(y.drawImage(m,0,0,b.width,b.height),this.options.allowTaint||y.getImageData(0,0,b.width,b.height)),b}catch{this.context.logger.info("Unable to clone video as it is tainted",m)}var L=m.ownerDocument.createElement("canvas");return L.width=m.offsetWidth,L.height=m.offsetHeight,L},v.prototype.appendChildNode=function(m,b,y){(!lc(b)||!RB(b)&&!b.hasAttribute(Nx)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(b)))&&(!this.options.copyStyles||!lc(b)||!gx(b))&&m.appendChild(this.cloneNode(b,y))},v.prototype.cloneChildNodes=function(m,b,y){for(var L=this,G=m.shadowRoot?m.shadowRoot.firstChild:m.firstChild;G;G=G.nextSibling)if(lc(G)&&vx(G)&&typeof G.assignedNodes=="function"){var re=G.assignedNodes();re.length&&re.forEach(function(ue){return L.appendChildNode(b,ue,y)})}else this.appendChildNode(b,G,y)},v.prototype.cloneNode=function(m,b){if(dx(m))return document.createTextNode(m.data);if(!m.ownerDocument)return m.cloneNode(!1);var y=m.ownerDocument.defaultView;if(y&&lc(m)&&(xp(m)||Pf(m))){var L=this.createElementClone(m);L.style.transitionProperty="none";var G=y.getComputedStyle(m),re=y.getComputedStyle(m,":before"),ue=y.getComputedStyle(m,":after");this.referenceElement===m&&xp(L)&&(this.clonedReferenceElement=L),yp(L)&&e5(L);var ce=this.counters.parse(new Jt(this.context,G)),we=this.resolvePseudoContent(m,L,re,$u.BEFORE);xx(m)&&(b=!0),mx(m)||this.cloneChildNodes(m,L,b),we&&L.insertBefore(we,L.firstChild);var Ce=this.resolvePseudoContent(m,L,ue,$u.AFTER);return Ce&&L.appendChild(Ce),this.counters.pop(ce),(G&&(this.options.copyStyles||Pf(m))&&!px(m)||b)&&jp(G,L),(m.scrollTop!==0||m.scrollLeft!==0)&&this.scrolledElements.push([L,m.scrollLeft,m.scrollTop]),(Of(m)||Df(m))&&(Of(L)||Df(L))&&(L.value=m.value),L}return m.cloneNode(!1)},v.prototype.resolvePseudoContent=function(m,b,y,L){var G=this;if(y){var re=y.content,ue=b.ownerDocument;if(!(!ue||!re||re==="none"||re==="-moz-alt-content"||y.display==="none")){this.counters.parse(new Jt(this.context,y));var ce=new gn(this.context,y),we=ue.createElement("html2canvaspseudoelement");jp(y,we),ce.content.forEach(function(Fe){if(Fe.type===0)we.appendChild(ue.createTextNode(Fe.value));else if(Fe.type===22){var He=ue.createElement("img");He.src=Fe.value,He.style.opacity="1",we.appendChild(He)}else if(Fe.type===18){if(Fe.name==="attr"){var wt=Fe.values.filter(Ar);wt.length&&we.appendChild(ue.createTextNode(m.getAttribute(wt[0].value)||""))}else if(Fe.name==="counter"){var At=Fe.values.filter(br),pt=At[0],er=At[1];if(pt&&Ar(pt)){var kt=G.counters.getCounterValue(pt.value),_t=er&&Ar(er)?Lu.parse(G.context,er.value):3;we.appendChild(ue.createTextNode(Vu(kt,_t,!1)))}}else if(Fe.name==="counters"){var gr=Fe.values.filter(br),pt=gr[0],rr=gr[1],er=gr[2];if(pt&&Ar(pt)){var Gt=G.counters.getCounterValues(pt.value),yt=er&&Ar(er)?Lu.parse(G.context,er.value):3,lr=rr&&rr.type===0?rr.value:"",cr=Gt.map(function(zs){return Vu(zs,yt,!1)}).join(lr);we.appendChild(ue.createTextNode(cr))}}}else if(Fe.type===20)switch(Fe.value){case"open-quote":we.appendChild(ue.createTextNode(Je(ce.quotes,G.quoteDepth++,!0)));break;case"close-quote":we.appendChild(ue.createTextNode(Je(ce.quotes,--G.quoteDepth,!1)));break;default:we.appendChild(ue.createTextNode(Fe.value))}}),we.className=Bp+" "+Cp;var Ce=L===$u.BEFORE?" "+Bp:" "+Cp;return Pf(b)?b.className.baseValue+=Ce:b.className+=Ce,we}}},v.destroy=function(m){return m.parentNode?(m.parentNode.removeChild(m),!0):!1},v}(),$u;(function(v){v[v.BEFORE=0]="BEFORE",v[v.AFTER=1]="AFTER"})($u||($u={}));var GB=function(v,m){var b=v.createElement("iframe");return b.className="html2canvas-container",b.style.visibility="hidden",b.style.position="fixed",b.style.left="-10000px",b.style.top="0px",b.style.border="0",b.width=m.width.toString(),b.height=m.height.toString(),b.scrolling="no",b.setAttribute(Nx,"true"),v.body.appendChild(b),b},VB=function(v){return new Promise(function(m){if(v.complete){m();return}if(!v.src){m();return}v.onload=m,v.onerror=m})},$B=function(v){return Promise.all([].slice.call(v.images,0).map(VB))},zB=function(v){return new Promise(function(m,b){var y=v.contentWindow;if(!y)return b("No window assigned for iframe");var L=y.document;y.onload=v.onload=function(){y.onload=v.onload=null;var G=setInterval(function(){L.body.childNodes.length>0&&L.readyState==="complete"&&(clearInterval(G),m(v))},50)}})},WB=["all","d","content"],jp=function(v,m){for(var b=v.length-1;b>=0;b--){var y=v.item(b);WB.indexOf(y)===-1&&m.style.setProperty(y,v.getPropertyValue(y))}return m},JB=function(v){var m="";return v&&(m+="<!DOCTYPE ",v.name&&(m+=v.name),v.internalSubset&&(m+=v.internalSubset),v.publicId&&(m+='"'+v.publicId+'"'),v.systemId&&(m+='"'+v.systemId+'"'),m+=">"),m},XB=function(v,m,b){v&&v.defaultView&&(m!==v.defaultView.pageXOffset||b!==v.defaultView.pageYOffset)&&v.defaultView.scrollTo(m,b)},YB=function(v){var m=v[0],b=v[1],y=v[2];m.scrollLeft=b,m.scrollTop=y},qB=":before",ZB=":after",Bp="___html2canvas___pseudoelement_before",Cp="___html2canvas___pseudoelement_after",Ex=`{
    content: "" !important;
    display: none !important;
}`,e5=function(v){t5(v,"."+Bp+qB+Ex+`
         .`+Cp+ZB+Ex)},t5=function(v,m){var b=v.ownerDocument;if(b){var y=b.createElement("style");y.textContent=m,v.appendChild(y)}},_x=function(){function v(){}return v.getOrigin=function(m){var b=v._link;return b?(b.href=m,b.href=b.href,b.protocol+b.hostname+b.port):"about:blank"},v.isSameOrigin=function(m){return v.getOrigin(m)===v._origin},v.setContext=function(m){v._link=m.document.createElement("a"),v._origin=v.getOrigin(m.location.href)},v._origin="about:blank",v}(),r5=function(){function v(m,b){this.context=m,this._options=b,this._cache={}}return v.prototype.addImage=function(m){var b=Promise.resolve();return this.has(m)||(Sp(m)||o5(m))&&(this._cache[m]=this.loadImage(m)).catch(function(){}),b},v.prototype.match=function(m){return this._cache[m]},v.prototype.loadImage=function(m){return o(this,void 0,void 0,function(){var b,y,L,G,re=this;return l(this,function(ue){switch(ue.label){case 0:return b=_x.isSameOrigin(m),y=!Np(m)&&this._options.useCORS===!0&&_n.SUPPORT_CORS_IMAGES&&!b,L=!Np(m)&&!b&&!Sp(m)&&typeof this._options.proxy=="string"&&_n.SUPPORT_CORS_XHR&&!y,!b&&this._options.allowTaint===!1&&!Np(m)&&!Sp(m)&&!L&&!y?[2]:(G=m,L?[4,this.proxy(G)]:[3,2]);case 1:G=ue.sent(),ue.label=2;case 2:return this.context.logger.debug("Added image "+m.substring(0,256)),[4,new Promise(function(ce,we){var Ce=new Image;Ce.onload=function(){return ce(Ce)},Ce.onerror=we,(i5(G)||y)&&(Ce.crossOrigin="anonymous"),Ce.src=G,Ce.complete===!0&&setTimeout(function(){return ce(Ce)},500),re._options.imageTimeout>0&&setTimeout(function(){return we("Timed out ("+re._options.imageTimeout+"ms) loading image")},re._options.imageTimeout)})];case 3:return[2,ue.sent()]}})})},v.prototype.has=function(m){return typeof this._cache[m]<"u"},v.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},v.prototype.proxy=function(m){var b=this,y=this._options.proxy;if(!y)throw new Error("No proxy defined");var L=m.substring(0,256);return new Promise(function(G,re){var ue=_n.SUPPORT_RESPONSE_TYPE?"blob":"text",ce=new XMLHttpRequest;ce.onload=function(){if(ce.status===200)if(ue==="text")G(ce.response);else{var Fe=new FileReader;Fe.addEventListener("load",function(){return G(Fe.result)},!1),Fe.addEventListener("error",function(He){return re(He)},!1),Fe.readAsDataURL(ce.response)}else re("Failed to proxy resource "+L+" with status code "+ce.status)},ce.onerror=re;var we=y.indexOf("?")>-1?"&":"?";if(ce.open("GET",""+y+we+"url="+encodeURIComponent(m)+"&responseType="+ue),ue!=="text"&&ce instanceof XMLHttpRequest&&(ce.responseType=ue),b._options.imageTimeout){var Ce=b._options.imageTimeout;ce.timeout=Ce,ce.ontimeout=function(){return re("Timed out ("+Ce+"ms) proxying "+L)}}ce.send()})},v}(),n5=/^data:image\/svg\+xml/i,s5=/^data:image\/.*;base64,/i,a5=/^data:image\/.*/i,o5=function(v){return _n.SUPPORT_SVG_DRAWING||!A5(v)},Np=function(v){return a5.test(v)},i5=function(v){return s5.test(v)},Sp=function(v){return v.substr(0,4)==="blob"},A5=function(v){return v.substr(-3).toLowerCase()==="svg"||n5.test(v)},xt=function(){function v(m,b){this.type=0,this.x=m,this.y=b}return v.prototype.add=function(m,b){return new v(this.x+m,this.y+b)},v}(),dc=function(v,m,b){return new xt(v.x+(m.x-v.x)*b,v.y+(m.y-v.y)*b)},Rf=function(){function v(m,b,y,L){this.type=1,this.start=m,this.startControl=b,this.endControl=y,this.end=L}return v.prototype.subdivide=function(m,b){var y=dc(this.start,this.startControl,m),L=dc(this.startControl,this.endControl,m),G=dc(this.endControl,this.end,m),re=dc(y,L,m),ue=dc(L,G,m),ce=dc(re,ue,m);return b?new v(this.start,y,re,ce):new v(ce,ue,G,this.end)},v.prototype.add=function(m,b){return new v(this.start.add(m,b),this.startControl.add(m,b),this.endControl.add(m,b),this.end.add(m,b))},v.prototype.reverse=function(){return new v(this.end,this.endControl,this.startControl,this.start)},v}(),ka=function(v){return v.type===1},l5=function(){function v(m){var b=m.styles,y=m.bounds,L=ca(b.borderTopLeftRadius,y.width,y.height),G=L[0],re=L[1],ue=ca(b.borderTopRightRadius,y.width,y.height),ce=ue[0],we=ue[1],Ce=ca(b.borderBottomRightRadius,y.width,y.height),Fe=Ce[0],He=Ce[1],wt=ca(b.borderBottomLeftRadius,y.width,y.height),At=wt[0],pt=wt[1],er=[];er.push((G+ce)/y.width),er.push((At+Fe)/y.width),er.push((re+pt)/y.height),er.push((we+He)/y.height);var kt=Math.max.apply(Math,er);kt>1&&(G/=kt,re/=kt,ce/=kt,we/=kt,Fe/=kt,He/=kt,At/=kt,pt/=kt);var _t=y.width-ce,gr=y.height-He,rr=y.width-Fe,Gt=y.height-pt,yt=b.borderTopWidth,lr=b.borderRightWidth,cr=b.borderBottomWidth,zt=b.borderLeftWidth,Fn=tr(b.paddingTop,m.bounds.width),zs=tr(b.paddingRight,m.bounds.width),pa=tr(b.paddingBottom,m.bounds.width),Fr=tr(b.paddingLeft,m.bounds.width);this.topLeftBorderDoubleOuterBox=G>0||re>0?$r(y.left+zt/3,y.top+yt/3,G-zt/3,re-yt/3,wr.TOP_LEFT):new xt(y.left+zt/3,y.top+yt/3),this.topRightBorderDoubleOuterBox=G>0||re>0?$r(y.left+_t,y.top+yt/3,ce-lr/3,we-yt/3,wr.TOP_RIGHT):new xt(y.left+y.width-lr/3,y.top+yt/3),this.bottomRightBorderDoubleOuterBox=Fe>0||He>0?$r(y.left+rr,y.top+gr,Fe-lr/3,He-cr/3,wr.BOTTOM_RIGHT):new xt(y.left+y.width-lr/3,y.top+y.height-cr/3),this.bottomLeftBorderDoubleOuterBox=At>0||pt>0?$r(y.left+zt/3,y.top+Gt,At-zt/3,pt-cr/3,wr.BOTTOM_LEFT):new xt(y.left+zt/3,y.top+y.height-cr/3),this.topLeftBorderDoubleInnerBox=G>0||re>0?$r(y.left+zt*2/3,y.top+yt*2/3,G-zt*2/3,re-yt*2/3,wr.TOP_LEFT):new xt(y.left+zt*2/3,y.top+yt*2/3),this.topRightBorderDoubleInnerBox=G>0||re>0?$r(y.left+_t,y.top+yt*2/3,ce-lr*2/3,we-yt*2/3,wr.TOP_RIGHT):new xt(y.left+y.width-lr*2/3,y.top+yt*2/3),this.bottomRightBorderDoubleInnerBox=Fe>0||He>0?$r(y.left+rr,y.top+gr,Fe-lr*2/3,He-cr*2/3,wr.BOTTOM_RIGHT):new xt(y.left+y.width-lr*2/3,y.top+y.height-cr*2/3),this.bottomLeftBorderDoubleInnerBox=At>0||pt>0?$r(y.left+zt*2/3,y.top+Gt,At-zt*2/3,pt-cr*2/3,wr.BOTTOM_LEFT):new xt(y.left+zt*2/3,y.top+y.height-cr*2/3),this.topLeftBorderStroke=G>0||re>0?$r(y.left+zt/2,y.top+yt/2,G-zt/2,re-yt/2,wr.TOP_LEFT):new xt(y.left+zt/2,y.top+yt/2),this.topRightBorderStroke=G>0||re>0?$r(y.left+_t,y.top+yt/2,ce-lr/2,we-yt/2,wr.TOP_RIGHT):new xt(y.left+y.width-lr/2,y.top+yt/2),this.bottomRightBorderStroke=Fe>0||He>0?$r(y.left+rr,y.top+gr,Fe-lr/2,He-cr/2,wr.BOTTOM_RIGHT):new xt(y.left+y.width-lr/2,y.top+y.height-cr/2),this.bottomLeftBorderStroke=At>0||pt>0?$r(y.left+zt/2,y.top+Gt,At-zt/2,pt-cr/2,wr.BOTTOM_LEFT):new xt(y.left+zt/2,y.top+y.height-cr/2),this.topLeftBorderBox=G>0||re>0?$r(y.left,y.top,G,re,wr.TOP_LEFT):new xt(y.left,y.top),this.topRightBorderBox=ce>0||we>0?$r(y.left+_t,y.top,ce,we,wr.TOP_RIGHT):new xt(y.left+y.width,y.top),this.bottomRightBorderBox=Fe>0||He>0?$r(y.left+rr,y.top+gr,Fe,He,wr.BOTTOM_RIGHT):new xt(y.left+y.width,y.top+y.height),this.bottomLeftBorderBox=At>0||pt>0?$r(y.left,y.top+Gt,At,pt,wr.BOTTOM_LEFT):new xt(y.left,y.top+y.height),this.topLeftPaddingBox=G>0||re>0?$r(y.left+zt,y.top+yt,Math.max(0,G-zt),Math.max(0,re-yt),wr.TOP_LEFT):new xt(y.left+zt,y.top+yt),this.topRightPaddingBox=ce>0||we>0?$r(y.left+Math.min(_t,y.width-lr),y.top+yt,_t>y.width+lr?0:Math.max(0,ce-lr),Math.max(0,we-yt),wr.TOP_RIGHT):new xt(y.left+y.width-lr,y.top+yt),this.bottomRightPaddingBox=Fe>0||He>0?$r(y.left+Math.min(rr,y.width-zt),y.top+Math.min(gr,y.height-cr),Math.max(0,Fe-lr),Math.max(0,He-cr),wr.BOTTOM_RIGHT):new xt(y.left+y.width-lr,y.top+y.height-cr),this.bottomLeftPaddingBox=At>0||pt>0?$r(y.left+zt,y.top+Math.min(Gt,y.height-cr),Math.max(0,At-zt),Math.max(0,pt-cr),wr.BOTTOM_LEFT):new xt(y.left+zt,y.top+y.height-cr),this.topLeftContentBox=G>0||re>0?$r(y.left+zt+Fr,y.top+yt+Fn,Math.max(0,G-(zt+Fr)),Math.max(0,re-(yt+Fn)),wr.TOP_LEFT):new xt(y.left+zt+Fr,y.top+yt+Fn),this.topRightContentBox=ce>0||we>0?$r(y.left+Math.min(_t,y.width+zt+Fr),y.top+yt+Fn,_t>y.width+zt+Fr?0:ce-zt+Fr,we-(yt+Fn),wr.TOP_RIGHT):new xt(y.left+y.width-(lr+zs),y.top+yt+Fn),this.bottomRightContentBox=Fe>0||He>0?$r(y.left+Math.min(rr,y.width-(zt+Fr)),y.top+Math.min(gr,y.height+yt+Fn),Math.max(0,Fe-(lr+zs)),He-(cr+pa),wr.BOTTOM_RIGHT):new xt(y.left+y.width-(lr+zs),y.top+y.height-(cr+pa)),this.bottomLeftContentBox=At>0||pt>0?$r(y.left+zt+Fr,y.top+Gt,Math.max(0,At-(zt+Fr)),pt-(cr+pa),wr.BOTTOM_LEFT):new xt(y.left+zt+Fr,y.top+y.height-(cr+pa))}return v}(),wr;(function(v){v[v.TOP_LEFT=0]="TOP_LEFT",v[v.TOP_RIGHT=1]="TOP_RIGHT",v[v.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",v[v.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(wr||(wr={}));var $r=function(v,m,b,y,L){var G=4*((Math.sqrt(2)-1)/3),re=b*G,ue=y*G,ce=v+b,we=m+y;switch(L){case wr.TOP_LEFT:return new Rf(new xt(v,we),new xt(v,we-ue),new xt(ce-re,m),new xt(ce,m));case wr.TOP_RIGHT:return new Rf(new xt(v,m),new xt(v+re,m),new xt(ce,we-ue),new xt(ce,we));case wr.BOTTOM_RIGHT:return new Rf(new xt(ce,m),new xt(ce,m+ue),new xt(v+re,we),new xt(v,we));case wr.BOTTOM_LEFT:default:return new Rf(new xt(ce,we),new xt(ce-re,we),new xt(v,m+ue),new xt(v,m))}},Hf=function(v){return[v.topLeftBorderBox,v.topRightBorderBox,v.bottomRightBorderBox,v.bottomLeftBorderBox]},c5=function(v){return[v.topLeftContentBox,v.topRightContentBox,v.bottomRightContentBox,v.bottomLeftContentBox]},Mf=function(v){return[v.topLeftPaddingBox,v.topRightPaddingBox,v.bottomRightPaddingBox,v.bottomLeftPaddingBox]},u5=function(){function v(m,b,y){this.offsetX=m,this.offsetY=b,this.matrix=y,this.type=0,this.target=6}return v}(),Kf=function(){function v(m,b){this.path=m,this.target=b,this.type=1}return v}(),d5=function(){function v(m){this.opacity=m,this.type=2,this.target=6}return v}(),f5=function(v){return v.type===0},Fx=function(v){return v.type===1},h5=function(v){return v.type===2},Ux=function(v,m){return v.length===m.length?v.some(function(b,y){return b===m[y]}):!1},m5=function(v,m,b,y,L){return v.map(function(G,re){switch(re){case 0:return G.add(m,b);case 1:return G.add(m+y,b);case 2:return G.add(m+y,b+L);case 3:return G.add(m,b+L)}return G})},Qx=function(){function v(m){this.element=m,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return v}(),Ix=function(){function v(m,b){if(this.container=m,this.parent=b,this.effects=[],this.curves=new l5(this.container),this.container.styles.opacity<1&&this.effects.push(new d5(this.container.styles.opacity)),this.container.styles.transform!==null){var y=this.container.bounds.left+this.container.styles.transformOrigin[0].number,L=this.container.bounds.top+this.container.styles.transformOrigin[1].number,G=this.container.styles.transform;this.effects.push(new u5(y,L,G))}if(this.container.styles.overflowX!==0){var re=Hf(this.curves),ue=Mf(this.curves);Ux(re,ue)?this.effects.push(new Kf(re,6)):(this.effects.push(new Kf(re,2)),this.effects.push(new Kf(ue,4)))}}return v.prototype.getEffects=function(m){for(var b=[2,3].indexOf(this.container.styles.position)===-1,y=this.parent,L=this.effects.slice(0);y;){var G=y.effects.filter(function(ce){return!Fx(ce)});if(b||y.container.styles.position!==0||!y.parent){if(L.unshift.apply(L,G),b=[2,3].indexOf(y.container.styles.position)===-1,y.container.styles.overflowX!==0){var re=Hf(y.curves),ue=Mf(y.curves);Ux(re,ue)||L.unshift(new Kf(ue,6))}}else L.unshift.apply(L,G);y=y.parent}return L.filter(function(ce){return Be(ce.target,m)})},v}(),Ep=function(v,m,b,y){v.container.elements.forEach(function(L){var G=Be(L.flags,4),re=Be(L.flags,2),ue=new Ix(L,v);Be(L.styles.display,2048)&&y.push(ue);var ce=Be(L.flags,8)?[]:y;if(G||re){var we=G||L.styles.isPositioned()?b:m,Ce=new Qx(ue);if(L.styles.isPositioned()||L.styles.opacity<1||L.styles.isTransformed()){var Fe=L.styles.zIndex.order;if(Fe<0){var He=0;we.negativeZIndex.some(function(At,pt){return Fe>At.element.container.styles.zIndex.order?(He=pt,!1):He>0}),we.negativeZIndex.splice(He,0,Ce)}else if(Fe>0){var wt=0;we.positiveZIndex.some(function(At,pt){return Fe>=At.element.container.styles.zIndex.order?(wt=pt+1,!1):wt>0}),we.positiveZIndex.splice(wt,0,Ce)}else we.zeroOrAutoZIndexOrTransformedOrOpacity.push(Ce)}else L.styles.isFloating()?we.nonPositionedFloats.push(Ce):we.nonPositionedInlineLevel.push(Ce);Ep(ue,Ce,G?Ce:b,ce)}else L.styles.isInlineLevel()?m.inlineLevel.push(ue):m.nonInlineLevel.push(ue),Ep(ue,m,b,ce);Be(L.flags,8)&&Lx(L,ce)})},Lx=function(v,m){for(var b=v instanceof gp?v.start:1,y=v instanceof gp?v.reversed:!1,L=0;L<m.length;L++){var G=m[L];G.container instanceof ax&&typeof G.container.value=="number"&&G.container.value!==0&&(b=G.container.value),G.listValue=Vu(b,G.container.styles.listStyleType,!0),b+=y?-1:1}},p5=function(v){var m=new Ix(v,null),b=new Qx(m),y=[];return Ep(m,b,b,y),Lx(m.container,y),b},kx=function(v,m){switch(m){case 0:return Ta(v.topLeftBorderBox,v.topLeftPaddingBox,v.topRightBorderBox,v.topRightPaddingBox);case 1:return Ta(v.topRightBorderBox,v.topRightPaddingBox,v.bottomRightBorderBox,v.bottomRightPaddingBox);case 2:return Ta(v.bottomRightBorderBox,v.bottomRightPaddingBox,v.bottomLeftBorderBox,v.bottomLeftPaddingBox);case 3:default:return Ta(v.bottomLeftBorderBox,v.bottomLeftPaddingBox,v.topLeftBorderBox,v.topLeftPaddingBox)}},g5=function(v,m){switch(m){case 0:return Ta(v.topLeftBorderBox,v.topLeftBorderDoubleOuterBox,v.topRightBorderBox,v.topRightBorderDoubleOuterBox);case 1:return Ta(v.topRightBorderBox,v.topRightBorderDoubleOuterBox,v.bottomRightBorderBox,v.bottomRightBorderDoubleOuterBox);case 2:return Ta(v.bottomRightBorderBox,v.bottomRightBorderDoubleOuterBox,v.bottomLeftBorderBox,v.bottomLeftBorderDoubleOuterBox);case 3:default:return Ta(v.bottomLeftBorderBox,v.bottomLeftBorderDoubleOuterBox,v.topLeftBorderBox,v.topLeftBorderDoubleOuterBox)}},v5=function(v,m){switch(m){case 0:return Ta(v.topLeftBorderDoubleInnerBox,v.topLeftPaddingBox,v.topRightBorderDoubleInnerBox,v.topRightPaddingBox);case 1:return Ta(v.topRightBorderDoubleInnerBox,v.topRightPaddingBox,v.bottomRightBorderDoubleInnerBox,v.bottomRightPaddingBox);case 2:return Ta(v.bottomRightBorderDoubleInnerBox,v.bottomRightPaddingBox,v.bottomLeftBorderDoubleInnerBox,v.bottomLeftPaddingBox);case 3:default:return Ta(v.bottomLeftBorderDoubleInnerBox,v.bottomLeftPaddingBox,v.topLeftBorderDoubleInnerBox,v.topLeftPaddingBox)}},x5=function(v,m){switch(m){case 0:return Gf(v.topLeftBorderStroke,v.topRightBorderStroke);case 1:return Gf(v.topRightBorderStroke,v.bottomRightBorderStroke);case 2:return Gf(v.bottomRightBorderStroke,v.bottomLeftBorderStroke);case 3:default:return Gf(v.bottomLeftBorderStroke,v.topLeftBorderStroke)}},Gf=function(v,m){var b=[];return ka(v)?b.push(v.subdivide(.5,!1)):b.push(v),ka(m)?b.push(m.subdivide(.5,!0)):b.push(m),b},Ta=function(v,m,b,y){var L=[];return ka(v)?L.push(v.subdivide(.5,!1)):L.push(v),ka(b)?L.push(b.subdivide(.5,!0)):L.push(b),ka(y)?L.push(y.subdivide(.5,!0).reverse()):L.push(y),ka(m)?L.push(m.subdivide(.5,!1).reverse()):L.push(m),L},Tx=function(v){var m=v.bounds,b=v.styles;return m.add(b.borderLeftWidth,b.borderTopWidth,-(b.borderRightWidth+b.borderLeftWidth),-(b.borderTopWidth+b.borderBottomWidth))},Vf=function(v){var m=v.styles,b=v.bounds,y=tr(m.paddingLeft,b.width),L=tr(m.paddingRight,b.width),G=tr(m.paddingTop,b.width),re=tr(m.paddingBottom,b.width);return b.add(y+m.borderLeftWidth,G+m.borderTopWidth,-(m.borderRightWidth+m.borderLeftWidth+y+L),-(m.borderTopWidth+m.borderBottomWidth+G+re))},y5=function(v,m){return v===0?m.bounds:v===2?Vf(m):Tx(m)},w5=function(v,m){return v===0?m.bounds:v===2?Vf(m):Tx(m)},_p=function(v,m,b){var y=y5(hc(v.styles.backgroundOrigin,m),v),L=w5(hc(v.styles.backgroundClip,m),v),G=b5(hc(v.styles.backgroundSize,m),b,y),re=G[0],ue=G[1],ce=ca(hc(v.styles.backgroundPosition,m),y.width-re,y.height-ue),we=j5(hc(v.styles.backgroundRepeat,m),ce,G,y,L),Ce=Math.round(y.left+ce[0]),Fe=Math.round(y.top+ce[1]);return[we,Ce,Fe,re,ue]},fc=function(v){return Ar(v)&&v.value===oi.AUTO},$f=function(v){return typeof v=="number"},b5=function(v,m,b){var y=m[0],L=m[1],G=m[2],re=v[0],ue=v[1];if(!re)return[0,0];if(dr(re)&&ue&&dr(ue))return[tr(re,b.width),tr(ue,b.height)];var ce=$f(G);if(Ar(re)&&(re.value===oi.CONTAIN||re.value===oi.COVER)){if($f(G)){var we=b.width/b.height;return we<G!=(re.value===oi.COVER)?[b.width,b.width/G]:[b.height*G,b.height]}return[b.width,b.height]}var Ce=$f(y),Fe=$f(L),He=Ce||Fe;if(fc(re)&&(!ue||fc(ue))){if(Ce&&Fe)return[y,L];if(!ce&&!He)return[b.width,b.height];if(He&&ce){var wt=Ce?y:L*G,At=Fe?L:y/G;return[wt,At]}var pt=Ce?y:b.width,er=Fe?L:b.height;return[pt,er]}if(ce){var kt=0,_t=0;return dr(re)?kt=tr(re,b.width):dr(ue)&&(_t=tr(ue,b.height)),fc(re)?kt=_t*G:(!ue||fc(ue))&&(_t=kt/G),[kt,_t]}var gr=null,rr=null;if(dr(re)?gr=tr(re,b.width):ue&&dr(ue)&&(rr=tr(ue,b.height)),gr!==null&&(!ue||fc(ue))&&(rr=Ce&&Fe?gr/y*L:b.height),rr!==null&&fc(re)&&(gr=Ce&&Fe?rr/L*y:b.width),gr!==null&&rr!==null)return[gr,rr];throw new Error("Unable to calculate background-size for element")},hc=function(v,m){var b=v[m];return typeof b>"u"?v[0]:b},j5=function(v,m,b,y,L){var G=m[0],re=m[1],ue=b[0],ce=b[1];switch(v){case 2:return[new xt(Math.round(y.left),Math.round(y.top+re)),new xt(Math.round(y.left+y.width),Math.round(y.top+re)),new xt(Math.round(y.left+y.width),Math.round(ce+y.top+re)),new xt(Math.round(y.left),Math.round(ce+y.top+re))];case 3:return[new xt(Math.round(y.left+G),Math.round(y.top)),new xt(Math.round(y.left+G+ue),Math.round(y.top)),new xt(Math.round(y.left+G+ue),Math.round(y.height+y.top)),new xt(Math.round(y.left+G),Math.round(y.height+y.top))];case 1:return[new xt(Math.round(y.left+G),Math.round(y.top+re)),new xt(Math.round(y.left+G+ue),Math.round(y.top+re)),new xt(Math.round(y.left+G+ue),Math.round(y.top+re+ce)),new xt(Math.round(y.left+G),Math.round(y.top+re+ce))];default:return[new xt(Math.round(L.left),Math.round(L.top)),new xt(Math.round(L.left+L.width),Math.round(L.top)),new xt(Math.round(L.left+L.width),Math.round(L.height+L.top)),new xt(Math.round(L.left),Math.round(L.height+L.top))]}},B5="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Px="Hidden Text",C5=function(){function v(m){this._data={},this._document=m}return v.prototype.parseMetrics=function(m,b){var y=this._document.createElement("div"),L=this._document.createElement("img"),G=this._document.createElement("span"),re=this._document.body;y.style.visibility="hidden",y.style.fontFamily=m,y.style.fontSize=b,y.style.margin="0",y.style.padding="0",y.style.whiteSpace="nowrap",re.appendChild(y),L.src=B5,L.width=1,L.height=1,L.style.margin="0",L.style.padding="0",L.style.verticalAlign="baseline",G.style.fontFamily=m,G.style.fontSize=b,G.style.margin="0",G.style.padding="0",G.appendChild(this._document.createTextNode(Px)),y.appendChild(G),y.appendChild(L);var ue=L.offsetTop-G.offsetTop+2;y.removeChild(G),y.appendChild(this._document.createTextNode(Px)),y.style.lineHeight="normal",L.style.verticalAlign="super";var ce=L.offsetTop-y.offsetTop+2;return re.removeChild(y),{baseline:ue,middle:ce}},v.prototype.getMetrics=function(m,b){var y=m+" "+b;return typeof this._data[y]>"u"&&(this._data[y]=this.parseMetrics(m,b)),this._data[y]},v}(),Ox=function(){function v(m,b){this.context=m,this.options=b}return v}(),N5=1e4,S5=function(v){n(m,v);function m(b,y){var L=v.call(this,b,y)||this;return L._activeEffects=[],L.canvas=y.canvas?y.canvas:document.createElement("canvas"),L.ctx=L.canvas.getContext("2d"),y.canvas||(L.canvas.width=Math.floor(y.width*y.scale),L.canvas.height=Math.floor(y.height*y.scale),L.canvas.style.width=y.width+"px",L.canvas.style.height=y.height+"px"),L.fontMetrics=new C5(document),L.ctx.scale(L.options.scale,L.options.scale),L.ctx.translate(-y.x,-y.y),L.ctx.textBaseline="bottom",L._activeEffects=[],L.context.logger.debug("Canvas renderer initialized ("+y.width+"x"+y.height+") with scale "+y.scale),L}return m.prototype.applyEffects=function(b){for(var y=this;this._activeEffects.length;)this.popEffect();b.forEach(function(L){return y.applyEffect(L)})},m.prototype.applyEffect=function(b){this.ctx.save(),h5(b)&&(this.ctx.globalAlpha=b.opacity),f5(b)&&(this.ctx.translate(b.offsetX,b.offsetY),this.ctx.transform(b.matrix[0],b.matrix[1],b.matrix[2],b.matrix[3],b.matrix[4],b.matrix[5]),this.ctx.translate(-b.offsetX,-b.offsetY)),Fx(b)&&(this.path(b.path),this.ctx.clip()),this._activeEffects.push(b)},m.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},m.prototype.renderStack=function(b){return o(this,void 0,void 0,function(){var y;return l(this,function(L){switch(L.label){case 0:return y=b.element.container.styles,y.isVisible()?[4,this.renderStackContent(b)]:[3,2];case 1:L.sent(),L.label=2;case 2:return[2]}})})},m.prototype.renderNode=function(b){return o(this,void 0,void 0,function(){return l(this,function(y){switch(y.label){case 0:if(Be(b.container.flags,16))debugger;return b.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(b)]:[3,3];case 1:return y.sent(),[4,this.renderNodeContent(b)];case 2:y.sent(),y.label=3;case 3:return[2]}})})},m.prototype.renderTextWithLetterSpacing=function(b,y,L){var G=this;if(y===0)this.ctx.fillText(b.text,b.bounds.left,b.bounds.top+L);else{var re=ma(b.text);re.reduce(function(ue,ce){return G.ctx.fillText(ce,ue,b.bounds.top+L),ue+G.ctx.measureText(ce).width},b.bounds.left)}},m.prototype.createFontStyle=function(b){var y=b.fontVariant.filter(function(re){return re==="normal"||re==="small-caps"}).join(""),L=Q5(b.fontFamily).join(", "),G=Aa(b.fontSize)?""+b.fontSize.number+b.fontSize.unit:b.fontSize.number+"px";return[[b.fontStyle,y,b.fontWeight,G,L].join(" "),L,G]},m.prototype.renderTextNode=function(b,y){return o(this,void 0,void 0,function(){var L,G,re,ue,ce,we,Ce,Fe,He=this;return l(this,function(wt){return L=this.createFontStyle(y),G=L[0],re=L[1],ue=L[2],this.ctx.font=G,this.ctx.direction=y.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",ce=this.fontMetrics.getMetrics(re,ue),we=ce.baseline,Ce=ce.middle,Fe=y.paintOrder,b.textBounds.forEach(function(At){Fe.forEach(function(pt){switch(pt){case 0:He.ctx.fillStyle=Vr(y.color),He.renderTextWithLetterSpacing(At,y.letterSpacing,we);var er=y.textShadow;er.length&&At.text.trim().length&&(er.slice(0).reverse().forEach(function(kt){He.ctx.shadowColor=Vr(kt.color),He.ctx.shadowOffsetX=kt.offsetX.number*He.options.scale,He.ctx.shadowOffsetY=kt.offsetY.number*He.options.scale,He.ctx.shadowBlur=kt.blur.number,He.renderTextWithLetterSpacing(At,y.letterSpacing,we)}),He.ctx.shadowColor="",He.ctx.shadowOffsetX=0,He.ctx.shadowOffsetY=0,He.ctx.shadowBlur=0),y.textDecorationLine.length&&(He.ctx.fillStyle=Vr(y.textDecorationColor||y.color),y.textDecorationLine.forEach(function(kt){switch(kt){case 1:He.ctx.fillRect(At.bounds.left,Math.round(At.bounds.top+we),At.bounds.width,1);break;case 2:He.ctx.fillRect(At.bounds.left,Math.round(At.bounds.top),At.bounds.width,1);break;case 3:He.ctx.fillRect(At.bounds.left,Math.ceil(At.bounds.top+Ce),At.bounds.width,1);break}}));break;case 1:y.webkitTextStrokeWidth&&At.text.trim().length&&(He.ctx.strokeStyle=Vr(y.webkitTextStrokeColor),He.ctx.lineWidth=y.webkitTextStrokeWidth,He.ctx.lineJoin=window.chrome?"miter":"round",He.ctx.strokeText(At.text,At.bounds.left,At.bounds.top+we)),He.ctx.strokeStyle="",He.ctx.lineWidth=0,He.ctx.lineJoin="miter";break}})}),[2]})})},m.prototype.renderReplacedElement=function(b,y,L){if(L&&b.intrinsicWidth>0&&b.intrinsicHeight>0){var G=Vf(b),re=Mf(y);this.path(re),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(L,0,0,b.intrinsicWidth,b.intrinsicHeight,G.left,G.top,G.width,G.height),this.ctx.restore()}},m.prototype.renderNodeContent=function(b){return o(this,void 0,void 0,function(){var y,L,G,re,ue,ce,_t,_t,we,Ce,Fe,He,rr,wt,At,Gt,pt,er,kt,_t,gr,rr,Gt;return l(this,function(yt){switch(yt.label){case 0:this.applyEffects(b.getEffects(4)),y=b.container,L=b.curves,G=y.styles,re=0,ue=y.textNodes,yt.label=1;case 1:return re<ue.length?(ce=ue[re],[4,this.renderTextNode(ce,G)]):[3,4];case 2:yt.sent(),yt.label=3;case 3:return re++,[3,1];case 4:if(!(y instanceof rx))return[3,8];yt.label=5;case 5:return yt.trys.push([5,7,,8]),[4,this.context.cache.match(y.src)];case 6:return _t=yt.sent(),this.renderReplacedElement(y,L,_t),[3,8];case 7:return yt.sent(),this.context.logger.error("Error loading image "+y.src),[3,8];case 8:if(y instanceof nx&&this.renderReplacedElement(y,L,y.canvas),!(y instanceof sx))return[3,12];yt.label=9;case 9:return yt.trys.push([9,11,,12]),[4,this.context.cache.match(y.svg)];case 10:return _t=yt.sent(),this.renderReplacedElement(y,L,_t),[3,12];case 11:return yt.sent(),this.context.logger.error("Error loading svg "+y.svg.substring(0,255)),[3,12];case 12:return y instanceof lx&&y.tree?(we=new m(this.context,{scale:this.options.scale,backgroundColor:y.backgroundColor,x:0,y:0,width:y.width,height:y.height}),[4,we.render(y.tree)]):[3,14];case 13:Ce=yt.sent(),y.width&&y.height&&this.ctx.drawImage(Ce,0,0,y.width,y.height,y.bounds.left,y.bounds.top,y.bounds.width,y.bounds.height),yt.label=14;case 14:if(y instanceof vp&&(Fe=Math.min(y.bounds.width,y.bounds.height),y.type===Lf?y.checked&&(this.ctx.save(),this.path([new xt(y.bounds.left+Fe*.39363,y.bounds.top+Fe*.79),new xt(y.bounds.left+Fe*.16,y.bounds.top+Fe*.5549),new xt(y.bounds.left+Fe*.27347,y.bounds.top+Fe*.44071),new xt(y.bounds.left+Fe*.39694,y.bounds.top+Fe*.5649),new xt(y.bounds.left+Fe*.72983,y.bounds.top+Fe*.23),new xt(y.bounds.left+Fe*.84,y.bounds.top+Fe*.34085),new xt(y.bounds.left+Fe*.39363,y.bounds.top+Fe*.79)]),this.ctx.fillStyle=Vr(ox),this.ctx.fill(),this.ctx.restore()):y.type===kf&&y.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(y.bounds.left+Fe/2,y.bounds.top+Fe/2,Fe/4,0,Math.PI*2,!0),this.ctx.fillStyle=Vr(ox),this.ctx.fill(),this.ctx.restore())),E5(y)&&y.value.length){switch(He=this.createFontStyle(G),rr=He[0],wt=He[1],At=this.fontMetrics.getMetrics(rr,wt).baseline,this.ctx.font=rr,this.ctx.fillStyle=Vr(G.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=F5(y.styles.textAlign),Gt=Vf(y),pt=0,y.styles.textAlign){case 1:pt+=Gt.width/2;break;case 2:pt+=Gt.width;break}er=Gt.add(pt,0,0,-Gt.height/2+1),this.ctx.save(),this.path([new xt(Gt.left,Gt.top),new xt(Gt.left+Gt.width,Gt.top),new xt(Gt.left+Gt.width,Gt.top+Gt.height),new xt(Gt.left,Gt.top+Gt.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new KA(y.value,er),G.letterSpacing,At),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Be(y.styles.display,2048))return[3,20];if(y.styles.listStyleImage===null)return[3,19];if(kt=y.styles.listStyleImage,kt.type!==0)return[3,18];_t=void 0,gr=kt.url,yt.label=15;case 15:return yt.trys.push([15,17,,18]),[4,this.context.cache.match(gr)];case 16:return _t=yt.sent(),this.ctx.drawImage(_t,y.bounds.left-(_t.width+10),y.bounds.top),[3,18];case 17:return yt.sent(),this.context.logger.error("Error loading list-style-image "+gr),[3,18];case 18:return[3,20];case 19:b.listValue&&y.styles.listStyleType!==-1&&(rr=this.createFontStyle(G)[0],this.ctx.font=rr,this.ctx.fillStyle=Vr(G.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Gt=new A(y.bounds.left,y.bounds.top+tr(y.styles.paddingTop,y.bounds.width),y.bounds.width,qa(G.lineHeight,G.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new KA(b.listValue,Gt),G.letterSpacing,qa(G.lineHeight,G.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),yt.label=20;case 20:return[2]}})})},m.prototype.renderStackContent=function(b){return o(this,void 0,void 0,function(){var y,L,kt,G,re,kt,ue,ce,kt,we,Ce,kt,Fe,He,kt,wt,At,kt,pt,er,kt;return l(this,function(_t){switch(_t.label){case 0:if(Be(b.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(b.element)];case 1:_t.sent(),y=0,L=b.negativeZIndex,_t.label=2;case 2:return y<L.length?(kt=L[y],[4,this.renderStack(kt)]):[3,5];case 3:_t.sent(),_t.label=4;case 4:return y++,[3,2];case 5:return[4,this.renderNodeContent(b.element)];case 6:_t.sent(),G=0,re=b.nonInlineLevel,_t.label=7;case 7:return G<re.length?(kt=re[G],[4,this.renderNode(kt)]):[3,10];case 8:_t.sent(),_t.label=9;case 9:return G++,[3,7];case 10:ue=0,ce=b.nonPositionedFloats,_t.label=11;case 11:return ue<ce.length?(kt=ce[ue],[4,this.renderStack(kt)]):[3,14];case 12:_t.sent(),_t.label=13;case 13:return ue++,[3,11];case 14:we=0,Ce=b.nonPositionedInlineLevel,_t.label=15;case 15:return we<Ce.length?(kt=Ce[we],[4,this.renderStack(kt)]):[3,18];case 16:_t.sent(),_t.label=17;case 17:return we++,[3,15];case 18:Fe=0,He=b.inlineLevel,_t.label=19;case 19:return Fe<He.length?(kt=He[Fe],[4,this.renderNode(kt)]):[3,22];case 20:_t.sent(),_t.label=21;case 21:return Fe++,[3,19];case 22:wt=0,At=b.zeroOrAutoZIndexOrTransformedOrOpacity,_t.label=23;case 23:return wt<At.length?(kt=At[wt],[4,this.renderStack(kt)]):[3,26];case 24:_t.sent(),_t.label=25;case 25:return wt++,[3,23];case 26:pt=0,er=b.positiveZIndex,_t.label=27;case 27:return pt<er.length?(kt=er[pt],[4,this.renderStack(kt)]):[3,30];case 28:_t.sent(),_t.label=29;case 29:return pt++,[3,27];case 30:return[2]}})})},m.prototype.mask=function(b){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(b.slice(0).reverse()),this.ctx.closePath()},m.prototype.path=function(b){this.ctx.beginPath(),this.formatPath(b),this.ctx.closePath()},m.prototype.formatPath=function(b){var y=this;b.forEach(function(L,G){var re=ka(L)?L.start:L;G===0?y.ctx.moveTo(re.x,re.y):y.ctx.lineTo(re.x,re.y),ka(L)&&y.ctx.bezierCurveTo(L.startControl.x,L.startControl.y,L.endControl.x,L.endControl.y,L.end.x,L.end.y)})},m.prototype.renderRepeat=function(b,y,L,G){this.path(b),this.ctx.fillStyle=y,this.ctx.translate(L,G),this.ctx.fill(),this.ctx.translate(-L,-G)},m.prototype.resizeImage=function(b,y,L){var G;if(b.width===y&&b.height===L)return b;var re=(G=this.canvas.ownerDocument)!==null&&G!==void 0?G:document,ue=re.createElement("canvas");ue.width=Math.max(1,y),ue.height=Math.max(1,L);var ce=ue.getContext("2d");return ce.drawImage(b,0,0,b.width,b.height,0,0,y,L),ue},m.prototype.renderBackgroundImage=function(b){return o(this,void 0,void 0,function(){var y,L,G,re,ue,ce;return l(this,function(we){switch(we.label){case 0:y=b.styles.backgroundImage.length-1,L=function(Ce){var Fe,He,wt,Fn,Ws,Js,Fr,ts,cr,At,Fn,Ws,Js,Fr,ts,pt,er,kt,_t,gr,rr,Gt,yt,lr,cr,zt,Fn,zs,pa,Fr,ts,Xi,Ws,Js,zA,_o,Yi,WA,JA,li,XA,ci;return l(this,function(mc){switch(mc.label){case 0:if(Ce.type!==0)return[3,5];Fe=void 0,He=Ce.url,mc.label=1;case 1:return mc.trys.push([1,3,,4]),[4,G.context.cache.match(He)];case 2:return Fe=mc.sent(),[3,4];case 3:return mc.sent(),G.context.logger.error("Error loading background-image "+He),[3,4];case 4:return Fe&&(wt=_p(b,y,[Fe.width,Fe.height,Fe.width/Fe.height]),Fn=wt[0],Ws=wt[1],Js=wt[2],Fr=wt[3],ts=wt[4],cr=G.ctx.createPattern(G.resizeImage(Fe,Fr,ts),"repeat"),G.renderRepeat(Fn,cr,Ws,Js)),[3,6];case 5:cf(Ce)?(At=_p(b,y,[null,null,null]),Fn=At[0],Ws=At[1],Js=At[2],Fr=At[3],ts=At[4],pt=en(Ce.angle,Fr,ts),er=pt[0],kt=pt[1],_t=pt[2],gr=pt[3],rr=pt[4],Gt=document.createElement("canvas"),Gt.width=Fr,Gt.height=ts,yt=Gt.getContext("2d"),lr=yt.createLinearGradient(kt,gr,_t,rr),fr(Ce.stops,er).forEach(function(zu){return lr.addColorStop(zu.stop,Vr(zu.color))}),yt.fillStyle=lr,yt.fillRect(0,0,Fr,ts),Fr>0&&ts>0&&(cr=G.ctx.createPattern(Gt,"repeat"),G.renderRepeat(Fn,cr,Ws,Js))):uf(Ce)&&(zt=_p(b,y,[null,null,null]),Fn=zt[0],zs=zt[1],pa=zt[2],Fr=zt[3],ts=zt[4],Xi=Ce.position.length===0?[ri]:Ce.position,Ws=tr(Xi[0],Fr),Js=tr(Xi[Xi.length-1],ts),zA=PA(Ce,Ws,Js,Fr,ts),_o=zA[0],Yi=zA[1],_o>0&&Yi>0&&(WA=G.ctx.createRadialGradient(zs+Ws,pa+Js,0,zs+Ws,pa+Js,_o),fr(Ce.stops,_o*2).forEach(function(zu){return WA.addColorStop(zu.stop,Vr(zu.color))}),G.path(Fn),G.ctx.fillStyle=WA,_o!==Yi?(JA=b.bounds.left+.5*b.bounds.width,li=b.bounds.top+.5*b.bounds.height,XA=Yi/_o,ci=1/XA,G.ctx.save(),G.ctx.translate(JA,li),G.ctx.transform(1,0,0,XA,0,0),G.ctx.translate(-JA,-li),G.ctx.fillRect(zs,ci*(pa-li)+li,Fr,ts*ci),G.ctx.restore()):G.ctx.fill())),mc.label=6;case 6:return y--,[2]}})},G=this,re=0,ue=b.styles.backgroundImage.slice(0).reverse(),we.label=1;case 1:return re<ue.length?(ce=ue[re],[5,L(ce)]):[3,4];case 2:we.sent(),we.label=3;case 3:return re++,[3,1];case 4:return[2]}})})},m.prototype.renderSolidBorder=function(b,y,L){return o(this,void 0,void 0,function(){return l(this,function(G){return this.path(kx(L,y)),this.ctx.fillStyle=Vr(b),this.ctx.fill(),[2]})})},m.prototype.renderDoubleBorder=function(b,y,L,G){return o(this,void 0,void 0,function(){var re,ue;return l(this,function(ce){switch(ce.label){case 0:return y<3?[4,this.renderSolidBorder(b,L,G)]:[3,2];case 1:return ce.sent(),[2];case 2:return re=g5(G,L),this.path(re),this.ctx.fillStyle=Vr(b),this.ctx.fill(),ue=v5(G,L),this.path(ue),this.ctx.fill(),[2]}})})},m.prototype.renderNodeBackgroundAndBorders=function(b){return o(this,void 0,void 0,function(){var y,L,G,re,ue,ce,we,Ce,Fe=this;return l(this,function(He){switch(He.label){case 0:return this.applyEffects(b.getEffects(2)),y=b.container.styles,L=!On(y.backgroundColor)||y.backgroundImage.length,G=[{style:y.borderTopStyle,color:y.borderTopColor,width:y.borderTopWidth},{style:y.borderRightStyle,color:y.borderRightColor,width:y.borderRightWidth},{style:y.borderBottomStyle,color:y.borderBottomColor,width:y.borderBottomWidth},{style:y.borderLeftStyle,color:y.borderLeftColor,width:y.borderLeftWidth}],re=_5(hc(y.backgroundClip,0),b.curves),L||y.boxShadow.length?(this.ctx.save(),this.path(re),this.ctx.clip(),On(y.backgroundColor)||(this.ctx.fillStyle=Vr(y.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(b.container)]):[3,2];case 1:He.sent(),this.ctx.restore(),y.boxShadow.slice(0).reverse().forEach(function(wt){Fe.ctx.save();var At=Hf(b.curves),pt=wt.inset?0:N5,er=m5(At,-pt+(wt.inset?1:-1)*wt.spread.number,(wt.inset?1:-1)*wt.spread.number,wt.spread.number*(wt.inset?-2:2),wt.spread.number*(wt.inset?-2:2));wt.inset?(Fe.path(At),Fe.ctx.clip(),Fe.mask(er)):(Fe.mask(At),Fe.ctx.clip(),Fe.path(er)),Fe.ctx.shadowOffsetX=wt.offsetX.number+pt,Fe.ctx.shadowOffsetY=wt.offsetY.number,Fe.ctx.shadowColor=Vr(wt.color),Fe.ctx.shadowBlur=wt.blur.number,Fe.ctx.fillStyle=wt.inset?Vr(wt.color):"rgba(0,0,0,1)",Fe.ctx.fill(),Fe.ctx.restore()}),He.label=2;case 2:ue=0,ce=0,we=G,He.label=3;case 3:return ce<we.length?(Ce=we[ce],Ce.style!==0&&!On(Ce.color)&&Ce.width>0?Ce.style!==2?[3,5]:[4,this.renderDashedDottedBorder(Ce.color,Ce.width,ue,b.curves,2)]:[3,11]):[3,13];case 4:return He.sent(),[3,11];case 5:return Ce.style!==3?[3,7]:[4,this.renderDashedDottedBorder(Ce.color,Ce.width,ue,b.curves,3)];case 6:return He.sent(),[3,11];case 7:return Ce.style!==4?[3,9]:[4,this.renderDoubleBorder(Ce.color,Ce.width,ue,b.curves)];case 8:return He.sent(),[3,11];case 9:return[4,this.renderSolidBorder(Ce.color,ue,b.curves)];case 10:He.sent(),He.label=11;case 11:ue++,He.label=12;case 12:return ce++,[3,3];case 13:return[2]}})})},m.prototype.renderDashedDottedBorder=function(b,y,L,G,re){return o(this,void 0,void 0,function(){var ue,ce,we,Ce,Fe,He,wt,At,pt,er,kt,_t,gr,rr,Gt,yt,Gt,yt;return l(this,function(lr){return this.ctx.save(),ue=x5(G,L),ce=kx(G,L),re===2&&(this.path(ce),this.ctx.clip()),ka(ce[0])?(we=ce[0].start.x,Ce=ce[0].start.y):(we=ce[0].x,Ce=ce[0].y),ka(ce[1])?(Fe=ce[1].end.x,He=ce[1].end.y):(Fe=ce[1].x,He=ce[1].y),L===0||L===2?wt=Math.abs(we-Fe):wt=Math.abs(Ce-He),this.ctx.beginPath(),re===3?this.formatPath(ue):this.formatPath(ce.slice(0,2)),At=y<3?y*3:y*2,pt=y<3?y*2:y,re===3&&(At=y,pt=y),er=!0,wt<=At*2?er=!1:wt<=At*2+pt?(kt=wt/(2*At+pt),At*=kt,pt*=kt):(_t=Math.floor((wt+pt)/(At+pt)),gr=(wt-_t*At)/(_t-1),rr=(wt-(_t+1)*At)/_t,pt=rr<=0||Math.abs(pt-gr)<Math.abs(pt-rr)?gr:rr),er&&(re===3?this.ctx.setLineDash([0,At+pt]):this.ctx.setLineDash([At,pt])),re===3?(this.ctx.lineCap="round",this.ctx.lineWidth=y):this.ctx.lineWidth=y*2+1.1,this.ctx.strokeStyle=Vr(b),this.ctx.stroke(),this.ctx.setLineDash([]),re===2&&(ka(ce[0])&&(Gt=ce[3],yt=ce[0],this.ctx.beginPath(),this.formatPath([new xt(Gt.end.x,Gt.end.y),new xt(yt.start.x,yt.start.y)]),this.ctx.stroke()),ka(ce[1])&&(Gt=ce[1],yt=ce[2],this.ctx.beginPath(),this.formatPath([new xt(Gt.end.x,Gt.end.y),new xt(yt.start.x,yt.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},m.prototype.render=function(b){return o(this,void 0,void 0,function(){var y;return l(this,function(L){switch(L.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Vr(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),y=p5(b),[4,this.renderStack(y)];case 1:return L.sent(),this.applyEffects([]),[2,this.canvas]}})})},m}(Ox),E5=function(v){return v instanceof Ax||v instanceof ix?!0:v instanceof vp&&v.type!==kf&&v.type!==Lf},_5=function(v,m){switch(v){case 0:return Hf(m);case 2:return c5(m);case 1:default:return Mf(m)}},F5=function(v){switch(v){case 1:return"center";case 2:return"right";case 0:default:return"left"}},U5=["-apple-system","system-ui"],Q5=function(v){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?v.filter(function(m){return U5.indexOf(m)===-1}):v},I5=function(v){n(m,v);function m(b,y){var L=v.call(this,b,y)||this;return L.canvas=y.canvas?y.canvas:document.createElement("canvas"),L.ctx=L.canvas.getContext("2d"),L.options=y,L.canvas.width=Math.floor(y.width*y.scale),L.canvas.height=Math.floor(y.height*y.scale),L.canvas.style.width=y.width+"px",L.canvas.style.height=y.height+"px",L.ctx.scale(L.options.scale,L.options.scale),L.ctx.translate(-y.x,-y.y),L.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+y.width+"x"+y.height+" at "+y.x+","+y.y+") with scale "+y.scale),L}return m.prototype.render=function(b){return o(this,void 0,void 0,function(){var y,L;return l(this,function(G){switch(G.label){case 0:return y=ic(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,b),[4,L5(y)];case 1:return L=G.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Vr(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(L,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},m}(Ox),L5=function(v){return new Promise(function(m,b){var y=new Image;y.onload=function(){m(y)},y.onerror=b,y.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(v))})},k5=function(){function v(m){var b=m.id,y=m.enabled;this.id=b,this.enabled=y,this.start=Date.now()}return v.prototype.debug=function(){for(var m=[],b=0;b<arguments.length;b++)m[b]=arguments[b];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,c([this.id,this.getTime()+"ms"],m)):this.info.apply(this,m))},v.prototype.getTime=function(){return Date.now()-this.start},v.prototype.info=function(){for(var m=[],b=0;b<arguments.length;b++)m[b]=arguments[b];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,c([this.id,this.getTime()+"ms"],m))},v.prototype.warn=function(){for(var m=[],b=0;b<arguments.length;b++)m[b]=arguments[b];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,c([this.id,this.getTime()+"ms"],m)):this.info.apply(this,m))},v.prototype.error=function(){for(var m=[],b=0;b<arguments.length;b++)m[b]=arguments[b];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,c([this.id,this.getTime()+"ms"],m)):this.info.apply(this,m))},v.instances={},v}(),T5=function(){function v(m,b){var y;this.windowBounds=b,this.instanceName="#"+v.instanceCount++,this.logger=new k5({id:this.instanceName,enabled:m.logging}),this.cache=(y=m.cache)!==null&&y!==void 0?y:new r5(this,m)}return v.instanceCount=1,v}(),P5=function(v,m){return m===void 0&&(m={}),O5(v,m)};typeof window<"u"&&_x.setContext(window);var O5=function(v,m){return o(void 0,void 0,void 0,function(){var b,y,L,G,re,ue,ce,we,Ce,Fe,He,wt,At,pt,er,kt,_t,gr,rr,Gt,lr,yt,lr,cr,zt,Fn,zs,pa,Fr,ts,Xi,Ws,Js,zA,_o,Yi,WA,JA,li,XA;return l(this,function(ci){switch(ci.label){case 0:if(!v||typeof v!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(b=v.ownerDocument,!b)throw new Error("Element is not attached to a Document");if(y=b.defaultView,!y)throw new Error("Document is not attached to a Window");return L={allowTaint:(cr=m.allowTaint)!==null&&cr!==void 0?cr:!1,imageTimeout:(zt=m.imageTimeout)!==null&&zt!==void 0?zt:15e3,proxy:m.proxy,useCORS:(Fn=m.useCORS)!==null&&Fn!==void 0?Fn:!1},G=a({logging:(zs=m.logging)!==null&&zs!==void 0?zs:!0,cache:m.cache},L),re={windowWidth:(pa=m.windowWidth)!==null&&pa!==void 0?pa:y.innerWidth,windowHeight:(Fr=m.windowHeight)!==null&&Fr!==void 0?Fr:y.innerHeight,scrollX:(ts=m.scrollX)!==null&&ts!==void 0?ts:y.pageXOffset,scrollY:(Xi=m.scrollY)!==null&&Xi!==void 0?Xi:y.pageYOffset},ue=new A(re.scrollX,re.scrollY,re.windowWidth,re.windowHeight),ce=new T5(G,ue),we=(Ws=m.foreignObjectRendering)!==null&&Ws!==void 0?Ws:!1,Ce={allowTaint:(Js=m.allowTaint)!==null&&Js!==void 0?Js:!1,onclone:m.onclone,ignoreElements:m.ignoreElements,inlineImages:we,copyStyles:we},ce.logger.debug("Starting document clone with size "+ue.width+"x"+ue.height+" scrolled to "+-ue.left+","+-ue.top),Fe=new Sx(ce,v,Ce),He=Fe.clonedReferenceElement,He?[4,Fe.toIFrame(b,ue)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return wt=ci.sent(),At=yp(He)||DB(He)?i(He.ownerDocument):u(ce,He),pt=At.width,er=At.height,kt=At.left,_t=At.top,gr=D5(ce,He,m.backgroundColor),rr={canvas:m.canvas,backgroundColor:gr,scale:(_o=(zA=m.scale)!==null&&zA!==void 0?zA:y.devicePixelRatio)!==null&&_o!==void 0?_o:1,x:((Yi=m.x)!==null&&Yi!==void 0?Yi:0)+kt,y:((WA=m.y)!==null&&WA!==void 0?WA:0)+_t,width:(JA=m.width)!==null&&JA!==void 0?JA:Math.ceil(pt),height:(li=m.height)!==null&&li!==void 0?li:Math.ceil(er)},we?(ce.logger.debug("Document cloned, using foreign object rendering"),lr=new I5(ce,rr),[4,lr.render(He)]):[3,3];case 2:return Gt=ci.sent(),[3,5];case 3:return ce.logger.debug("Document cloned, element located at "+kt+","+_t+" with size "+pt+"x"+er+" using computed rendering"),ce.logger.debug("Starting DOM parsing"),yt=ux(ce,He),gr===yt.styles.backgroundColor&&(yt.styles.backgroundColor=Vn.TRANSPARENT),ce.logger.debug("Starting renderer for element at "+rr.x+","+rr.y+" with size "+rr.width+"x"+rr.height),lr=new S5(ce,rr),[4,lr.render(yt)];case 4:Gt=ci.sent(),ci.label=5;case 5:return(!((XA=m.removeContainer)!==null&&XA!==void 0)||XA)&&(Sx.destroy(wt)||ce.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),ce.logger.debug("Finished rendering"),[2,Gt]}})})},D5=function(v,m,b){var y=m.ownerDocument,L=y.documentElement?ua(v,getComputedStyle(y.documentElement).backgroundColor):Vn.TRANSPARENT,G=y.body?ua(v,getComputedStyle(y.body).backgroundColor):Vn.TRANSPARENT,re=typeof b=="string"?ua(v,b):b===null?Vn.TRANSPARENT:4294967295;return m===y.documentElement?On(L)?On(G)?re:G:L:re};return P5})}(Q0)),Q0.exports}/*!
 * html2pdf.js v0.12.1
 * Copyright (c) 2025 Erik Koopmans
 * Released under the MIT License.
 */(function(t,e){(function(n,a){t.exports=a(t6,r6())})(self,function(r,n){return function(){var a={"./node_modules/core-js/internals/a-callable.js":function(A,u,i){var d=i("./node_modules/core-js/internals/is-callable.js"),h=i("./node_modules/core-js/internals/try-to-string.js"),f=TypeError;A.exports=function(w){if(d(w))return w;throw new f(h(w)+" is not a function")}},"./node_modules/core-js/internals/a-constructor.js":function(A,u,i){var d=i("./node_modules/core-js/internals/is-constructor.js"),h=i("./node_modules/core-js/internals/try-to-string.js"),f=TypeError;A.exports=function(w){if(d(w))return w;throw new f(h(w)+" is not a constructor")}},"./node_modules/core-js/internals/a-possible-prototype.js":function(A,u,i){var d=i("./node_modules/core-js/internals/is-possible-prototype.js"),h=String,f=TypeError;A.exports=function(w){if(d(w))return w;throw new f("Can't set "+h(w)+" as a prototype")}},"./node_modules/core-js/internals/a-set.js":function(A,u,i){var d=i("./node_modules/core-js/internals/set-helpers.js").has;A.exports=function(h){return d(h),h}},"./node_modules/core-js/internals/add-to-unscopables.js":function(A,u,i){var d=i("./node_modules/core-js/internals/well-known-symbol.js"),h=i("./node_modules/core-js/internals/object-create.js"),f=i("./node_modules/core-js/internals/object-define-property.js").f,w=d("unscopables"),j=Array.prototype;j[w]===void 0&&f(j,w,{configurable:!0,value:h(null)}),A.exports=function(B){j[w][B]=!0}},"./node_modules/core-js/internals/an-instance.js":function(A,u,i){var d=i("./node_modules/core-js/internals/object-is-prototype-of.js"),h=TypeError;A.exports=function(f,w){if(d(w,f))return f;throw new h("Incorrect invocation")}},"./node_modules/core-js/internals/an-object.js":function(A,u,i){var d=i("./node_modules/core-js/internals/is-object.js"),h=String,f=TypeError;A.exports=function(w){if(d(w))return w;throw new f(h(w)+" is not an object")}},"./node_modules/core-js/internals/array-buffer-non-extensible.js":function(A,u,i){var d=i("./node_modules/core-js/internals/fails.js");A.exports=d(function(){if(typeof ArrayBuffer=="function"){var h=new ArrayBuffer(8);Object.isExtensible(h)&&Object.defineProperty(h,"a",{value:8})}})},"./node_modules/core-js/internals/array-for-each.js":function(A,u,i){var d=i("./node_modules/core-js/internals/array-iteration.js").forEach,h=i("./node_modules/core-js/internals/array-method-is-strict.js"),f=h("forEach");A.exports=f?[].forEach:function(j){return d(this,j,arguments.length>1?arguments[1]:void 0)}},"./node_modules/core-js/internals/array-from.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-bind-context.js"),h=i("./node_modules/core-js/internals/function-call.js"),f=i("./node_modules/core-js/internals/to-object.js"),w=i("./node_modules/core-js/internals/call-with-safe-iteration-closing.js"),j=i("./node_modules/core-js/internals/is-array-iterator-method.js"),B=i("./node_modules/core-js/internals/is-constructor.js"),p=i("./node_modules/core-js/internals/length-of-array-like.js"),x=i("./node_modules/core-js/internals/create-property.js"),C=i("./node_modules/core-js/internals/get-iterator.js"),S=i("./node_modules/core-js/internals/get-iterator-method.js"),E=Array;A.exports=function(H){var M=f(H),D=B(this),K=arguments.length,U=K>1?arguments[1]:void 0,F=U!==void 0;F&&(U=d(U,K>2?arguments[2]:void 0));var k=S(M),T=0,P,$,ee,V,W,te;if(k&&!(this===E&&j(k)))for($=D?new this:[],V=C(M,k),W=V.next;!(ee=h(W,V)).done;T++)te=F?w(V,U,[ee.value,T],!0):ee.value,x($,T,te);else for(P=p(M),$=D?new this(P):E(P);P>T;T++)te=F?U(M[T],T):M[T],x($,T,te);return $.length=T,$}},"./node_modules/core-js/internals/array-includes.js":function(A,u,i){var d=i("./node_modules/core-js/internals/to-indexed-object.js"),h=i("./node_modules/core-js/internals/to-absolute-index.js"),f=i("./node_modules/core-js/internals/length-of-array-like.js"),w=function(j){return function(B,p,x){var C=d(B),S=f(C);if(S===0)return!j&&-1;var E=h(x,S),I;if(j&&p!==p){for(;S>E;)if(I=C[E++],I!==I)return!0}else for(;S>E;E++)if((j||E in C)&&C[E]===p)return j||E||0;return!j&&-1}};A.exports={includes:w(!0),indexOf:w(!1)}},"./node_modules/core-js/internals/array-iteration.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-bind-context.js"),h=i("./node_modules/core-js/internals/function-uncurry-this.js"),f=i("./node_modules/core-js/internals/indexed-object.js"),w=i("./node_modules/core-js/internals/to-object.js"),j=i("./node_modules/core-js/internals/length-of-array-like.js"),B=i("./node_modules/core-js/internals/array-species-create.js"),p=h([].push),x=function(C){var S=C===1,E=C===2,I=C===3,H=C===4,M=C===6,D=C===7,K=C===5||M;return function(U,F,k,T){for(var P=w(U),$=f(P),ee=j($),V=d(F,k),W=0,te=T||B,oe=S?te(U,ee):E||D?te(U,0):void 0,O,z;ee>W;W++)if((K||W in $)&&(O=$[W],z=V(O,W,P),C))if(S)oe[W]=z;else if(z)switch(C){case 3:return!0;case 5:return O;case 6:return W;case 2:p(oe,O)}else switch(C){case 4:return!1;case 7:p(oe,O)}return M?-1:I||H?H:oe}};A.exports={forEach:x(0),map:x(1),filter:x(2),some:x(3),every:x(4),find:x(5),findIndex:x(6),filterReject:x(7)}},"./node_modules/core-js/internals/array-method-has-species-support.js":function(A,u,i){var d=i("./node_modules/core-js/internals/fails.js"),h=i("./node_modules/core-js/internals/well-known-symbol.js"),f=i("./node_modules/core-js/internals/environment-v8-version.js"),w=h("species");A.exports=function(j){return f>=51||!d(function(){var B=[],p=B.constructor={};return p[w]=function(){return{foo:1}},B[j](Boolean).foo!==1})}},"./node_modules/core-js/internals/array-method-is-strict.js":function(A,u,i){var d=i("./node_modules/core-js/internals/fails.js");A.exports=function(h,f){var w=[][h];return!!w&&d(function(){w.call(null,f||function(){return 1},1)})}},"./node_modules/core-js/internals/array-slice.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-uncurry-this.js");A.exports=d([].slice)},"./node_modules/core-js/internals/array-species-constructor.js":function(A,u,i){var d=i("./node_modules/core-js/internals/is-array.js"),h=i("./node_modules/core-js/internals/is-constructor.js"),f=i("./node_modules/core-js/internals/is-object.js"),w=i("./node_modules/core-js/internals/well-known-symbol.js"),j=w("species"),B=Array;A.exports=function(p){var x;return d(p)&&(x=p.constructor,h(x)&&(x===B||d(x.prototype))?x=void 0:f(x)&&(x=x[j],x===null&&(x=void 0))),x===void 0?B:x}},"./node_modules/core-js/internals/array-species-create.js":function(A,u,i){var d=i("./node_modules/core-js/internals/array-species-constructor.js");A.exports=function(h,f){return new(d(h))(f===0?0:f)}},"./node_modules/core-js/internals/call-with-safe-iteration-closing.js":function(A,u,i){var d=i("./node_modules/core-js/internals/an-object.js"),h=i("./node_modules/core-js/internals/iterator-close.js");A.exports=function(f,w,j,B){try{return B?w(d(j)[0],j[1]):w(j)}catch(p){h(f,"throw",p)}}},"./node_modules/core-js/internals/check-correctness-of-iteration.js":function(A,u,i){var d=i("./node_modules/core-js/internals/well-known-symbol.js"),h=d("iterator"),f=!1;try{var w=0,j={next:function(){return{done:!!w++}},return:function(){f=!0}};j[h]=function(){return this},Array.from(j,function(){throw 2})}catch{}A.exports=function(B,p){try{if(!p&&!f)return!1}catch{return!1}var x=!1;try{var C={};C[h]=function(){return{next:function(){return{done:x=!0}}}},B(C)}catch{}return x}},"./node_modules/core-js/internals/classof-raw.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-uncurry-this.js"),h=d({}.toString),f=d("".slice);A.exports=function(w){return f(h(w),8,-1)}},"./node_modules/core-js/internals/classof.js":function(A,u,i){var d=i("./node_modules/core-js/internals/to-string-tag-support.js"),h=i("./node_modules/core-js/internals/is-callable.js"),f=i("./node_modules/core-js/internals/classof-raw.js"),w=i("./node_modules/core-js/internals/well-known-symbol.js"),j=w("toStringTag"),B=Object,p=f(function(){return arguments}())==="Arguments",x=function(C,S){try{return C[S]}catch{}};A.exports=d?f:function(C){var S,E,I;return C===void 0?"Undefined":C===null?"Null":typeof(E=x(S=B(C),j))=="string"?E:p?f(S):(I=f(S))==="Object"&&h(S.callee)?"Arguments":I}},"./node_modules/core-js/internals/collection-strong.js":function(A,u,i){var d=i("./node_modules/core-js/internals/object-create.js"),h=i("./node_modules/core-js/internals/define-built-in-accessor.js"),f=i("./node_modules/core-js/internals/define-built-ins.js"),w=i("./node_modules/core-js/internals/function-bind-context.js"),j=i("./node_modules/core-js/internals/an-instance.js"),B=i("./node_modules/core-js/internals/is-null-or-undefined.js"),p=i("./node_modules/core-js/internals/iterate.js"),x=i("./node_modules/core-js/internals/iterator-define.js"),C=i("./node_modules/core-js/internals/create-iter-result-object.js"),S=i("./node_modules/core-js/internals/set-species.js"),E=i("./node_modules/core-js/internals/descriptors.js"),I=i("./node_modules/core-js/internals/internal-metadata.js").fastKey,H=i("./node_modules/core-js/internals/internal-state.js"),M=H.set,D=H.getterFor;A.exports={getConstructor:function(K,U,F,k){var T=K(function(W,te){j(W,P),M(W,{type:U,index:d(null),first:null,last:null,size:0}),E||(W.size=0),B(te)||p(te,W[k],{that:W,AS_ENTRIES:F})}),P=T.prototype,$=D(U),ee=function(W,te,oe){var O=$(W),z=V(W,te),ne,Z;return z?z.value=oe:(O.last=z={index:Z=I(te,!0),key:te,value:oe,previous:ne=O.last,next:null,removed:!1},O.first||(O.first=z),ne&&(ne.next=z),E?O.size++:W.size++,Z!=="F"&&(O.index[Z]=z)),W},V=function(W,te){var oe=$(W),O=I(te),z;if(O!=="F")return oe.index[O];for(z=oe.first;z;z=z.next)if(z.key===te)return z};return f(P,{clear:function(){for(var te=this,oe=$(te),O=oe.first;O;)O.removed=!0,O.previous&&(O.previous=O.previous.next=null),O=O.next;oe.first=oe.last=null,oe.index=d(null),E?oe.size=0:te.size=0},delete:function(W){var te=this,oe=$(te),O=V(te,W);if(O){var z=O.next,ne=O.previous;delete oe.index[O.index],O.removed=!0,ne&&(ne.next=z),z&&(z.previous=ne),oe.first===O&&(oe.first=z),oe.last===O&&(oe.last=ne),E?oe.size--:te.size--}return!!O},forEach:function(te){for(var oe=$(this),O=w(te,arguments.length>1?arguments[1]:void 0),z;z=z?z.next:oe.first;)for(O(z.value,z.key,this);z&&z.removed;)z=z.previous},has:function(te){return!!V(this,te)}}),f(P,F?{get:function(te){var oe=V(this,te);return oe&&oe.value},set:function(te,oe){return ee(this,te===0?0:te,oe)}}:{add:function(te){return ee(this,te=te===0?0:te,te)}}),E&&h(P,"size",{configurable:!0,get:function(){return $(this).size}}),T},setStrong:function(K,U,F){var k=U+" Iterator",T=D(U),P=D(k);x(K,U,function($,ee){M(this,{type:k,target:$,state:T($),kind:ee,last:null})},function(){for(var $=P(this),ee=$.kind,V=$.last;V&&V.removed;)V=V.previous;return!$.target||!($.last=V=V?V.next:$.state.first)?($.target=null,C(void 0,!0)):C(ee==="keys"?V.key:ee==="values"?V.value:[V.key,V.value],!1)},F?"entries":"values",!F,!0),S(U)}}},"./node_modules/core-js/internals/collection.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/global-this.js"),f=i("./node_modules/core-js/internals/function-uncurry-this.js"),w=i("./node_modules/core-js/internals/is-forced.js"),j=i("./node_modules/core-js/internals/define-built-in.js"),B=i("./node_modules/core-js/internals/internal-metadata.js"),p=i("./node_modules/core-js/internals/iterate.js"),x=i("./node_modules/core-js/internals/an-instance.js"),C=i("./node_modules/core-js/internals/is-callable.js"),S=i("./node_modules/core-js/internals/is-null-or-undefined.js"),E=i("./node_modules/core-js/internals/is-object.js"),I=i("./node_modules/core-js/internals/fails.js"),H=i("./node_modules/core-js/internals/check-correctness-of-iteration.js"),M=i("./node_modules/core-js/internals/set-to-string-tag.js"),D=i("./node_modules/core-js/internals/inherit-if-required.js");A.exports=function(K,U,F){var k=K.indexOf("Map")!==-1,T=K.indexOf("Weak")!==-1,P=k?"set":"add",$=h[K],ee=$&&$.prototype,V=$,W={},te=function(Ae){var ve=f(ee[Ae]);j(ee,Ae,Ae==="add"?function(Ne){return ve(this,Ne===0?0:Ne),this}:Ae==="delete"?function(be){return T&&!E(be)?!1:ve(this,be===0?0:be)}:Ae==="get"?function(Ne){return T&&!E(Ne)?void 0:ve(this,Ne===0?0:Ne)}:Ae==="has"?function(Ne){return T&&!E(Ne)?!1:ve(this,Ne===0?0:Ne)}:function(Ne,Te){return ve(this,Ne===0?0:Ne,Te),this})},oe=w(K,!C($)||!(T||ee.forEach&&!I(function(){new $().entries().next()})));if(oe)V=F.getConstructor(U,K,k,P),B.enable();else if(w(K,!0)){var O=new V,z=O[P](T?{}:-0,1)!==O,ne=I(function(){O.has(1)}),Z=H(function(Ae){new $(Ae)}),q=!T&&I(function(){for(var Ae=new $,ve=5;ve--;)Ae[P](ve,ve);return!Ae.has(-0)});Z||(V=U(function(Ae,ve){x(Ae,ee);var be=D(new $,Ae,V);return S(ve)||p(ve,be[P],{that:be,AS_ENTRIES:k}),be}),V.prototype=ee,ee.constructor=V),(ne||q)&&(te("delete"),te("has"),k&&te("get")),(q||z)&&te(P),T&&ee.clear&&delete ee.clear}return W[K]=V,d({global:!0,constructor:!0,forced:V!==$},W),M(V,K),T||F.setStrong(V,K,k),V}},"./node_modules/core-js/internals/copy-constructor-properties.js":function(A,u,i){var d=i("./node_modules/core-js/internals/has-own-property.js"),h=i("./node_modules/core-js/internals/own-keys.js"),f=i("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),w=i("./node_modules/core-js/internals/object-define-property.js");A.exports=function(j,B,p){for(var x=h(B),C=w.f,S=f.f,E=0;E<x.length;E++){var I=x[E];!d(j,I)&&!(p&&d(p,I))&&C(j,I,S(B,I))}}},"./node_modules/core-js/internals/correct-prototype-getter.js":function(A,u,i){var d=i("./node_modules/core-js/internals/fails.js");A.exports=!d(function(){function h(){}return h.prototype.constructor=null,Object.getPrototypeOf(new h)!==h.prototype})},"./node_modules/core-js/internals/create-html.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-uncurry-this.js"),h=i("./node_modules/core-js/internals/require-object-coercible.js"),f=i("./node_modules/core-js/internals/to-string.js"),w=/"/g,j=d("".replace);A.exports=function(B,p,x,C){var S=f(h(B)),E="<"+p;return x!==""&&(E+=" "+x+'="'+j(f(C),w,"&quot;")+'"'),E+">"+S+"</"+p+">"}},"./node_modules/core-js/internals/create-iter-result-object.js":function(A){A.exports=function(u,i){return{value:u,done:i}}},"./node_modules/core-js/internals/create-non-enumerable-property.js":function(A,u,i){var d=i("./node_modules/core-js/internals/descriptors.js"),h=i("./node_modules/core-js/internals/object-define-property.js"),f=i("./node_modules/core-js/internals/create-property-descriptor.js");A.exports=d?function(w,j,B){return h.f(w,j,f(1,B))}:function(w,j,B){return w[j]=B,w}},"./node_modules/core-js/internals/create-property-descriptor.js":function(A){A.exports=function(u,i){return{enumerable:!(u&1),configurable:!(u&2),writable:!(u&4),value:i}}},"./node_modules/core-js/internals/create-property.js":function(A,u,i){var d=i("./node_modules/core-js/internals/descriptors.js"),h=i("./node_modules/core-js/internals/object-define-property.js"),f=i("./node_modules/core-js/internals/create-property-descriptor.js");A.exports=function(w,j,B){d?h.f(w,j,f(0,B)):w[j]=B}},"./node_modules/core-js/internals/define-built-in-accessor.js":function(A,u,i){var d=i("./node_modules/core-js/internals/make-built-in.js"),h=i("./node_modules/core-js/internals/object-define-property.js");A.exports=function(f,w,j){return j.get&&d(j.get,w,{getter:!0}),j.set&&d(j.set,w,{setter:!0}),h.f(f,w,j)}},"./node_modules/core-js/internals/define-built-in.js":function(A,u,i){var d=i("./node_modules/core-js/internals/is-callable.js"),h=i("./node_modules/core-js/internals/object-define-property.js"),f=i("./node_modules/core-js/internals/make-built-in.js"),w=i("./node_modules/core-js/internals/define-global-property.js");A.exports=function(j,B,p,x){x||(x={});var C=x.enumerable,S=x.name!==void 0?x.name:B;if(d(p)&&f(p,S,x),x.global)C?j[B]=p:w(B,p);else{try{x.unsafe?j[B]&&(C=!0):delete j[B]}catch{}C?j[B]=p:h.f(j,B,{value:p,enumerable:!1,configurable:!x.nonConfigurable,writable:!x.nonWritable})}return j}},"./node_modules/core-js/internals/define-built-ins.js":function(A,u,i){var d=i("./node_modules/core-js/internals/define-built-in.js");A.exports=function(h,f,w){for(var j in f)d(h,j,f[j],w);return h}},"./node_modules/core-js/internals/define-global-property.js":function(A,u,i){var d=i("./node_modules/core-js/internals/global-this.js"),h=Object.defineProperty;A.exports=function(f,w){try{h(d,f,{value:w,configurable:!0,writable:!0})}catch{d[f]=w}return w}},"./node_modules/core-js/internals/descriptors.js":function(A,u,i){var d=i("./node_modules/core-js/internals/fails.js");A.exports=!d(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},"./node_modules/core-js/internals/document-create-element.js":function(A,u,i){var d=i("./node_modules/core-js/internals/global-this.js"),h=i("./node_modules/core-js/internals/is-object.js"),f=d.document,w=h(f)&&h(f.createElement);A.exports=function(j){return w?f.createElement(j):{}}},"./node_modules/core-js/internals/does-not-exceed-safe-integer.js":function(A){var u=TypeError,i=9007199254740991;A.exports=function(d){if(d>i)throw u("Maximum allowed index exceeded");return d}},"./node_modules/core-js/internals/dom-iterables.js":function(A){A.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"./node_modules/core-js/internals/dom-token-list-prototype.js":function(A,u,i){var d=i("./node_modules/core-js/internals/document-create-element.js"),h=d("span").classList,f=h&&h.constructor&&h.constructor.prototype;A.exports=f===Object.prototype?void 0:f},"./node_modules/core-js/internals/enum-bug-keys.js":function(A){A.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/environment-is-ios-pebble.js":function(A,u,i){var d=i("./node_modules/core-js/internals/environment-user-agent.js");A.exports=/ipad|iphone|ipod/i.test(d)&&typeof Pebble<"u"},"./node_modules/core-js/internals/environment-is-ios.js":function(A,u,i){var d=i("./node_modules/core-js/internals/environment-user-agent.js");A.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(d)},"./node_modules/core-js/internals/environment-is-node.js":function(A,u,i){var d=i("./node_modules/core-js/internals/environment.js");A.exports=d==="NODE"},"./node_modules/core-js/internals/environment-is-webos-webkit.js":function(A,u,i){var d=i("./node_modules/core-js/internals/environment-user-agent.js");A.exports=/web0s(?!.*chrome)/i.test(d)},"./node_modules/core-js/internals/environment-user-agent.js":function(A,u,i){var d=i("./node_modules/core-js/internals/global-this.js"),h=d.navigator,f=h&&h.userAgent;A.exports=f?String(f):""},"./node_modules/core-js/internals/environment-v8-version.js":function(A,u,i){var d=i("./node_modules/core-js/internals/global-this.js"),h=i("./node_modules/core-js/internals/environment-user-agent.js"),f=d.process,w=d.Deno,j=f&&f.versions||w&&w.version,B=j&&j.v8,p,x;B&&(p=B.split("."),x=p[0]>0&&p[0]<4?1:+(p[0]+p[1])),!x&&h&&(p=h.match(/Edge\/(\d+)/),(!p||p[1]>=74)&&(p=h.match(/Chrome\/(\d+)/),p&&(x=+p[1]))),A.exports=x},"./node_modules/core-js/internals/environment.js":function(A,u,i){var d=i("./node_modules/core-js/internals/global-this.js"),h=i("./node_modules/core-js/internals/environment-user-agent.js"),f=i("./node_modules/core-js/internals/classof-raw.js"),w=function(j){return h.slice(0,j.length)===j};A.exports=function(){return w("Bun/")?"BUN":w("Cloudflare-Workers")?"CLOUDFLARE":w("Deno/")?"DENO":w("Node.js/")?"NODE":d.Bun&&typeof Bun.version=="string"?"BUN":d.Deno&&typeof Deno.version=="object"?"DENO":f(d.process)==="process"?"NODE":d.window&&d.document?"BROWSER":"REST"}()},"./node_modules/core-js/internals/export.js":function(A,u,i){var d=i("./node_modules/core-js/internals/global-this.js"),h=i("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,f=i("./node_modules/core-js/internals/create-non-enumerable-property.js"),w=i("./node_modules/core-js/internals/define-built-in.js"),j=i("./node_modules/core-js/internals/define-global-property.js"),B=i("./node_modules/core-js/internals/copy-constructor-properties.js"),p=i("./node_modules/core-js/internals/is-forced.js");A.exports=function(x,C){var S=x.target,E=x.global,I=x.stat,H,M,D,K,U,F;if(E?M=d:I?M=d[S]||j(S,{}):M=d[S]&&d[S].prototype,M)for(D in C){if(U=C[D],x.dontCallGetSet?(F=h(M,D),K=F&&F.value):K=M[D],H=p(E?D:S+(I?".":"#")+D,x.forced),!H&&K!==void 0){if(typeof U==typeof K)continue;B(U,K)}(x.sham||K&&K.sham)&&f(U,"sham",!0),w(M,D,U,x)}}},"./node_modules/core-js/internals/fails.js":function(A){A.exports=function(u){try{return!!u()}catch{return!0}}},"./node_modules/core-js/internals/freezing.js":function(A,u,i){var d=i("./node_modules/core-js/internals/fails.js");A.exports=!d(function(){return Object.isExtensible(Object.preventExtensions({}))})},"./node_modules/core-js/internals/function-apply.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-bind-native.js"),h=Function.prototype,f=h.apply,w=h.call;A.exports=typeof Reflect=="object"&&Reflect.apply||(d?w.bind(f):function(){return w.apply(f,arguments)})},"./node_modules/core-js/internals/function-bind-context.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-uncurry-this-clause.js"),h=i("./node_modules/core-js/internals/a-callable.js"),f=i("./node_modules/core-js/internals/function-bind-native.js"),w=d(d.bind);A.exports=function(j,B){return h(j),B===void 0?j:f?w(j,B):function(){return j.apply(B,arguments)}}},"./node_modules/core-js/internals/function-bind-native.js":function(A,u,i){var d=i("./node_modules/core-js/internals/fails.js");A.exports=!d(function(){var h=(function(){}).bind();return typeof h!="function"||h.hasOwnProperty("prototype")})},"./node_modules/core-js/internals/function-call.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-bind-native.js"),h=Function.prototype.call;A.exports=d?h.bind(h):function(){return h.apply(h,arguments)}},"./node_modules/core-js/internals/function-name.js":function(A,u,i){var d=i("./node_modules/core-js/internals/descriptors.js"),h=i("./node_modules/core-js/internals/has-own-property.js"),f=Function.prototype,w=d&&Object.getOwnPropertyDescriptor,j=h(f,"name"),B=j&&(function(){}).name==="something",p=j&&(!d||d&&w(f,"name").configurable);A.exports={EXISTS:j,PROPER:B,CONFIGURABLE:p}},"./node_modules/core-js/internals/function-uncurry-this-accessor.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-uncurry-this.js"),h=i("./node_modules/core-js/internals/a-callable.js");A.exports=function(f,w,j){try{return d(h(Object.getOwnPropertyDescriptor(f,w)[j]))}catch{}}},"./node_modules/core-js/internals/function-uncurry-this-clause.js":function(A,u,i){var d=i("./node_modules/core-js/internals/classof-raw.js"),h=i("./node_modules/core-js/internals/function-uncurry-this.js");A.exports=function(f){if(d(f)==="Function")return h(f)}},"./node_modules/core-js/internals/function-uncurry-this.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-bind-native.js"),h=Function.prototype,f=h.call,w=d&&h.bind.bind(f,f);A.exports=d?w:function(j){return function(){return f.apply(j,arguments)}}},"./node_modules/core-js/internals/get-built-in.js":function(A,u,i){var d=i("./node_modules/core-js/internals/global-this.js"),h=i("./node_modules/core-js/internals/is-callable.js"),f=function(w){return h(w)?w:void 0};A.exports=function(w,j){return arguments.length<2?f(d[w]):d[w]&&d[w][j]}},"./node_modules/core-js/internals/get-iterator-direct.js":function(A){A.exports=function(u){return{iterator:u,next:u.next,done:!1}}},"./node_modules/core-js/internals/get-iterator-method.js":function(A,u,i){var d=i("./node_modules/core-js/internals/classof.js"),h=i("./node_modules/core-js/internals/get-method.js"),f=i("./node_modules/core-js/internals/is-null-or-undefined.js"),w=i("./node_modules/core-js/internals/iterators.js"),j=i("./node_modules/core-js/internals/well-known-symbol.js"),B=j("iterator");A.exports=function(p){if(!f(p))return h(p,B)||h(p,"@@iterator")||w[d(p)]}},"./node_modules/core-js/internals/get-iterator.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-call.js"),h=i("./node_modules/core-js/internals/a-callable.js"),f=i("./node_modules/core-js/internals/an-object.js"),w=i("./node_modules/core-js/internals/try-to-string.js"),j=i("./node_modules/core-js/internals/get-iterator-method.js"),B=TypeError;A.exports=function(p,x){var C=arguments.length<2?j(p):x;if(h(C))return f(d(C,p));throw new B(w(p)+" is not iterable")}},"./node_modules/core-js/internals/get-json-replacer-function.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-uncurry-this.js"),h=i("./node_modules/core-js/internals/is-array.js"),f=i("./node_modules/core-js/internals/is-callable.js"),w=i("./node_modules/core-js/internals/classof-raw.js"),j=i("./node_modules/core-js/internals/to-string.js"),B=d([].push);A.exports=function(p){if(f(p))return p;if(h(p)){for(var x=p.length,C=[],S=0;S<x;S++){var E=p[S];typeof E=="string"?B(C,E):(typeof E=="number"||w(E)==="Number"||w(E)==="String")&&B(C,j(E))}var I=C.length,H=!0;return function(M,D){if(H)return H=!1,D;if(h(this))return D;for(var K=0;K<I;K++)if(C[K]===M)return D}}}},"./node_modules/core-js/internals/get-method.js":function(A,u,i){var d=i("./node_modules/core-js/internals/a-callable.js"),h=i("./node_modules/core-js/internals/is-null-or-undefined.js");A.exports=function(f,w){var j=f[w];return h(j)?void 0:d(j)}},"./node_modules/core-js/internals/get-set-record.js":function(A,u,i){var d=i("./node_modules/core-js/internals/a-callable.js"),h=i("./node_modules/core-js/internals/an-object.js"),f=i("./node_modules/core-js/internals/function-call.js"),w=i("./node_modules/core-js/internals/to-integer-or-infinity.js"),j=i("./node_modules/core-js/internals/get-iterator-direct.js"),B="Invalid size",p=RangeError,x=TypeError,C=Math.max,S=function(E,I){this.set=E,this.size=C(I,0),this.has=d(E.has),this.keys=d(E.keys)};S.prototype={getIterator:function(){return j(h(f(this.keys,this.set)))},includes:function(E){return f(this.has,this.set,E)}},A.exports=function(E){h(E);var I=+E.size;if(I!==I)throw new x(B);var H=w(I);if(H<0)throw new p(B);return new S(E,H)}},"./node_modules/core-js/internals/global-this.js":function(A){var u=function(i){return i&&i.Math===Math&&i};A.exports=u(typeof globalThis=="object"&&globalThis)||u(typeof window=="object"&&window)||u(typeof self=="object"&&self)||u(typeof Qs=="object"&&Qs)||u(typeof this=="object"&&this)||function(){return this}()||Function("return this")()},"./node_modules/core-js/internals/has-own-property.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-uncurry-this.js"),h=i("./node_modules/core-js/internals/to-object.js"),f=d({}.hasOwnProperty);A.exports=Object.hasOwn||function(j,B){return f(h(j),B)}},"./node_modules/core-js/internals/hidden-keys.js":function(A){A.exports={}},"./node_modules/core-js/internals/host-report-errors.js":function(A){A.exports=function(u,i){try{arguments.length===1?console.error(u):console.error(u,i)}catch{}}},"./node_modules/core-js/internals/html.js":function(A,u,i){var d=i("./node_modules/core-js/internals/get-built-in.js");A.exports=d("document","documentElement")},"./node_modules/core-js/internals/ie8-dom-define.js":function(A,u,i){var d=i("./node_modules/core-js/internals/descriptors.js"),h=i("./node_modules/core-js/internals/fails.js"),f=i("./node_modules/core-js/internals/document-create-element.js");A.exports=!d&&!h(function(){return Object.defineProperty(f("div"),"a",{get:function(){return 7}}).a!==7})},"./node_modules/core-js/internals/indexed-object.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-uncurry-this.js"),h=i("./node_modules/core-js/internals/fails.js"),f=i("./node_modules/core-js/internals/classof-raw.js"),w=Object,j=d("".split);A.exports=h(function(){return!w("z").propertyIsEnumerable(0)})?function(B){return f(B)==="String"?j(B,""):w(B)}:w},"./node_modules/core-js/internals/inherit-if-required.js":function(A,u,i){var d=i("./node_modules/core-js/internals/is-callable.js"),h=i("./node_modules/core-js/internals/is-object.js"),f=i("./node_modules/core-js/internals/object-set-prototype-of.js");A.exports=function(w,j,B){var p,x;return f&&d(p=j.constructor)&&p!==B&&h(x=p.prototype)&&x!==B.prototype&&f(w,x),w}},"./node_modules/core-js/internals/inspect-source.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-uncurry-this.js"),h=i("./node_modules/core-js/internals/is-callable.js"),f=i("./node_modules/core-js/internals/shared-store.js"),w=d(Function.toString);h(f.inspectSource)||(f.inspectSource=function(j){return w(j)}),A.exports=f.inspectSource},"./node_modules/core-js/internals/internal-metadata.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/function-uncurry-this.js"),f=i("./node_modules/core-js/internals/hidden-keys.js"),w=i("./node_modules/core-js/internals/is-object.js"),j=i("./node_modules/core-js/internals/has-own-property.js"),B=i("./node_modules/core-js/internals/object-define-property.js").f,p=i("./node_modules/core-js/internals/object-get-own-property-names.js"),x=i("./node_modules/core-js/internals/object-get-own-property-names-external.js"),C=i("./node_modules/core-js/internals/object-is-extensible.js"),S=i("./node_modules/core-js/internals/uid.js"),E=i("./node_modules/core-js/internals/freezing.js"),I=!1,H=S("meta"),M=0,D=function(P){B(P,H,{value:{objectID:"O"+M++,weakData:{}}})},K=function(P,$){if(!w(P))return typeof P=="symbol"?P:(typeof P=="string"?"S":"P")+P;if(!j(P,H)){if(!C(P))return"F";if(!$)return"E";D(P)}return P[H].objectID},U=function(P,$){if(!j(P,H)){if(!C(P))return!0;if(!$)return!1;D(P)}return P[H].weakData},F=function(P){return E&&I&&C(P)&&!j(P,H)&&D(P),P},k=function(){T.enable=function(){},I=!0;var P=p.f,$=h([].splice),ee={};ee[H]=1,P(ee).length&&(p.f=function(V){for(var W=P(V),te=0,oe=W.length;te<oe;te++)if(W[te]===H){$(W,te,1);break}return W},d({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:x.f}))},T=A.exports={enable:k,fastKey:K,getWeakData:U,onFreeze:F};f[H]=!0},"./node_modules/core-js/internals/internal-state.js":function(A,u,i){var d=i("./node_modules/core-js/internals/weak-map-basic-detection.js"),h=i("./node_modules/core-js/internals/global-this.js"),f=i("./node_modules/core-js/internals/is-object.js"),w=i("./node_modules/core-js/internals/create-non-enumerable-property.js"),j=i("./node_modules/core-js/internals/has-own-property.js"),B=i("./node_modules/core-js/internals/shared-store.js"),p=i("./node_modules/core-js/internals/shared-key.js"),x=i("./node_modules/core-js/internals/hidden-keys.js"),C="Object already initialized",S=h.TypeError,E=h.WeakMap,I,H,M,D=function(k){return M(k)?H(k):I(k,{})},K=function(k){return function(T){var P;if(!f(T)||(P=H(T)).type!==k)throw new S("Incompatible receiver, "+k+" required");return P}};if(d||B.state){var U=B.state||(B.state=new E);U.get=U.get,U.has=U.has,U.set=U.set,I=function(k,T){if(U.has(k))throw new S(C);return T.facade=k,U.set(k,T),T},H=function(k){return U.get(k)||{}},M=function(k){return U.has(k)}}else{var F=p("state");x[F]=!0,I=function(k,T){if(j(k,F))throw new S(C);return T.facade=k,w(k,F,T),T},H=function(k){return j(k,F)?k[F]:{}},M=function(k){return j(k,F)}}A.exports={set:I,get:H,has:M,enforce:D,getterFor:K}},"./node_modules/core-js/internals/is-array-iterator-method.js":function(A,u,i){var d=i("./node_modules/core-js/internals/well-known-symbol.js"),h=i("./node_modules/core-js/internals/iterators.js"),f=d("iterator"),w=Array.prototype;A.exports=function(j){return j!==void 0&&(h.Array===j||w[f]===j)}},"./node_modules/core-js/internals/is-array.js":function(A,u,i){var d=i("./node_modules/core-js/internals/classof-raw.js");A.exports=Array.isArray||function(f){return d(f)==="Array"}},"./node_modules/core-js/internals/is-callable.js":function(A){var u=typeof document=="object"&&document.all;A.exports=typeof u>"u"&&u!==void 0?function(i){return typeof i=="function"||i===u}:function(i){return typeof i=="function"}},"./node_modules/core-js/internals/is-constructor.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-uncurry-this.js"),h=i("./node_modules/core-js/internals/fails.js"),f=i("./node_modules/core-js/internals/is-callable.js"),w=i("./node_modules/core-js/internals/classof.js"),j=i("./node_modules/core-js/internals/get-built-in.js"),B=i("./node_modules/core-js/internals/inspect-source.js"),p=function(){},x=j("Reflect","construct"),C=/^\s*(?:class|function)\b/,S=d(C.exec),E=!C.test(p),I=function(D){if(!f(D))return!1;try{return x(p,[],D),!0}catch{return!1}},H=function(D){if(!f(D))return!1;switch(w(D)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return E||!!S(C,B(D))}catch{return!0}};H.sham=!0,A.exports=!x||h(function(){var M;return I(I.call)||!I(Object)||!I(function(){M=!0})||M})?H:I},"./node_modules/core-js/internals/is-forced.js":function(A,u,i){var d=i("./node_modules/core-js/internals/fails.js"),h=i("./node_modules/core-js/internals/is-callable.js"),f=/#|\.prototype\./,w=function(C,S){var E=B[j(C)];return E===x?!0:E===p?!1:h(S)?d(S):!!S},j=w.normalize=function(C){return String(C).replace(f,".").toLowerCase()},B=w.data={},p=w.NATIVE="N",x=w.POLYFILL="P";A.exports=w},"./node_modules/core-js/internals/is-iterable.js":function(A,u,i){var d=i("./node_modules/core-js/internals/classof.js"),h=i("./node_modules/core-js/internals/has-own-property.js"),f=i("./node_modules/core-js/internals/is-null-or-undefined.js"),w=i("./node_modules/core-js/internals/well-known-symbol.js"),j=i("./node_modules/core-js/internals/iterators.js"),B=w("iterator"),p=Object;A.exports=function(x){if(f(x))return!1;var C=p(x);return C[B]!==void 0||"@@iterator"in C||h(j,d(C))}},"./node_modules/core-js/internals/is-null-or-undefined.js":function(A){A.exports=function(u){return u==null}},"./node_modules/core-js/internals/is-object.js":function(A,u,i){var d=i("./node_modules/core-js/internals/is-callable.js");A.exports=function(h){return typeof h=="object"?h!==null:d(h)}},"./node_modules/core-js/internals/is-possible-prototype.js":function(A,u,i){var d=i("./node_modules/core-js/internals/is-object.js");A.exports=function(h){return d(h)||h===null}},"./node_modules/core-js/internals/is-pure.js":function(A){A.exports=!1},"./node_modules/core-js/internals/is-symbol.js":function(A,u,i){var d=i("./node_modules/core-js/internals/get-built-in.js"),h=i("./node_modules/core-js/internals/is-callable.js"),f=i("./node_modules/core-js/internals/object-is-prototype-of.js"),w=i("./node_modules/core-js/internals/use-symbol-as-uid.js"),j=Object;A.exports=w?function(B){return typeof B=="symbol"}:function(B){var p=d("Symbol");return h(p)&&f(p.prototype,j(B))}},"./node_modules/core-js/internals/iterate-simple.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-call.js");A.exports=function(h,f,w){for(var j=w?h:h.iterator,B=h.next,p,x;!(p=d(B,j)).done;)if(x=f(p.value),x!==void 0)return x}},"./node_modules/core-js/internals/iterate.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-bind-context.js"),h=i("./node_modules/core-js/internals/function-call.js"),f=i("./node_modules/core-js/internals/an-object.js"),w=i("./node_modules/core-js/internals/try-to-string.js"),j=i("./node_modules/core-js/internals/is-array-iterator-method.js"),B=i("./node_modules/core-js/internals/length-of-array-like.js"),p=i("./node_modules/core-js/internals/object-is-prototype-of.js"),x=i("./node_modules/core-js/internals/get-iterator.js"),C=i("./node_modules/core-js/internals/get-iterator-method.js"),S=i("./node_modules/core-js/internals/iterator-close.js"),E=TypeError,I=function(M,D){this.stopped=M,this.result=D},H=I.prototype;A.exports=function(M,D,K){var U=K&&K.that,F=!!(K&&K.AS_ENTRIES),k=!!(K&&K.IS_RECORD),T=!!(K&&K.IS_ITERATOR),P=!!(K&&K.INTERRUPTED),$=d(D,U),ee,V,W,te,oe,O,z,ne=function(q){return ee&&S(ee,"normal"),new I(!0,q)},Z=function(q){return F?(f(q),P?$(q[0],q[1],ne):$(q[0],q[1])):P?$(q,ne):$(q)};if(k)ee=M.iterator;else if(T)ee=M;else{if(V=C(M),!V)throw new E(w(M)+" is not iterable");if(j(V)){for(W=0,te=B(M);te>W;W++)if(oe=Z(M[W]),oe&&p(H,oe))return oe;return new I(!1)}ee=x(M,V)}for(O=k?M.next:ee.next;!(z=h(O,ee)).done;){try{oe=Z(z.value)}catch(q){S(ee,"throw",q)}if(typeof oe=="object"&&oe&&p(H,oe))return oe}return new I(!1)}},"./node_modules/core-js/internals/iterator-close-all.js":function(A,u,i){var d=i("./node_modules/core-js/internals/iterator-close.js");A.exports=function(h,f,w){for(var j=h.length-1;j>=0;j--)if(h[j]!==void 0)try{w=d(h[j].iterator,f,w)}catch(B){f="throw",w=B}if(f==="throw")throw w;return w}},"./node_modules/core-js/internals/iterator-close.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-call.js"),h=i("./node_modules/core-js/internals/an-object.js"),f=i("./node_modules/core-js/internals/get-method.js");A.exports=function(w,j,B){var p,x;h(w);try{if(p=f(w,"return"),!p){if(j==="throw")throw B;return B}p=d(p,w)}catch(C){x=!0,p=C}if(j==="throw")throw B;if(x)throw p;return h(p),B}},"./node_modules/core-js/internals/iterator-create-constructor.js":function(A,u,i){var d=i("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,h=i("./node_modules/core-js/internals/object-create.js"),f=i("./node_modules/core-js/internals/create-property-descriptor.js"),w=i("./node_modules/core-js/internals/set-to-string-tag.js"),j=i("./node_modules/core-js/internals/iterators.js"),B=function(){return this};A.exports=function(p,x,C,S){var E=x+" Iterator";return p.prototype=h(d,{next:f(+!S,C)}),w(p,E,!1,!0),j[E]=B,p}},"./node_modules/core-js/internals/iterator-create-proxy.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-call.js"),h=i("./node_modules/core-js/internals/object-create.js"),f=i("./node_modules/core-js/internals/create-non-enumerable-property.js"),w=i("./node_modules/core-js/internals/define-built-ins.js"),j=i("./node_modules/core-js/internals/well-known-symbol.js"),B=i("./node_modules/core-js/internals/internal-state.js"),p=i("./node_modules/core-js/internals/get-method.js"),x=i("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,C=i("./node_modules/core-js/internals/create-iter-result-object.js"),S=i("./node_modules/core-js/internals/iterator-close.js"),E=i("./node_modules/core-js/internals/iterator-close-all.js"),I=j("toStringTag"),H="IteratorHelper",M="WrapForValidIterator",D="normal",K="throw",U=B.set,F=function(P){var $=B.getterFor(P?M:H);return w(h(x),{next:function(){var V=$(this);if(P)return V.nextHandler();if(V.done)return C(void 0,!0);try{var W=V.nextHandler();return V.returnHandlerResult?W:C(W,V.done)}catch(te){throw V.done=!0,te}},return:function(){var ee=$(this),V=ee.iterator;if(ee.done=!0,P){var W=p(V,"return");return W?d(W,V):C(void 0,!0)}if(ee.inner)try{S(ee.inner.iterator,D)}catch(te){return S(V,K,te)}if(ee.openIters)try{E(ee.openIters,D)}catch(te){return S(V,K,te)}return V&&S(V,D),C(void 0,!0)}})},k=F(!0),T=F(!1);f(T,I,"Iterator Helper"),A.exports=function(P,$,ee){var V=function(te,oe){oe?(oe.iterator=te.iterator,oe.next=te.next):oe=te,oe.type=$?M:H,oe.returnHandlerResult=!!ee,oe.nextHandler=P,oe.counter=0,oe.done=!1,U(this,oe)};return V.prototype=$?k:T,V}},"./node_modules/core-js/internals/iterator-define.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/function-call.js"),f=i("./node_modules/core-js/internals/is-pure.js"),w=i("./node_modules/core-js/internals/function-name.js"),j=i("./node_modules/core-js/internals/is-callable.js"),B=i("./node_modules/core-js/internals/iterator-create-constructor.js"),p=i("./node_modules/core-js/internals/object-get-prototype-of.js"),x=i("./node_modules/core-js/internals/object-set-prototype-of.js"),C=i("./node_modules/core-js/internals/set-to-string-tag.js"),S=i("./node_modules/core-js/internals/create-non-enumerable-property.js"),E=i("./node_modules/core-js/internals/define-built-in.js"),I=i("./node_modules/core-js/internals/well-known-symbol.js"),H=i("./node_modules/core-js/internals/iterators.js"),M=i("./node_modules/core-js/internals/iterators-core.js"),D=w.PROPER,K=w.CONFIGURABLE,U=M.IteratorPrototype,F=M.BUGGY_SAFARI_ITERATORS,k=I("iterator"),T="keys",P="values",$="entries",ee=function(){return this};A.exports=function(V,W,te,oe,O,z,ne){B(te,W,oe);var Z=function(de){if(de===O&&Ne)return Ne;if(!F&&de&&de in ve)return ve[de];switch(de){case T:return function(){return new te(this,de)};case P:return function(){return new te(this,de)};case $:return function(){return new te(this,de)}}return function(){return new te(this)}},q=W+" Iterator",Ae=!1,ve=V.prototype,be=ve[k]||ve["@@iterator"]||O&&ve[O],Ne=!F&&be||Z(O),Te=W==="Array"&&ve.entries||be,De,We,_e;if(Te&&(De=p(Te.call(new V)),De!==Object.prototype&&De.next&&(!f&&p(De)!==U&&(x?x(De,U):j(De[k])||E(De,k,ee)),C(De,q,!0,!0),f&&(H[q]=ee))),D&&O===P&&be&&be.name!==P&&(!f&&K?S(ve,"name",P):(Ae=!0,Ne=function(){return h(be,this)})),O)if(We={values:Z(P),keys:z?Ne:Z(T),entries:Z($)},ne)for(_e in We)(F||Ae||!(_e in ve))&&E(ve,_e,We[_e]);else d({target:W,proto:!0,forced:F||Ae},We);return(!f||ne)&&ve[k]!==Ne&&E(ve,k,Ne,{name:O}),H[W]=Ne,We}},"./node_modules/core-js/internals/iterator-helper-throws-on-invalid-iterator.js":function(A){A.exports=function(u,i){var d=typeof Iterator=="function"&&Iterator.prototype[u];if(d)try{d.call({next:null},i).next()}catch{return!0}}},"./node_modules/core-js/internals/iterator-helper-without-closing-on-early-error.js":function(A,u,i){var d=i("./node_modules/core-js/internals/global-this.js");A.exports=function(h,f){var w=d.Iterator,j=w&&w.prototype,B=j&&j[h],p=!1;if(B)try{B.call({next:function(){return{done:!0}},return:function(){p=!0}},-1)}catch(x){x instanceof f||(p=!1)}if(!p)return B}},"./node_modules/core-js/internals/iterators-core.js":function(A,u,i){var d=i("./node_modules/core-js/internals/fails.js"),h=i("./node_modules/core-js/internals/is-callable.js"),f=i("./node_modules/core-js/internals/is-object.js"),w=i("./node_modules/core-js/internals/object-create.js"),j=i("./node_modules/core-js/internals/object-get-prototype-of.js"),B=i("./node_modules/core-js/internals/define-built-in.js"),p=i("./node_modules/core-js/internals/well-known-symbol.js"),x=i("./node_modules/core-js/internals/is-pure.js"),C=p("iterator"),S=!1,E,I,H;[].keys&&(H=[].keys(),"next"in H?(I=j(j(H)),I!==Object.prototype&&(E=I)):S=!0);var M=!f(E)||d(function(){var D={};return E[C].call(D)!==D});M?E={}:x&&(E=w(E)),h(E[C])||B(E,C,function(){return this}),A.exports={IteratorPrototype:E,BUGGY_SAFARI_ITERATORS:S}},"./node_modules/core-js/internals/iterators.js":function(A){A.exports={}},"./node_modules/core-js/internals/length-of-array-like.js":function(A,u,i){var d=i("./node_modules/core-js/internals/to-length.js");A.exports=function(h){return d(h.length)}},"./node_modules/core-js/internals/make-built-in.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-uncurry-this.js"),h=i("./node_modules/core-js/internals/fails.js"),f=i("./node_modules/core-js/internals/is-callable.js"),w=i("./node_modules/core-js/internals/has-own-property.js"),j=i("./node_modules/core-js/internals/descriptors.js"),B=i("./node_modules/core-js/internals/function-name.js").CONFIGURABLE,p=i("./node_modules/core-js/internals/inspect-source.js"),x=i("./node_modules/core-js/internals/internal-state.js"),C=x.enforce,S=x.get,E=String,I=Object.defineProperty,H=d("".slice),M=d("".replace),D=d([].join),K=j&&!h(function(){return I(function(){},"length",{value:8}).length!==8}),U=String(String).split("String"),F=A.exports=function(k,T,P){H(E(T),0,7)==="Symbol("&&(T="["+M(E(T),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),P&&P.getter&&(T="get "+T),P&&P.setter&&(T="set "+T),(!w(k,"name")||B&&k.name!==T)&&(j?I(k,"name",{value:T,configurable:!0}):k.name=T),K&&P&&w(P,"arity")&&k.length!==P.arity&&I(k,"length",{value:P.arity});try{P&&w(P,"constructor")&&P.constructor?j&&I(k,"prototype",{writable:!1}):k.prototype&&(k.prototype=void 0)}catch{}var $=C(k);return w($,"source")||($.source=D(U,typeof T=="string"?T:"")),k};Function.prototype.toString=F(function(){return f(this)&&S(this).source||p(this)},"toString")},"./node_modules/core-js/internals/math-trunc.js":function(A){var u=Math.ceil,i=Math.floor;A.exports=Math.trunc||function(h){var f=+h;return(f>0?i:u)(f)}},"./node_modules/core-js/internals/microtask.js":function(A,u,i){var d=i("./node_modules/core-js/internals/global-this.js"),h=i("./node_modules/core-js/internals/safe-get-built-in.js"),f=i("./node_modules/core-js/internals/function-bind-context.js"),w=i("./node_modules/core-js/internals/task.js").set,j=i("./node_modules/core-js/internals/queue.js"),B=i("./node_modules/core-js/internals/environment-is-ios.js"),p=i("./node_modules/core-js/internals/environment-is-ios-pebble.js"),x=i("./node_modules/core-js/internals/environment-is-webos-webkit.js"),C=i("./node_modules/core-js/internals/environment-is-node.js"),S=d.MutationObserver||d.WebKitMutationObserver,E=d.document,I=d.process,H=d.Promise,M=h("queueMicrotask"),D,K,U,F,k;if(!M){var T=new j,P=function(){var $,ee;for(C&&($=I.domain)&&$.exit();ee=T.get();)try{ee()}catch(V){throw T.head&&D(),V}$&&$.enter()};!B&&!C&&!x&&S&&E?(K=!0,U=E.createTextNode(""),new S(P).observe(U,{characterData:!0}),D=function(){U.data=K=!K}):!p&&H&&H.resolve?(F=H.resolve(void 0),F.constructor=H,k=f(F.then,F),D=function(){k(P)}):C?D=function(){I.nextTick(P)}:(w=f(w,d),D=function(){w(P)}),M=function($){T.head||D(),T.add($)}}A.exports=M},"./node_modules/core-js/internals/new-promise-capability.js":function(A,u,i){var d=i("./node_modules/core-js/internals/a-callable.js"),h=TypeError,f=function(w){var j,B;this.promise=new w(function(p,x){if(j!==void 0||B!==void 0)throw new h("Bad Promise constructor");j=p,B=x}),this.resolve=d(j),this.reject=d(B)};A.exports.f=function(w){return new f(w)}},"./node_modules/core-js/internals/object-assign.js":function(A,u,i){var d=i("./node_modules/core-js/internals/descriptors.js"),h=i("./node_modules/core-js/internals/function-uncurry-this.js"),f=i("./node_modules/core-js/internals/function-call.js"),w=i("./node_modules/core-js/internals/fails.js"),j=i("./node_modules/core-js/internals/object-keys.js"),B=i("./node_modules/core-js/internals/object-get-own-property-symbols.js"),p=i("./node_modules/core-js/internals/object-property-is-enumerable.js"),x=i("./node_modules/core-js/internals/to-object.js"),C=i("./node_modules/core-js/internals/indexed-object.js"),S=Object.assign,E=Object.defineProperty,I=h([].concat);A.exports=!S||w(function(){if(d&&S({b:1},S(E({},"a",{enumerable:!0,get:function(){E(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var H={},M={},D=Symbol("assign detection"),K="abcdefghijklmnopqrst";return H[D]=7,K.split("").forEach(function(U){M[U]=U}),S({},H)[D]!==7||j(S({},M)).join("")!==K})?function(M,D){for(var K=x(M),U=arguments.length,F=1,k=B.f,T=p.f;U>F;)for(var P=C(arguments[F++]),$=k?I(j(P),k(P)):j(P),ee=$.length,V=0,W;ee>V;)W=$[V++],(!d||f(T,P,W))&&(K[W]=P[W]);return K}:S},"./node_modules/core-js/internals/object-create.js":function(A,u,i){var d=i("./node_modules/core-js/internals/an-object.js"),h=i("./node_modules/core-js/internals/object-define-properties.js"),f=i("./node_modules/core-js/internals/enum-bug-keys.js"),w=i("./node_modules/core-js/internals/hidden-keys.js"),j=i("./node_modules/core-js/internals/html.js"),B=i("./node_modules/core-js/internals/document-create-element.js"),p=i("./node_modules/core-js/internals/shared-key.js"),x=">",C="<",S="prototype",E="script",I=p("IE_PROTO"),H=function(){},M=function(k){return C+E+x+k+C+"/"+E+x},D=function(k){k.write(M("")),k.close();var T=k.parentWindow.Object;return k=null,T},K=function(){var k=B("iframe"),T="java"+E+":",P;return k.style.display="none",j.appendChild(k),k.src=String(T),P=k.contentWindow.document,P.open(),P.write(M("document.F=Object")),P.close(),P.F},U,F=function(){try{U=new ActiveXObject("htmlfile")}catch{}F=typeof document<"u"?document.domain&&U?D(U):K():D(U);for(var k=f.length;k--;)delete F[S][f[k]];return F()};w[I]=!0,A.exports=Object.create||function(T,P){var $;return T!==null?(H[S]=d(T),$=new H,H[S]=null,$[I]=T):$=F(),P===void 0?$:h.f($,P)}},"./node_modules/core-js/internals/object-define-properties.js":function(A,u,i){var d=i("./node_modules/core-js/internals/descriptors.js"),h=i("./node_modules/core-js/internals/v8-prototype-define-bug.js"),f=i("./node_modules/core-js/internals/object-define-property.js"),w=i("./node_modules/core-js/internals/an-object.js"),j=i("./node_modules/core-js/internals/to-indexed-object.js"),B=i("./node_modules/core-js/internals/object-keys.js");u.f=d&&!h?Object.defineProperties:function(x,C){w(x);for(var S=j(C),E=B(C),I=E.length,H=0,M;I>H;)f.f(x,M=E[H++],S[M]);return x}},"./node_modules/core-js/internals/object-define-property.js":function(A,u,i){var d=i("./node_modules/core-js/internals/descriptors.js"),h=i("./node_modules/core-js/internals/ie8-dom-define.js"),f=i("./node_modules/core-js/internals/v8-prototype-define-bug.js"),w=i("./node_modules/core-js/internals/an-object.js"),j=i("./node_modules/core-js/internals/to-property-key.js"),B=TypeError,p=Object.defineProperty,x=Object.getOwnPropertyDescriptor,C="enumerable",S="configurable",E="writable";u.f=d?f?function(H,M,D){if(w(H),M=j(M),w(D),typeof H=="function"&&M==="prototype"&&"value"in D&&E in D&&!D[E]){var K=x(H,M);K&&K[E]&&(H[M]=D.value,D={configurable:S in D?D[S]:K[S],enumerable:C in D?D[C]:K[C],writable:!1})}return p(H,M,D)}:p:function(H,M,D){if(w(H),M=j(M),w(D),h)try{return p(H,M,D)}catch{}if("get"in D||"set"in D)throw new B("Accessors not supported");return"value"in D&&(H[M]=D.value),H}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":function(A,u,i){var d=i("./node_modules/core-js/internals/descriptors.js"),h=i("./node_modules/core-js/internals/function-call.js"),f=i("./node_modules/core-js/internals/object-property-is-enumerable.js"),w=i("./node_modules/core-js/internals/create-property-descriptor.js"),j=i("./node_modules/core-js/internals/to-indexed-object.js"),B=i("./node_modules/core-js/internals/to-property-key.js"),p=i("./node_modules/core-js/internals/has-own-property.js"),x=i("./node_modules/core-js/internals/ie8-dom-define.js"),C=Object.getOwnPropertyDescriptor;u.f=d?C:function(E,I){if(E=j(E),I=B(I),x)try{return C(E,I)}catch{}if(p(E,I))return w(!h(f.f,E,I),E[I])}},"./node_modules/core-js/internals/object-get-own-property-names-external.js":function(A,u,i){var d=i("./node_modules/core-js/internals/classof-raw.js"),h=i("./node_modules/core-js/internals/to-indexed-object.js"),f=i("./node_modules/core-js/internals/object-get-own-property-names.js").f,w=i("./node_modules/core-js/internals/array-slice.js"),j=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],B=function(p){try{return f(p)}catch{return w(j)}};A.exports.f=function(x){return j&&d(x)==="Window"?B(x):f(h(x))}},"./node_modules/core-js/internals/object-get-own-property-names.js":function(A,u,i){var d=i("./node_modules/core-js/internals/object-keys-internal.js"),h=i("./node_modules/core-js/internals/enum-bug-keys.js"),f=h.concat("length","prototype");u.f=Object.getOwnPropertyNames||function(j){return d(j,f)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":function(A,u){u.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-prototype-of.js":function(A,u,i){var d=i("./node_modules/core-js/internals/has-own-property.js"),h=i("./node_modules/core-js/internals/is-callable.js"),f=i("./node_modules/core-js/internals/to-object.js"),w=i("./node_modules/core-js/internals/shared-key.js"),j=i("./node_modules/core-js/internals/correct-prototype-getter.js"),B=w("IE_PROTO"),p=Object,x=p.prototype;A.exports=j?p.getPrototypeOf:function(C){var S=f(C);if(d(S,B))return S[B];var E=S.constructor;return h(E)&&S instanceof E?E.prototype:S instanceof p?x:null}},"./node_modules/core-js/internals/object-is-extensible.js":function(A,u,i){var d=i("./node_modules/core-js/internals/fails.js"),h=i("./node_modules/core-js/internals/is-object.js"),f=i("./node_modules/core-js/internals/classof-raw.js"),w=i("./node_modules/core-js/internals/array-buffer-non-extensible.js"),j=Object.isExtensible,B=d(function(){});A.exports=B||w?function(x){return!h(x)||w&&f(x)==="ArrayBuffer"?!1:j?j(x):!0}:j},"./node_modules/core-js/internals/object-is-prototype-of.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-uncurry-this.js");A.exports=d({}.isPrototypeOf)},"./node_modules/core-js/internals/object-keys-internal.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-uncurry-this.js"),h=i("./node_modules/core-js/internals/has-own-property.js"),f=i("./node_modules/core-js/internals/to-indexed-object.js"),w=i("./node_modules/core-js/internals/array-includes.js").indexOf,j=i("./node_modules/core-js/internals/hidden-keys.js"),B=d([].push);A.exports=function(p,x){var C=f(p),S=0,E=[],I;for(I in C)!h(j,I)&&h(C,I)&&B(E,I);for(;x.length>S;)h(C,I=x[S++])&&(~w(E,I)||B(E,I));return E}},"./node_modules/core-js/internals/object-keys.js":function(A,u,i){var d=i("./node_modules/core-js/internals/object-keys-internal.js"),h=i("./node_modules/core-js/internals/enum-bug-keys.js");A.exports=Object.keys||function(w){return d(w,h)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":function(A,u){var i={}.propertyIsEnumerable,d=Object.getOwnPropertyDescriptor,h=d&&!i.call({1:2},1);u.f=h?function(w){var j=d(this,w);return!!j&&j.enumerable}:i},"./node_modules/core-js/internals/object-set-prototype-of.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-uncurry-this-accessor.js"),h=i("./node_modules/core-js/internals/is-object.js"),f=i("./node_modules/core-js/internals/require-object-coercible.js"),w=i("./node_modules/core-js/internals/a-possible-prototype.js");A.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var j=!1,B={},p;try{p=d(Object.prototype,"__proto__","set"),p(B,[]),j=B instanceof Array}catch{}return function(C,S){return f(C),w(S),h(C)&&(j?p(C,S):C.__proto__=S),C}}():void 0)},"./node_modules/core-js/internals/object-to-string.js":function(A,u,i){var d=i("./node_modules/core-js/internals/to-string-tag-support.js"),h=i("./node_modules/core-js/internals/classof.js");A.exports=d?{}.toString:function(){return"[object "+h(this)+"]"}},"./node_modules/core-js/internals/ordinary-to-primitive.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-call.js"),h=i("./node_modules/core-js/internals/is-callable.js"),f=i("./node_modules/core-js/internals/is-object.js"),w=TypeError;A.exports=function(j,B){var p,x;if(B==="string"&&h(p=j.toString)&&!f(x=d(p,j))||h(p=j.valueOf)&&!f(x=d(p,j))||B!=="string"&&h(p=j.toString)&&!f(x=d(p,j)))return x;throw new w("Can't convert object to primitive value")}},"./node_modules/core-js/internals/own-keys.js":function(A,u,i){var d=i("./node_modules/core-js/internals/get-built-in.js"),h=i("./node_modules/core-js/internals/function-uncurry-this.js"),f=i("./node_modules/core-js/internals/object-get-own-property-names.js"),w=i("./node_modules/core-js/internals/object-get-own-property-symbols.js"),j=i("./node_modules/core-js/internals/an-object.js"),B=h([].concat);A.exports=d("Reflect","ownKeys")||function(x){var C=f.f(j(x)),S=w.f;return S?B(C,S(x)):C}},"./node_modules/core-js/internals/path.js":function(A,u,i){var d=i("./node_modules/core-js/internals/global-this.js");A.exports=d},"./node_modules/core-js/internals/perform.js":function(A){A.exports=function(u){try{return{error:!1,value:u()}}catch(i){return{error:!0,value:i}}}},"./node_modules/core-js/internals/promise-constructor-detection.js":function(A,u,i){var d=i("./node_modules/core-js/internals/global-this.js"),h=i("./node_modules/core-js/internals/promise-native-constructor.js"),f=i("./node_modules/core-js/internals/is-callable.js"),w=i("./node_modules/core-js/internals/is-forced.js"),j=i("./node_modules/core-js/internals/inspect-source.js"),B=i("./node_modules/core-js/internals/well-known-symbol.js"),p=i("./node_modules/core-js/internals/environment.js"),x=i("./node_modules/core-js/internals/is-pure.js"),C=i("./node_modules/core-js/internals/environment-v8-version.js"),S=h&&h.prototype,E=B("species"),I=!1,H=f(d.PromiseRejectionEvent),M=w("Promise",function(){var D=j(h),K=D!==String(h);if(!K&&C===66||x&&!(S.catch&&S.finally))return!0;if(!C||C<51||!/native code/.test(D)){var U=new h(function(T){T(1)}),F=function(T){T(function(){},function(){})},k=U.constructor={};if(k[E]=F,I=U.then(function(){})instanceof F,!I)return!0}return!K&&(p==="BROWSER"||p==="DENO")&&!H});A.exports={CONSTRUCTOR:M,REJECTION_EVENT:H,SUBCLASSING:I}},"./node_modules/core-js/internals/promise-native-constructor.js":function(A,u,i){var d=i("./node_modules/core-js/internals/global-this.js");A.exports=d.Promise},"./node_modules/core-js/internals/promise-resolve.js":function(A,u,i){var d=i("./node_modules/core-js/internals/an-object.js"),h=i("./node_modules/core-js/internals/is-object.js"),f=i("./node_modules/core-js/internals/new-promise-capability.js");A.exports=function(w,j){if(d(w),h(j)&&j.constructor===w)return j;var B=f.f(w),p=B.resolve;return p(j),B.promise}},"./node_modules/core-js/internals/promise-statics-incorrect-iteration.js":function(A,u,i){var d=i("./node_modules/core-js/internals/promise-native-constructor.js"),h=i("./node_modules/core-js/internals/check-correctness-of-iteration.js"),f=i("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR;A.exports=f||!h(function(w){d.all(w).then(void 0,function(){})})},"./node_modules/core-js/internals/queue.js":function(A){var u=function(){this.head=null,this.tail=null};u.prototype={add:function(i){var d={item:i,next:null},h=this.tail;h?h.next=d:this.head=d,this.tail=d},get:function(){var i=this.head;if(i){var d=this.head=i.next;return d===null&&(this.tail=null),i.item}}},A.exports=u},"./node_modules/core-js/internals/regexp-exec.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-call.js"),h=i("./node_modules/core-js/internals/function-uncurry-this.js"),f=i("./node_modules/core-js/internals/to-string.js"),w=i("./node_modules/core-js/internals/regexp-flags.js"),j=i("./node_modules/core-js/internals/regexp-sticky-helpers.js"),B=i("./node_modules/core-js/internals/shared.js"),p=i("./node_modules/core-js/internals/object-create.js"),x=i("./node_modules/core-js/internals/internal-state.js").get,C=i("./node_modules/core-js/internals/regexp-unsupported-dot-all.js"),S=i("./node_modules/core-js/internals/regexp-unsupported-ncg.js"),E=B("native-string-replace",String.prototype.replace),I=RegExp.prototype.exec,H=I,M=h("".charAt),D=h("".indexOf),K=h("".replace),U=h("".slice),F=function(){var $=/a/,ee=/b*/g;return d(I,$,"a"),d(I,ee,"a"),$.lastIndex!==0||ee.lastIndex!==0}(),k=j.BROKEN_CARET,T=/()??/.exec("")[1]!==void 0,P=F||T||k||C||S;P&&(H=function(ee){var V=this,W=x(V),te=f(ee),oe=W.raw,O,z,ne,Z,q,Ae,ve;if(oe)return oe.lastIndex=V.lastIndex,O=d(H,oe,te),V.lastIndex=oe.lastIndex,O;var be=W.groups,Ne=k&&V.sticky,Te=d(w,V),De=V.source,We=0,_e=te;if(Ne&&(Te=K(Te,"y",""),D(Te,"g")===-1&&(Te+="g"),_e=U(te,V.lastIndex),V.lastIndex>0&&(!V.multiline||V.multiline&&M(te,V.lastIndex-1)!==`
`)&&(De="(?: "+De+")",_e=" "+_e,We++),z=new RegExp("^(?:"+De+")",Te)),T&&(z=new RegExp("^"+De+"$(?!\\s)",Te)),F&&(ne=V.lastIndex),Z=d(I,Ne?z:V,_e),Ne?Z?(Z.input=U(Z.input,We),Z[0]=U(Z[0],We),Z.index=V.lastIndex,V.lastIndex+=Z[0].length):V.lastIndex=0:F&&Z&&(V.lastIndex=V.global?Z.index+Z[0].length:ne),T&&Z&&Z.length>1&&d(E,Z[0],z,function(){for(q=1;q<arguments.length-2;q++)arguments[q]===void 0&&(Z[q]=void 0)}),Z&&be)for(Z.groups=Ae=p(null),q=0;q<be.length;q++)ve=be[q],Ae[ve[0]]=Z[ve[1]];return Z}),A.exports=H},"./node_modules/core-js/internals/regexp-flags-detection.js":function(A,u,i){var d=i("./node_modules/core-js/internals/global-this.js"),h=i("./node_modules/core-js/internals/fails.js"),f=d.RegExp,w=!h(function(){var j=!0;try{f(".","d")}catch{j=!1}var B={},p="",x=j?"dgimsy":"gimsy",C=function(H,M){Object.defineProperty(B,H,{get:function(){return p+=M,!0}})},S={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};j&&(S.hasIndices="d");for(var E in S)C(E,S[E]);var I=Object.getOwnPropertyDescriptor(f.prototype,"flags").get.call(B);return I!==x||p!==x});A.exports={correct:w}},"./node_modules/core-js/internals/regexp-flags.js":function(A,u,i){var d=i("./node_modules/core-js/internals/an-object.js");A.exports=function(){var h=d(this),f="";return h.hasIndices&&(f+="d"),h.global&&(f+="g"),h.ignoreCase&&(f+="i"),h.multiline&&(f+="m"),h.dotAll&&(f+="s"),h.unicode&&(f+="u"),h.unicodeSets&&(f+="v"),h.sticky&&(f+="y"),f}},"./node_modules/core-js/internals/regexp-get-flags.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-call.js"),h=i("./node_modules/core-js/internals/has-own-property.js"),f=i("./node_modules/core-js/internals/object-is-prototype-of.js"),w=i("./node_modules/core-js/internals/regexp-flags-detection.js"),j=i("./node_modules/core-js/internals/regexp-flags.js"),B=RegExp.prototype;A.exports=w.correct?function(p){return p.flags}:function(p){return!w.correct&&f(B,p)&&!h(p,"flags")?d(j,p):p.flags}},"./node_modules/core-js/internals/regexp-sticky-helpers.js":function(A,u,i){var d=i("./node_modules/core-js/internals/fails.js"),h=i("./node_modules/core-js/internals/global-this.js"),f=h.RegExp,w=d(function(){var p=f("a","y");return p.lastIndex=2,p.exec("abcd")!==null}),j=w||d(function(){return!f("a","y").sticky}),B=w||d(function(){var p=f("^r","gy");return p.lastIndex=2,p.exec("str")!==null});A.exports={BROKEN_CARET:B,MISSED_STICKY:j,UNSUPPORTED_Y:w}},"./node_modules/core-js/internals/regexp-unsupported-dot-all.js":function(A,u,i){var d=i("./node_modules/core-js/internals/fails.js"),h=i("./node_modules/core-js/internals/global-this.js"),f=h.RegExp;A.exports=d(function(){var w=f(".","s");return!(w.dotAll&&w.test(`
`)&&w.flags==="s")})},"./node_modules/core-js/internals/regexp-unsupported-ncg.js":function(A,u,i){var d=i("./node_modules/core-js/internals/fails.js"),h=i("./node_modules/core-js/internals/global-this.js"),f=h.RegExp;A.exports=d(function(){var w=f("(?<a>b)","g");return w.exec("b").groups.a!=="b"||"b".replace(w,"$<a>c")!=="bc"})},"./node_modules/core-js/internals/require-object-coercible.js":function(A,u,i){var d=i("./node_modules/core-js/internals/is-null-or-undefined.js"),h=TypeError;A.exports=function(f){if(d(f))throw new h("Can't call method on "+f);return f}},"./node_modules/core-js/internals/safe-get-built-in.js":function(A,u,i){var d=i("./node_modules/core-js/internals/global-this.js"),h=i("./node_modules/core-js/internals/descriptors.js"),f=Object.getOwnPropertyDescriptor;A.exports=function(w){if(!h)return d[w];var j=f(d,w);return j&&j.value}},"./node_modules/core-js/internals/schedulers-fix.js":function(A,u,i){var d=i("./node_modules/core-js/internals/global-this.js"),h=i("./node_modules/core-js/internals/function-apply.js"),f=i("./node_modules/core-js/internals/is-callable.js"),w=i("./node_modules/core-js/internals/environment.js"),j=i("./node_modules/core-js/internals/environment-user-agent.js"),B=i("./node_modules/core-js/internals/array-slice.js"),p=i("./node_modules/core-js/internals/validate-arguments-length.js"),x=d.Function,C=/MSIE .\./.test(j)||w==="BUN"&&function(){var S=d.Bun.version.split(".");return S.length<3||S[0]==="0"&&(S[1]<3||S[1]==="3"&&S[2]==="0")}();A.exports=function(S,E){var I=E?2:1;return C?function(H,M){var D=p(arguments.length,1)>I,K=f(H)?H:x(H),U=D?B(arguments,I):[],F=D?function(){h(K,this,U)}:K;return E?S(F,M):S(F)}:S}},"./node_modules/core-js/internals/set-clone.js":function(A,u,i){var d=i("./node_modules/core-js/internals/set-helpers.js"),h=i("./node_modules/core-js/internals/set-iterate.js"),f=d.Set,w=d.add;A.exports=function(j){var B=new f;return h(j,function(p){w(B,p)}),B}},"./node_modules/core-js/internals/set-difference.js":function(A,u,i){var d=i("./node_modules/core-js/internals/a-set.js"),h=i("./node_modules/core-js/internals/set-helpers.js"),f=i("./node_modules/core-js/internals/set-clone.js"),w=i("./node_modules/core-js/internals/set-size.js"),j=i("./node_modules/core-js/internals/get-set-record.js"),B=i("./node_modules/core-js/internals/set-iterate.js"),p=i("./node_modules/core-js/internals/iterate-simple.js"),x=h.has,C=h.remove;A.exports=function(E){var I=d(this),H=j(E),M=f(I);return w(I)<=H.size?B(I,function(D){H.includes(D)&&C(M,D)}):p(H.getIterator(),function(D){x(M,D)&&C(M,D)}),M}},"./node_modules/core-js/internals/set-helpers.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-uncurry-this.js"),h=Set.prototype;A.exports={Set,add:d(h.add),has:d(h.has),remove:d(h.delete),proto:h}},"./node_modules/core-js/internals/set-intersection.js":function(A,u,i){var d=i("./node_modules/core-js/internals/a-set.js"),h=i("./node_modules/core-js/internals/set-helpers.js"),f=i("./node_modules/core-js/internals/set-size.js"),w=i("./node_modules/core-js/internals/get-set-record.js"),j=i("./node_modules/core-js/internals/set-iterate.js"),B=i("./node_modules/core-js/internals/iterate-simple.js"),p=h.Set,x=h.add,C=h.has;A.exports=function(E){var I=d(this),H=w(E),M=new p;return f(I)>H.size?B(H.getIterator(),function(D){C(I,D)&&x(M,D)}):j(I,function(D){H.includes(D)&&x(M,D)}),M}},"./node_modules/core-js/internals/set-is-disjoint-from.js":function(A,u,i){var d=i("./node_modules/core-js/internals/a-set.js"),h=i("./node_modules/core-js/internals/set-helpers.js").has,f=i("./node_modules/core-js/internals/set-size.js"),w=i("./node_modules/core-js/internals/get-set-record.js"),j=i("./node_modules/core-js/internals/set-iterate.js"),B=i("./node_modules/core-js/internals/iterate-simple.js"),p=i("./node_modules/core-js/internals/iterator-close.js");A.exports=function(C){var S=d(this),E=w(C);if(f(S)<=E.size)return j(S,function(H){if(E.includes(H))return!1},!0)!==!1;var I=E.getIterator();return B(I,function(H){if(h(S,H))return p(I,"normal",!1)})!==!1}},"./node_modules/core-js/internals/set-is-subset-of.js":function(A,u,i){var d=i("./node_modules/core-js/internals/a-set.js"),h=i("./node_modules/core-js/internals/set-size.js"),f=i("./node_modules/core-js/internals/set-iterate.js"),w=i("./node_modules/core-js/internals/get-set-record.js");A.exports=function(B){var p=d(this),x=w(B);return h(p)>x.size?!1:f(p,function(C){if(!x.includes(C))return!1},!0)!==!1}},"./node_modules/core-js/internals/set-is-superset-of.js":function(A,u,i){var d=i("./node_modules/core-js/internals/a-set.js"),h=i("./node_modules/core-js/internals/set-helpers.js").has,f=i("./node_modules/core-js/internals/set-size.js"),w=i("./node_modules/core-js/internals/get-set-record.js"),j=i("./node_modules/core-js/internals/iterate-simple.js"),B=i("./node_modules/core-js/internals/iterator-close.js");A.exports=function(x){var C=d(this),S=w(x);if(f(C)<S.size)return!1;var E=S.getIterator();return j(E,function(I){if(!h(C,I))return B(E,"normal",!1)})!==!1}},"./node_modules/core-js/internals/set-iterate.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-uncurry-this.js"),h=i("./node_modules/core-js/internals/iterate-simple.js"),f=i("./node_modules/core-js/internals/set-helpers.js"),w=f.Set,j=f.proto,B=d(j.forEach),p=d(j.keys),x=p(new w).next;A.exports=function(C,S,E){return E?h({iterator:p(C),next:x},S):B(C,S)}},"./node_modules/core-js/internals/set-size.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-uncurry-this-accessor.js"),h=i("./node_modules/core-js/internals/set-helpers.js");A.exports=d(h.proto,"size","get")||function(f){return f.size}},"./node_modules/core-js/internals/set-species.js":function(A,u,i){var d=i("./node_modules/core-js/internals/get-built-in.js"),h=i("./node_modules/core-js/internals/define-built-in-accessor.js"),f=i("./node_modules/core-js/internals/well-known-symbol.js"),w=i("./node_modules/core-js/internals/descriptors.js"),j=f("species");A.exports=function(B){var p=d(B);w&&p&&!p[j]&&h(p,j,{configurable:!0,get:function(){return this}})}},"./node_modules/core-js/internals/set-symmetric-difference.js":function(A,u,i){var d=i("./node_modules/core-js/internals/a-set.js"),h=i("./node_modules/core-js/internals/set-helpers.js"),f=i("./node_modules/core-js/internals/set-clone.js"),w=i("./node_modules/core-js/internals/get-set-record.js"),j=i("./node_modules/core-js/internals/iterate-simple.js"),B=h.add,p=h.has,x=h.remove;A.exports=function(S){var E=d(this),I=w(S).getIterator(),H=f(E);return j(I,function(M){p(E,M)?x(H,M):B(H,M)}),H}},"./node_modules/core-js/internals/set-to-string-tag.js":function(A,u,i){var d=i("./node_modules/core-js/internals/object-define-property.js").f,h=i("./node_modules/core-js/internals/has-own-property.js"),f=i("./node_modules/core-js/internals/well-known-symbol.js"),w=f("toStringTag");A.exports=function(j,B,p){j&&!p&&(j=j.prototype),j&&!h(j,w)&&d(j,w,{configurable:!0,value:B})}},"./node_modules/core-js/internals/set-union.js":function(A,u,i){var d=i("./node_modules/core-js/internals/a-set.js"),h=i("./node_modules/core-js/internals/set-helpers.js").add,f=i("./node_modules/core-js/internals/set-clone.js"),w=i("./node_modules/core-js/internals/get-set-record.js"),j=i("./node_modules/core-js/internals/iterate-simple.js");A.exports=function(p){var x=d(this),C=w(p).getIterator(),S=f(x);return j(C,function(E){h(S,E)}),S}},"./node_modules/core-js/internals/shared-key.js":function(A,u,i){var d=i("./node_modules/core-js/internals/shared.js"),h=i("./node_modules/core-js/internals/uid.js"),f=d("keys");A.exports=function(w){return f[w]||(f[w]=h(w))}},"./node_modules/core-js/internals/shared-store.js":function(A,u,i){var d=i("./node_modules/core-js/internals/is-pure.js"),h=i("./node_modules/core-js/internals/global-this.js"),f=i("./node_modules/core-js/internals/define-global-property.js"),w="__core-js_shared__",j=A.exports=h[w]||f(w,{});(j.versions||(j.versions=[])).push({version:"3.45.1",mode:d?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.45.1/LICENSE",source:"https://github.com/zloirock/core-js"})},"./node_modules/core-js/internals/shared.js":function(A,u,i){var d=i("./node_modules/core-js/internals/shared-store.js");A.exports=function(h,f){return d[h]||(d[h]=f||{})}},"./node_modules/core-js/internals/species-constructor.js":function(A,u,i){var d=i("./node_modules/core-js/internals/an-object.js"),h=i("./node_modules/core-js/internals/a-constructor.js"),f=i("./node_modules/core-js/internals/is-null-or-undefined.js"),w=i("./node_modules/core-js/internals/well-known-symbol.js"),j=w("species");A.exports=function(B,p){var x=d(B).constructor,C;return x===void 0||f(C=d(x)[j])?p:h(C)}},"./node_modules/core-js/internals/string-html-forced.js":function(A,u,i){var d=i("./node_modules/core-js/internals/fails.js");A.exports=function(h){return d(function(){var f=""[h]('"');return f!==f.toLowerCase()||f.split('"').length>3})}},"./node_modules/core-js/internals/string-multibyte.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-uncurry-this.js"),h=i("./node_modules/core-js/internals/to-integer-or-infinity.js"),f=i("./node_modules/core-js/internals/to-string.js"),w=i("./node_modules/core-js/internals/require-object-coercible.js"),j=d("".charAt),B=d("".charCodeAt),p=d("".slice),x=function(C){return function(S,E){var I=f(w(S)),H=h(E),M=I.length,D,K;return H<0||H>=M?C?"":void 0:(D=B(I,H),D<55296||D>56319||H+1===M||(K=B(I,H+1))<56320||K>57343?C?j(I,H):D:C?p(I,H,H+2):(D-55296<<10)+(K-56320)+65536)}};A.exports={codeAt:x(!1),charAt:x(!0)}},"./node_modules/core-js/internals/string-trim.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-uncurry-this.js"),h=i("./node_modules/core-js/internals/require-object-coercible.js"),f=i("./node_modules/core-js/internals/to-string.js"),w=i("./node_modules/core-js/internals/whitespaces.js"),j=d("".replace),B=RegExp("^["+w+"]+"),p=RegExp("(^|[^"+w+"])["+w+"]+$"),x=function(C){return function(S){var E=f(h(S));return C&1&&(E=j(E,B,"")),C&2&&(E=j(E,p,"$1")),E}};A.exports={start:x(1),end:x(2),trim:x(3)}},"./node_modules/core-js/internals/symbol-constructor-detection.js":function(A,u,i){var d=i("./node_modules/core-js/internals/environment-v8-version.js"),h=i("./node_modules/core-js/internals/fails.js"),f=i("./node_modules/core-js/internals/global-this.js"),w=f.String;A.exports=!!Object.getOwnPropertySymbols&&!h(function(){var j=Symbol("symbol detection");return!w(j)||!(Object(j)instanceof Symbol)||!Symbol.sham&&d&&d<41})},"./node_modules/core-js/internals/symbol-define-to-primitive.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-call.js"),h=i("./node_modules/core-js/internals/get-built-in.js"),f=i("./node_modules/core-js/internals/well-known-symbol.js"),w=i("./node_modules/core-js/internals/define-built-in.js");A.exports=function(){var j=h("Symbol"),B=j&&j.prototype,p=B&&B.valueOf,x=f("toPrimitive");B&&!B[x]&&w(B,x,function(C){return d(p,this)},{arity:1})}},"./node_modules/core-js/internals/symbol-registry-detection.js":function(A,u,i){var d=i("./node_modules/core-js/internals/symbol-constructor-detection.js");A.exports=d&&!!Symbol.for&&!!Symbol.keyFor},"./node_modules/core-js/internals/task.js":function(A,u,i){var d=i("./node_modules/core-js/internals/global-this.js"),h=i("./node_modules/core-js/internals/function-apply.js"),f=i("./node_modules/core-js/internals/function-bind-context.js"),w=i("./node_modules/core-js/internals/is-callable.js"),j=i("./node_modules/core-js/internals/has-own-property.js"),B=i("./node_modules/core-js/internals/fails.js"),p=i("./node_modules/core-js/internals/html.js"),x=i("./node_modules/core-js/internals/array-slice.js"),C=i("./node_modules/core-js/internals/document-create-element.js"),S=i("./node_modules/core-js/internals/validate-arguments-length.js"),E=i("./node_modules/core-js/internals/environment-is-ios.js"),I=i("./node_modules/core-js/internals/environment-is-node.js"),H=d.setImmediate,M=d.clearImmediate,D=d.process,K=d.Dispatch,U=d.Function,F=d.MessageChannel,k=d.String,T=0,P={},$="onreadystatechange",ee,V,W,te;B(function(){ee=d.location});var oe=function(Z){if(j(P,Z)){var q=P[Z];delete P[Z],q()}},O=function(Z){return function(){oe(Z)}},z=function(Z){oe(Z.data)},ne=function(Z){d.postMessage(k(Z),ee.protocol+"//"+ee.host)};(!H||!M)&&(H=function(q){S(arguments.length,1);var Ae=w(q)?q:U(q),ve=x(arguments,1);return P[++T]=function(){h(Ae,void 0,ve)},V(T),T},M=function(q){delete P[q]},I?V=function(Z){D.nextTick(O(Z))}:K&&K.now?V=function(Z){K.now(O(Z))}:F&&!E?(W=new F,te=W.port2,W.port1.onmessage=z,V=f(te.postMessage,te)):d.addEventListener&&w(d.postMessage)&&!d.importScripts&&ee&&ee.protocol!=="file:"&&!B(ne)?(V=ne,d.addEventListener("message",z,!1)):$ in C("script")?V=function(Z){p.appendChild(C("script"))[$]=function(){p.removeChild(this),oe(Z)}}:V=function(Z){setTimeout(O(Z),0)}),A.exports={set:H,clear:M}},"./node_modules/core-js/internals/this-number-value.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-uncurry-this.js");A.exports=d(1.1.valueOf)},"./node_modules/core-js/internals/to-absolute-index.js":function(A,u,i){var d=i("./node_modules/core-js/internals/to-integer-or-infinity.js"),h=Math.max,f=Math.min;A.exports=function(w,j){var B=d(w);return B<0?h(B+j,0):f(B,j)}},"./node_modules/core-js/internals/to-indexed-object.js":function(A,u,i){var d=i("./node_modules/core-js/internals/indexed-object.js"),h=i("./node_modules/core-js/internals/require-object-coercible.js");A.exports=function(f){return d(h(f))}},"./node_modules/core-js/internals/to-integer-or-infinity.js":function(A,u,i){var d=i("./node_modules/core-js/internals/math-trunc.js");A.exports=function(h){var f=+h;return f!==f||f===0?0:d(f)}},"./node_modules/core-js/internals/to-length.js":function(A,u,i){var d=i("./node_modules/core-js/internals/to-integer-or-infinity.js"),h=Math.min;A.exports=function(f){var w=d(f);return w>0?h(w,9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":function(A,u,i){var d=i("./node_modules/core-js/internals/require-object-coercible.js"),h=Object;A.exports=function(f){return h(d(f))}},"./node_modules/core-js/internals/to-primitive.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-call.js"),h=i("./node_modules/core-js/internals/is-object.js"),f=i("./node_modules/core-js/internals/is-symbol.js"),w=i("./node_modules/core-js/internals/get-method.js"),j=i("./node_modules/core-js/internals/ordinary-to-primitive.js"),B=i("./node_modules/core-js/internals/well-known-symbol.js"),p=TypeError,x=B("toPrimitive");A.exports=function(C,S){if(!h(C)||f(C))return C;var E=w(C,x),I;if(E){if(S===void 0&&(S="default"),I=d(E,C,S),!h(I)||f(I))return I;throw new p("Can't convert object to primitive value")}return S===void 0&&(S="number"),j(C,S)}},"./node_modules/core-js/internals/to-property-key.js":function(A,u,i){var d=i("./node_modules/core-js/internals/to-primitive.js"),h=i("./node_modules/core-js/internals/is-symbol.js");A.exports=function(f){var w=d(f,"string");return h(w)?w:w+""}},"./node_modules/core-js/internals/to-set-like.js":function(A,u,i){var d=i("./node_modules/core-js/internals/get-built-in.js"),h=i("./node_modules/core-js/internals/is-callable.js"),f=i("./node_modules/core-js/internals/is-iterable.js"),w=i("./node_modules/core-js/internals/is-object.js"),j=d("Set"),B=function(p){return w(p)&&typeof p.size=="number"&&h(p.has)&&h(p.keys)};A.exports=function(p){return B(p)?p:f(p)?new j(p):p}},"./node_modules/core-js/internals/to-string-tag-support.js":function(A,u,i){var d=i("./node_modules/core-js/internals/well-known-symbol.js"),h=d("toStringTag"),f={};f[h]="z",A.exports=String(f)==="[object z]"},"./node_modules/core-js/internals/to-string.js":function(A,u,i){var d=i("./node_modules/core-js/internals/classof.js"),h=String;A.exports=function(f){if(d(f)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return h(f)}},"./node_modules/core-js/internals/try-to-string.js":function(A){var u=String;A.exports=function(i){try{return u(i)}catch{return"Object"}}},"./node_modules/core-js/internals/uid.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-uncurry-this.js"),h=0,f=Math.random(),w=d(1.1.toString);A.exports=function(j){return"Symbol("+(j===void 0?"":j)+")_"+w(++h+f,36)}},"./node_modules/core-js/internals/use-symbol-as-uid.js":function(A,u,i){var d=i("./node_modules/core-js/internals/symbol-constructor-detection.js");A.exports=d&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},"./node_modules/core-js/internals/v8-prototype-define-bug.js":function(A,u,i){var d=i("./node_modules/core-js/internals/descriptors.js"),h=i("./node_modules/core-js/internals/fails.js");A.exports=d&&h(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},"./node_modules/core-js/internals/validate-arguments-length.js":function(A){var u=TypeError;A.exports=function(i,d){if(i<d)throw new u("Not enough arguments");return i}},"./node_modules/core-js/internals/weak-map-basic-detection.js":function(A,u,i){var d=i("./node_modules/core-js/internals/global-this.js"),h=i("./node_modules/core-js/internals/is-callable.js"),f=d.WeakMap;A.exports=h(f)&&/native code/.test(String(f))},"./node_modules/core-js/internals/well-known-symbol-define.js":function(A,u,i){var d=i("./node_modules/core-js/internals/path.js"),h=i("./node_modules/core-js/internals/has-own-property.js"),f=i("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),w=i("./node_modules/core-js/internals/object-define-property.js").f;A.exports=function(j){var B=d.Symbol||(d.Symbol={});h(B,j)||w(B,j,{value:f.f(j)})}},"./node_modules/core-js/internals/well-known-symbol-wrapped.js":function(A,u,i){var d=i("./node_modules/core-js/internals/well-known-symbol.js");u.f=d},"./node_modules/core-js/internals/well-known-symbol.js":function(A,u,i){var d=i("./node_modules/core-js/internals/global-this.js"),h=i("./node_modules/core-js/internals/shared.js"),f=i("./node_modules/core-js/internals/has-own-property.js"),w=i("./node_modules/core-js/internals/uid.js"),j=i("./node_modules/core-js/internals/symbol-constructor-detection.js"),B=i("./node_modules/core-js/internals/use-symbol-as-uid.js"),p=d.Symbol,x=h("wks"),C=B?p.for||p:p&&p.withoutSetter||w;A.exports=function(S){return f(x,S)||(x[S]=j&&f(p,S)?p[S]:C("Symbol."+S)),x[S]}},"./node_modules/core-js/internals/whitespaces.js":function(A){A.exports=`	
\v\f\r \u2028\u2029\uFEFF`},"./node_modules/core-js/modules/es.array.concat.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/fails.js"),f=i("./node_modules/core-js/internals/is-array.js"),w=i("./node_modules/core-js/internals/is-object.js"),j=i("./node_modules/core-js/internals/to-object.js"),B=i("./node_modules/core-js/internals/length-of-array-like.js"),p=i("./node_modules/core-js/internals/does-not-exceed-safe-integer.js"),x=i("./node_modules/core-js/internals/create-property.js"),C=i("./node_modules/core-js/internals/array-species-create.js"),S=i("./node_modules/core-js/internals/array-method-has-species-support.js"),E=i("./node_modules/core-js/internals/well-known-symbol.js"),I=i("./node_modules/core-js/internals/environment-v8-version.js"),H=E("isConcatSpreadable"),M=I>=51||!h(function(){var U=[];return U[H]=!1,U.concat()[0]!==U}),D=function(U){if(!w(U))return!1;var F=U[H];return F!==void 0?!!F:f(U)},K=!M||!S("concat");d({target:"Array",proto:!0,arity:1,forced:K},{concat:function(F){var k=j(this),T=C(k,0),P=0,$,ee,V,W,te;for($=-1,V=arguments.length;$<V;$++)if(te=$===-1?k:arguments[$],D(te))for(W=B(te),p(P+W),ee=0;ee<W;ee++,P++)ee in te&&x(T,P,te[ee]);else p(P+1),x(T,P++,te);return T.length=P,T}})},"./node_modules/core-js/modules/es.array.from.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/array-from.js"),f=i("./node_modules/core-js/internals/check-correctness-of-iteration.js"),w=!f(function(j){Array.from(j)});d({target:"Array",stat:!0,forced:w},{from:h})},"./node_modules/core-js/modules/es.array.iterator.js":function(A,u,i){var d=i("./node_modules/core-js/internals/to-indexed-object.js"),h=i("./node_modules/core-js/internals/add-to-unscopables.js"),f=i("./node_modules/core-js/internals/iterators.js"),w=i("./node_modules/core-js/internals/internal-state.js"),j=i("./node_modules/core-js/internals/object-define-property.js").f,B=i("./node_modules/core-js/internals/iterator-define.js"),p=i("./node_modules/core-js/internals/create-iter-result-object.js"),x=i("./node_modules/core-js/internals/is-pure.js"),C=i("./node_modules/core-js/internals/descriptors.js"),S="Array Iterator",E=w.set,I=w.getterFor(S);A.exports=B(Array,"Array",function(M,D){E(this,{type:S,target:d(M),index:0,kind:D})},function(){var M=I(this),D=M.target,K=M.index++;if(!D||K>=D.length)return M.target=null,p(void 0,!0);switch(M.kind){case"keys":return p(K,!1);case"values":return p(D[K],!1)}return p([K,D[K]],!1)},"values");var H=f.Arguments=f.Array;if(h("keys"),h("values"),h("entries"),!x&&C&&H.name!=="values")try{j(H,"name",{value:"values"})}catch{}},"./node_modules/core-js/modules/es.array.join.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/function-uncurry-this.js"),f=i("./node_modules/core-js/internals/indexed-object.js"),w=i("./node_modules/core-js/internals/to-indexed-object.js"),j=i("./node_modules/core-js/internals/array-method-is-strict.js"),B=h([].join),p=f!==Object,x=p||!j("join",",");d({target:"Array",proto:!0,forced:x},{join:function(S){return B(w(this),S===void 0?",":S)}})},"./node_modules/core-js/modules/es.array.map.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/array-iteration.js").map,f=i("./node_modules/core-js/internals/array-method-has-species-support.js"),w=f("map");d({target:"Array",proto:!0,forced:!w},{map:function(B){return h(this,B,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es.array.slice.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/is-array.js"),f=i("./node_modules/core-js/internals/is-constructor.js"),w=i("./node_modules/core-js/internals/is-object.js"),j=i("./node_modules/core-js/internals/to-absolute-index.js"),B=i("./node_modules/core-js/internals/length-of-array-like.js"),p=i("./node_modules/core-js/internals/to-indexed-object.js"),x=i("./node_modules/core-js/internals/create-property.js"),C=i("./node_modules/core-js/internals/well-known-symbol.js"),S=i("./node_modules/core-js/internals/array-method-has-species-support.js"),E=i("./node_modules/core-js/internals/array-slice.js"),I=S("slice"),H=C("species"),M=Array,D=Math.max;d({target:"Array",proto:!0,forced:!I},{slice:function(U,F){var k=p(this),T=B(k),P=j(U,T),$=j(F===void 0?T:F,T),ee,V,W;if(h(k)&&(ee=k.constructor,f(ee)&&(ee===M||h(ee.prototype))?ee=void 0:w(ee)&&(ee=ee[H],ee===null&&(ee=void 0)),ee===M||ee===void 0))return E(k,P,$);for(V=new(ee===void 0?M:ee)(D($-P,0)),W=0;P<$;P++,W++)P in k&&x(V,W,k[P]);return V.length=W,V}})},"./node_modules/core-js/modules/es.function.name.js":function(A,u,i){var d=i("./node_modules/core-js/internals/descriptors.js"),h=i("./node_modules/core-js/internals/function-name.js").EXISTS,f=i("./node_modules/core-js/internals/function-uncurry-this.js"),w=i("./node_modules/core-js/internals/define-built-in-accessor.js"),j=Function.prototype,B=f(j.toString),p=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,x=f(p.exec),C="name";d&&!h&&w(j,C,{configurable:!0,get:function(){try{return x(p,B(this))[1]}catch{return""}}})},"./node_modules/core-js/modules/es.iterator.constructor.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/global-this.js"),f=i("./node_modules/core-js/internals/an-instance.js"),w=i("./node_modules/core-js/internals/an-object.js"),j=i("./node_modules/core-js/internals/is-callable.js"),B=i("./node_modules/core-js/internals/object-get-prototype-of.js"),p=i("./node_modules/core-js/internals/define-built-in-accessor.js"),x=i("./node_modules/core-js/internals/create-property.js"),C=i("./node_modules/core-js/internals/fails.js"),S=i("./node_modules/core-js/internals/has-own-property.js"),E=i("./node_modules/core-js/internals/well-known-symbol.js"),I=i("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,H=i("./node_modules/core-js/internals/descriptors.js"),M=i("./node_modules/core-js/internals/is-pure.js"),D="constructor",K="Iterator",U=E("toStringTag"),F=TypeError,k=h[K],T=M||!j(k)||k.prototype!==I||!C(function(){k({})}),P=function(){if(f(this,I),B(this)===I)throw new F("Abstract class Iterator not directly constructable")},$=function(ee,V){H?p(I,ee,{configurable:!0,get:function(){return V},set:function(W){if(w(this),this===I)throw new F("You can't redefine this property");S(this,ee)?this[ee]=W:x(this,ee,W)}}):I[ee]=V};S(I,U)||$(U,K),(T||!S(I,D)||I[D]===Object)&&$(D,P),P.prototype=I,d({global:!0,constructor:!0,forced:T},{Iterator:P})},"./node_modules/core-js/modules/es.iterator.for-each.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/function-call.js"),f=i("./node_modules/core-js/internals/iterate.js"),w=i("./node_modules/core-js/internals/a-callable.js"),j=i("./node_modules/core-js/internals/an-object.js"),B=i("./node_modules/core-js/internals/get-iterator-direct.js"),p=i("./node_modules/core-js/internals/iterator-close.js"),x=i("./node_modules/core-js/internals/iterator-helper-without-closing-on-early-error.js"),C=x("forEach",TypeError);d({target:"Iterator",proto:!0,real:!0,forced:C},{forEach:function(E){j(this);try{w(E)}catch(M){p(this,"throw",M)}if(C)return h(C,this,E);var I=B(this),H=0;f(I,function(M){E(M,H++)},{IS_RECORD:!0})}})},"./node_modules/core-js/modules/es.iterator.map.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/function-call.js"),f=i("./node_modules/core-js/internals/a-callable.js"),w=i("./node_modules/core-js/internals/an-object.js"),j=i("./node_modules/core-js/internals/get-iterator-direct.js"),B=i("./node_modules/core-js/internals/iterator-create-proxy.js"),p=i("./node_modules/core-js/internals/call-with-safe-iteration-closing.js"),x=i("./node_modules/core-js/internals/iterator-close.js"),C=i("./node_modules/core-js/internals/iterator-helper-throws-on-invalid-iterator.js"),S=i("./node_modules/core-js/internals/iterator-helper-without-closing-on-early-error.js"),E=i("./node_modules/core-js/internals/is-pure.js"),I=!E&&!C("map",function(){}),H=!E&&!I&&S("map",TypeError),M=E||I||H,D=B(function(){var K=this.iterator,U=w(h(this.next,K)),F=this.done=!!U.done;if(!F)return p(K,this.mapper,[U.value,this.counter++],!0)});d({target:"Iterator",proto:!0,real:!0,forced:M},{map:function(U){w(this);try{f(U)}catch(F){x(this,"throw",F)}return H?h(H,this,U):new D(j(this),{mapper:U})}})},"./node_modules/core-js/modules/es.json.stringify.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/get-built-in.js"),f=i("./node_modules/core-js/internals/function-apply.js"),w=i("./node_modules/core-js/internals/function-call.js"),j=i("./node_modules/core-js/internals/function-uncurry-this.js"),B=i("./node_modules/core-js/internals/fails.js"),p=i("./node_modules/core-js/internals/is-callable.js"),x=i("./node_modules/core-js/internals/is-symbol.js"),C=i("./node_modules/core-js/internals/array-slice.js"),S=i("./node_modules/core-js/internals/get-json-replacer-function.js"),E=i("./node_modules/core-js/internals/symbol-constructor-detection.js"),I=String,H=h("JSON","stringify"),M=j(/./.exec),D=j("".charAt),K=j("".charCodeAt),U=j("".replace),F=j(1.1.toString),k=/[\uD800-\uDFFF]/g,T=/^[\uD800-\uDBFF]$/,P=/^[\uDC00-\uDFFF]$/,$=!E||B(function(){var te=h("Symbol")("stringify detection");return H([te])!=="[null]"||H({a:te})!=="{}"||H(Object(te))!=="{}"}),ee=B(function(){return H("\uDF06\uD834")!=='"\\udf06\\ud834"'||H("\uDEAD")!=='"\\udead"'}),V=function(te,oe){var O=C(arguments),z=S(oe);if(!(!p(z)&&(te===void 0||x(te))))return O[1]=function(ne,Z){if(p(z)&&(Z=w(z,this,I(ne),Z)),!x(Z))return Z},f(H,null,O)},W=function(te,oe,O){var z=D(O,oe-1),ne=D(O,oe+1);return M(T,te)&&!M(P,ne)||M(P,te)&&!M(T,z)?"\\u"+F(K(te,0),16):te};H&&d({target:"JSON",stat:!0,arity:3,forced:$||ee},{stringify:function(oe,O,z){var ne=C(arguments),Z=f($?V:H,null,ne);return ee&&typeof Z=="string"?U(Z,k,W):Z}})},"./node_modules/core-js/modules/es.number.constructor.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/is-pure.js"),f=i("./node_modules/core-js/internals/descriptors.js"),w=i("./node_modules/core-js/internals/global-this.js"),j=i("./node_modules/core-js/internals/path.js"),B=i("./node_modules/core-js/internals/function-uncurry-this.js"),p=i("./node_modules/core-js/internals/is-forced.js"),x=i("./node_modules/core-js/internals/has-own-property.js"),C=i("./node_modules/core-js/internals/inherit-if-required.js"),S=i("./node_modules/core-js/internals/object-is-prototype-of.js"),E=i("./node_modules/core-js/internals/is-symbol.js"),I=i("./node_modules/core-js/internals/to-primitive.js"),H=i("./node_modules/core-js/internals/fails.js"),M=i("./node_modules/core-js/internals/object-get-own-property-names.js").f,D=i("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,K=i("./node_modules/core-js/internals/object-define-property.js").f,U=i("./node_modules/core-js/internals/this-number-value.js"),F=i("./node_modules/core-js/internals/string-trim.js").trim,k="Number",T=w[k],P=j[k],$=T.prototype,ee=w.TypeError,V=B("".slice),W=B("".charCodeAt),te=function(q){var Ae=I(q,"number");return typeof Ae=="bigint"?Ae:oe(Ae)},oe=function(q){var Ae=I(q,"number"),ve,be,Ne,Te,De,We,_e,de;if(E(Ae))throw new ee("Cannot convert a Symbol value to a number");if(typeof Ae=="string"&&Ae.length>2){if(Ae=F(Ae),ve=W(Ae,0),ve===43||ve===45){if(be=W(Ae,2),be===88||be===120)return NaN}else if(ve===48){switch(W(Ae,1)){case 66:case 98:Ne=2,Te=49;break;case 79:case 111:Ne=8,Te=55;break;default:return+Ae}for(De=V(Ae,2),We=De.length,_e=0;_e<We;_e++)if(de=W(De,_e),de<48||de>Te)return NaN;return parseInt(De,Ne)}}return+Ae},O=p(k,!T(" 0o1")||!T("0b1")||T("+0x1")),z=function(q){return S($,q)&&H(function(){U(q)})},ne=function(Ae){var ve=arguments.length<1?0:T(te(Ae));return z(this)?C(Object(ve),this,ne):ve};ne.prototype=$,O&&!h&&($.constructor=ne),d({global:!0,constructor:!0,wrap:!0,forced:O},{Number:ne});var Z=function(q,Ae){for(var ve=f?M(Ae):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),be=0,Ne;ve.length>be;be++)x(Ae,Ne=ve[be])&&!x(q,Ne)&&K(q,Ne,D(Ae,Ne))};h&&P&&Z(j[k],P),(O||h)&&Z(j[k],T)},"./node_modules/core-js/modules/es.object.assign.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/object-assign.js");d({target:"Object",stat:!0,arity:2,forced:Object.assign!==h},{assign:h})},"./node_modules/core-js/modules/es.object.get-own-property-symbols.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/symbol-constructor-detection.js"),f=i("./node_modules/core-js/internals/fails.js"),w=i("./node_modules/core-js/internals/object-get-own-property-symbols.js"),j=i("./node_modules/core-js/internals/to-object.js"),B=!h||f(function(){w.f(1)});d({target:"Object",stat:!0,forced:B},{getOwnPropertySymbols:function(x){var C=w.f;return C?C(j(x)):[]}})},"./node_modules/core-js/modules/es.object.keys.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/to-object.js"),f=i("./node_modules/core-js/internals/object-keys.js"),w=i("./node_modules/core-js/internals/fails.js"),j=w(function(){f(1)});d({target:"Object",stat:!0,forced:j},{keys:function(p){return f(h(p))}})},"./node_modules/core-js/modules/es.object.to-string.js":function(A,u,i){var d=i("./node_modules/core-js/internals/to-string-tag-support.js"),h=i("./node_modules/core-js/internals/define-built-in.js"),f=i("./node_modules/core-js/internals/object-to-string.js");d||h(Object.prototype,"toString",f,{unsafe:!0})},"./node_modules/core-js/modules/es.promise.all.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/function-call.js"),f=i("./node_modules/core-js/internals/a-callable.js"),w=i("./node_modules/core-js/internals/new-promise-capability.js"),j=i("./node_modules/core-js/internals/perform.js"),B=i("./node_modules/core-js/internals/iterate.js"),p=i("./node_modules/core-js/internals/promise-statics-incorrect-iteration.js");d({target:"Promise",stat:!0,forced:p},{all:function(C){var S=this,E=w.f(S),I=E.resolve,H=E.reject,M=j(function(){var D=f(S.resolve),K=[],U=0,F=1;B(C,function(k){var T=U++,P=!1;F++,h(D,S,k).then(function($){P||(P=!0,K[T]=$,--F||I(K))},H)}),--F||I(K)});return M.error&&H(M.value),E.promise}})},"./node_modules/core-js/modules/es.promise.catch.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/is-pure.js"),f=i("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR,w=i("./node_modules/core-js/internals/promise-native-constructor.js"),j=i("./node_modules/core-js/internals/get-built-in.js"),B=i("./node_modules/core-js/internals/is-callable.js"),p=i("./node_modules/core-js/internals/define-built-in.js"),x=w&&w.prototype;if(d({target:"Promise",proto:!0,forced:f,real:!0},{catch:function(S){return this.then(void 0,S)}}),!h&&B(w)){var C=j("Promise").prototype.catch;x.catch!==C&&p(x,"catch",C,{unsafe:!0})}},"./node_modules/core-js/modules/es.promise.constructor.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/is-pure.js"),f=i("./node_modules/core-js/internals/environment-is-node.js"),w=i("./node_modules/core-js/internals/global-this.js"),j=i("./node_modules/core-js/internals/path.js"),B=i("./node_modules/core-js/internals/function-call.js"),p=i("./node_modules/core-js/internals/define-built-in.js"),x=i("./node_modules/core-js/internals/object-set-prototype-of.js"),C=i("./node_modules/core-js/internals/set-to-string-tag.js"),S=i("./node_modules/core-js/internals/set-species.js"),E=i("./node_modules/core-js/internals/a-callable.js"),I=i("./node_modules/core-js/internals/is-callable.js"),H=i("./node_modules/core-js/internals/is-object.js"),M=i("./node_modules/core-js/internals/an-instance.js"),D=i("./node_modules/core-js/internals/species-constructor.js"),K=i("./node_modules/core-js/internals/task.js").set,U=i("./node_modules/core-js/internals/microtask.js"),F=i("./node_modules/core-js/internals/host-report-errors.js"),k=i("./node_modules/core-js/internals/perform.js"),T=i("./node_modules/core-js/internals/queue.js"),P=i("./node_modules/core-js/internals/internal-state.js"),$=i("./node_modules/core-js/internals/promise-native-constructor.js"),ee=i("./node_modules/core-js/internals/promise-constructor-detection.js"),V=i("./node_modules/core-js/internals/new-promise-capability.js"),W="Promise",te=ee.CONSTRUCTOR,oe=ee.REJECTION_EVENT,O=ee.SUBCLASSING,z=P.getterFor(W),ne=P.set,Z=$&&$.prototype,q=$,Ae=Z,ve=w.TypeError,be=w.document,Ne=w.process,Te=V.f,De=Te,We=!!(be&&be.createEvent&&w.dispatchEvent),_e="unhandledrejection",de="rejectionhandled",Ut=0,dt=1,ot=2,ze=1,gt=2,et,It,vt,Tt,Se=function(Me){var ct;return H(Me)&&I(ct=Me.then)?ct:!1},pe=function(Me,ct){var nt=ct.value,ut=ct.state===dt,at=ut?Me.ok:Me.fail,Le=Me.resolve,lt=Me.reject,tt=Me.domain,Ve,it,jt;try{at?(ut||(ct.rejection===gt&&Xe(ct),ct.rejection=ze),at===!0?Ve=nt:(tt&&tt.enter(),Ve=at(nt),tt&&(tt.exit(),jt=!0)),Ve===Me.promise?lt(new ve("Promise-chain cycle")):(it=Se(Ve))?B(it,Ve,Le,lt):Le(Ve)):lt(nt)}catch(Pt){tt&&!jt&&tt.exit(),lt(Pt)}},Ie=function(Me,ct){Me.notified||(Me.notified=!0,U(function(){for(var nt=Me.reactions,ut;ut=nt.get();)pe(ut,Me);Me.notified=!1,ct&&!Me.rejection&&Ye(Me)}))},ke=function(Me,ct,nt){var ut,at;We?(ut=be.createEvent("Event"),ut.promise=ct,ut.reason=nt,ut.initEvent(Me,!1,!0),w.dispatchEvent(ut)):ut={promise:ct,reason:nt},!oe&&(at=w["on"+Me])?at(ut):Me===_e&&F("Unhandled promise rejection",nt)},Ye=function(Me){B(K,w,function(){var ct=Me.facade,nt=Me.value,ut=Pe(Me),at;if(ut&&(at=k(function(){f?Ne.emit("unhandledRejection",nt,ct):ke(_e,ct,nt)}),Me.rejection=f||Pe(Me)?gt:ze,at.error))throw at.value})},Pe=function(Me){return Me.rejection!==ze&&!Me.parent},Xe=function(Me){B(K,w,function(){var ct=Me.facade;f?Ne.emit("rejectionHandled",ct):ke(de,ct,Me.value)})},Ct=function(Me,ct,nt){return function(ut){Me(ct,ut,nt)}},bt=function(Me,ct,nt){Me.done||(Me.done=!0,nt&&(Me=nt),Me.value=ct,Me.state=ot,Ie(Me,!0))},ft=function(Me,ct,nt){if(!Me.done){Me.done=!0,nt&&(Me=nt);try{if(Me.facade===ct)throw new ve("Promise can't be resolved itself");var ut=Se(ct);ut?U(function(){var at={done:!1};try{B(ut,ct,Ct(ft,at,Me),Ct(bt,at,Me))}catch(Le){bt(at,Le,Me)}}):(Me.value=ct,Me.state=dt,Ie(Me,!1))}catch(at){bt({done:!1},at,Me)}}};if(te&&(q=function(ct){M(this,Ae),E(ct),B(et,this);var nt=z(this);try{ct(Ct(ft,nt),Ct(bt,nt))}catch(ut){bt(nt,ut)}},Ae=q.prototype,et=function(ct){ne(this,{type:W,done:!1,notified:!1,parent:!1,reactions:new T,rejection:!1,state:Ut,value:null})},et.prototype=p(Ae,"then",function(ct,nt){var ut=z(this),at=Te(D(this,q));return ut.parent=!0,at.ok=I(ct)?ct:!0,at.fail=I(nt)&&nt,at.domain=f?Ne.domain:void 0,ut.state===Ut?ut.reactions.add(at):U(function(){pe(at,ut)}),at.promise}),It=function(){var Me=new et,ct=z(Me);this.promise=Me,this.resolve=Ct(ft,ct),this.reject=Ct(bt,ct)},V.f=Te=function(Me){return Me===q||Me===vt?new It(Me):De(Me)},!h&&I($)&&Z!==Object.prototype)){Tt=Z.then,O||p(Z,"then",function(ct,nt){var ut=this;return new q(function(at,Le){B(Tt,ut,at,Le)}).then(ct,nt)},{unsafe:!0});try{delete Z.constructor}catch{}x&&x(Z,Ae)}d({global:!0,constructor:!0,wrap:!0,forced:te},{Promise:q}),vt=j.Promise,C(q,W,!1,!0),S(W)},"./node_modules/core-js/modules/es.promise.js":function(A,u,i){i("./node_modules/core-js/modules/es.promise.constructor.js"),i("./node_modules/core-js/modules/es.promise.all.js"),i("./node_modules/core-js/modules/es.promise.catch.js"),i("./node_modules/core-js/modules/es.promise.race.js"),i("./node_modules/core-js/modules/es.promise.reject.js"),i("./node_modules/core-js/modules/es.promise.resolve.js")},"./node_modules/core-js/modules/es.promise.race.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/function-call.js"),f=i("./node_modules/core-js/internals/a-callable.js"),w=i("./node_modules/core-js/internals/new-promise-capability.js"),j=i("./node_modules/core-js/internals/perform.js"),B=i("./node_modules/core-js/internals/iterate.js"),p=i("./node_modules/core-js/internals/promise-statics-incorrect-iteration.js");d({target:"Promise",stat:!0,forced:p},{race:function(C){var S=this,E=w.f(S),I=E.reject,H=j(function(){var M=f(S.resolve);B(C,function(D){h(M,S,D).then(E.resolve,I)})});return H.error&&I(H.value),E.promise}})},"./node_modules/core-js/modules/es.promise.reject.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/new-promise-capability.js"),f=i("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR;d({target:"Promise",stat:!0,forced:f},{reject:function(j){var B=h.f(this),p=B.reject;return p(j),B.promise}})},"./node_modules/core-js/modules/es.promise.resolve.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/get-built-in.js"),f=i("./node_modules/core-js/internals/is-pure.js"),w=i("./node_modules/core-js/internals/promise-native-constructor.js"),j=i("./node_modules/core-js/internals/promise-constructor-detection.js").CONSTRUCTOR,B=i("./node_modules/core-js/internals/promise-resolve.js"),p=h("Promise"),x=f&&!j;d({target:"Promise",stat:!0,forced:f||j},{resolve:function(S){return B(x&&this===p?w:this,S)}})},"./node_modules/core-js/modules/es.regexp.exec.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/regexp-exec.js");d({target:"RegExp",proto:!0,forced:/./.exec!==h},{exec:h})},"./node_modules/core-js/modules/es.regexp.test.js":function(A,u,i){i("./node_modules/core-js/modules/es.regexp.exec.js");var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/function-call.js"),f=i("./node_modules/core-js/internals/is-callable.js"),w=i("./node_modules/core-js/internals/an-object.js"),j=i("./node_modules/core-js/internals/to-string.js"),B=function(){var x=!1,C=/[ac]/;return C.exec=function(){return x=!0,/./.exec.apply(this,arguments)},C.test("abc")===!0&&x}(),p=/./.test;d({target:"RegExp",proto:!0,forced:!B},{test:function(x){var C=w(this),S=j(x),E=C.exec;if(!f(E))return h(p,C,S);var I=h(E,C,S);return I===null?!1:(w(I),!0)}})},"./node_modules/core-js/modules/es.regexp.to-string.js":function(A,u,i){var d=i("./node_modules/core-js/internals/function-name.js").PROPER,h=i("./node_modules/core-js/internals/define-built-in.js"),f=i("./node_modules/core-js/internals/an-object.js"),w=i("./node_modules/core-js/internals/to-string.js"),j=i("./node_modules/core-js/internals/fails.js"),B=i("./node_modules/core-js/internals/regexp-get-flags.js"),p="toString",x=RegExp.prototype,C=x[p],S=j(function(){return C.call({source:"a",flags:"b"})!=="/a/b"}),E=d&&C.name!==p;(S||E)&&h(x,p,function(){var H=f(this),M=w(H.source),D=w(B(H));return"/"+M+"/"+D},{unsafe:!0})},"./node_modules/core-js/modules/es.set.constructor.js":function(A,u,i){var d=i("./node_modules/core-js/internals/collection.js"),h=i("./node_modules/core-js/internals/collection-strong.js");d("Set",function(f){return function(){return f(this,arguments.length?arguments[0]:void 0)}},h)},"./node_modules/core-js/modules/es.set.js":function(A,u,i){i("./node_modules/core-js/modules/es.set.constructor.js")},"./node_modules/core-js/modules/es.string.iterator.js":function(A,u,i){var d=i("./node_modules/core-js/internals/string-multibyte.js").charAt,h=i("./node_modules/core-js/internals/to-string.js"),f=i("./node_modules/core-js/internals/internal-state.js"),w=i("./node_modules/core-js/internals/iterator-define.js"),j=i("./node_modules/core-js/internals/create-iter-result-object.js"),B="String Iterator",p=f.set,x=f.getterFor(B);w(String,"String",function(C){p(this,{type:B,string:h(C),index:0})},function(){var S=x(this),E=S.string,I=S.index,H;return I>=E.length?j(void 0,!0):(H=d(E,I),S.index+=H.length,j(H,!1))})},"./node_modules/core-js/modules/es.string.link.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/create-html.js"),f=i("./node_modules/core-js/internals/string-html-forced.js");d({target:"String",proto:!0,forced:f("link")},{link:function(j){return h(this,"a","href",j)}})},"./node_modules/core-js/modules/es.symbol.constructor.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/global-this.js"),f=i("./node_modules/core-js/internals/function-call.js"),w=i("./node_modules/core-js/internals/function-uncurry-this.js"),j=i("./node_modules/core-js/internals/is-pure.js"),B=i("./node_modules/core-js/internals/descriptors.js"),p=i("./node_modules/core-js/internals/symbol-constructor-detection.js"),x=i("./node_modules/core-js/internals/fails.js"),C=i("./node_modules/core-js/internals/has-own-property.js"),S=i("./node_modules/core-js/internals/object-is-prototype-of.js"),E=i("./node_modules/core-js/internals/an-object.js"),I=i("./node_modules/core-js/internals/to-indexed-object.js"),H=i("./node_modules/core-js/internals/to-property-key.js"),M=i("./node_modules/core-js/internals/to-string.js"),D=i("./node_modules/core-js/internals/create-property-descriptor.js"),K=i("./node_modules/core-js/internals/object-create.js"),U=i("./node_modules/core-js/internals/object-keys.js"),F=i("./node_modules/core-js/internals/object-get-own-property-names.js"),k=i("./node_modules/core-js/internals/object-get-own-property-names-external.js"),T=i("./node_modules/core-js/internals/object-get-own-property-symbols.js"),P=i("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),$=i("./node_modules/core-js/internals/object-define-property.js"),ee=i("./node_modules/core-js/internals/object-define-properties.js"),V=i("./node_modules/core-js/internals/object-property-is-enumerable.js"),W=i("./node_modules/core-js/internals/define-built-in.js"),te=i("./node_modules/core-js/internals/define-built-in-accessor.js"),oe=i("./node_modules/core-js/internals/shared.js"),O=i("./node_modules/core-js/internals/shared-key.js"),z=i("./node_modules/core-js/internals/hidden-keys.js"),ne=i("./node_modules/core-js/internals/uid.js"),Z=i("./node_modules/core-js/internals/well-known-symbol.js"),q=i("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),Ae=i("./node_modules/core-js/internals/well-known-symbol-define.js"),ve=i("./node_modules/core-js/internals/symbol-define-to-primitive.js"),be=i("./node_modules/core-js/internals/set-to-string-tag.js"),Ne=i("./node_modules/core-js/internals/internal-state.js"),Te=i("./node_modules/core-js/internals/array-iteration.js").forEach,De=O("hidden"),We="Symbol",_e="prototype",de=Ne.set,Ut=Ne.getterFor(We),dt=Object[_e],ot=h.Symbol,ze=ot&&ot[_e],gt=h.RangeError,et=h.TypeError,It=h.QObject,vt=P.f,Tt=$.f,Se=k.f,pe=V.f,Ie=w([].push),ke=oe("symbols"),Ye=oe("op-symbols"),Pe=oe("wks"),Xe=!It||!It[_e]||!It[_e].findChild,Ct=function(tt,Ve,it){var jt=vt(dt,Ve);jt&&delete dt[Ve],Tt(tt,Ve,it),jt&&tt!==dt&&Tt(dt,Ve,jt)},bt=B&&x(function(){return K(Tt({},"a",{get:function(){return Tt(this,"a",{value:7}).a}})).a!==7})?Ct:Tt,ft=function(tt,Ve){var it=ke[tt]=K(ze);return de(it,{type:We,tag:tt,description:Ve}),B||(it.description=Ve),it},Me=function(Ve,it,jt){Ve===dt&&Me(Ye,it,jt),E(Ve);var Pt=H(it);return E(jt),C(ke,Pt)?(jt.enumerable?(C(Ve,De)&&Ve[De][Pt]&&(Ve[De][Pt]=!1),jt=K(jt,{enumerable:D(0,!1)})):(C(Ve,De)||Tt(Ve,De,D(1,K(null))),Ve[De][Pt]=!0),bt(Ve,Pt,jt)):Tt(Ve,Pt,jt)},ct=function(Ve,it){E(Ve);var jt=I(it),Pt=U(jt).concat(lt(jt));return Te(Pt,function(nr){(!B||f(ut,jt,nr))&&Me(Ve,nr,jt[nr])}),Ve},nt=function(Ve,it){return it===void 0?K(Ve):ct(K(Ve),it)},ut=function(Ve){var it=H(Ve),jt=f(pe,this,it);return this===dt&&C(ke,it)&&!C(Ye,it)?!1:jt||!C(this,it)||!C(ke,it)||C(this,De)&&this[De][it]?jt:!0},at=function(Ve,it){var jt=I(Ve),Pt=H(it);if(!(jt===dt&&C(ke,Pt)&&!C(Ye,Pt))){var nr=vt(jt,Pt);return nr&&C(ke,Pt)&&!(C(jt,De)&&jt[De][Pt])&&(nr.enumerable=!0),nr}},Le=function(Ve){var it=Se(I(Ve)),jt=[];return Te(it,function(Pt){!C(ke,Pt)&&!C(z,Pt)&&Ie(jt,Pt)}),jt},lt=function(tt){var Ve=tt===dt,it=Se(Ve?Ye:I(tt)),jt=[];return Te(it,function(Pt){C(ke,Pt)&&(!Ve||C(dt,Pt))&&Ie(jt,ke[Pt])}),jt};p||(ot=function(){if(S(ze,this))throw new et("Symbol is not a constructor");var Ve=!arguments.length||arguments[0]===void 0?void 0:M(arguments[0]),it=ne(Ve),jt=function(Pt){var nr=this===void 0?h:this;nr===dt&&f(jt,Ye,Pt),C(nr,De)&&C(nr[De],it)&&(nr[De][it]=!1);var sr=D(1,Pt);try{bt(nr,it,sr)}catch(Qt){if(!(Qt instanceof gt))throw Qt;Ct(nr,it,sr)}};return B&&Xe&&bt(dt,it,{configurable:!0,set:jt}),ft(it,Ve)},ze=ot[_e],W(ze,"toString",function(){return Ut(this).tag}),W(ot,"withoutSetter",function(tt){return ft(ne(tt),tt)}),V.f=ut,$.f=Me,ee.f=ct,P.f=at,F.f=k.f=Le,T.f=lt,q.f=function(tt){return ft(Z(tt),tt)},B&&(te(ze,"description",{configurable:!0,get:function(){return Ut(this).description}}),j||W(dt,"propertyIsEnumerable",ut,{unsafe:!0}))),d({global:!0,constructor:!0,wrap:!0,forced:!p,sham:!p},{Symbol:ot}),Te(U(Pe),function(tt){Ae(tt)}),d({target:We,stat:!0,forced:!p},{useSetter:function(){Xe=!0},useSimple:function(){Xe=!1}}),d({target:"Object",stat:!0,forced:!p,sham:!B},{create:nt,defineProperty:Me,defineProperties:ct,getOwnPropertyDescriptor:at}),d({target:"Object",stat:!0,forced:!p},{getOwnPropertyNames:Le}),ve(),be(ot,We),z[De]=!0},"./node_modules/core-js/modules/es.symbol.description.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/descriptors.js"),f=i("./node_modules/core-js/internals/global-this.js"),w=i("./node_modules/core-js/internals/function-uncurry-this.js"),j=i("./node_modules/core-js/internals/has-own-property.js"),B=i("./node_modules/core-js/internals/is-callable.js"),p=i("./node_modules/core-js/internals/object-is-prototype-of.js"),x=i("./node_modules/core-js/internals/to-string.js"),C=i("./node_modules/core-js/internals/define-built-in-accessor.js"),S=i("./node_modules/core-js/internals/copy-constructor-properties.js"),E=f.Symbol,I=E&&E.prototype;if(h&&B(E)&&(!("description"in I)||E().description!==void 0)){var H={},M=function(){var $=arguments.length<1||arguments[0]===void 0?void 0:x(arguments[0]),ee=p(I,this)?new E($):$===void 0?E():E($);return $===""&&(H[ee]=!0),ee};S(M,E),M.prototype=I,I.constructor=M;var D=String(E("description detection"))==="Symbol(description detection)",K=w(I.valueOf),U=w(I.toString),F=/^Symbol\((.*)\)[^)]+$/,k=w("".replace),T=w("".slice);C(I,"description",{configurable:!0,get:function(){var $=K(this);if(j(H,$))return"";var ee=U($),V=D?T(ee,7,-1):k(ee,F,"$1");return V===""?void 0:V}}),d({global:!0,constructor:!0,forced:!0},{Symbol:M})}},"./node_modules/core-js/modules/es.symbol.for.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/get-built-in.js"),f=i("./node_modules/core-js/internals/has-own-property.js"),w=i("./node_modules/core-js/internals/to-string.js"),j=i("./node_modules/core-js/internals/shared.js"),B=i("./node_modules/core-js/internals/symbol-registry-detection.js"),p=j("string-to-symbol-registry"),x=j("symbol-to-string-registry");d({target:"Symbol",stat:!0,forced:!B},{for:function(C){var S=w(C);if(f(p,S))return p[S];var E=h("Symbol")(S);return p[S]=E,x[E]=S,E}})},"./node_modules/core-js/modules/es.symbol.iterator.js":function(A,u,i){var d=i("./node_modules/core-js/internals/well-known-symbol-define.js");d("iterator")},"./node_modules/core-js/modules/es.symbol.js":function(A,u,i){i("./node_modules/core-js/modules/es.symbol.constructor.js"),i("./node_modules/core-js/modules/es.symbol.for.js"),i("./node_modules/core-js/modules/es.symbol.key-for.js"),i("./node_modules/core-js/modules/es.json.stringify.js"),i("./node_modules/core-js/modules/es.object.get-own-property-symbols.js")},"./node_modules/core-js/modules/es.symbol.key-for.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/has-own-property.js"),f=i("./node_modules/core-js/internals/is-symbol.js"),w=i("./node_modules/core-js/internals/try-to-string.js"),j=i("./node_modules/core-js/internals/shared.js"),B=i("./node_modules/core-js/internals/symbol-registry-detection.js"),p=j("symbol-to-string-registry");d({target:"Symbol",stat:!0,forced:!B},{keyFor:function(C){if(!f(C))throw new TypeError(w(C)+" is not a symbol");if(h(p,C))return p[C]}})},"./node_modules/core-js/modules/esnext.iterator.constructor.js":function(A,u,i){i("./node_modules/core-js/modules/es.iterator.constructor.js")},"./node_modules/core-js/modules/esnext.iterator.for-each.js":function(A,u,i){i("./node_modules/core-js/modules/es.iterator.for-each.js")},"./node_modules/core-js/modules/esnext.iterator.map.js":function(A,u,i){i("./node_modules/core-js/modules/es.iterator.map.js")},"./node_modules/core-js/modules/esnext.set.add-all.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/a-set.js"),f=i("./node_modules/core-js/internals/set-helpers.js").add;d({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var j=h(this),B=0,p=arguments.length;B<p;B++)f(j,arguments[B]);return j}})},"./node_modules/core-js/modules/esnext.set.delete-all.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/a-set.js"),f=i("./node_modules/core-js/internals/set-helpers.js").remove;d({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var j=h(this),B=!0,p,x=0,C=arguments.length;x<C;x++)p=f(j,arguments[x]),B=B&&p;return!!B}})},"./node_modules/core-js/modules/esnext.set.difference.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/function-call.js"),f=i("./node_modules/core-js/internals/to-set-like.js"),w=i("./node_modules/core-js/internals/set-difference.js");d({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(B){return h(w,this,f(B))}})},"./node_modules/core-js/modules/esnext.set.every.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/function-bind-context.js"),f=i("./node_modules/core-js/internals/a-set.js"),w=i("./node_modules/core-js/internals/set-iterate.js");d({target:"Set",proto:!0,real:!0,forced:!0},{every:function(B){var p=f(this),x=h(B,arguments.length>1?arguments[1]:void 0);return w(p,function(C){if(!x(C,C,p))return!1},!0)!==!1}})},"./node_modules/core-js/modules/esnext.set.filter.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/function-bind-context.js"),f=i("./node_modules/core-js/internals/a-set.js"),w=i("./node_modules/core-js/internals/set-helpers.js"),j=i("./node_modules/core-js/internals/set-iterate.js"),B=w.Set,p=w.add;d({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(C){var S=f(this),E=h(C,arguments.length>1?arguments[1]:void 0),I=new B;return j(S,function(H){E(H,H,S)&&p(I,H)}),I}})},"./node_modules/core-js/modules/esnext.set.find.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/function-bind-context.js"),f=i("./node_modules/core-js/internals/a-set.js"),w=i("./node_modules/core-js/internals/set-iterate.js");d({target:"Set",proto:!0,real:!0,forced:!0},{find:function(B){var p=f(this),x=h(B,arguments.length>1?arguments[1]:void 0),C=w(p,function(S){if(x(S,S,p))return{value:S}},!0);return C&&C.value}})},"./node_modules/core-js/modules/esnext.set.intersection.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/function-call.js"),f=i("./node_modules/core-js/internals/to-set-like.js"),w=i("./node_modules/core-js/internals/set-intersection.js");d({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(B){return h(w,this,f(B))}})},"./node_modules/core-js/modules/esnext.set.is-disjoint-from.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/function-call.js"),f=i("./node_modules/core-js/internals/to-set-like.js"),w=i("./node_modules/core-js/internals/set-is-disjoint-from.js");d({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(B){return h(w,this,f(B))}})},"./node_modules/core-js/modules/esnext.set.is-subset-of.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/function-call.js"),f=i("./node_modules/core-js/internals/to-set-like.js"),w=i("./node_modules/core-js/internals/set-is-subset-of.js");d({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(B){return h(w,this,f(B))}})},"./node_modules/core-js/modules/esnext.set.is-superset-of.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/function-call.js"),f=i("./node_modules/core-js/internals/to-set-like.js"),w=i("./node_modules/core-js/internals/set-is-superset-of.js");d({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(B){return h(w,this,f(B))}})},"./node_modules/core-js/modules/esnext.set.join.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/function-uncurry-this.js"),f=i("./node_modules/core-js/internals/a-set.js"),w=i("./node_modules/core-js/internals/set-iterate.js"),j=i("./node_modules/core-js/internals/to-string.js"),B=h([].join),p=h([].push);d({target:"Set",proto:!0,real:!0,forced:!0},{join:function(C){var S=f(this),E=C===void 0?",":j(C),I=[];return w(S,function(H){p(I,H)}),B(I,E)}})},"./node_modules/core-js/modules/esnext.set.map.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/function-bind-context.js"),f=i("./node_modules/core-js/internals/a-set.js"),w=i("./node_modules/core-js/internals/set-helpers.js"),j=i("./node_modules/core-js/internals/set-iterate.js"),B=w.Set,p=w.add;d({target:"Set",proto:!0,real:!0,forced:!0},{map:function(C){var S=f(this),E=h(C,arguments.length>1?arguments[1]:void 0),I=new B;return j(S,function(H){p(I,E(H,H,S))}),I}})},"./node_modules/core-js/modules/esnext.set.reduce.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/a-callable.js"),f=i("./node_modules/core-js/internals/a-set.js"),w=i("./node_modules/core-js/internals/set-iterate.js"),j=TypeError;d({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(p){var x=f(this),C=arguments.length<2,S=C?void 0:arguments[1];if(h(p),w(x,function(E){C?(C=!1,S=E):S=p(S,E,E,x)}),C)throw new j("Reduce of empty set with no initial value");return S}})},"./node_modules/core-js/modules/esnext.set.some.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/function-bind-context.js"),f=i("./node_modules/core-js/internals/a-set.js"),w=i("./node_modules/core-js/internals/set-iterate.js");d({target:"Set",proto:!0,real:!0,forced:!0},{some:function(B){var p=f(this),x=h(B,arguments.length>1?arguments[1]:void 0);return w(p,function(C){if(x(C,C,p))return!0},!0)===!0}})},"./node_modules/core-js/modules/esnext.set.symmetric-difference.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/function-call.js"),f=i("./node_modules/core-js/internals/to-set-like.js"),w=i("./node_modules/core-js/internals/set-symmetric-difference.js");d({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(B){return h(w,this,f(B))}})},"./node_modules/core-js/modules/esnext.set.union.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/function-call.js"),f=i("./node_modules/core-js/internals/to-set-like.js"),w=i("./node_modules/core-js/internals/set-union.js");d({target:"Set",proto:!0,real:!0,forced:!0},{union:function(B){return h(w,this,f(B))}})},"./node_modules/core-js/modules/web.dom-collections.for-each.js":function(A,u,i){var d=i("./node_modules/core-js/internals/global-this.js"),h=i("./node_modules/core-js/internals/dom-iterables.js"),f=i("./node_modules/core-js/internals/dom-token-list-prototype.js"),w=i("./node_modules/core-js/internals/array-for-each.js"),j=i("./node_modules/core-js/internals/create-non-enumerable-property.js"),B=function(x){if(x&&x.forEach!==w)try{j(x,"forEach",w)}catch{x.forEach=w}};for(var p in h)h[p]&&B(d[p]&&d[p].prototype);B(f)},"./node_modules/core-js/modules/web.dom-collections.iterator.js":function(A,u,i){var d=i("./node_modules/core-js/internals/global-this.js"),h=i("./node_modules/core-js/internals/dom-iterables.js"),f=i("./node_modules/core-js/internals/dom-token-list-prototype.js"),w=i("./node_modules/core-js/modules/es.array.iterator.js"),j=i("./node_modules/core-js/internals/create-non-enumerable-property.js"),B=i("./node_modules/core-js/internals/set-to-string-tag.js"),p=i("./node_modules/core-js/internals/well-known-symbol.js"),x=p("iterator"),C=w.values,S=function(I,H){if(I){if(I[x]!==C)try{j(I,x,C)}catch{I[x]=C}if(B(I,H,!0),h[H]){for(var M in w)if(I[M]!==w[M])try{j(I,M,w[M])}catch{I[M]=w[M]}}}};for(var E in h)S(d[E]&&d[E].prototype,E);S(f,"DOMTokenList")},"./node_modules/core-js/modules/web.set-interval.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/global-this.js"),f=i("./node_modules/core-js/internals/schedulers-fix.js"),w=f(h.setInterval,!0);d({global:!0,bind:!0,forced:h.setInterval!==w},{setInterval:w})},"./node_modules/core-js/modules/web.set-timeout.js":function(A,u,i){var d=i("./node_modules/core-js/internals/export.js"),h=i("./node_modules/core-js/internals/global-this.js"),f=i("./node_modules/core-js/internals/schedulers-fix.js"),w=f(h.setTimeout,!0);d({global:!0,bind:!0,forced:h.setTimeout!==w},{setTimeout:w})},"./node_modules/core-js/modules/web.timers.js":function(A,u,i){i("./node_modules/core-js/modules/web.set-interval.js"),i("./node_modules/core-js/modules/web.set-timeout.js")},"./src/plugin/hyperlinks.js":function(A,u,i){i.r(u),i("./node_modules/core-js/modules/es.object.to-string.js"),i("./node_modules/core-js/modules/es.string.link.js"),i("./node_modules/core-js/modules/esnext.iterator.constructor.js"),i("./node_modules/core-js/modules/esnext.iterator.for-each.js"),i("./node_modules/core-js/modules/web.dom-collections.for-each.js");var d=i("./src/worker.js"),h=i("./src/utils.js"),f=[],w={toContainer:d.default.prototype.toContainer,toPdf:d.default.prototype.toPdf};d.default.prototype.toContainer=function(){return w.toContainer.call(this).then(function(){if(this.opt.enableLinks){var p=this.prop.container,x=p.querySelectorAll("a"),C=(0,h.unitConvert)(p.getBoundingClientRect(),this.prop.pageSize.k);f=[],Array.prototype.forEach.call(x,function(S){for(var E=S.getClientRects(),I=0;I<E.length;I++){var H=(0,h.unitConvert)(E[I],this.prop.pageSize.k);H.left-=C.left,H.top-=C.top;var M=Math.floor(H.top/this.prop.pageSize.inner.height)+1,D=this.opt.margin[0]+H.top%this.prop.pageSize.inner.height,K=this.opt.margin[1]+H.left;f.push({page:M,top:D,left:K,clientRect:H,link:S})}},this)}})},d.default.prototype.toPdf=function(){return w.toPdf.call(this).then(function(){if(this.opt.enableLinks){f.forEach(function(x){this.prop.pdf.setPage(x.page),this.prop.pdf.link(x.left,x.top,x.clientRect.width,x.clientRect.height,{url:x.link.href})},this);var p=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(p)}})}},"./src/plugin/jspdf-plugin.js":function(A,u,i){i.r(u),i("./node_modules/core-js/modules/es.symbol.js"),i("./node_modules/core-js/modules/es.symbol.description.js"),i("./node_modules/core-js/modules/es.symbol.iterator.js"),i("./node_modules/core-js/modules/es.array.iterator.js"),i("./node_modules/core-js/modules/es.object.to-string.js"),i("./node_modules/core-js/modules/es.string.iterator.js"),i("./node_modules/core-js/modules/web.dom-collections.iterator.js");var d=i("jspdf");function h(f){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},h(f)}d.jsPDF.getPageSize=function(f,w,j){if(h(f)==="object"){var B=f;f=B.orientation,w=B.unit||w,j=B.format||j}w=w||"mm",j=j||"a4",f=(""+(f||"P")).toLowerCase();var p=(""+j).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(w){case"pt":var C=1;break;case"mm":var C=72/25.4;break;case"cm":var C=72/2.54;break;case"in":var C=72;break;case"px":var C=72/96;break;case"pc":var C=12;break;case"em":var C=12;break;case"ex":var C=6;break;default:throw"Invalid unit: "+w}if(x.hasOwnProperty(p))var S=x[p][1]/C,E=x[p][0]/C;else try{var S=j[1],E=j[0]}catch{throw new Error("Invalid format: "+j)}if(f==="p"||f==="portrait"){if(f="p",E>S){var I=E;E=S,S=I}}else if(f==="l"||f==="landscape"){if(f="l",S>E){var I=E;E=S,S=I}}else throw"Invalid orientation: "+f;var H={width:E,height:S,unit:w,k:C};return H},u.default=d.jsPDF},"./src/plugin/pagebreaks.js":function(A,u,i){i.r(u),i("./node_modules/core-js/modules/es.array.concat.js"),i("./node_modules/core-js/modules/es.array.join.js"),i("./node_modules/core-js/modules/es.array.slice.js"),i("./node_modules/core-js/modules/es.object.keys.js"),i("./node_modules/core-js/modules/es.object.to-string.js"),i("./node_modules/core-js/modules/esnext.iterator.constructor.js"),i("./node_modules/core-js/modules/esnext.iterator.for-each.js"),i("./node_modules/core-js/modules/web.dom-collections.for-each.js");var d=i("./src/worker.js"),h=i("./src/utils.js"),f={toContainer:d.default.prototype.toContainer};d.default.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},d.default.prototype.toContainer=function(){return f.toContainer.call(this).then(function(){var B=this.prop.container,p=this.prop.pageSize.inner.px.height,x=[].concat(this.opt.pagebreak.mode),C={avoidAll:x.indexOf("avoid-all")!==-1,css:x.indexOf("css")!==-1,legacy:x.indexOf("legacy")!==-1},S={},E=this;["before","after","avoid"].forEach(function(M){var D=C.avoidAll&&M==="avoid";S[M]=D?[]:[].concat(E.opt.pagebreak[M]||[]),S[M].length>0&&(S[M]=Array.prototype.slice.call(B.querySelectorAll(S[M].join(", "))))});var I=B.querySelectorAll(".html2pdf__page-break");I=Array.prototype.slice.call(I);var H=B.querySelectorAll("*");Array.prototype.forEach.call(H,function(D){var K={before:!1,after:C.legacy&&I.indexOf(D)!==-1,avoid:C.avoidAll};if(C.css){var U=window.getComputedStyle(D),F=["always","page","left","right"],k=["avoid","avoid-page"];K={before:K.before||F.indexOf(U.breakBefore||U.pageBreakBefore)!==-1,after:K.after||F.indexOf(U.breakAfter||U.pageBreakAfter)!==-1,avoid:K.avoid||k.indexOf(U.breakInside||U.pageBreakInside)!==-1}}Object.keys(K).forEach(function(W){K[W]=K[W]||S[W].indexOf(D)!==-1});var T=D.getBoundingClientRect();if(K.avoid&&!K.before){var P=Math.floor(T.top/p),$=Math.floor(T.bottom/p),ee=Math.abs(T.bottom-T.top)/p;$!==P&&ee<=1&&(K.before=!0)}if(K.before){var V=(0,h.createElement)("div",{style:{display:"block",height:p-T.top%p+"px"}});D.parentNode.insertBefore(V,D)}if(K.after){var V=(0,h.createElement)("div",{style:{display:"block",height:p-T.bottom%p+"px"}});D.parentNode.insertBefore(V,D.nextSibling)}})})}},"./src/snapdom/clone.js":function(A,u,i){i.r(u),i.d(u,{deepCloneBasic:function(){return j}}),i("./node_modules/core-js/modules/es.symbol.js"),i("./node_modules/core-js/modules/es.symbol.description.js"),i("./node_modules/core-js/modules/es.symbol.iterator.js"),i("./node_modules/core-js/modules/es.array.concat.js"),i("./node_modules/core-js/modules/es.array.from.js"),i("./node_modules/core-js/modules/es.array.iterator.js"),i("./node_modules/core-js/modules/es.array.slice.js"),i("./node_modules/core-js/modules/es.function.name.js"),i("./node_modules/core-js/modules/es.object.to-string.js"),i("./node_modules/core-js/modules/es.regexp.exec.js"),i("./node_modules/core-js/modules/es.regexp.test.js"),i("./node_modules/core-js/modules/es.regexp.to-string.js"),i("./node_modules/core-js/modules/es.set.js"),i("./node_modules/core-js/modules/es.string.iterator.js"),i("./node_modules/core-js/modules/esnext.set.add-all.js"),i("./node_modules/core-js/modules/esnext.set.delete-all.js"),i("./node_modules/core-js/modules/esnext.set.difference.js"),i("./node_modules/core-js/modules/esnext.set.every.js"),i("./node_modules/core-js/modules/esnext.set.filter.js"),i("./node_modules/core-js/modules/esnext.set.find.js"),i("./node_modules/core-js/modules/esnext.set.intersection.js"),i("./node_modules/core-js/modules/esnext.set.is-disjoint-from.js"),i("./node_modules/core-js/modules/esnext.set.is-subset-of.js"),i("./node_modules/core-js/modules/esnext.set.is-superset-of.js"),i("./node_modules/core-js/modules/esnext.set.join.js"),i("./node_modules/core-js/modules/esnext.set.map.js"),i("./node_modules/core-js/modules/esnext.set.reduce.js"),i("./node_modules/core-js/modules/esnext.set.some.js"),i("./node_modules/core-js/modules/esnext.set.symmetric-difference.js"),i("./node_modules/core-js/modules/esnext.set.union.js"),i("./node_modules/core-js/modules/web.dom-collections.iterator.js");function d(B,p){var x=typeof Symbol<"u"&&B[Symbol.iterator]||B["@@iterator"];if(!x){if(Array.isArray(B)||(x=h(B))||p){x&&(B=x);var C=0,S=function(){};return{s:S,n:function(){return C>=B.length?{done:!0}:{done:!1,value:B[C++]}},e:function(D){throw D},f:S}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var E,I=!0,H=!1;return{s:function(){x=x.call(B)},n:function(){var D=x.next();return I=D.done,D},e:function(D){H=!0,E=D},f:function(){try{I||x.return==null||x.return()}finally{if(H)throw E}}}}function h(B,p){if(B){if(typeof B=="string")return f(B,p);var x={}.toString.call(B).slice(8,-1);return x==="Object"&&B.constructor&&(x=B.constructor.name),x==="Map"||x==="Set"?Array.from(B):x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?f(B,p):void 0}}function f(B,p){(p==null||p>B.length)&&(p=B.length);for(var x=0,C=Array(p);x<p;x++)C[x]=B[x];return C}function w(B,p){try{var x=B.currentSrc||B.src||"";if(!x)return;p.setAttribute("src",x),p.removeAttribute("srcset"),p.removeAttribute("sizes"),p.loading="eager",p.decoding="sync"}catch{}}function j(B){if(!B)throw new Error("Invalid node");var p=new Set,x=null;if(B.nodeType===Node.TEXT_NODE||B.nodeType!==Node.ELEMENT_NODE)return B.cloneNode(!0);if(B.tagName==="IFRAME"){var C=document.createElement("div");return C.style.cssText="width:".concat(B.offsetWidth,"px;height:").concat(B.offsetHeight,"px;background-image:repeating-linear-gradient(45deg,#ddd,#ddd 5px,#f9f9f9 5px,#f9f9f9 10px);display:flex;align-items:center;justify-content:center;font-size:12px;color:#555;border:1px solid #aaa;"),C}if(B.tagName==="CANVAS"){var S=B.toDataURL(),E=document.createElement("img");return E.src=S,E.width=B.width,E.height=B.height,E}var I;try{I=B.cloneNode(!1),B.tagName==="IMG"&&w(B,I)}catch(We){throw console.error("[Snapdom] Failed to clone node:",B,We),We}if(B instanceof HTMLTextAreaElement){I.textContent=B.value,I.value=B.value;var H=B.getBoundingClientRect();return I.style.boxSizing="border-box",I.style.width="".concat(H.width,"px"),I.style.height="".concat(H.height,"px"),I}if(B instanceof HTMLInputElement&&(B.hasAttribute("value")&&(I.value=B.value,I.setAttribute("value",B.value)),B.checked!==void 0&&(I.checked=B.checked,B.checked&&I.setAttribute("checked",""),B.indeterminate&&(I.indeterminate=B.indeterminate))),B instanceof HTMLSelectElement&&(x=B.value),B.shadowRoot){var M=Array.from(B.shadowRoot.querySelectorAll("slot")).length>0;if(!M){var D=document.createDocumentFragment(),K=d(B.shadowRoot.childNodes),U;try{for(K.s();!(U=K.n()).done;){var F=U.value;if(!(F.nodeType===Node.ELEMENT_NODE&&F.tagName==="STYLE")){var k=j(F);k&&D.appendChild(k)}}}catch(We){K.e(We)}finally{K.f()}I.appendChild(D)}}if(B.tagName==="SLOT"){var T,P=((T=B.assignedNodes)===null||T===void 0?void 0:T.call(B,{flatten:!0}))||[],$=P.length>0?P:Array.from(B.childNodes),ee=document.createDocumentFragment(),V=d($),W;try{for(V.s();!(W=V.n()).done;){var te=W.value,oe=j(te);oe&&ee.appendChild(oe)}}catch(We){V.e(We)}finally{V.f()}return ee}var O=d(B.childNodes),z;try{for(O.s();!(z=O.n()).done;){var ne=z.value;if(!p.has(ne)){var Z=j(ne);Z&&I.appendChild(Z)}}}catch(We){O.e(We)}finally{O.f()}if(x!==null&&I instanceof HTMLSelectElement){I.value=x;var q=d(I.options),Ae;try{for(q.s();!(Ae=q.n()).done;){var ve=Ae.value;ve.value===x?ve.setAttribute("selected",""):ve.removeAttribute("selected")}}catch(We){q.e(We)}finally{q.f()}}var be=B.scrollLeft,Ne=B.scrollTop,Te=be||Ne;if(Te&&I instanceof HTMLElement){I.style.overflow="hidden",I.style.scrollbarWidth="none",I.style.msOverflowStyle="none";var De=document.createElement("div");for(De.style.transform="translate(".concat(-be,"px, ").concat(-Ne,"px)"),De.style.willChange="transform",De.style.display="inline-block",De.style.width="100%";I.firstChild;)De.appendChild(I.firstChild);I.appendChild(De)}return I}},"./src/utils.js":function(A,u,i){i.r(u),i.d(u,{createElement:function(){return f},objType:function(){return h},toPx:function(){return j},unitConvert:function(){return w}}),i("./node_modules/core-js/modules/es.symbol.js"),i("./node_modules/core-js/modules/es.symbol.description.js"),i("./node_modules/core-js/modules/es.symbol.iterator.js"),i("./node_modules/core-js/modules/es.array.iterator.js"),i("./node_modules/core-js/modules/es.number.constructor.js"),i("./node_modules/core-js/modules/es.object.to-string.js"),i("./node_modules/core-js/modules/es.string.iterator.js"),i("./node_modules/core-js/modules/web.dom-collections.iterator.js");function d(B){"@babel/helpers - typeof";return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},d(B)}var h=function(p){var x=d(p);return x==="undefined"?"undefined":x==="string"||p instanceof String?"string":x==="number"||p instanceof Number?"number":x==="function"||p instanceof Function?"function":p&&p.constructor===Array?"array":p&&p.nodeType===1?"element":x==="object"?"object":"unknown"},f=function(p,x){var C=document.createElement(p);if(x.className&&(C.className=x.className),x.innerHTML){C.innerHTML=x.innerHTML;for(var S=C.getElementsByTagName("script"),E=S.length;E-- >0;null)S[E].parentNode.removeChild(S[E])}for(var I in x.style)C.style[I]=x.style[I];return C},w=function(p,x){if(h(p)==="number")return p*72/96/x;var C={};for(var S in p)C[S]=p[S]*72/96/x;return C},j=function(p,x){return Math.floor(p*x/72*96)}},"./src/worker.js":function(A,u,i){i.r(u),i("./node_modules/core-js/modules/es.array.concat.js"),i("./node_modules/core-js/modules/es.array.map.js"),i("./node_modules/core-js/modules/es.function.name.js"),i("./node_modules/core-js/modules/es.json.stringify.js"),i("./node_modules/core-js/modules/es.object.assign.js"),i("./node_modules/core-js/modules/es.object.keys.js"),i("./node_modules/core-js/modules/es.object.to-string.js"),i("./node_modules/core-js/modules/es.promise.js"),i("./node_modules/core-js/modules/es.regexp.to-string.js"),i("./node_modules/core-js/modules/esnext.iterator.constructor.js"),i("./node_modules/core-js/modules/esnext.iterator.for-each.js"),i("./node_modules/core-js/modules/esnext.iterator.map.js"),i("./node_modules/core-js/modules/web.dom-collections.for-each.js"),i("./node_modules/core-js/modules/web.timers.js");var d=i("jspdf"),h=i("html2canvas"),f=i.n(h),w=i("./src/snapdom/clone.js"),j=i("./src/utils.js"),B=function p(x){var C=Object.assign(p.convert(Promise.resolve()),JSON.parse(JSON.stringify(p.template))),S=p.convert(Promise.resolve(),C);return S=S.setProgress(1,p,1,[p]),S=S.set(x),S};B.prototype=Object.create(Promise.prototype),B.prototype.constructor=B,B.convert=function(x,C){return x.__proto__=C||B.prototype,x},B.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,html2canvas:{},jsPDF:{}}},B.prototype.from=function(x,C){function S(E){switch((0,j.objType)(E)){case"string":return"string";case"element":return E.nodeName.toLowerCase&&E.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}return this.then(function(){switch(C=C||S(x),C){case"string":return this.set({src:(0,j.createElement)("div",{innerHTML:x})});case"element":return this.set({src:x});case"canvas":return this.set({canvas:x});case"img":return this.set({img:x});default:return this.error("Unknown source type.")}})},B.prototype.to=function(x){switch(x){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},B.prototype.toContainer=function(){var x=[function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(x).then(function(){var S={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},E={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};S.opacity=0;var I=(0,w.deepCloneBasic)(this.prop.src);return this.prop.overlay=(0,j.createElement)("div",{className:"html2pdf__overlay",style:S}),this.prop.container=(0,j.createElement)("div",{className:"html2pdf__container",style:E}),this.prop.container.appendChild(I),this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),new Promise(function(H){return setTimeout(H,10)})})},B.prototype.toCanvas=function(){var x=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(x).then(function(){var S=Object.assign({},this.opt.html2canvas);return delete S.onrendered,f()(this.prop.container,S)}).then(function(S){var E=this.opt.html2canvas.onrendered||function(){};E(S),this.prop.canvas=S,document.body.removeChild(this.prop.overlay)})},B.prototype.toImg=function(){var x=[function(){return this.prop.canvas||this.toCanvas()}];return this.thenList(x).then(function(){var S=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=S})},B.prototype.toPdf=function(){var x=[function(){return this.prop.canvas||this.toCanvas()},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(x).then(function(){var S=this.prop.canvas,E=this.opt,I=S.height,H=Math.floor(S.width*this.prop.pageSize.inner.ratio),M=Math.ceil(I/H),D=this.prop.pageSize.inner.height,K=document.createElement("canvas"),U=K.getContext("2d");K.width=S.width,K.height=H,this.prop.pdf=this.prop.pdf||new d.jsPDF(E.jsPDF);for(var F=0;F<M;F++){F===M-1&&I%H!==0&&(K.height=I%H,D=K.height*this.prop.pageSize.inner.width/K.width);var k=K.width,T=K.height;U.fillStyle="white",U.fillRect(0,0,k,T),U.drawImage(S,0,F*H,k,T,0,0,k,T),F&&this.prop.pdf.addPage();var P=K.toDataURL("image/"+E.image.type,E.image.quality);this.prop.pdf.addImage(P,E.image.type,E.margin[1],E.margin[0],this.prop.pageSize.inner.width,D)}})},B.prototype.output=function(x,C,S){return S=S||"pdf",S.toLowerCase()==="img"||S.toLowerCase()==="image"?this.outputImg(x,C):this.outputPdf(x,C)},B.prototype.outputPdf=function(x,C){var S=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(S).then(function(){return this.prop.pdf.output(x,C)})},B.prototype.outputImg=function(x,C){var S=[function(){return this.prop.img||this.toImg()}];return this.thenList(S).then(function(){switch(x){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+x+'" is not supported.'}})},B.prototype.save=function(x){var C=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(C).set(x?{filename:x}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},B.prototype.set=function(x){if((0,j.objType)(x)!=="object")return this;var C=Object.keys(x||{}).map(function(S){switch(S){case"margin":return this.setMargin.bind(this,x.margin);case"jsPDF":return function(){return this.opt.jsPDF=x.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,x.pageSize);default:return S in B.template.prop?function(){this.prop[S]=x[S]}:function(){this.opt[S]=x[S]}}},this);return this.then(function(){return this.thenList(C)})},B.prototype.get=function(x,C){return this.then(function(){var E=x in B.template.prop?this.prop[x]:this.opt[x];return C?C(E):E})},B.prototype.setMargin=function(x){return this.then(function(){switch((0,j.objType)(x)){case"number":x=[x,x,x,x];case"array":if(x.length===2&&(x=[x[0],x[1],x[0],x[1]]),x.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=x}).then(this.setPageSize)},B.prototype.setPageSize=function(x){return this.then(function(){x=x||d.jsPDF.getPageSize(this.opt.jsPDF),x.hasOwnProperty("inner")||(x.inner={width:x.width-this.opt.margin[1]-this.opt.margin[3],height:x.height-this.opt.margin[0]-this.opt.margin[2]},x.inner.px={width:(0,j.toPx)(x.inner.width,x.k),height:(0,j.toPx)(x.inner.height,x.k)},x.inner.ratio=x.inner.height/x.inner.width),this.prop.pageSize=x})},B.prototype.setProgress=function(x,C,S,E){return x!=null&&(this.progress.val=x),C!=null&&(this.progress.state=C),S!=null&&(this.progress.n=S),E!=null&&(this.progress.stack=E),this.progress.ratio=this.progress.val/this.progress.state,this},B.prototype.updateProgress=function(x,C,S,E){return this.setProgress(x?this.progress.val+x:null,C||null,S?this.progress.n+S:null,E?this.progress.stack.concat(E):null)},B.prototype.then=function(x,C){var S=this;return this.thenCore(x,C,function(I,H){return S.updateProgress(null,null,1,[I]),Promise.prototype.then.call(this,function(D){return S.updateProgress(null,I),D}).then(I,H).then(function(D){return S.updateProgress(1),D})})},B.prototype.thenCore=function(x,C,S){S=S||Promise.prototype.then;var E=this;x&&(x=x.bind(E)),C&&(C=C.bind(E));var I=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise",H=I?E:B.convert(Object.assign({},E),Promise.prototype),M=S.call(H,x,C);return B.convert(M,E.__proto__)},B.prototype.thenExternal=function(x,C){return Promise.prototype.then.call(this,x,C)},B.prototype.thenList=function(x){var C=this;return x.forEach(function(E){C=C.thenCore(E)}),C},B.prototype.catch=function(p){p&&(p=p.bind(this));var x=Promise.prototype.catch.call(this,p);return B.convert(x,this)},B.prototype.catchExternal=function(x){return Promise.prototype.catch.call(this,x)},B.prototype.error=function(x){return this.then(function(){throw new Error(x)})},B.prototype.using=B.prototype.set,B.prototype.saveAs=B.prototype.save,B.prototype.export=B.prototype.output,B.prototype.run=B.prototype.then,u.default=B},html2canvas:function(A){A.exports=n},jspdf:function(A){A.exports=r}},o={};function l(A){var u=o[A];if(u!==void 0)return u.exports;var i=o[A]={exports:{}};return a[A].call(i.exports,i,i.exports,l),i.exports}(function(){l.n=function(A){var u=A&&A.__esModule?function(){return A.default}:function(){return A};return l.d(u,{a:u}),u}})(),function(){l.d=function(A,u){for(var i in u)l.o(u,i)&&!l.o(A,i)&&Object.defineProperty(A,i,{enumerable:!0,get:u[i]})}}(),function(){l.o=function(A,u){return Object.prototype.hasOwnProperty.call(A,u)}}(),function(){l.r=function(A){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})}}();var c={};return function(){/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/l.r(c);var A=l("./src/worker.js");l("./src/plugin/jspdf-plugin.js"),l("./src/plugin/pagebreaks.js"),l("./src/plugin/hyperlinks.js");var u=function i(d,h){var f=new i.Worker(h);return d?f.from(d).save():f};u.Worker=A.default,c.default=u}(),c=c.default,c}()})})(Tj);var n6=Tj.exports;const tx=M5(n6);function s6({quotation:t,onClose:e}){const{currentCompany:r}=ir(),{user:n}=Jr(),a=Y.useRef(null),[o,l]=Y.useState(!1),[c,A]=Y.useState(""),[u,i]=Y.useState(""),[d,h]=Y.useState(!1),[f,w]=Y.useState(null);Y.useEffect(()=>{const S=a.current;if(!S)return;const E=S.getContext("2d");E&&(E.strokeStyle="#000",E.lineWidth=2,E.lineCap="round",E.lineJoin="round")},[]);const j=S=>{l(!0);const E=a.current;if(!E)return;const I=E.getContext("2d");if(!I)return;const H=E.getBoundingClientRect();let M,D;"touches"in S?(M=S.touches[0].clientX-H.left,D=S.touches[0].clientY-H.top):(M=S.clientX-H.left,D=S.clientY-H.top),I.beginPath(),I.moveTo(M,D)},B=S=>{if(!o)return;const E=a.current;if(!E)return;const I=E.getContext("2d");if(!I)return;const H=E.getBoundingClientRect();let M,D;"touches"in S?(M=S.touches[0].clientX-H.left,D=S.touches[0].clientY-H.top):(M=S.clientX-H.left,D=S.clientY-H.top),I.lineTo(M,D),I.stroke()},p=()=>{l(!1)},x=()=>{const S=a.current;if(!S)return;const E=S.getContext("2d");E&&E.clearRect(0,0,S.width,S.height)},C=async S=>{if(S.preventDefault(),!c.trim()){w({type:"error",text:"Please enter your name"});return}const E=a.current;if(!E)return;const I=E.getContext("2d");if(!I)return;const M=I.getImageData(0,0,E.width,E.height).data;let D=!1;for(let K=0;K<M.length;K+=4)if(M[K+3]>0){D=!0;break}if(!D){w({type:"error",text:"Please provide a signature"});return}h(!0),w(null);try{const K=E.toDataURL("image/png"),{error:U}=await ge.from("quotations").update({status:"signed",signed_by:c,signed_at:new Date().toISOString(),signature_image:K,notes:u?`${t.notes||""}

Acceptance remarks: ${u}`:t.notes}).eq("id",t.id);if(U)throw U;if(t.lead_id){const{data:F}=await ge.from("pipeline_stages").select("id").eq("company_id",r==null?void 0:r.id).eq("name","Confirmed").maybeSingle();F&&await ge.from("leads").update({stage_id:F.id}).eq("id",t.lead_id)}r&&n&&await ge.from("audit_logs").insert({company_id:r.id,user_id:n.id,action:"accept",entity_type:"quotation",entity_id:t.id,changed_fields:{signed_by:c,signed_at:new Date().toISOString()}}),w({type:"success",text:"Quotation accepted successfully!"}),setTimeout(()=>e(),1500)}catch(K){w({type:"error",text:K.message||"Failed to accept quotation"})}finally{h(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Accept & Sign Quotation"}),s.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600",children:s.jsx(mr,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:C,className:"p-6",children:[f&&s.jsx("div",{className:`mb-4 p-3 rounded-lg ${f.type==="success"?"bg-emerald-50 text-emerald-800":"bg-red-50 text-red-800"}`,children:f.text}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Full Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:c,onChange:S=>A(S.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter your full name",required:!0})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700",children:["Signature ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("button",{type:"button",onClick:x,className:"flex items-center gap-1 text-xs text-slate-600 hover:text-slate-900",children:[s.jsx(Uj,{className:"w-3 h-3"}),"Clear"]})]}),s.jsx("div",{className:"border-2 border-slate-300 rounded-lg bg-white",children:s.jsx("canvas",{ref:a,width:600,height:200,className:"w-full cursor-crosshair touch-none",onMouseDown:j,onMouseMove:B,onMouseUp:p,onMouseLeave:p,onTouchStart:j,onTouchMove:B,onTouchEnd:p})}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Draw your signature above"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Remarks (Optional)"}),s.jsx("textarea",{value:u,onChange:S=>i(S.target.value),rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Add any remarks or acceptance notes..."})]}),s.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 mb-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-2",children:"By signing, you agree to:"}),s.jsxs("ul",{className:"text-xs text-slate-700 space-y-1",children:[s.jsx("li",{children:" Accept the terms and conditions of this quotation"}),s.jsx("li",{children:" Confirm the pricing and specifications as stated"}),s.jsx("li",{children:" Proceed with the event booking as per the agreed terms"})]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-slate-700 border border-slate-300 rounded-lg hover:bg-slate-50",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:d,className:"flex items-center gap-2 px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50",children:[s.jsx(Fs,{className:"w-4 h-4"}),d?"Processing...":"Accept & Sign"]})]})]})]})})}function a6({quotationId:t,customerEmail:e,customerName:r,quotationNumber:n,onClose:a,onSuccess:o}){const{user:l}=Jr(),{currentCompany:c}=ir(),{isConnected:A,sendEmail:u}=km(),[i,d]=Y.useState(!1),[h,f]=Y.useState(null),[w,j]=Y.useState({to:e,subject:`Quotation ${n} from ${(c==null?void 0:c.name)||"Our Company"}`,body:`Dear ${r},

Please find attached quotation ${n} for your review.

We look forward to working with you on this event.

Best regards,
${(c==null?void 0:c.name)||"Our Team"}`}),B=()=>{window.open("https://hsftnenijlcpqbqzpyhk.supabase.co/functions/v1/google-oauth-start","google-oauth","width=520,height=640,menubar=no,toolbar=no,location=no,status=no")},p=async C=>{if(C.preventDefault(),!!A){d(!0),f(null);try{const S=await x();await u({to:[w.to],subject:w.subject,body:w.body.replace(/\n/g,"<br>"),attachments:[{filename:`Quotation_${n}.pdf`,content:S,mimeType:"application/pdf"}]}),await ge.from("email_messages").insert({company_id:c==null?void 0:c.id,sender_user_id:l==null?void 0:l.id,direction:"outbound",from_address:(l==null?void 0:l.email)||"",to_addresses:[w.to],subject:w.subject,body:w.body,entity_type:"quotation",entity_id:t,sent_at:new Date().toISOString()}),await ge.from("quotations").update({status:"sent"}).eq("id",t),c&&l&&await ge.from("audit_logs").insert({company_id:c.id,user_id:l.id,action:"send",entity_type:"quotation",entity_id:t}),f({type:"success",text:"Quotation sent successfully!"}),setTimeout(()=>{o&&o(),a()},1500)}catch(S){console.error("Error sending email:",S),f({type:"error",text:S.message||"Failed to send quotation"})}finally{d(!1)}}},x=async()=>{const{data:C}=await ge.from("quotations").select("*, quotation_lines(*), customers(*)").eq("id",t).single();if(!C)throw new Error("Quotation not found");const S=document.createElement("canvas");S.width=800,S.height=1100;const E=S.getContext("2d");if(!E)throw new Error("Failed to create canvas context");E.fillStyle="#ffffff",E.fillRect(0,0,S.width,S.height),E.fillStyle="#1e293b",E.font="bold 32px sans-serif",E.fillText("QUOTATION",50,60),E.font="16px sans-serif",E.fillStyle="#64748b",E.fillText(`#${n}`,50,90),E.fillStyle="#1e293b",E.font="bold 14px sans-serif",E.fillText("FROM:",50,140),E.font="14px sans-serif",E.fillText((c==null?void 0:c.name)||"Company Name",50,165),E.font="bold 14px sans-serif",E.fillText("TO:",50,210),E.font="14px sans-serif",E.fillText(r,50,235),E.fillText(e,50,255),E.font="bold 14px sans-serif",E.fillText("Date:",450,140),E.font="14px sans-serif",E.fillText(new Date(C.quotation_date).toLocaleDateString(),520,140);let I=320;E.fillStyle="#f1f5f9",E.fillRect(50,I,700,30),E.fillStyle="#1e293b",E.font="bold 12px sans-serif",E.fillText("Description",60,I+20),E.fillText("Qty",400,I+20),E.fillText("Unit Price",500,I+20),E.fillText("Amount",650,I+20),I+=40,E.font="12px sans-serif";for(const M of C.quotation_lines||[])E.fillText(M.description,60,I),E.fillText(String(M.quantity),400,I),E.fillText(`${M.unit_price.toFixed(2)}`,500,I),E.fillText(`${M.subtotal.toFixed(2)}`,650,I),I+=25;return I+=20,E.strokeStyle="#e2e8f0",E.beginPath(),E.moveTo(50,I),E.lineTo(750,I),E.stroke(),I+=30,E.font="bold 14px sans-serif",E.fillText("Subtotal:",550,I),E.fillText(`${(C.subtotal||0).toFixed(2)}`,650,I),I+=30,E.font="bold 16px sans-serif",E.fillText("Total:",550,I),E.fillText(`${(C.total_amount||0).toFixed(2)}`,650,I),C.notes&&(I+=50,E.font="bold 12px sans-serif",E.fillText("Notes:",50,I),E.font="12px sans-serif",E.fillStyle="#64748b",C.notes.split(`
`).forEach((D,K)=>{E.fillText(D,50,I+20+K*18)})),S.toDataURL("image/png").split(",")[1]};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Send Quotation"}),s.jsx("button",{onClick:a,className:"text-slate-400 hover:text-slate-600",children:s.jsx(mr,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:p,className:"p-6",children:[h&&s.jsx("div",{className:`mb-4 p-3 rounded-lg ${h.type==="success"?"bg-emerald-50 text-emerald-800":"bg-red-50 text-red-800"}`,children:h.text}),!A&&s.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsx("p",{className:"text-sm text-blue-900 mb-2",children:"Connect your Google account to send quotations via Gmail"}),s.jsx("button",{type:"button",onClick:B,className:"text-sm font-medium text-blue-700 hover:text-blue-900",children:"Connect with Google "})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"To"}),s.jsx("input",{type:"email",value:w.to,onChange:C=>j({...w,to:C.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",required:!0})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Subject"}),s.jsx("input",{type:"text",value:w.subject,onChange:C=>j({...w,subject:C.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",required:!0})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Message"}),s.jsx("textarea",{value:w.body,onChange:C=>j({...w,body:C.target.value}),rows:8,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",required:!0})]}),s.jsx("div",{className:"bg-slate-50 rounded-lg p-3 mb-4",children:s.jsx("p",{className:"text-xs text-slate-600",children:"The quotation PDF will be automatically attached to this email."})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-2",children:A?s.jsx("span",{className:"text-sm text-emerald-700 font-medium",children:"Connected to Google "}):s.jsx("span",{className:"text-sm text-slate-500",children:"Not connected"})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-slate-700 border border-slate-300 rounded-lg hover:bg-slate-50",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:i||!A,className:"flex items-center gap-2 px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed",children:i?s.jsxs(s.Fragment,{children:[s.jsx(uA,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Om,{className:"w-4 h-4"}),"Send Quotation"]})})]})]})]})]})})}function o6({payment:t,quotationNumber:e,onClose:r,onSuccess:n}){var T;const{currentCompany:a}=ir(),{user:o}=Jr(),[l,c]=Y.useState("verified"),[A,u]=Y.useState(t.verification_notes||""),[i,d]=Y.useState(!1),[h,f]=Y.useState(!1),[w,j]=Y.useState(t.proof_of_payment_url||""),[B,p]=Y.useState(t.deposit_slip_url||""),[x,C]=Y.useState(null),[S,E]=Y.useState(!1),[I,H]=Y.useState(null),M=(P,$)=>$==="PHP"?`${P.toLocaleString("en-PH",{minimumFractionDigits:2})}`:`${P.toLocaleString("en-US",{minimumFractionDigits:2,style:"currency",currency:$})}`,D=P=>new Date(P).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),K=()=>{var $;return(($=t.payment_method)==null?void 0:$.toLowerCase())==="check"},U=()=>{var $;const P=($=t.payment_method)==null?void 0:$.toLowerCase();return P==="paypal"||P==="xendit"||P==="api"||P==="stripe"||P==="paymongo"},F=async()=>{if(!(!I||!a)){E(!0);try{const P=I.name.split(".").pop(),$=`${a.id}/deposit-slips/${t.id}-${Date.now()}.${P}`,{error:ee}=await ge.storage.from("payment-proofs").upload($,I);if(ee)throw ee;const{data:{publicUrl:V}}=ge.storage.from("payment-proofs").getPublicUrl($),{error:W}=await ge.from("payments").update({deposit_slip_url:V}).eq("id",t.id);if(W)throw W;a&&o&&await ge.from("audit_logs").insert({company_id:a.id,user_id:o.id,action:"upload_deposit_slip",entity_type:"payment",entity_id:t.id,metadata:{filename:I.name}}),p(V),H(null),alert("Deposit slip uploaded successfully!")}catch(P){console.error("Error uploading deposit slip:",P),alert("Failed to upload deposit slip: "+P.message)}finally{E(!1)}}},k=async()=>{if(!(!a||!o)){if(K()&&!B&&l==="verified"){alert("Please upload deposit slip before verifying check payments");return}if(l==="rejected"&&!A.trim()){alert("Please provide a reason for rejecting the payment");return}d(!0);try{if(l==="verified"){const{error:P}=await ge.rpc("verify_payment",{payment_id_param:t.id,notes_param:A.trim()||null,verified_by_param:o.id});if(P)throw P}else{const{error:P}=await ge.rpc("reject_payment",{payment_id_param:t.id,reason_param:A.trim(),rejected_by_param:o.id});if(P)throw P}a&&o&&await ge.from("audit_logs").insert({company_id:a.id,user_id:o.id,action:l==="verified"?"verify_payment":"reject_payment",entity_type:"payment",entity_id:t.id,metadata:{verification_status:l,notes:A.trim()||null,quotation_id:t.quotation_id}}),alert(`Payment ${l==="verified"?"verified":"rejected"} successfully!`),n(),r()}catch(P){console.error("Error verifying payment:",P),alert("Failed to verify payment: "+P.message)}finally{d(!1)}}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ys,{className:"w-6 h-6 text-slate-700"}),s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Verify Payment"})]}),s.jsx("button",{onClick:r,className:"text-slate-400 hover:text-slate-600",children:s.jsx(mr,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[s.jsxs("div",{className:"mb-6 p-4 bg-slate-50 rounded-lg space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-slate-600",children:"Quotation:"}),s.jsx("span",{className:"font-medium text-slate-900",children:e})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-slate-600",children:"Amount:"}),s.jsx("span",{className:"text-lg font-bold text-slate-900",children:M(t.amount,t.currency)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-slate-600",children:"Payment Method:"}),s.jsx("span",{className:"font-medium text-slate-900 capitalize",children:t.payment_method})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-slate-600",children:"Transaction ID:"}),s.jsx("span",{className:"font-medium text-slate-900 font-mono text-xs",children:t.transaction_id})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-slate-600",children:"Payment Date:"}),s.jsx("span",{className:"font-medium text-slate-900",children:D(t.payment_date)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-slate-600",children:"Status:"}),s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${t.payment_status==="completed"?"bg-green-100 text-green-700":t.payment_status==="failed"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:t.payment_status})]}),((T=t.metadata)==null?void 0:T.test_mode)&&s.jsx("div",{className:"pt-2 border-t border-slate-200",children:s.jsx("span",{className:"inline-flex px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-medium",children:"Test Payment"})})]}),K()&&s.jsxs("div",{className:"mb-6 p-4 border border-amber-200 bg-amber-50 rounded-lg",children:[s.jsxs("h3",{className:"text-sm font-semibold text-amber-900 mb-3 flex items-center gap-2",children:[s.jsx(Tg,{className:"w-4 h-4"}),"Deposit Slip (Check Payment)"]}),B?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-700",children:[s.jsx(Do,{className:"w-4 h-4"}),s.jsx("span",{children:"Deposit slip uploaded"})]}),s.jsxs("a",{href:B,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-sm text-cyan-600 hover:text-cyan-700 font-medium",children:[s.jsx(Cj,{className:"w-4 h-4"}),"View Deposit Slip"]})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm text-amber-800",children:"Manager or Sales Rep must upload deposit slip for check payments before Admin/Finance can verify."}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:P=>{var ee;const $=(ee=P.target.files)==null?void 0:ee[0];if($){if($.size>10*1024*1024){alert("File size must be less than 10MB");return}H($)}},className:"flex-1 text-sm text-slate-600 file:mr-2 file:py-2 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-amber-100 file:text-amber-700 hover:file:bg-amber-200"}),I&&s.jsx("button",{onClick:F,disabled:S,className:"px-4 py-2 bg-amber-600 text-white rounded hover:bg-amber-700 disabled:opacity-50 text-sm font-medium flex items-center gap-2",children:S?s.jsxs(s.Fragment,{children:[s.jsx(uA,{className:"w-4 h-4 animate-spin"}),"Uploading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Tg,{className:"w-4 h-4"}),"Upload"]})})]}),I&&s.jsxs("p",{className:"text-xs text-slate-600",children:["Selected: ",I.name]})]})]}),U()&&s.jsxs("div",{className:"mb-6 p-4 border border-blue-200 bg-blue-50 rounded-lg",children:[s.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Gateway Information"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-600",children:"Gateway:"}),s.jsx("span",{className:"ml-2 font-medium text-blue-900 capitalize",children:t.payment_method})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-600",children:"Transaction ID:"}),s.jsx("span",{className:"ml-2 font-mono text-xs text-blue-900",children:t.transaction_id})]}),s.jsx("p",{className:"text-xs text-blue-700 mt-2 italic",children:"Transaction ID auto-filled from payment gateway. No upload required."})]})]}),t.verification_status&&s.jsxs("div",{className:`mb-6 p-4 rounded-lg border ${t.verification_status==="verified"?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[s.jsx("p",{className:"text-sm font-medium mb-1",children:t.verification_status==="verified"?"Previously Verified":"Previously Rejected"}),t.verification_notes&&s.jsx("p",{className:"text-sm text-slate-600",children:t.verification_notes}),t.verified_at&&s.jsx("p",{className:"text-xs text-slate-500 mt-2",children:D(t.verified_at)})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Verification Decision *"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{type:"button",onClick:()=>c("verified"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 border-2 rounded-lg transition-colors ${l==="verified"?"border-green-500 bg-green-50 text-green-700":"border-slate-300 text-slate-700 hover:border-slate-400"}`,children:[s.jsx(Do,{className:"w-5 h-5"}),"Verify"]}),s.jsxs("button",{type:"button",onClick:()=>c("rejected"),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 border-2 rounded-lg transition-colors ${l==="rejected"?"border-red-500 bg-red-50 text-red-700":"border-slate-300 text-slate-700 hover:border-slate-400"}`,children:[s.jsx(su,{className:"w-5 h-5"}),"Reject"]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Notes ",l==="rejected"&&"*"]}),s.jsx("textarea",{value:A,onChange:P=>u(P.target.value),rows:4,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-500",placeholder:l==="verified"?"Add verification notes (optional)...":"Explain why this payment is being rejected...",required:l==="rejected"})]}),s.jsx("button",{onClick:k,disabled:i||l==="rejected"&&!A.trim(),className:`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium disabled:opacity-50 ${l==="verified"?"bg-green-600 text-white hover:bg-green-700":"bg-red-600 text-white hover:bg-red-700"}`,children:l==="verified"?s.jsxs(s.Fragment,{children:[s.jsx(Do,{className:"w-5 h-5"}),i?"Verifying...":"Verify Payment"]}):s.jsxs(s.Fragment,{children:[s.jsx(su,{className:"w-5 h-5"}),i?"Rejecting...":"Reject Payment"]})})]}),s.jsx("div",{className:"px-6 py-4 border-t border-slate-200",children:s.jsx("button",{onClick:r,className:"w-full px-4 py-2 text-slate-700 border border-slate-300 rounded-lg hover:bg-slate-50",disabled:i,children:"Cancel"})})]})})}function i6({quotationId:t,onPaymentVerified:e}){var K,U;const{userRole:r,hasAllAccess:n}=ir(),[a,o]=Y.useState([]),[l,c]=Y.useState(!0),[A,u]=Y.useState(null),[i,d]=Y.useState(null),[h,f]=Y.useState(""),[w,j]=Y.useState(""),[B,p]=Y.useState(!1),x=r==null?void 0:r.roles,C=(K=x==null?void 0:x.name)==null?void 0:K.toLowerCase(),S=(x==null?void 0:x.permissions)||{},E=n||C==="admin"||C==="finance officer"||((U=S==null?void 0:S.payments)==null?void 0:U.update)===!0;Y.useEffect(()=>{I()},[t]);const I=async()=>{c(!0);try{const{data:F,error:k}=await ge.from("payments").select("*").eq("quotation_id",t).eq("payment_method","check").order("created_at",{ascending:!1});if(k)throw k;o(F||[])}catch(F){console.error("Error loading payments:",F)}finally{c(!1)}},H=async()=>{if(A){p(!0);try{const{data:{user:F}}=await ge.auth.getUser();if(!F)throw new Error("User not authenticated");const{error:k}=await ge.from("payments").update({verification_status:"verified",payment_status:"paid",verification_notes:h.trim(),verified_by:F.id,verified_at:new Date().toISOString(),is_locked:!0}).eq("id",A.id);if(k)throw k;const{data:T}=await ge.from("payments").select("amount, verification_status").eq("quotation_id",t),P=(T==null?void 0:T.filter(W=>W.verification_status==="verified").reduce((W,te)=>W+parseFloat(te.amount.toString()),0))||0,{data:$}=await ge.from("quotations").select("total_amount").eq("id",t).single(),V=(($==null?void 0:$.total_amount)||0)-P<=.01?"fully_paid":"deposit_paid";await ge.from("quotations").update({status:V}).eq("id",t),await ge.from("audit_logs").insert({user_id:F.id,action:"payment_verified",entity_type:"payment",entity_id:A.id,description:`Check payment of ${A.currency} ${A.amount.toLocaleString()} verified`,metadata:{payment_id:A.id,check_number:A.check_number,bank_name:A.bank_name,verification_notes:h.trim()}}),alert("Payment verified successfully!"),u(null),d(null),f(""),await I(),e()}catch(F){console.error("Error verifying payment:",F),alert("Failed to verify payment: "+F.message)}finally{p(!1)}}},M=async()=>{if(!A||!w.trim()){alert("Please provide a reason for rejection");return}p(!0);try{const{data:{user:F}}=await ge.auth.getUser();if(!F)throw new Error("User not authenticated");const{error:k}=await ge.from("payments").update({verification_status:"rejected",payment_status:"failed",rejection_reason:w.trim(),verification_notes:h.trim(),verified_by:F.id,verified_at:new Date().toISOString()}).eq("id",A.id);if(k)throw k;await ge.from("audit_logs").insert({user_id:F.id,action:"payment_rejected",entity_type:"payment",entity_id:A.id,description:`Check payment of ${A.currency} ${A.amount.toLocaleString()} rejected`,metadata:{payment_id:A.id,check_number:A.check_number,bank_name:A.bank_name,rejection_reason:w.trim()}}),alert("Payment rejected successfully!"),u(null),d(null),f(""),j(""),await I(),e()}catch(F){console.error("Error rejecting payment:",F),alert("Failed to reject payment: "+F.message)}finally{p(!1)}},D=F=>F.verification_status==="verified"?s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:[s.jsx(Do,{className:"w-3 h-3"}),"Verified"]}):F.verification_status==="rejected"?s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 text-red-700 rounded-full text-xs font-medium",children:[s.jsx(su,{className:"w-3 h-3"}),"Rejected"]}):s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:[s.jsx(dl,{className:"w-3 h-3"}),"Pending Verification"]});return l?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"text-gray-600",children:"Loading payments..."})}):a.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(ys,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),s.jsx("p",{children:"No check payments submitted yet"})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Check Payments"}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(dl,{className:"w-4 h-4"}),a.filter(F=>F.verification_status==="pending").length," pending verification"]})]}),!E&&a.some(F=>F.verification_status==="pending")&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Note:"})," You need Admin or Finance Officer role to verify payments. Please contact your administrator."]})}),s.jsx("div",{className:"space-y-3",children:a.map(F=>s.jsxs("div",{className:`border rounded-lg p-4 ${F.verification_status==="pending"?"border-amber-200 bg-amber-50":F.verification_status==="verified"?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("span",{className:"font-semibold text-gray-900",children:[F.currency," ",parseFloat(F.amount.toString()).toLocaleString("en-PH",{minimumFractionDigits:2})]}),D(F)]}),s.jsxs("p",{className:"text-sm text-gray-600 capitalize",children:[F.payment_stage," Payment"]})]}),F.verification_status==="pending"&&!F.is_locked&&E&&s.jsxs("button",{onClick:()=>{u(F),d("verify")},className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1",children:[s.jsx(cu,{className:"w-4 h-4"}),"Review"]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Bank:"}),s.jsx("p",{className:"font-medium text-gray-900",children:F.bank_name})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Check #:"}),s.jsx("p",{className:"font-medium text-gray-900",children:F.check_number})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Payment Date:"}),s.jsx("p",{className:"font-medium text-gray-900",children:new Date(F.payment_date).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Submitted:"}),s.jsx("p",{className:"font-medium text-gray-900",children:new Date(F.created_at).toLocaleDateString()})]})]}),F.deposit_slip_url&&s.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:s.jsxs("a",{href:F.deposit_slip_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1",children:[s.jsx(Cj,{className:"w-4 h-4"}),"View Deposit Slip"]})}),F.notes&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[s.jsx("span",{className:"text-xs text-gray-600",children:"Notes:"}),s.jsx("p",{className:"text-sm text-gray-700 mt-1",children:F.notes})]}),F.verification_status==="verified"&&F.verification_notes&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-green-300",children:[s.jsx("span",{className:"text-xs text-green-700 font-medium",children:"Verification Notes:"}),s.jsx("p",{className:"text-sm text-green-800 mt-1",children:F.verification_notes})]}),F.verification_status==="rejected"&&F.rejection_reason&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-red-300",children:[s.jsx("span",{className:"text-xs text-red-700 font-medium",children:"Rejection Reason:"}),s.jsx("p",{className:"text-sm text-red-800 mt-1",children:F.rejection_reason})]}),F.is_locked&&s.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[s.jsx(Wd,{className:"w-4 h-4"}),s.jsx("span",{children:"Payment locked - verified and cannot be modified"})]})})]},F.id))}),A&&i&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-xl font-bold",children:i==="verify"?"Verify Payment":"Reject Payment"}),s.jsx("button",{onClick:()=>{u(null),d(null),f(""),j("")},className:"text-gray-400 hover:text-gray-600",children:s.jsx(mr,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Amount:"}),s.jsxs("span",{className:"font-semibold",children:[A.currency," ",parseFloat(A.amount.toString()).toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Bank:"}),s.jsx("span",{className:"font-semibold",children:A.bank_name})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Check Number:"}),s.jsx("span",{className:"font-semibold",children:A.check_number})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Payment Date:"}),s.jsx("span",{className:"font-semibold",children:new Date(A.payment_date).toLocaleDateString()})]})]}),i==="verify"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Verification Notes (Optional)"}),s.jsx("textarea",{value:h,onChange:F=>f(F.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Add any notes about this verification..."})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{u(null),d(null),f("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",disabled:B,children:"Cancel"}),s.jsx("button",{onClick:()=>d("reject"),className:"flex-1 px-4 py-2 border border-red-300 text-red-700 rounded-lg hover:bg-red-50",disabled:B,children:"Reject"}),s.jsx("button",{onClick:H,disabled:B,className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg font-semibold disabled:opacity-50 flex items-center justify-center gap-2",children:B?"Verifying...":s.jsxs(s.Fragment,{children:[s.jsx(Fs,{className:"w-4 h-4"}),"Verify"]})})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Rejection Reason ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:w,onChange:F=>j(F.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Please explain why this payment is being rejected..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Notes (Optional)"}),s.jsx("textarea",{value:h,onChange:F=>f(F.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Any additional notes..."})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>d("verify"),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",disabled:B,children:"Back"}),s.jsx("button",{onClick:M,disabled:B||!w.trim(),className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg font-semibold disabled:opacity-50 flex items-center justify-center gap-2",children:B?"Rejecting...":s.jsxs(s.Fragment,{children:[s.jsx(su,{className:"w-4 h-4"}),"Confirm Rejection"]})})]})]})]})]})})]})}function Ed({value:t,onChange:e,placeholder:r,disabled:n}){const a=Y.useRef(null),[o,l]=Y.useState(!1),[c,A]=Y.useState(!1),[u,i]=Y.useState(""),[d,h]=Y.useState(""),[f,w]=Y.useState(""),[j,B]=Y.useState("");Y.useEffect(()=>{a.current&&a.current.innerHTML!==t&&(a.current.innerHTML=t)},[t]);const p=(I,H)=>{document.execCommand(I,!1,H),x()},x=()=>{a.current&&e(a.current.innerHTML)},C=()=>{if(u){const I=window.getSelection(),H=d||(I==null?void 0:I.toString())||u;p("insertHTML",`<a href="${u}" target="_blank" rel="noopener noreferrer">${H}</a>`),l(!1),i(""),h("")}},S=()=>{f&&(p("insertHTML",`<img src="${f}" alt="${j}" style="max-width: 100%; height: auto;" />`),A(!1),w(""),B(""))},E=[{icon:lE,command:"bold",title:"Bold"},{icon:yE,command:"italic",title:"Italic"},{icon:TE,command:"underline",title:"Underline"},{icon:NE,command:"insertUnorderedList",title:"Bullet List"},{icon:CE,command:"insertOrderedList",title:"Numbered List"},{icon:aE,command:"justifyLeft",title:"Align Left"},{icon:sE,command:"justifyCenter",title:"Align Center"},{icon:oE,command:"justifyRight",title:"Align Right"}];return s.jsxs("div",{className:"border border-slate-300 rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"bg-slate-50 border-b border-slate-300 p-2 flex flex-wrap gap-1",children:[s.jsxs("select",{onChange:I=>p("formatBlock",I.target.value),className:"px-2 py-1 text-sm border border-slate-300 rounded bg-white",disabled:n,children:[s.jsx("option",{value:"",children:"Normal"}),s.jsx("option",{value:"h1",children:"Heading 1"}),s.jsx("option",{value:"h2",children:"Heading 2"}),s.jsx("option",{value:"h3",children:"Heading 3"}),s.jsx("option",{value:"p",children:"Paragraph"})]}),s.jsx("div",{className:"flex gap-1 ml-2",children:E.map(({icon:I,command:H,title:M})=>s.jsx("button",{type:"button",onClick:()=>p(H),className:"p-1.5 hover:bg-slate-200 rounded",title:M,disabled:n,children:s.jsx(I,{className:"w-4 h-4 text-slate-700"})},H))}),s.jsxs("div",{className:"flex gap-1 ml-2 pl-2 border-l border-slate-300",children:[s.jsx("button",{type:"button",onClick:()=>l(!0),className:"p-1.5 hover:bg-slate-200 rounded",title:"Insert Link",disabled:n,children:s.jsx(BE,{className:"w-4 h-4 text-slate-700"})}),s.jsx("button",{type:"button",onClick:()=>A(!0),className:"p-1.5 hover:bg-slate-200 rounded",title:"Insert Image",disabled:n,children:s.jsx(vE,{className:"w-4 h-4 text-slate-700"})})]})]}),s.jsx("div",{ref:a,contentEditable:!n,onInput:x,onBlur:x,className:"p-4 min-h-[200px] max-h-[400px] overflow-y-auto focus:outline-none prose prose-slate max-w-none",suppressContentEditableWarning:!0,style:{caretColor:"black"}}),s.jsx("div",{className:"bg-slate-50 border-t border-slate-300 px-3 py-2",children:s.jsx("p",{className:"text-xs text-slate-600",children:"Saved as HTML. Links are clickable. Images load from the provided URL."})}),o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Insert Link"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"URL *"}),s.jsx("input",{type:"url",value:u,onChange:I=>i(I.target.value),placeholder:"https://example.com",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",autoFocus:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Link Text (optional)"}),s.jsx("input",{type:"text",value:d,onChange:I=>h(I.target.value),placeholder:"Click here",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:C,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Insert"}),s.jsx("button",{type:"button",onClick:()=>{l(!1),i(""),h("")},className:"flex-1 px-4 py-2 bg-slate-200 text-slate-700 rounded-lg hover:bg-slate-300",children:"Cancel"})]})]})]})}),c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Insert Image"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Image URL *"}),s.jsx("input",{type:"url",value:f,onChange:I=>w(I.target.value),placeholder:"https://example.com/image.jpg",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",autoFocus:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Alt Text (optional)"}),s.jsx("input",{type:"text",value:j,onChange:I=>B(I.target.value),placeholder:"Description of image",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:S,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Insert"}),s.jsx("button",{type:"button",onClick:()=>{A(!1),w(""),B("")},className:"flex-1 px-4 py-2 bg-slate-200 text-slate-700 rounded-lg hover:bg-slate-300",children:"Cancel"})]})]})]})})]})}function A6({eventOrder:t,quotationId:e,onClose:r,onSuccess:n}){const{currentCompany:a}=ir(),{user:o}=Jr(),[l,c]=Y.useState(!1),[A,u]=Y.useState(null),[i,d]=Y.useState([]),[h,f]=Y.useState([]),[w,j]=Y.useState(e||""),[B,p]=Y.useState(""),[x,C]=Y.useState(""),[S,E]=Y.useState(!1),[I,H]=Y.useState({quotation_number:"",customer_name:"",contact_person:"",contact_number:"",event_type:"",number_of_pax:0,guaranteed_pax:0,event_date:"",event_day:"",venue:"",activity:"",time_slot:"",type_of_function:"",payment_scheme:"",authorized_signatory:"",total_amount:0,vat_amount:0,security_deposit:0,logo_url:"",logo_position:"left",logo_max_width:200,header_color:"#E9D5FF",prepared_by:"",prepared_by_role:"",received_by:"",received_by_role:""}),[M,D]=Y.useState([{title:"Front Office Instructions",content:"",order_index:0,is_default:!0},{title:"Package Inclusions",content:"",order_index:1,is_default:!0},{title:"Operations",content:"",order_index:2,is_default:!0},{title:"Accounting",content:"",order_index:3,is_default:!0},{title:"Security Notes",content:"",order_index:4,is_default:!0}]);Y.useEffect(()=>{a&&(K(),U(),F(),t?k():e&&(j(e),T(e)))},[a,t==null?void 0:t.id]);const K=async()=>{var oe;if(!o||!a)return;const{data:te}=await ge.from("user_company_roles").select("role_id, roles(name)").eq("user_id",o.id).eq("company_id",a.id).maybeSingle();if(te){const O=((oe=te.roles)==null?void 0:oe.name)||"";C(O.toLowerCase()),E(O.toLowerCase()==="viewer")}},U=async()=>{if(!a)return;const{data:te,error:oe}=await ge.from("quotations").select("id, quotation_no, customer_name, status").eq("company_id",a.id).order("created_at",{ascending:!1});if(oe){console.error("Error fetching quotations:",oe);return}te&&d(te)},F=async()=>{if(!a)return;const{data:te}=await ge.from("event_order_templates").select("*, event_order_template_sections(*)").eq("company_id",a.id).order("name");te&&f(te)},k=async()=>{if(!(t!=null&&t.id))return;const{data:te}=await ge.from("event_order_sections").select("*").eq("event_order_id",t.id).order("order_index");H({quotation_number:t.quotation_number||"",customer_name:t.customer_name||"",contact_person:t.contact_person||"",contact_number:t.contact_number||"",event_type:t.event_type||"",number_of_pax:t.number_of_pax||0,guaranteed_pax:t.guaranteed_pax||0,event_date:t.event_date||"",event_day:t.event_day||"",venue:t.venue||"",activity:t.activity||"",time_slot:t.time_slot||"",type_of_function:t.type_of_function||"",payment_scheme:t.payment_scheme||"",authorized_signatory:t.authorized_signatory||"",total_amount:t.total_amount||0,vat_amount:t.vat_amount||0,security_deposit:t.security_deposit||0,logo_url:t.logo_url||"",logo_position:t.logo_position||"left",logo_max_width:t.logo_max_width||200,header_color:t.header_color||"#E9D5FF",prepared_by:t.prepared_by||"",prepared_by_role:t.prepared_by_role||"",received_by:t.received_by||"",received_by_role:t.received_by_role||""}),te&&D(te.map(oe=>({id:oe.id,title:oe.title,content:oe.content,order_index:oe.order_index,is_default:oe.is_default})))},T=async te=>{var oe,O,z;if(!(!te||!a||!o))try{const{data:ne,error:Z}=await ge.from("quotations").select(`
          *,
          leads(event_type, event_date, expected_pax),
          customers(name, contact_person, phone)
        `).eq("id",te).maybeSingle();if(Z||!ne){u({type:"error",text:"Failed to load quotation data"});return}const q=ne.leads,Ae=ne.customers;let ve="",be=ne.event_date||(q==null?void 0:q.event_date);be&&(ve=new Date(be).toLocaleDateString("en-US",{weekday:"long"}));const{data:Ne}=await ge.from("user_company_roles").select("users(email), roles(name)").eq("user_id",o.id).eq("company_id",a.id).maybeSingle();H({quotation_number:ne.quotation_no||"",customer_name:(Ae==null?void 0:Ae.name)||"",contact_person:(Ae==null?void 0:Ae.contact_person)||"",contact_number:(Ae==null?void 0:Ae.phone)||"",event_type:(q==null?void 0:q.event_type)||"",number_of_pax:ne.no_of_pax||(q==null?void 0:q.expected_pax)||0,guaranteed_pax:ne.no_of_pax||(q==null?void 0:q.expected_pax)||0,event_date:be||"",event_day:ve,venue:"",activity:"",time_slot:"",type_of_function:(q==null?void 0:q.event_type)||"",payment_scheme:"",authorized_signatory:"",total_amount:ne.total_amount||0,vat_amount:ne.vat_amount||0,security_deposit:0,logo_url:"",logo_position:"left",logo_max_width:200,header_color:"#E9D5FF",prepared_by:((oe=Ne==null?void 0:Ne.users)==null?void 0:oe.email)||"",prepared_by_role:((O=Ne==null?void 0:Ne.roles)==null?void 0:O.name)||"",received_by:"",received_by_role:""});const Te=[...M],De=Te.find(_e=>_e.title==="Package Inclusions");De&&ne.body_html&&(De.content=ne.body_html);const We=Te.find(_e=>_e.title==="Accounting");We&&(We.content=`
          <p><strong>BILLING ARRANGEMENT:</strong></p>
          <p>Total Amount: ${ne.currency||"PHP"} ${((z=ne.total_amount)==null?void 0:z.toLocaleString())||"0.00"}</p>
          ${ne.vat_amount?`<p>VAT: ${ne.currency||"PHP"} ${ne.vat_amount.toLocaleString()}</p>`:""}
        `),D(Te),u(null)}catch(ne){console.error("Error generating from quotation:",ne),u({type:"error",text:"Failed to load quotation data"})}},P=async te=>{if(!te)return;const oe=h.find(O=>O.id===te);if(oe&&(H(O=>({...O,logo_url:oe.logo_url||O.logo_url,logo_position:oe.logo_position||O.logo_position,logo_max_width:oe.logo_max_width||O.logo_max_width,header_color:oe.header_color||O.header_color})),oe.event_order_template_sections&&oe.event_order_template_sections.length>0)){const O=oe.event_order_template_sections.map(z=>({title:z.title,content:z.content,order_index:z.order_index,is_default:!0}));D(O)}},$=async te=>{if(te.preventDefault(),!(!a||S)){c(!0),u(null);try{let oe=t==null?void 0:t.order_number;if(!oe){const{data:q}=await ge.rpc("generate_event_order_number",{p_company_id:a.id});oe=q}const O={company_id:a.id,quotation_id:w||null,template_id:B||null,order_number:oe,...I,created_by:o==null?void 0:o.id,updated_at:new Date().toISOString()};let z=t==null?void 0:t.id;if(t!=null&&t.id){const{error:q}=await ge.from("event_orders").update(O).eq("id",t.id);if(q)throw q;await ge.from("event_order_sections").delete().eq("event_order_id",t.id)}else{const{data:q,error:Ae}=await ge.from("event_orders").insert(O).select().single();if(Ae)throw Ae;z=q.id}const ne=M.map((q,Ae)=>({event_order_id:z,title:q.title,content:q.content,order_index:Ae,is_default:q.is_default})),{error:Z}=await ge.from("event_order_sections").insert(ne);if(Z)throw Z;u({type:"success",text:"Event Order saved successfully!"}),setTimeout(()=>{n==null||n(),r()},1500)}catch(oe){console.error("Error saving event order:",oe),u({type:"error",text:oe.message||"Failed to save event order"})}finally{c(!1)}}},ee=()=>{D([...M,{title:"New Section",content:"",order_index:M.length,is_default:!1}])},V=te=>{D(M.filter((oe,O)=>O!==te))},W=(te,oe)=>{const O=[...M],z=te-1;z<0||z>=O.length||([O[te],O[z]]=[O[z],O[te]],O.forEach((ne,Z)=>ne.order_index=Z),D(O))};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-50 overflow-y-auto p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl my-8",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:t?"Edit Event Order":"New Event Order"}),s.jsx("button",{onClick:r,className:"text-slate-400 hover:text-slate-600",children:s.jsx(mr,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:$,className:"p-6",children:[A&&s.jsx("div",{className:`mb-4 p-3 rounded-lg ${A.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:A.text}),!t&&s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Generate from Quotation"}),s.jsxs("select",{value:w,onChange:te=>{j(te.target.value),T(te.target.value)},className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:S,children:[s.jsx("option",{value:"",children:"Select a quotation..."}),i.map(te=>s.jsxs("option",{value:te.id,children:[te.quotation_no," - ",te.customer_name]},te.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Apply Template"}),s.jsxs("select",{value:B,onChange:te=>{p(te.target.value),P(te.target.value)},className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:S,children:[s.jsx("option",{value:"",children:"None"}),h.map(te=>s.jsx("option",{value:te.id,children:te.name},te.id))]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Event Summary"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date of Function"}),s.jsx("input",{type:"date",value:I.event_date,onChange:te=>{const O=new Date(te.target.value).toLocaleDateString("en-US",{weekday:"long"});H({...I,event_date:te.target.value,event_day:O})},className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:S})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Day"}),s.jsx("input",{type:"text",value:I.event_day,onChange:te=>H({...I,event_day:te.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:S})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Guaranteed Pax"}),s.jsx("input",{type:"number",value:I.guaranteed_pax,onChange:te=>H({...I,guaranteed_pax:parseInt(te.target.value)||0}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:S})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Activity"}),s.jsx("input",{type:"text",value:I.activity,onChange:te=>H({...I,activity:te.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:S})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Time"}),s.jsx("input",{type:"text",value:I.time_slot,onChange:te=>H({...I,time_slot:te.target.value}),placeholder:"e.g., 9am-7pm",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:S})]})]})]}),s.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Type & Payment Info"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Type of Function"}),s.jsx("input",{type:"text",value:I.type_of_function,onChange:te=>H({...I,type_of_function:te.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:S})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Payment Scheme"}),s.jsx("input",{type:"text",value:I.payment_scheme,onChange:te=>H({...I,payment_scheme:te.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:S})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Contact Person"}),s.jsx("input",{type:"text",value:I.contact_person,onChange:te=>H({...I,contact_person:te.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:S})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Contact Number"}),s.jsx("input",{type:"text",value:I.contact_number,onChange:te=>H({...I,contact_number:te.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:S})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Authorized Signatory"}),s.jsx("input",{type:"text",value:I.authorized_signatory,onChange:te=>H({...I,authorized_signatory:te.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:S})]})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Sections"}),!S&&s.jsxs("button",{type:"button",onClick:ee,className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[s.jsx(mn,{className:"h-4 w-4"}),"Add Section"]})]}),M.map((te,oe)=>s.jsxs("div",{className:"mb-4 p-4 border border-slate-200 rounded-lg bg-white",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[!S&&s.jsx("div",{className:"flex flex-col gap-1",children:s.jsx("button",{type:"button",onClick:()=>W(oe),disabled:oe===0,className:"text-slate-400 hover:text-slate-600 disabled:opacity-30",children:s.jsx(Pm,{className:"h-4 w-4"})})}),s.jsx("input",{type:"text",value:te.title,onChange:O=>{const z=[...M];z[oe].title=O.target.value,D(z)},className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-medium",disabled:S}),!S&&s.jsx("button",{type:"button",onClick:()=>V(oe),className:"text-red-600 hover:text-red-700",children:s.jsx(Ba,{className:"h-5 w-5"})})]}),s.jsx(Ed,{value:te.content,onChange:O=>{const z=[...M];z[oe].content=O,D(z)},disabled:S,placeholder:`Enter content for ${te.title}...`})]},oe))]}),s.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-4",children:"Signatures"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Prepared By"}),s.jsx("input",{type:"text",value:I.prepared_by,onChange:te=>H({...I,prepared_by:te.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 mb-2",disabled:S}),s.jsx("input",{type:"text",value:I.prepared_by_role,onChange:te=>H({...I,prepared_by_role:te.target.value}),placeholder:"Role/Title",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:S})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Received By"}),s.jsx("input",{type:"text",value:I.received_by,onChange:te=>H({...I,received_by:te.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 mb-2",disabled:S}),s.jsx("input",{type:"text",value:I.received_by_role,onChange:te=>H({...I,received_by_role:te.target.value}),placeholder:"Role/Title",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:S})]})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t border-slate-200",children:[s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-slate-700 hover:text-slate-900",children:"Cancel"}),!S&&s.jsxs("button",{type:"submit",disabled:l,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[s.jsx(FA,{className:"h-5 w-5"}),l?"Saving...":"Save Event Order"]})]})]})]})})}function l6({eventOrderId:t,onEdit:e,canEdit:r=!0}){const[n,a]=Y.useState(null),[o,l]=Y.useState([]),[c,A]=Y.useState(!0),[u,i]=Y.useState(!1),d=Y.useRef(null);Y.useEffect(()=>{h()},[t]);const h=async()=>{A(!0);const{data:p}=await ge.from("event_orders").select("*").eq("id",t).maybeSingle(),{data:x}=await ge.from("event_order_sections").select("*").eq("event_order_id",t).order("order_index");p&&a(p),x&&l(x),A(!1)},f=()=>{window.print()},w=async()=>{if(!d.current)return;const p={margin:.5,filename:`EventOrder-${n.order_number}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}};try{await tx().set(p).from(d.current).save()}catch(x){console.error("Error generating PDF:",x)}},j=()=>{i(!0)};if(c)return s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx("div",{className:"text-slate-600",children:"Loading event order..."})});if(!n)return s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx("div",{className:"text-slate-600",children:"Event order not found"})});const B={left:"justify-start",center:"justify-center",right:"justify-end"}[n.logo_position||"left"];return s.jsxs("div",{className:"space-y-4 print:space-y-0",children:[s.jsxs("div",{className:"flex items-center justify-between print:hidden",children:[s.jsxs("h2",{className:"text-2xl font-bold text-slate-800",children:["Event Order: ",n.order_number]}),s.jsxs("div",{className:"flex items-center gap-2",children:[r&&s.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:[s.jsx(co,{className:"h-5 w-5"}),"Edit"]}),s.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-4 py-2 text-slate-700 hover:bg-slate-100 rounded-lg",children:[s.jsx(Wv,{className:"h-5 w-5"}),"Print"]}),s.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 text-slate-700 hover:bg-slate-100 rounded-lg",children:[s.jsx(Sj,{className:"h-5 w-5"}),"Export PDF"]}),s.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[s.jsx(Is,{className:"h-5 w-5"}),"Email"]})]})]}),s.jsx("style",{children:`
          @media print {
            body * {
              visibility: hidden;
            }
            #event-order-content,
            #event-order-content * {
              visibility: visible;
            }
            #event-order-content {
              position: absolute;
              left: 0;
              top: 0;
              width: 100%;
            }
            .sections-grid {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 1.5rem;
              column-gap: 2rem;
            }
            .section-item {
              break-inside: avoid;
              page-break-inside: avoid;
            }
          }
        `}),s.jsxs("div",{id:"event-order-content",ref:d,className:"bg-white border border-slate-200 rounded-lg p-8 print:border-0 print:p-0 print:rounded-none",style:{fontFamily:"Arial, sans-serif"},children:[s.jsx("div",{className:`flex ${B} mb-6`,children:n.logo_url&&s.jsx("img",{src:n.logo_url,alt:"Logo",style:{maxWidth:`${n.logo_max_width||200}px`},className:"h-auto"})}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:n.customer_name||"EVENT ORDER"}),n.type_of_function&&s.jsx("p",{className:"text-xl text-slate-600",children:n.type_of_function})]}),s.jsx("div",{className:"mb-6 p-4 rounded",style:{backgroundColor:n.header_color||"#E9D5FF"},children:s.jsx("h2",{className:"text-xl font-bold text-center",children:"Event Summary"})}),s.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-6 text-sm",children:[s.jsxs("div",{className:"p-3 border border-slate-300",children:[s.jsx("div",{className:"font-semibold mb-1",children:"DATE OF FUNCTION"}),s.jsx("div",{children:n.event_date?new Date(n.event_date).toLocaleDateString():"N/A"})]}),s.jsxs("div",{className:"p-3 border border-slate-300",children:[s.jsx("div",{className:"font-semibold mb-1",children:"DAY"}),s.jsx("div",{children:n.event_day||"N/A"})]}),s.jsxs("div",{className:"p-3 border border-slate-300",children:[s.jsx("div",{className:"font-semibold mb-1",children:"GTD. PAX"}),s.jsx("div",{className:"text-lg font-bold",children:n.guaranteed_pax||0})]}),s.jsxs("div",{className:"p-3 border border-slate-300",children:[s.jsx("div",{className:"font-semibold mb-1",children:"ACTIVITY"}),s.jsx("div",{children:n.activity||"N/A"})]}),s.jsxs("div",{className:"p-3 border border-slate-300",children:[s.jsx("div",{className:"font-semibold mb-1",children:"TIME"}),s.jsx("div",{className:"font-semibold",children:n.time_slot||"N/A"})]})]}),s.jsxs("div",{className:"grid grid-cols-5 gap-4 mb-6 text-sm",children:[s.jsxs("div",{className:"p-3 border border-slate-300",children:[s.jsx("div",{className:"font-semibold mb-1",children:"TYPE OF FUNCTION"}),s.jsx("div",{children:n.type_of_function||"N/A"})]}),s.jsxs("div",{className:"p-3 border border-slate-300",children:[s.jsx("div",{className:"font-semibold mb-1",children:"PAYMENT SCHEME"}),s.jsx("div",{children:n.payment_scheme||"N/A"})]}),s.jsxs("div",{className:"p-3 border border-slate-300",children:[s.jsx("div",{className:"font-semibold mb-1",children:"CONTACT NUMBER"}),s.jsx("div",{children:n.contact_number||"N/A"})]}),s.jsxs("div",{className:"p-3 border border-slate-300",children:[s.jsx("div",{className:"font-semibold mb-1",children:"CONTACT PERSON"}),s.jsx("div",{children:n.contact_person||"N/A"})]}),s.jsxs("div",{className:"p-3 border border-slate-300",children:[s.jsx("div",{className:"font-semibold mb-1",children:"AUTHORIZED SIGNATORY"}),s.jsx("div",{children:n.authorized_signatory||"N/A"})]})]}),s.jsx("div",{className:"sections-grid grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:o.map((p,x)=>s.jsxs("div",{className:"section-item break-inside-avoid",children:[s.jsxs("div",{className:"p-2 mb-2 rounded font-bold text-sm",style:{backgroundColor:n.header_color||"#E9D5FF"},children:[p.title.toUpperCase(),":"]}),s.jsx("div",{className:"prose prose-sm max-w-none pl-4 text-sm",dangerouslySetInnerHTML:{__html:p.content||"<p>No content</p>"}})]},p.id||x))}),s.jsxs("div",{className:"grid grid-cols-2 gap-8 mt-12 pt-8 border-t border-slate-300",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mb-16",children:n.prepared_by_signature&&s.jsx("img",{src:n.prepared_by_signature,alt:"Signature",className:"mx-auto h-16"})}),s.jsxs("div",{className:"border-t-2 border-slate-800 pt-2",children:[s.jsx("div",{className:"font-bold",children:n.prepared_by||"Prepared By:"}),n.prepared_by_role&&s.jsx("div",{className:"text-sm text-slate-600",children:n.prepared_by_role})]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mb-16"}),s.jsxs("div",{className:"border-t-2 border-slate-800 pt-2",children:[s.jsx("div",{className:"font-bold",children:n.received_by||"Received By:"}),n.received_by_role&&s.jsx("div",{className:"text-sm text-slate-600",children:n.received_by_role})]})]})]})]}),u&&s.jsx(c6,{eventOrder:n,onClose:()=>i(!1)})]})}function c6({eventOrder:t,onClose:e}){const[r,n]=Y.useState(""),[a,o]=Y.useState(`Event Order - ${t.order_number}`),[l,c]=Y.useState(""),[A,u]=Y.useState(!1),i=async()=>{u(!0),await new Promise(d=>setTimeout(d,1500)),u(!1),e()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Email Event Order"}),s.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600",children:""})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"To"}),s.jsx("input",{type:"email",value:r,onChange:d=>n(d.target.value),placeholder:"recipient@example.com",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Subject"}),s.jsx("input",{type:"text",value:a,onChange:d=>o(d.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Message"}),s.jsx("textarea",{value:l,onChange:d=>c(d.target.value),rows:4,placeholder:"Optional message to include in the email...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-slate-200",children:[s.jsx("button",{onClick:e,className:"px-4 py-2 text-slate-700 hover:text-slate-900",children:"Cancel"}),s.jsxs("button",{onClick:i,disabled:A||!r,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[s.jsx(Is,{className:"h-5 w-5"}),A?"Sending...":"Send"]})]})]})})}function u6({quotationId:t,onBack:e,onEdit:r}){const{currentCompany:n,hasAllAccess:a,userRole:o}=ir(),{user:l}=Jr(),[c,A]=Y.useState(null),[u,i]=Y.useState([]),[d,h]=Y.useState(null),[f,w]=Y.useState([]),[j,B]=Y.useState(null),[p,x]=Y.useState(!0),[C,S]=Y.useState(!1),[E,I]=Y.useState(!1),[H,M]=Y.useState(!1),[D,K]=Y.useState(!1),[U,F]=Y.useState(!1),[k,T]=Y.useState(null),[P,$]=Y.useState(!1),[ee,V]=Y.useState("quotation"),[W,te]=Y.useState([]),[oe,O]=Y.useState(null),[z,ne]=Y.useState(!1),[Z,q]=Y.useState(null),[Ae,ve]=Y.useState(null),[be,Ne]=Y.useState(!1),[Te,De]=Y.useState(!1),We=Y.useRef(null);Y.useEffect(()=>{de(),Ut(),_e()},[t]);const _e=async()=>{const pe=await Jv();ve(pe);const Ie=await WE(t);Ne(Ie);const ke=await zE(t);De(ke.isLocked)},de=async()=>{x(!0);const{data:pe,error:Ie}=await ge.from("quotations").select("*").eq("id",t).maybeSingle();if(Ie){console.error("Error loading quotation:",Ie),x(!1);return}if(!pe){x(!1);return}A(pe);const{data:ke}=await ge.from("quotation_lines").select("*").eq("quotation_id",t).order("order");ke&&i(ke);const{data:Ye}=await ge.from("customers").select("*").eq("id",pe.customer_id).maybeSingle();h(Ye);const{data:Pe}=await ge.from("payments").select("*").eq("quotation_id",t).order("created_at",{ascending:!1});Pe&&w(Pe),x(!1)},Ut=async()=>{const{data:pe}=await ge.from("event_orders").select("*").eq("quotation_id",t).order("created_at",{ascending:!1});pe&&(te(pe),pe.length>0&&!oe&&O(pe[0]))},dt=pe=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(pe),ot=pe=>pe?new Date(pe).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"N/A",ze=pe=>{switch(pe){case"draft":return"bg-slate-100 text-slate-700";case"sent":return"bg-blue-100 text-blue-700";case"accepted":return"bg-emerald-100 text-emerald-700";case"declined":return"bg-red-100 text-red-700";case"paid":return"bg-green-100 text-green-700";default:return"bg-slate-100 text-slate-700"}},gt=()=>{window.print()},et=async()=>{if(!We.current||!c)return;const pe={margin:10,filename:`Quotation_${c.quotation_no}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};try{await tx().set(pe).from(We.current).save()}catch(Ie){console.error("Error generating PDF:",Ie)}},It=async()=>{if(c&&confirm("Finalize this quotation? This will mark it as ready and prevent further edits.")){K(!0);try{const{error:pe}=await ge.from("quotations").update({status:"finalized"}).eq("id",c.id);if(pe){console.error("Error finalizing quotation:",pe),alert("Failed to finalize quotation: "+pe.message);return}await Pg("quotations",c.id,"finalized",{status:"draft"},{status:"finalized"}),await de(),alert("Quotation finalized successfully!")}catch(pe){console.error("Error finalizing quotation:",pe),alert("Failed to finalize quotation. Please try again.")}finally{K(!1)}}},vt=async()=>{if(c){K(!0);try{await ge.from("quotations").update({status:"accepted"}).eq("id",c.id),n&&l&&await ge.from("audit_logs").insert({company_id:n.id,user_id:l.id,action:"accept",entity_type:"quotation",entity_id:c.id}),await de(),alert("Quotation accepted! You can now sign it.")}catch(pe){alert(pe.message||"Failed to accept quotation")}finally{K(!1)}}},Tt=async()=>{if(!(!c||!l)){K(!0);try{const{data:pe}=await ge.from("quotation_public_links").select("token").eq("quotation_id",c.id).eq("is_active",!0).gte("expires_at",new Date().toISOString()).maybeSingle();let Ie;if(pe)Ie=pe.token;else{const{data:Ye,error:Pe}=await ge.from("quotation_public_links").insert({quotation_id:c.id,created_by:l.id}).select("token").single();if(Pe)throw Pe;Ie=Ye.token}const ke=`${window.location.origin}?q=${Ie}`;T(ke),F(!0)}catch(pe){console.error("Error generating link:",pe),alert("Failed to generate public link: "+pe.message)}finally{K(!1)}}},Se=()=>{k&&(navigator.clipboard.writeText(k),$(!0),setTimeout(()=>$(!1),2e3))};return p?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"text-slate-600",children:"Loading quotation..."})})}):c?s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6 flex items-center justify-between print:hidden",children:[s.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-slate-600 hover:text-slate-900",children:[s.jsx(Tm,{className:"w-5 h-5"}),"Back to Quotations"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[c.status==="draft"&&s.jsxs(s.Fragment,{children:[r&&(Ae==null?void 0:Ae.canEdit)&&s.jsxs("button",{onClick:()=>r(t),className:"flex items-center gap-2 px-4 py-2 text-slate-700 border border-slate-300 rounded-lg hover:bg-slate-50",children:[s.jsx(co,{className:"w-4 h-4"}),"Edit"]}),(Ae==null?void 0:Ae.canEdit)&&s.jsxs("button",{onClick:It,disabled:D,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:[s.jsx(Do,{className:"w-4 h-4"}),D?"Finalizing...":"Finalize"]})]}),c.status==="sent"&&!c.signed_at&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:vt,disabled:D,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:[s.jsx(Do,{className:"w-4 h-4"}),D?"Accepting...":"Accept"]}),s.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700",children:[s.jsx(ys,{className:"w-4 h-4"}),"Sign"]})]}),c.status==="accepted"&&!c.signed_at&&s.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700",children:[s.jsx(ys,{className:"w-4 h-4"}),"Sign"]}),s.jsxs("button",{onClick:()=>I(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[s.jsx(Is,{className:"w-4 h-4"}),"Send"]}),s.jsxs("button",{onClick:Tt,disabled:D,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50",children:[s.jsx(jE,{className:"w-4 h-4"}),D?"Generating...":"Send Link"]}),s.jsxs("button",{onClick:et,className:"flex items-center gap-2 px-4 py-2 text-slate-700 border border-slate-300 rounded-lg hover:bg-slate-50",children:[s.jsx(Sj,{className:"w-4 h-4"}),"Save as PDF"]}),s.jsxs("button",{onClick:gt,className:"flex items-center gap-2 px-4 py-2 text-slate-700 border border-slate-300 rounded-lg hover:bg-slate-50",children:[s.jsx(Wv,{className:"w-4 h-4"}),"Print"]})]})]}),s.jsx("div",{className:"mb-6 border-b border-slate-200 print:hidden",children:s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:()=>V("quotation"),className:`px-4 py-3 font-medium border-b-2 transition-colors ${ee==="quotation"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Quotation"}),s.jsx("button",{onClick:()=>V("event-order"),className:`px-4 py-3 font-medium border-b-2 transition-colors ${ee==="event-order"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:"Event Orders"})]})}),ee==="quotation"&&s.jsxs("div",{ref:We,className:"bg-white rounded-lg border border-slate-200 p-8",children:[s.jsx("div",{className:"mb-8 flex justify-between items-start",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("h1",{className:"text-2xl font-bold text-slate-900",children:["Quotation ",c.quotation_no]}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${ze(c.status)}`,children:c.status.charAt(0).toUpperCase()+c.status.slice(1)})]})}),f.filter(pe=>pe.payment_method==="check").length>0&&s.jsx("div",{className:"mb-8 print:hidden",children:s.jsx(i6,{quotationId:t,onPaymentVerified:de})}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"FROM"}),s.jsx("p",{className:"text-slate-900 font-medium",children:n==null?void 0:n.name})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"TO"}),s.jsx("p",{className:"text-slate-900 font-medium",children:d==null?void 0:d.name}),s.jsx("p",{className:"text-slate-600 text-sm",children:d==null?void 0:d.email}),(d==null?void 0:d.phone)&&s.jsx("p",{className:"text-slate-600 text-sm",children:d.phone})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-600",children:"Quotation Date"}),s.jsx("p",{className:"font-medium text-slate-900",children:ot(c.quotation_date)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-600",children:"Valid Until"}),s.jsx("p",{className:"font-medium text-slate-900",children:ot(c.expiration_date)})]}),c.lead_id&&s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-600",children:"Related Lead"}),s.jsxs("p",{className:"font-medium text-slate-900",children:["Lead #",c.lead_id.substring(0,8)]})]})]})]}),s.jsx("div",{className:"mb-8",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b-2 border-slate-900",children:[s.jsx("th",{className:"text-left py-3 text-sm font-semibold text-slate-900",children:"Description"}),s.jsx("th",{className:"text-right py-3 text-sm font-semibold text-slate-900",children:"Qty"}),s.jsx("th",{className:"text-right py-3 text-sm font-semibold text-slate-900",children:"Unit Price"}),s.jsx("th",{className:"text-right py-3 text-sm font-semibold text-slate-900",children:"Amount"})]})}),s.jsx("tbody",{children:u.map((pe,Ie)=>s.jsxs("tr",{className:"border-b border-slate-200",children:[s.jsxs("td",{className:"py-3",children:[s.jsx("p",{className:"font-medium text-slate-900",children:pe.description}),pe.notes&&s.jsx("p",{className:"text-sm text-slate-600 mt-1",children:pe.notes})]}),s.jsx("td",{className:"text-right py-3 text-slate-900",children:pe.quantity}),s.jsx("td",{className:"text-right py-3 text-slate-900",children:dt(pe.unit_price)}),s.jsx("td",{className:"text-right py-3 text-slate-900",children:dt(pe.subtotal)})]},Ie))})]})}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("div",{className:"w-64",children:[s.jsxs("div",{className:"flex justify-between py-2 text-slate-600",children:[s.jsx("span",{children:"Subtotal:"}),s.jsx("span",{children:dt(c.subtotal)})]}),c.discount_amount>0&&s.jsxs("div",{className:"flex justify-between py-2 text-slate-600",children:[s.jsx("span",{children:"Discount:"}),s.jsxs("span",{children:["-",dt(c.discount_amount)]})]}),c.tax_amount>0&&s.jsxs("div",{className:"flex justify-between py-2 text-slate-600",children:[s.jsx("span",{children:"Tax:"}),s.jsx("span",{children:dt(c.tax_amount)})]}),s.jsxs("div",{className:"flex justify-between py-3 border-t-2 border-slate-900 font-bold text-slate-900 text-lg",children:[s.jsx("span",{children:"Total:"}),s.jsx("span",{children:dt(c.total_amount)})]})]})}),c.notes&&s.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-200",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Notes"}),s.jsx("p",{className:"text-slate-600 whitespace-pre-wrap",children:c.notes})]}),c.terms&&s.jsxs("div",{className:"mt-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-2",children:"Terms & Conditions"}),s.jsx("p",{className:"text-slate-600 whitespace-pre-wrap",children:c.terms})]}),c.signed_at&&c.signed_by&&s.jsxs("div",{className:"mt-8 pt-6 border-t-2 border-slate-200",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-4",children:"Accepted & Signed"}),s.jsxs("div",{className:"flex items-start gap-6",children:[c.signature_image&&s.jsx("div",{className:"border border-slate-200 rounded p-2 bg-white",children:s.jsx("img",{src:c.signature_image,alt:"Signature",className:"h-20 w-auto"})}),s.jsxs("div",{className:"text-sm text-slate-700",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Signed by:"})," ",c.signed_by]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Date:"})," ",ot(c.signed_at)]})]})]})]})]}),ee==="event-order"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Event Orders"}),s.jsxs("button",{onClick:()=>{q(null),ne(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[s.jsx(mn,{className:"h-5 w-5"}),"Generate from Quotation"]})]}),W.length===0?s.jsxs("div",{className:"bg-slate-50 rounded-lg p-8 text-center",children:[s.jsx("p",{className:"text-slate-600 mb-4",children:"No event orders yet for this quotation"}),s.jsx("button",{onClick:()=>{q(null),ne(!0)},className:"text-blue-600 hover:text-blue-700 font-medium",children:"Create your first event order"})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex gap-4 mb-4",children:W.map(pe=>s.jsx("button",{onClick:()=>O(pe),className:`px-4 py-2 rounded-lg font-medium transition-colors ${(oe==null?void 0:oe.id)===pe.id?"bg-blue-600 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:pe.order_number},pe.id))}),oe&&s.jsx(l6,{eventOrderId:oe.id,onEdit:()=>{q(oe),ne(!0)},canEdit:!0})]})]}),C&&c&&s.jsx(s6,{quotation:c,onClose:()=>{S(!1),de()}}),E&&d&&c&&s.jsx(a6,{quotationId:c.id,customerEmail:d.email||"",customerName:d.name,quotationNumber:c.quotation_no,onClose:()=>I(!1),onSuccess:()=>{I(!1),de()}}),H&&j&&s.jsx(o6,{payment:j,quotationNumber:c.quotation_no,onClose:()=>{M(!1),B(null)},onSuccess:de}),U&&k&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-xl font-bold",children:"Public Quotation Link"}),s.jsx("button",{onClick:()=>F(!1),className:"text-slate-400 hover:text-slate-600",children:s.jsx("span",{className:"text-2xl",children:""})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-slate-600",children:"Share this link with your customer. They can view, approve, or reject the quotation directly from this link."}),s.jsx("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:k,readOnly:!0,className:"flex-1 bg-white px-3 py-2 border border-slate-300 rounded text-sm"}),s.jsx("button",{onClick:Se,className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded hover:bg-slate-800 transition-colors",children:P?s.jsxs(s.Fragment,{children:[s.jsx(Fs,{className:"w-4 h-4"}),"Copied"]}):s.jsxs(s.Fragment,{children:[s.jsx(Bj,{className:"w-4 h-4"}),"Copy"]})})]})}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"text-blue-600 mt-0.5",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"text-sm text-blue-900",children:[s.jsx("p",{className:"font-semibold mb-1",children:"Link Details:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-800",children:[s.jsx("li",{children:"Valid for 30 days"}),s.jsx("li",{children:"Customer can approve or reject"}),s.jsx("li",{children:"Digital signature supported"}),s.jsx("li",{children:"You'll be notified of their response"})]})]})]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>F(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Close"}),s.jsx("button",{onClick:()=>{Se(),window.open(k,"_blank")},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-semibold",children:"Copy & Preview"})]})]})]})}),z&&s.jsx(A6,{eventOrder:Z,quotationId:t,onClose:()=>{ne(!1),q(null)},onSuccess:()=>{ne(!1),q(null),Ut()}})]}):s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-slate-600 mb-4",children:"Quotation not found"}),s.jsx("button",{onClick:e,className:"text-slate-900 hover:text-slate-700 underline",children:"Back to Quotations"})]})})}function d6({leadId:t,onClose:e,onEdit:r}){const{currentCompany:n,permissions:a}=ir(),[o,l]=Y.useState(null),[c,A]=Y.useState(null),[u,i]=Y.useState(null),[d,h]=Y.useState([]),[f,w]=Y.useState(!0),[j,B]=Y.useState("details"),[p,x]=Y.useState(!1),[C,S]=Y.useState(null),[E,I]=Y.useState(null),H=(E==null?void 0:E.canEdit)??!1;Y.useEffect(()=>{D(),M()},[t]);const M=async()=>{const k=await Jv();I(k)},D=async()=>{if(n)try{const{data:k,error:T}=await ge.from("leads").select("*").eq("id",t).eq("company_id",n.id).single();if(T)throw T;if(l(k),k.customer_id){const{data:$}=await ge.from("customers").select("*").eq("id",k.customer_id).single();A($)}if(k.stage_id){const{data:$}=await ge.from("pipeline_stages").select("*").eq("id",k.stage_id).single();i($)}const{data:P}=await ge.from("quotations").select("*").eq("lead_id",t).order("created_at",{ascending:!1});h(P||[])}catch(k){console.error("Error loading lead:",k)}finally{w(!1)}},K=k=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(k),U=k=>k?new Date(k).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A",F=k=>{switch(k){case"draft":return"bg-slate-100 text-slate-700";case"sent":return"bg-blue-100 text-blue-700";case"accepted":return"bg-emerald-100 text-emerald-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-slate-100 text-slate-700"}};return f?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl p-8",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-6 h-6 border-2 border-slate-200 border-t-slate-900 rounded-full animate-spin"}),s.jsx("p",{className:"text-slate-600",children:"Loading..."})]})})}):o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-200 bg-slate-50",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:o.event_name||o.name||"Lead Details"}),u&&s.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium text-white",style:{backgroundColor:u.color||"#64748b"},children:u.name})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[H&&s.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50",children:[s.jsx(co,{className:"w-4 h-4"}),"Edit"]}),s.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600",children:s.jsx(mr,{className:"w-6 h-6"})})]})]}),s.jsx("div",{className:"border-b border-slate-200",children:s.jsxs("div",{className:"flex px-6",children:[s.jsxs("button",{onClick:()=>B("details"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${j==="details"?"border-slate-900 text-slate-900":"border-transparent text-slate-600 hover:text-slate-900"}`,children:[s.jsx(ys,{className:"w-4 h-4 inline mr-2"}),"Details"]}),s.jsxs("button",{onClick:()=>B("quotations"),className:`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${j==="quotations"?"border-slate-900 text-slate-900":"border-transparent text-slate-600 hover:text-slate-900"}`,children:[s.jsx(ys,{className:"w-4 h-4 inline mr-2"}),"Quotations (",d.length,")"]})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[j==="details"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-slate-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Event Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-600 mb-1 block",children:"Event Name"}),s.jsx("p",{className:"text-slate-900 font-medium",children:o.event_name||"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-600 mb-1 block",children:"Event Type"}),s.jsx("p",{className:"text-slate-900",children:o.event_type||"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-600 mb-1 block",children:"Event Date"}),s.jsxs("p",{className:"text-slate-900 flex items-center gap-2",children:[s.jsx(Ro,{className:"w-4 h-4 text-slate-400"}),U(o.event_date)]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-600 mb-1 block",children:"Expected PAX"}),s.jsxs("p",{className:"text-slate-900 flex items-center gap-2",children:[s.jsx(Bi,{className:"w-4 h-4 text-slate-400"}),o.expected_pax||"N/A"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-600 mb-1 block",children:"Projected Value"}),s.jsx("p",{className:"text-slate-900 font-semibold text-lg text-emerald-600",children:K(o.event_value||0)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-600 mb-1 block",children:"Source"}),s.jsx("p",{className:"text-slate-900",children:o.source||"N/A"})]})]})]}),c&&s.jsxs("div",{className:"bg-slate-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Customer Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-600 mb-1 block",children:"Name"}),s.jsx("p",{className:"text-slate-900 font-medium",children:c.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-600 mb-1 block",children:"Email"}),s.jsxs("p",{className:"text-slate-900 flex items-center gap-2",children:[s.jsx(Is,{className:"w-4 h-4 text-slate-400"}),c.email||"N/A"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-600 mb-1 block",children:"Phone"}),s.jsxs("p",{className:"text-slate-900 flex items-center gap-2",children:[s.jsx(af,{className:"w-4 h-4 text-slate-400"}),c.phone||"N/A"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-600 mb-1 block",children:"Address"}),s.jsx("p",{className:"text-slate-900",children:c.address||"N/A"})]})]})]}),o.notes&&s.jsxs("div",{className:"bg-slate-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Notes"}),s.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:o.notes})]})]}),j==="quotations"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Quotations"}),H&&s.jsx("button",{onClick:()=>{S(null),x(!0)},className:"px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 font-medium",children:"Create Quotation"})]}),d.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ys,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),s.jsx("p",{className:"text-slate-600",children:"No quotations yet"}),H&&s.jsx("button",{onClick:()=>{S(null),x(!0)},className:"mt-4 text-slate-900 font-medium hover:underline",children:"Create your first quotation"})]}):s.jsx("div",{className:"space-y-3",children:d.map(k=>s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4 hover:border-slate-300 transition-colors cursor-pointer",onClick:()=>S(k),children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-slate-900",children:k.quotation_number}),s.jsx("p",{className:"text-sm text-slate-600",children:k.event_name})]}),s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${F(k.status)}`,children:k.status.charAt(0).toUpperCase()+k.status.slice(1)})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("span",{className:"text-slate-600",children:["Valid until ",U(k.expiration_date)]}),s.jsx("span",{className:"font-semibold text-slate-900",children:K(k.total)})]})]},k.id))})]})]})]})}),p&&s.jsx(Rm,{quotation:null,leadData:o,customerData:c,onClose:()=>{x(!1),S(null)},onSuccess:()=>{x(!1),S(null),D()}})]}):s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-md",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Lead Not Found"}),s.jsx("p",{className:"text-slate-600 mb-4",children:"The lead you're looking for could not be found."}),s.jsx("button",{onClick:e,className:"px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800",children:"Close"})]})})}function f6({onBack:t}){const{currentCompany:e}=ir(),[r,n]=Y.useState(new Date),[a,o]=Y.useState([]),[l,c]=Y.useState([]),[A,u]=Y.useState([]),[i,d]=Y.useState([]),[h,f]=Y.useState(!1),[w,j]=Y.useState(!0),[B,p]=Y.useState(null);Y.useEffect(()=>{e&&x()},[e,r]);const x=async()=>{if(!e)return;j(!0);const $=r.getFullYear(),ee=r.getMonth(),V=new Date($,ee,1),W=new Date($,ee+1,0),[te,oe,O]=await Promise.all([ge.from("pipeline_stages").select("*").eq("company_id",e.id).order("order"),ge.from("leads").select(`
          *,
          customer:customers!leads_customer_id_fkey(name)
        `).eq("company_id",e.id).not("event_date","is",null).gte("event_date",V.toISOString().split("T")[0]).lte("event_date",W.toISOString().split("T")[0]),ge.from("philippine_holidays").select("*").eq("year",$)]);te.data&&(c(te.data),i.length===0&&d(te.data.map(z=>z.id))),oe.data&&o(oe.data),O.data&&u(O.data),j(!1)},C=()=>{const $=r.getFullYear(),ee=r.getMonth(),V=new Date($,ee,1),te=new Date($,ee+1,0).getDate(),oe=V.getDay(),O=[];for(let ne=0;ne<oe;ne++){const Z=new Date($,ee,-oe+ne+1);O.push({date:Z,isCurrentMonth:!1})}for(let ne=1;ne<=te;ne++)O.push({date:new Date($,ee,ne),isCurrentMonth:!0});const z=42-O.length;for(let ne=1;ne<=z;ne++){const Z=new Date($,ee+1,ne);O.push({date:Z,isCurrentMonth:!1})}return O},S=$=>{const ee=$.toISOString().split("T")[0];return a.filter(V=>V.event_date?V.event_date.split("T")[0]===ee&&i.includes(V.stage_id||""):!1)},E=$=>{const ee=$.toISOString().split("T")[0];return A.find(V=>V.date===ee)},I=()=>{n(new Date(r.getFullYear(),r.getMonth()-1))},H=()=>{n(new Date(r.getFullYear(),r.getMonth()+1))},M=()=>{n(new Date)},D=$=>{d(ee=>ee.includes($)?ee.filter(V=>V!==$):[...ee,$])},K=()=>{d(l.map($=>$.id))},U=()=>{d([])},F=$=>{const ee=l.find(V=>V.id===$);return(ee==null?void 0:ee.color)||"#64748b"},k=$=>{const ee=new Date;return $.getDate()===ee.getDate()&&$.getMonth()===ee.getMonth()&&$.getFullYear()===ee.getFullYear()},T=r.toLocaleDateString("en-US",{month:"long",year:"numeric"}),P=C();return w?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"text-slate-600",children:"Loading calendar..."})})}):B?s.jsx("div",{className:"p-6",children:s.jsx(d6,{leadId:B,onBack:()=>p(null),onViewQuotation:()=>{}})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[t&&s.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-3 py-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors",children:[s.jsx(Tm,{className:"w-4 h-4"}),"Back to Pipeline"]}),s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Calendar"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:M,className:"px-4 py-2 text-sm border border-slate-300 rounded-lg hover:bg-slate-50",children:"Today"}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>f(!h),className:"flex items-center gap-2 px-4 py-2 text-sm border border-slate-300 rounded-lg hover:bg-slate-50",children:[s.jsx(Ej,{className:"w-4 h-4"}),"Filter Stages (",i.length,"/",l.length,")"]}),h&&s.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-slate-200 z-10",children:[s.jsx("div",{className:"p-3 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Pipeline Stages"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:K,className:"text-xs text-blue-600 hover:text-blue-700",children:"All"}),s.jsx("button",{onClick:U,className:"text-xs text-slate-600 hover:text-slate-700",children:"None"})]})]})}),s.jsx("div",{className:"p-2 max-h-64 overflow-y-auto",children:l.map($=>s.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-slate-50 rounded cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:i.includes($.id),onChange:()=>D($.id),className:"rounded border-slate-300"}),s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:$.color||"#64748b"}}),s.jsx("span",{className:"text-sm text-slate-900",children:$.name})]},$.id))})]})]})]})]}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:I,className:"p-2 hover:bg-slate-100 rounded-lg",children:s.jsx(dE,{className:"w-5 h-5"})}),s.jsx("h2",{className:"text-xl font-semibold text-slate-900 min-w-[200px] text-center",children:T}),s.jsx("button",{onClick:H,className:"p-2 hover:bg-slate-100 rounded-lg",children:s.jsx(fE,{className:"w-5 h-5"})})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"grid grid-cols-7 bg-slate-50 border-b border-slate-200",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map($=>s.jsx("div",{className:"p-3 text-center text-sm font-semibold text-slate-600",children:$},$))}),s.jsx("div",{className:"grid grid-cols-7",children:P.map(($,ee)=>{const V=S($.date),W=E($.date),te=k($.date);return s.jsxs("div",{className:`min-h-[120px] p-2 border-b border-r border-slate-200 ${$.isCurrentMonth?"":"bg-slate-50"} ${te?"bg-blue-50":""}`,children:[s.jsx("div",{className:"flex items-center justify-between mb-1",children:s.jsx("span",{className:`text-sm font-medium ${$.isCurrentMonth?te?"text-blue-600 font-bold":"text-slate-900":"text-slate-400"}`,children:$.date.getDate()})}),W&&s.jsx("div",{className:`text-xs px-2 py-1 rounded mb-1 ${W.type==="regular"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,title:W.name,children:W.name.length>15?W.name.substring(0,15)+"...":W.name}),s.jsxs("div",{className:"space-y-1",children:[V.slice(0,3).map(oe=>{var O;return s.jsx("div",{onClick:()=>p(oe.id),className:"text-xs px-2 py-1 rounded text-white truncate cursor-pointer hover:opacity-80 transition-opacity",style:{backgroundColor:F(oe.stage_id||"")},title:`${oe.event_name||oe.name} - ${((O=oe.customer)==null?void 0:O.name)||""}`,children:oe.event_name||oe.name},oe.id)}),V.length>3&&s.jsxs("div",{className:"text-xs text-slate-500 px-2",children:["+",V.length-3," more"]})]})]},ee)})})]}),s.jsxs("div",{className:"mt-4 flex items-center gap-6 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 bg-red-100 border border-red-200 rounded"}),s.jsx("span",{className:"text-slate-600",children:"Regular Holiday"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 bg-orange-100 border border-orange-200 rounded"}),s.jsx("span",{className:"text-slate-600",children:"Special Holiday"})]})]})]})}function h6({template:t,onClose:e}){const{currentCompany:r}=ir(),{user:n}=Jr(),[a,o]=Y.useState((t==null?void 0:t.name)||""),[l,c]=Y.useState((t==null?void 0:t.body_html)||""),[A,u]=Y.useState((t==null?void 0:t.terms_html)||""),[i,d]=Y.useState((t==null?void 0:t.is_default)||!1),[h,f]=Y.useState((t==null?void 0:t.logo_url)||""),[w,j]=Y.useState((t==null?void 0:t.logo_position)||"left"),[B,p]=Y.useState((t==null?void 0:t.logo_max_width)||200),[x,C]=Y.useState((t==null?void 0:t.custom_sections)||[]),[S,E]=Y.useState([]),[I,H]=Y.useState([]),[M,D]=Y.useState(!1),[K,U]=Y.useState(""),[F,k]=Y.useState(!1),[T,P]=Y.useState(null);Y.useEffect(()=>{t!=null&&t.id&&W(),$(),ee()},[t,r]);const $=async()=>{var q;if(!n||!r)return;const{data:Z}=await ge.from("user_company_roles").select("role_id, roles(name)").eq("user_id",n.id).eq("company_id",r.id).maybeSingle();if(Z){const Ae=((q=Z.roles)==null?void 0:q.name)||"";U(Ae.toLowerCase())}},ee=async()=>{if(!r)return;const{data:Z,error:q}=await ge.from("products").select("*").eq("company_id",r.id).eq("is_active",!0).order("name");if(q){console.error("Error fetching products:",q);return}Z&&(console.log("Products loaded:",Z.length),H(Z))},V=async Z=>{var Ae;const q=(Ae=Z.target.files)==null?void 0:Ae[0];if(q){if(P(null),q.size>2*1024*1024){P("File size must be less than 2MB");return}if(!q.type.startsWith("image/")){P("File must be an image");return}k(!0);try{const ve=new FileReader;ve.onloadend=()=>{const be=ve.result;f(be),k(!1)},ve.onerror=()=>{P("Failed to read file"),k(!1)},ve.readAsDataURL(q)}catch{P("Failed to upload file"),k(!1)}}},W=async()=>{const{data:Z,error:q}=await ge.from("template_line_items").select("*").eq("template_id",t.id).order("sort_order");q?console.error("Error fetching line items:",q):E(Z||[])},te=(Z="product")=>{E([...S,{item_type:Z,name:"",description:"",section_body:Z==="section"?"":void 0,unit:Z==="section"?"":"unit",default_quantity:Z==="section"?0:1,default_price:0,tax_code:"",sort_order:S.length}])},oe=(Z,q)=>{const Ae=I.find(ve=>ve.id===q);if(Ae){const ve=[...S];ve[Z]={...ve[Z],name:Ae.name,description:Ae.description||"",default_price:parseFloat(Ae.price||0)},E(ve)}},O=Z=>{E(S.filter((q,Ae)=>Ae!==Z))},z=(Z,q,Ae)=>{const ve=[...S];ve[Z]={...ve[Z],[q]:Ae},E(ve)},ne=async()=>{if(!a.trim()){alert("Please enter a template name");return}if(!(!r||!n)){D(!0);try{let Z=t==null?void 0:t.id;if(t!=null&&t.id){const{error:q}=await ge.from("quotation_templates").update({name:a.trim(),body_html:l,terms_html:A,is_default:i,logo_url:h||null,logo_position:w,logo_max_width:B,custom_sections:x,updated_at:new Date().toISOString()}).eq("id",t.id);if(q)throw q}else{const{data:q,error:Ae}=await ge.from("quotation_templates").insert({company_id:r.id,name:a.trim(),body_html:l,terms_html:A,is_default:i,logo_url:h||null,logo_position:w,logo_max_width:B,custom_sections:x,created_by:n.id}).select().single();if(Ae)throw Ae;Z=q.id}if(t!=null&&t.id&&await ge.from("template_line_items").delete().eq("template_id",t.id),S.length>0){const{error:q}=await ge.from("template_line_items").insert(S.map((Ae,ve)=>({template_id:Z,name:Ae.name,description:Ae.description,unit:Ae.unit,default_quantity:Ae.default_quantity,default_price:Ae.default_price,tax_code:Ae.tax_code,sort_order:ve})));if(q)throw q}e()}catch(Z){console.error("Error saving template:",Z),alert(`Failed to save template: ${Z.message}`)}finally{D(!1)}}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:t?"Edit Template":"New Template"}),s.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:s.jsx(mr,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Template Name *"}),s.jsx("input",{type:"text",value:a,onChange:Z=>o(Z.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Standard Event Package"})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-slate-700 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:i,onChange:Z=>d(Z.target.checked),className:"rounded border-slate-300"}),"Set as default template for this company"]})}),s.jsxs("div",{className:"border border-slate-300 rounded-lg p-4 bg-slate-50",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-4",children:"Logo Settings"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Logo Upload or URL"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:h,onChange:Z=>f(Z.target.value),className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/logo.png or paste data URI..."}),s.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-800 cursor-pointer transition-colors",children:[s.jsx(Tg,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Upload"}),s.jsx("input",{type:"file",accept:"image/*",onChange:V,className:"hidden",disabled:F})]})]}),F&&s.jsx("p",{className:"text-xs text-blue-600",children:"Uploading logo..."}),T&&s.jsx("p",{className:"text-xs text-red-600",children:T}),s.jsx("p",{className:"text-xs text-slate-500",children:"Upload an image (max 2MB) or enter an image URL. This logo will appear at the top of quotations using this template."})]})]}),h&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Logo Preview"}),s.jsx("div",{className:`flex ${w==="center"?"justify-center":w==="right"?"justify-end":"justify-start"}`,children:s.jsx("img",{src:h,alt:"Logo preview",style:{maxWidth:`${B}px`},className:"border border-slate-300 rounded",onError:Z=>{Z.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><text x="50%" y="50%" text-anchor="middle" dy=".3em">Invalid</text></svg>'}})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Position"}),s.jsxs("select",{value:w,onChange:Z=>j(Z.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"left",children:"Left"}),s.jsx("option",{value:"center",children:"Center"}),s.jsx("option",{value:"right",children:"Right"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Max Width (px)"}),s.jsx("input",{type:"number",value:B,onChange:Z=>p(parseInt(Z.target.value)||200),min:"50",max:"500",step:"10",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Body / Introduction",K==="admin"||K==="manager"?null:s.jsx("span",{className:"ml-2 text-xs text-orange-600",children:"(Read-only: Admin/Manager access required)"})]}),s.jsx(Ed,{value:l,onChange:c,disabled:K!=="admin"&&K!=="manager",placeholder:"Enter the introduction or body content..."})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Policies / Terms & Conditions",K==="admin"||K==="manager"?null:s.jsx("span",{className:"ml-2 text-xs text-orange-600",children:"(Read-only: Admin/Manager access required)"})]}),s.jsx(Ed,{value:A,onChange:u,disabled:K!=="admin"&&K!=="manager",placeholder:"Enter terms and conditions..."})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700",children:["Additional Sections",K==="admin"||K==="manager"?null:s.jsx("span",{className:"ml-2 text-xs text-orange-600",children:"(Read-only: Admin/Manager access required)"})]}),(K==="admin"||K==="manager")&&s.jsxs("button",{type:"button",onClick:()=>C([...x,{title:"",content:"",order:x.length}]),className:"flex items-center gap-1 px-3 py-1 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[s.jsx(mn,{className:"w-4 h-4"}),"Add Section"]})]}),x.length===0?s.jsx("div",{className:"text-center py-8 bg-slate-50 rounded-lg border border-slate-200",children:s.jsx("p",{className:"text-slate-600 text-sm",children:"No additional sections. Add custom sections for flexible content."})}):s.jsx("div",{className:"space-y-4",children:x.map((Z,q)=>s.jsxs("div",{className:"border border-slate-300 rounded-lg p-4 bg-white",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("input",{type:"text",value:Z.title,onChange:Ae=>{const ve=[...x];ve[q].title=Ae.target.value,C(ve)},placeholder:"Section Title (e.g., Payment Schedule, Cancellation Policy)",className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:K!=="admin"&&K!=="manager"}),(K==="admin"||K==="manager")&&s.jsx("button",{type:"button",onClick:()=>C(x.filter((Ae,ve)=>ve!==q)),className:"ml-2 p-2 text-red-600 hover:bg-red-50 rounded",children:s.jsx(Ba,{className:"w-4 h-4"})})]}),s.jsx(Ed,{value:Z.content,onChange:Ae=>{const ve=[...x];ve[q].content=Ae,C(ve)},disabled:K!=="admin"&&K!=="manager",placeholder:"Enter section content..."})]},q))})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Preset Line Items"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>te("product"),className:"flex items-center gap-1 px-3 py-1 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(mn,{className:"w-4 h-4"}),"Add Product"]}),s.jsxs("button",{type:"button",onClick:()=>te("section"),className:"flex items-center gap-1 px-3 py-1 text-sm bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors",children:[s.jsx(mn,{className:"w-4 h-4"}),"Add Section"]})]})]}),S.length===0?s.jsx("div",{className:"text-center py-8 bg-slate-50 rounded-lg border border-slate-200",children:s.jsx("p",{className:"text-slate-600 text-sm",children:"No line items yet. Add preset items that will be included when using this template."})}):s.jsx("div",{className:"space-y-3",children:S.map((Z,q)=>s.jsx("div",{className:`rounded-lg p-4 border ${Z.item_type==="section"?"bg-amber-50 border-amber-200":"bg-slate-50 border-slate-200"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"pt-3",children:s.jsx(Pm,{className:"w-5 h-5 text-slate-400"})}),s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${Z.item_type==="section"?"bg-amber-200 text-amber-800":"bg-blue-100 text-blue-800"}`,children:Z.item_type==="section"?"Section":"Product"})}),Z.item_type==="product"&&s.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Select from Products"}),I.length>0?s.jsxs(s.Fragment,{children:[s.jsxs("select",{value:"",onChange:Ae=>{Ae.target.value&&(oe(q,Ae.target.value),Ae.target.value="")},className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white",children:[s.jsxs("option",{value:"",children:["-- Click to select a product (",I.length," available) --"]}),I.map(Ae=>s.jsxs("option",{value:Ae.id,children:[Ae.name," - ",Ae.price]},Ae.id))]}),s.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Or fill in the fields below manually"})]}):s.jsx("p",{className:"text-sm text-slate-600",children:"No products available. Add products in the Products page first, or fill in the fields manually below."})]}),s.jsx("div",{children:s.jsx("input",{type:"text",value:Z.name,onChange:Ae=>z(q,"name",Ae.target.value),placeholder:Z.item_type==="section"?"Section name *":"Item name *",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500"})}),Z.item_type==="section"&&s.jsx("div",{children:s.jsx("textarea",{value:Z.section_body||"",onChange:Ae=>z(q,"section_body",Ae.target.value),placeholder:"Section body (optional)",rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500"})}),Z.item_type==="product"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{children:s.jsx("textarea",{value:Z.description,onChange:Ae=>z(q,"description",Ae.target.value),placeholder:"Description (optional)",rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500"})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx("div",{children:s.jsx("input",{type:"text",value:Z.unit,onChange:Ae=>z(q,"unit",Ae.target.value),placeholder:"Unit",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500"})}),s.jsx("div",{children:s.jsx("input",{type:"number",value:Z.default_quantity,onChange:Ae=>z(q,"default_quantity",parseFloat(Ae.target.value)||0),placeholder:"Quantity",step:"0.01",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500"})}),s.jsx("div",{children:s.jsx("input",{type:"number",value:Z.default_price,onChange:Ae=>z(q,"default_price",parseFloat(Ae.target.value)||0),placeholder:"Unit Price",step:"0.01",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500"})}),s.jsx("div",{children:s.jsx("input",{type:"text",value:Z.tax_code,onChange:Ae=>z(q,"tax_code",Ae.target.value),placeholder:"Tax Code (optional)",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500"})})]})]})]}),s.jsx("button",{type:"button",onClick:()=>O(q),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:s.jsx(Ba,{className:"w-5 h-5"})})]})},q))})]})]}),s.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-200",children:[s.jsx("button",{onClick:e,className:"px-4 py-2 text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",disabled:M,children:"Cancel"}),s.jsx("button",{onClick:ne,disabled:M,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:M?"Saving...":"Save Template"})]})]})})}function m6({onTabChange:t}){const{currentCompany:e}=ir(),{user:r}=Jr(),[n,a]=Y.useState([]),[o,l]=Y.useState(!0),[c,A]=Y.useState(!1),[u,i]=Y.useState(null),[d,h]=Y.useState("");Y.useEffect(()=>{f(),w()},[e]);const f=async()=>{var C;if(!r||!e)return;const{data:x}=await ge.from("user_company_roles").select("role_id, roles(name)").eq("user_id",r.id).eq("company_id",e.id).maybeSingle();if(x){const S=((C=x.roles)==null?void 0:C.name)||"";h(S.toLowerCase())}},w=async()=>{if(!e)return;l(!0);const{data:x}=await ge.from("event_order_templates").select("*").eq("company_id",e.id).order("name");x&&a(x),l(!1)},j=async x=>{if(!confirm("Are you sure you want to delete this template?"))return;const{error:C}=await ge.from("event_order_templates").delete().eq("id",x);C||w()},B=async x=>{const{data:C}=await ge.from("event_order_template_sections").select("*").eq("template_id",x.id).order("order_index");i({...x,id:null,name:`${x.name} (Copy)`,is_default:!1,sections:C||[]}),A(!0)},p=d==="admin"||d==="manager";return o?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"text-slate-600",children:"Loading templates..."})}):s.jsxs("div",{className:"space-y-6 p-4 sm:p-6",children:[t&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Templates"}),s.jsx("p",{className:"text-slate-600 mt-1",children:"Manage quotation and event order templates"})]})}),s.jsx("div",{className:"border-b border-slate-200",children:s.jsxs("nav",{className:"flex gap-6 overflow-x-auto",children:[s.jsxs("button",{onClick:()=>t("quotations"),className:"flex items-center gap-2 px-4 py-3 border-b-2 border-transparent text-slate-600 hover:text-slate-900 transition-colors whitespace-nowrap",children:[s.jsx(ys,{className:"w-5 h-5"}),"Quotation Templates"]}),s.jsxs("button",{onClick:()=>t("event-orders"),className:"flex items-center gap-2 px-4 py-3 border-b-2 border-blue-600 text-blue-600 transition-colors whitespace-nowrap",children:[s.jsx(Ro,{className:"w-5 h-5"}),"Event Order Templates"]})]})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Event Order Templates"})}),p&&s.jsxs("button",{onClick:()=>{i(null),A(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 whitespace-nowrap",children:[s.jsx(mn,{className:"h-5 w-5"}),"New Template"]})]}),n.length===0?s.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-lg",children:[s.jsx("p",{className:"text-slate-600 mb-4",children:"No templates yet"}),p&&s.jsx("button",{onClick:()=>{i(null),A(!0)},className:"text-blue-600 hover:text-blue-700 font-medium",children:"Create your first template"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(x=>s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4 hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-slate-800",children:x.name}),x.is_default&&s.jsx("span",{className:"inline-block mt-1 px-2 py-1 text-xs bg-green-100 text-green-700 rounded",children:"Default"})]}),p&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>B(x),className:"p-1 text-slate-400 hover:text-blue-600",title:"Duplicate",children:s.jsx(Bj,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>{i(x),A(!0)},className:"p-1 text-slate-400 hover:text-blue-600",title:"Edit",children:s.jsx(co,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>j(x.id),className:"p-1 text-slate-400 hover:text-red-600",title:"Delete",children:s.jsx(Ba,{className:"h-4 w-4"})})]})]}),x.logo_url&&s.jsx("div",{className:"mb-3",children:s.jsx("img",{src:x.logo_url,alt:"Logo",className:"h-12 object-contain"})}),s.jsxs("div",{className:"text-sm text-slate-600",children:[s.jsxs("div",{children:["Logo Position: ",s.jsx("span",{className:"font-medium",children:x.logo_position})]}),s.jsxs("div",{children:["Max Width: ",s.jsxs("span",{className:"font-medium",children:[x.logo_max_width,"px"]})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:["Header Color:",s.jsx("div",{className:"w-8 h-6 rounded border border-slate-300",style:{backgroundColor:x.header_color}})]})]})]},x.id))}),c&&s.jsx(p6,{template:u,onClose:()=>{A(!1),i(null)},onSuccess:()=>{A(!1),i(null),w()}})]})}function p6({template:t,onClose:e,onSuccess:r}){const{currentCompany:n}=ir(),{user:a}=Jr(),[o,l]=Y.useState(!1),[c,A]=Y.useState(null),[u,i]=Y.useState({name:(t==null?void 0:t.name)||"",logo_url:(t==null?void 0:t.logo_url)||"",logo_position:(t==null?void 0:t.logo_position)||"left",logo_max_width:(t==null?void 0:t.logo_max_width)||200,header_color:(t==null?void 0:t.header_color)||"#E9D5FF",is_default:(t==null?void 0:t.is_default)||!1}),[d,h]=Y.useState((t==null?void 0:t.sections)||[{title:"Front Office Instructions",content:"",order_index:0},{title:"Package Inclusions",content:"",order_index:1},{title:"Operations",content:"",order_index:2},{title:"Accounting",content:"",order_index:3},{title:"Security Notes",content:"",order_index:4}]);Y.useEffect(()=>{t!=null&&t.id&&f()},[t==null?void 0:t.id]);const f=async()=>{if(!(t!=null&&t.id))return;const{data:p}=await ge.from("event_order_template_sections").select("*").eq("template_id",t.id).order("order_index");p&&h(p.map(x=>({id:x.id,title:x.title,content:x.content,order_index:x.order_index})))},w=async p=>{if(p.preventDefault(),!!n){l(!0),A(null);try{const x={company_id:n.id,...u,created_by:a==null?void 0:a.id,updated_at:new Date().toISOString()};let C=t==null?void 0:t.id;if(t!=null&&t.id){const{error:I}=await ge.from("event_order_templates").update(x).eq("id",t.id);if(I)throw I;await ge.from("event_order_template_sections").delete().eq("template_id",t.id)}else{const{data:I,error:H}=await ge.from("event_order_templates").insert(x).select().single();if(H)throw H;C=I.id}const S=d.map((I,H)=>({template_id:C,title:I.title,content:I.content,order_index:H})),{error:E}=await ge.from("event_order_template_sections").insert(S);if(E)throw E;A({type:"success",text:"Template saved successfully!"}),setTimeout(()=>{r()},1500)}catch(x){console.error("Error saving template:",x),A({type:"error",text:x.message||"Failed to save template"})}finally{l(!1)}}},j=()=>{h([...d,{title:"New Section",content:"",order_index:d.length}])},B=p=>{h(d.filter((x,C)=>C!==p))};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-50 overflow-y-auto p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl my-8",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:t!=null&&t.id?"Edit Template":"New Template"}),s.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600",children:""})]}),s.jsxs("form",{onSubmit:w,className:"p-6",children:[c&&s.jsx("div",{className:`mb-4 p-3 rounded-lg ${c.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:c.text}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Template Name"}),s.jsx("input",{type:"text",value:u.name,onChange:p=>i({...u,name:p.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Logo Position"}),s.jsxs("select",{value:u.logo_position,onChange:p=>i({...u,logo_position:p.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"left",children:"Left"}),s.jsx("option",{value:"center",children:"Center"}),s.jsx("option",{value:"right",children:"Right"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Logo Max Width (px)"}),s.jsx("input",{type:"number",value:u.logo_max_width,onChange:p=>i({...u,logo_max_width:parseInt(p.target.value)||200}),min:"100",max:"300",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Header Color"}),s.jsx("input",{type:"color",value:u.header_color,onChange:p=>i({...u,header_color:p.target.value}),className:"w-full h-10 px-1 py-1 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Logo URL"}),s.jsx("input",{type:"text",value:u.logo_url,onChange:p=>i({...u,logo_url:p.target.value}),placeholder:"https://example.com/logo.png or data:image/png;base64,...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Enter an image URL or paste a data URI"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"is_default",checked:u.is_default,onChange:p=>i({...u,is_default:p.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-slate-300 rounded"}),s.jsx("label",{htmlFor:"is_default",className:"text-sm font-medium text-slate-700",children:"Set as default template"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Default Sections"}),s.jsxs("button",{type:"button",onClick:j,className:"flex items-center gap-2 px-3 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[s.jsx(mn,{className:"h-4 w-4"}),"Add Section"]})]}),d.map((p,x)=>s.jsxs("div",{className:"mb-4 p-4 border border-slate-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("input",{type:"text",value:p.title,onChange:C=>{const S=[...d];S[x].title=C.target.value,h(S)},className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-medium"}),s.jsx("button",{type:"button",onClick:()=>B(x),className:"text-red-600 hover:text-red-700",children:s.jsx(Ba,{className:"h-5 w-5"})})]}),s.jsx(Ed,{value:p.content,onChange:C=>{const S=[...d];S[x].content=C,h(S)},placeholder:`Default content for ${p.title}...`})]},x))]}),s.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t border-slate-200",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-slate-700 hover:text-slate-900",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:o,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:o?"Saving...":"Save Template"})]})]})]})})}function g6(){const{currentCompany:t}=ir(),{user:e}=Jr(),[r,n]=Y.useState("quotations"),[a,o]=Y.useState([]),[l,c]=Y.useState([]),[A,u]=Y.useState(""),[i,d]=Y.useState(!1),[h,f]=Y.useState(!0),[w,j]=Y.useState(null),[B,p]=Y.useState(!1),[x,C]=Y.useState("");Y.useEffect(()=>{t&&e&&(E(),S())},[t,e]),Y.useEffect(()=>{I()},[a,A,i]);const S=async()=>{var T;if(!e||!t)return;const{data:F,error:k}=await ge.from("user_company_roles").select("role_id, roles(name)").eq("user_id",e.id).eq("company_id",t.id).maybeSingle();if(k&&console.error("Error fetching user role:",k),F){const P=((T=F.roles)==null?void 0:T.name)||"";console.log("User role:",P),C(P)}},E=async()=>{if(!t)return;f(!0);const{data:F,error:k}=await ge.from("quotation_templates").select("*").eq("company_id",t.id).order("created_at",{ascending:!1});k?console.error("Error fetching templates:",k):o(F||[]),f(!1)},I=()=>{let F=a.filter(k=>i?k.archived:!k.archived);A&&(F=F.filter(k=>k.name.toLowerCase().includes(A.toLowerCase()))),c(F)},H=async F=>{const{error:k}=await ge.from("quotation_templates").update({archived:!F.archived}).eq("id",F.id);k?(console.error("Error archiving template:",k),alert("Failed to archive template")):E()},M=F=>{j(F),p(!0)},D=()=>{j(null),p(!0)},K=()=>{p(!1),j(null),E()},U=x==="admin"||x==="manager";return h?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"text-slate-600",children:"Loading templates..."})}):(console.log("User role:",x,"Can edit:",U),r==="event-orders"?s.jsx(m6,{onTabChange:n}):s.jsxs("div",{className:"space-y-6 p-4 sm:p-6",children:[s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Templates"}),s.jsx("p",{className:"text-slate-600 mt-1",children:"Manage quotation and event order templates"})]})}),s.jsx("div",{className:"border-b border-slate-200",children:s.jsxs("nav",{className:"flex gap-6 overflow-x-auto",children:[s.jsxs("button",{onClick:()=>n("quotations"),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors whitespace-nowrap ${r==="quotations"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:[s.jsx(ys,{className:"w-5 h-5"}),"Quotation Templates"]}),s.jsxs("button",{onClick:()=>n("event-orders"),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors whitespace-nowrap ${r==="event-orders"?"border-blue-600 text-blue-600":"border-transparent text-slate-600 hover:text-slate-900"}`,children:[s.jsx(Ro,{className:"w-5 h-5"}),"Event Order Templates"]})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Quotation Templates"}),s.jsx("p",{className:"text-slate-600 mt-1",children:"Create reusable templates with preset content and line items"})]}),s.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[s.jsx(mn,{className:"w-5 h-5"}),"New Template"]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(jl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Search templates...",value:A,onChange:F=>u(F.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("label",{className:"flex items-center gap-2 text-slate-700 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:i,onChange:F=>d(F.target.checked),className:"rounded border-slate-300"}),"Show Archived"]})]}),l.length===0?s.jsx("div",{className:"text-center py-12 bg-white rounded-lg border border-slate-200",children:s.jsx("p",{className:"text-slate-600",children:A?"No templates found matching your search.":"No templates yet. Create your first template!"})}):s.jsx("div",{className:"grid gap-4",children:l.map(F=>s.jsx("div",{className:`bg-white rounded-lg border ${F.archived?"border-slate-200 opacity-60":"border-slate-300"} p-6 hover:shadow-md transition-shadow`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:F.name}),F.is_default&&s.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded",children:"Default"}),F.archived&&s.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-600 text-xs font-medium rounded",children:"Archived"})]}),s.jsx("div",{className:"mt-2 text-sm text-slate-600",children:F.body_html&&s.jsx("div",{className:"line-clamp-2",dangerouslySetInnerHTML:{__html:F.body_html}})})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx("button",{onClick:()=>M(F),className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"Edit template",children:s.jsx(co,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>H(F),className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:F.archived?"Restore template":"Archive template",children:F.archived?s.jsx(Uj,{className:"w-5 h-5"}):s.jsx(iE,{className:"w-5 h-5"})})]})]})},F.id))}),B&&s.jsx(h6,{template:w,onClose:K})]}))}function v6(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function x6({token:t}){var Xe,Ct,bt,ft,Me,ct,nt,ut,at;const[e,r]=Y.useState(null),[n,a]=Y.useState(!0),[o,l]=Y.useState(null),[c,A]=Y.useState(!1),[u,i]=Y.useState(!1),[d,h]=Y.useState(""),[f,w]=Y.useState(""),[j,B]=Y.useState("type"),[p,x]=Y.useState(""),[C,S]=Y.useState(!1),[E,I]=Y.useState(!1),[H,M]=Y.useState(!1),[D,K]=Y.useState([]),[U,F]=Y.useState([]),[k,T]=Y.useState(""),[P,$]=Y.useState(!1),[ee,V]=Y.useState(0),[W,te]=Y.useState(50),[oe,O]=Y.useState(!1),[z,ne]=Y.useState(0),[Z,q]=Y.useState(0),[Ae,ve]=Y.useState(""),[be,Ne]=Y.useState(""),[Te,De]=Y.useState(new Date().toISOString().split("T")[0]),[We,_e]=Y.useState(""),[de,Ut]=Y.useState(""),dt=Y.useRef(null);Y.useEffect(()=>{ot(),new URLSearchParams(window.location.search).get("payment")==="success"&&setTimeout(()=>{window.history.replaceState({},"",window.location.pathname+window.location.search.split("?")[0]),ot()},2e3)},[t]);const ot=async()=>{var Le,lt,tt,Ve,it,jt,Pt,nr,sr,Qt;try{a(!0),l(null);const{data:Xr,error:Kn}=await ge.from("quotation_public_links").select(`
          id,
          quotation_id,
          expires_at,
          is_active,
          quotations (
            id,
            company_id,
            quotation_no,
            quotation_date,
            expiration_date,
            subtotal,
            vat_enabled,
            vat_rate,
            vat_amount,
            total_amount,
            currency,
            body_html,
            terms_html,
            status,
            event_type_id,
            no_of_pax,
            event_date,
            template_id,
            companies (name),
            customers (name, email, phone),
            event_types (name),
            quotation_templates (logo_url, logo_position, logo_max_width, custom_sections)
          )
        `).eq("token",t).maybeSingle();if(Kn)throw Kn;if(!Xr){l("Quotation link not found");return}if(!Xr.is_active){l("This quotation link has been deactivated");return}if(new Date(Xr.expires_at)<new Date){l("This quotation link has expired");return}const{data:Kr}=await ge.from("quotation_customer_responses").select("*").eq("quotation_id",Xr.quotation_id).order("responded_at",{ascending:!1}).limit(1).maybeSingle(),{data:Ln}=await ge.from("quotation_lines").select("*").eq("quotation_id",Xr.quotation_id).order("order"),st=Xr.quotations;r({id:st.id,company_id:st.company_id,quotation_number:st.quotation_no,company_name:((Le=st.companies)==null?void 0:Le.name)||"",customer_name:((lt=st.customers)==null?void 0:lt.name)||"",customer_email:((tt=st.customers)==null?void 0:tt.email)||"",customer_phone:((Ve=st.customers)==null?void 0:Ve.phone)||"",quotation_date:st.quotation_date,valid_until:st.expiration_date,subtotal:parseFloat(st.subtotal||0),vat_enabled:st.vat_enabled||!1,vat_rate:parseFloat(st.vat_rate||0),vat_amount:parseFloat(st.vat_amount||0),total_amount:parseFloat(st.total_amount||0),currency:st.currency||"PHP",event_type_name:(it=st.event_types)==null?void 0:it.name,no_of_pax:st.no_of_pax,event_date:st.event_date,template_logo_url:(jt=st.quotation_templates)==null?void 0:jt.logo_url,template_logo_position:(Pt=st.quotation_templates)==null?void 0:Pt.logo_position,template_logo_max_width:(nr=st.quotation_templates)==null?void 0:nr.logo_max_width,template_custom_sections:(sr=st.quotation_templates)==null?void 0:sr.custom_sections,body_html:st.body_html||"",terms_html:st.terms_html||"",status:st.status,lines:Ln||[],customer_response:Kr?{response_type:Kr.response_type,customer_name:Kr.customer_name,rejection_reason:Kr.rejection_reason,responded_at:Kr.responded_at}:void 0}),(Qt=st.customers)!=null&&Qt.name&&h(st.customers.name);const{data:Lr}=await ge.from("payments").select("*").eq("quotation_id",st.id).order("created_at",{ascending:!1});if(Lr){const an=Lr.filter(Gn=>Gn.payment_status==="paid"&&Gn.verification_status!=="rejected");K(an);const kn=an.reduce((Gn,os)=>Gn+parseFloat(os.amount),0);ne(kn);const as=parseFloat(st.total_amount||0),Xn=Math.max(0,as-kn);q(Xn),V(Xn>0?Math.round(Xn*.5*100)/100:0)}const{data:Er}=await ge.from("payment_gateway_configs").select("*").eq("company_id",st.company_id).eq("is_active",!0).order("provider");if(Er&&Er.length>0){console.log("Loaded gateways:",Er.map(kn=>kn.provider)),F(Er);const an=Er.find(kn=>kn.provider==="check");T(an?"check":Er[0].provider)}}catch(Xr){console.error("Error loading quotation:",Xr),l(Xr.message)}finally{a(!1)}},ze=Le=>{I(!0);const lt=dt.current;if(!lt)return;const tt=lt.getContext("2d");if(!tt)return;const Ve=lt.getBoundingClientRect(),it="touches"in Le?Le.touches[0].clientX-Ve.left:Le.clientX-Ve.left,jt="touches"in Le?Le.touches[0].clientY-Ve.top:Le.clientY-Ve.top;tt.beginPath(),tt.moveTo(it,jt)},gt=Le=>{if(!E)return;const lt=dt.current;if(!lt)return;const tt=lt.getContext("2d");if(!tt)return;const Ve=lt.getBoundingClientRect(),it="touches"in Le?Le.touches[0].clientX-Ve.left:Le.clientX-Ve.left,jt="touches"in Le?Le.touches[0].clientY-Ve.top:Le.clientY-Ve.top;tt.lineTo(it,jt),tt.strokeStyle="#000",tt.lineWidth=2,tt.lineCap="round",tt.stroke()},et=()=>{I(!1);const Le=dt.current;Le&&w(Le.toDataURL())},It=()=>{const Le=dt.current;if(!Le)return;const lt=Le.getContext("2d");lt&&(lt.clearRect(0,0,Le.width,Le.height),w(""))},vt=async()=>{if(!d.trim()||!f.trim()){alert("Please provide your name and signature");return}try{S(!0);const{data:Le}=await ge.from("quotation_public_links").select("id, quotation_id").eq("token",t).single();if(!Le)throw new Error("Link not found");const{error:lt}=await ge.from("quotation_customer_responses").insert({quotation_id:Le.quotation_id,public_link_id:Le.id,response_type:"approved",customer_name:d.trim(),customer_signature:f});if(lt)throw lt;A(!1),await ot(),alert("Thank you! Your approval has been recorded.")}catch(Le){console.error("Error approving:",Le),alert("Failed to submit approval: "+Le.message)}finally{S(!1)}},Tt=async()=>{if(!d.trim()||!p.trim()){alert("Please provide your name and reason for rejection");return}try{S(!0);const{data:Le}=await ge.from("quotation_public_links").select("id, quotation_id").eq("token",t).single();if(!Le)throw new Error("Link not found");const{error:lt}=await ge.from("quotation_customer_responses").insert({quotation_id:Le.quotation_id,public_link_id:Le.id,response_type:"rejected",customer_name:d.trim(),rejection_reason:p.trim()});if(lt)throw lt;i(!1),await ot(),alert("Your feedback has been recorded. We will contact you soon.")}catch(Le){console.error("Error rejecting:",Le),alert("Failed to submit rejection: "+Le.message)}finally{S(!1)}},Se=async Le=>{if(e){if(ee<=0){alert("Please enter a valid payment amount");return}if(ee>Z){alert("Payment amount cannot exceed remaining balance");return}$(!0);try{const lt=U.find(sr=>sr.provider===k);if(!lt){alert("Please select a payment gateway");return}const tt=`TEST-PUBLIC-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,Ve=z+ee,it=Math.abs(Ve-e.total_amount)<.01,jt=!oe&&z===0,{error:Pt}=await ge.from("payments").insert({company_id:lt.company_id,quotation_id:e.id,customer_id:null,amount:ee,currency:e.currency||"PHP",payment_method:lt.is_test_mode?"test":k,payment_status:Le?"completed":"failed",transaction_id:tt,payment_date:new Date().toISOString(),verification_status:"pending",payment_type:oe?"full":jt?"deposit":"partial",is_deposit:jt,deposit_percentage:jt?W:null,expected_total:e.total_amount,metadata:{test_mode:lt.is_test_mode,simulated_result:Le?"success":"failure",public_payment:!0,customer_name:e.customer_name,is_full_payment:oe,remaining_before:Z,remaining_after:Z-ee}});if(Pt)throw Pt;if(Le){const sr=it?"fully_paid":"deposit_paid";await ge.from("quotations").update({status:sr}).eq("id",e.id)}alert(Le?`${oe?"Full payment":jt?"Deposit":"Partial payment"} completed successfully!`:"Payment failed (simulated)."),M(!1),await ot()}catch(lt){console.error("Error processing payment:",lt),alert("Failed to process payment: "+lt.message)}finally{$(!1)}}},pe=async()=>{if(e){if(!Ae.trim()||!be.trim()||!Te||ee<=0){alert("Please fill in all required fields");return}if(ee>Z){alert("Payment amount cannot exceed remaining balance");return}$(!0);try{const Le=U.find(nr=>nr.provider==="check");if(!Le){alert("Check payment gateway not configured");return}const lt=z+ee,tt=Math.abs(lt-e.total_amount)<.01,Ve=!oe&&z===0,it=oe?"balance":Ve?"downpayment":"partial",{error:jt}=await ge.from("payments").insert({company_id:Le.company_id,quotation_id:e.id,customer_id:null,amount:ee,currency:e.currency||"PHP",payment_method:"check",payment_status:"pending",payment_stage:it,deposit_percentage:Ve?W:null,bank_name:Ae.trim(),check_number:be.trim(),payment_date:Te,deposit_slip_url:We.trim()||null,notes:de.trim()||null,verification_status:"pending",is_locked:!1,expected_total:e.total_amount,metadata:{manual_check_payment:!0,public_payment:!0,customer_name:e.customer_name,is_full_payment:oe,remaining_before:Z,remaining_after:Z-ee,payment_stage:it}});if(jt)throw jt;await ge.from("quotations").update({status:"pending_finance_verification"}).eq("id",e.id),alert(`${oe?"Full payment":Ve?"Deposit":"Partial payment"} submitted successfully! Your payment will be verified by our Finance team.`),M(!1),ve(""),Ne(""),_e(""),Ut(""),await ot()}catch(Le){console.error("Error submitting check payment:",Le),alert("Failed to submit payment: "+Le.message)}finally{$(!1)}}},Ie=async()=>{var Le;if(e){if((k==null?void 0:k.toLowerCase())==="check"){alert("Please use the Check Payment form for check payments.");return}if(ee<=0){alert("Please enter a valid payment amount");return}if(ee>Z){alert("Payment amount cannot exceed remaining balance");return}$(!0);try{const lt=U.find(Kr=>Kr.provider===k);if(!lt){alert("Please select a payment gateway");return}const{data:tt}=await ge.from("payment_gateway_configs").select("config").eq("id",lt.id).maybeSingle(),Ve=(Le=tt==null?void 0:tt.config)==null?void 0:Le.api_key;if(!Ve){alert("Payment gateway not properly configured. Please add your Xendit API key in Settings.");return}const it=`PAY-${e.quotation_number}-${Date.now()}`,Pt=window.location.href.split("?")[0],nr=await fetch("https://hsftnenijlcpqbqzpyhk.supabase.co/functions/v1/xendit-create-invoice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:ee,currency:e.currency||"PHP",description:`Payment for Quotation ${e.quotation_number}`,externalId:it,successRedirectUrl:`${Pt}?payment=success`,failureRedirectUrl:`${Pt}?payment=failed`,apiKey:Ve})}),sr=await nr.json();if(!nr.ok){console.error("Xendit API error:",sr);const Kr=sr.error||sr.message||"Failed to create payment invoice",Ln=sr.details?` - ${JSON.stringify(sr.details)}`:"";throw new Error(Kr+Ln)}if(!sr.invoice_url)throw console.error("No invoice URL in response:",sr),new Error("Payment invoice created but no redirect URL received");const Qt=z+ee,Xr=Math.abs(Qt-e.total_amount)<.01,Kn=!oe&&z===0;await ge.from("payments").insert({company_id:lt.company_id,quotation_id:e.id,customer_id:null,amount:ee,currency:e.currency||"PHP",payment_method:k,payment_status:"pending",transaction_id:sr.id,payment_date:new Date().toISOString(),verification_status:"pending",payment_type:oe?"full":Kn?"deposit":"partial",is_deposit:Kn,deposit_percentage:Kn?W:null,expected_total:e.total_amount,metadata:{xendit_invoice_id:sr.id,xendit_invoice_url:sr.invoice_url,external_id:it,public_payment:!0,customer_name:e.customer_name,is_full_payment:oe,remaining_before:Z,remaining_after:Z-ee}}),window.location.href=sr.invoice_url}catch(lt){console.error("Error creating payment:",lt),alert("Failed to create payment: "+lt.message),$(!1)}}},ke=()=>{window.print()},Ye=async()=>{const Le=document.querySelector(".quotation-content");if(!Le)return;const lt={margin:1,filename:`Quotation-${(e==null?void 0:e.quotation_number)||"document"}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}};try{await tx().set(lt).from(Le).save()}catch(tt){console.error("Error generating PDF:",tt),alert("Failed to generate PDF")}};if(n)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(uA,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"}),s.jsx("p",{className:"text-gray-600",children:"Loading quotation..."})]})});if(o||!e)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(mr,{className:"w-8 h-8 text-red-600"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Unable to Load Quotation"}),s.jsx("p",{className:"text-gray-600",children:o||"Quotation not found"})]})});const Pe=!!e.customer_response;return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 sticky top-8",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:["",e.total_amount.toLocaleString("en-PH",{minimumFractionDigits:2})]}),s.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Total Amount"})]}),Pe?s.jsxs("div",{className:`p-4 rounded-lg mb-4 ${((Xe=e.customer_response)==null?void 0:Xe.response_type)==="approved"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[((Ct=e.customer_response)==null?void 0:Ct.response_type)==="approved"?s.jsx(Fs,{className:"w-5 h-5 text-green-600"}):s.jsx(mr,{className:"w-5 h-5 text-red-600"}),s.jsx("span",{className:`font-semibold ${((bt=e.customer_response)==null?void 0:bt.response_type)==="approved"?"text-green-900":"text-red-900"}`,children:((ft=e.customer_response)==null?void 0:ft.response_type)==="approved"?"Approved":"Rejected"})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["By: ",(Me=e.customer_response)==null?void 0:Me.customer_name]}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(((ct=e.customer_response)==null?void 0:ct.responded_at)||"").toLocaleString()}),((nt=e.customer_response)==null?void 0:nt.rejection_reason)&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Reason:"}),s.jsx("div",{className:"text-sm text-gray-700",children:e.customer_response.rejection_reason})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>A(!0),className:"w-full bg-cyan-500 hover:bg-cyan-600 text-white py-3 px-4 rounded-lg font-semibold flex items-center justify-center gap-2 mb-3 transition-colors",children:[s.jsx(Fs,{className:"w-5 h-5"}),"Accept & Sign"]}),s.jsxs("button",{onClick:()=>i(!0),className:"w-full bg-red-500 hover:bg-red-600 text-white py-3 px-4 rounded-lg font-semibold flex items-center justify-center gap-2 transition-colors",children:[s.jsx(mr,{className:"w-5 h-5"}),"Reject"]})]}),Z<=0&&z>0&&s.jsx("div",{className:"mt-4 p-4 bg-green-50 border-2 border-green-500 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(Fs,{className:"w-5 h-5 text-green-600"}),s.jsx("span",{className:"text-lg font-bold text-green-700",children:"Fully Paid"})]})}),Z>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"mb-3 p-3 bg-red-50 border border-red-200 rounded-lg text-sm",children:z>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),s.jsxs("span",{className:"font-semibold",children:["",e.total_amount.toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{className:"text-gray-600",children:"Paid:"}),s.jsxs("span",{className:"font-semibold text-green-600",children:["",z.toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),s.jsxs("div",{className:"flex justify-between pt-2 border-t border-red-300",children:[s.jsx("span",{className:"text-gray-700 font-medium",children:"Balance Due:"}),s.jsxs("span",{className:"font-bold text-red-700",children:["",Z.toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]}):s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-700 font-medium",children:"Amount Due:"}),s.jsxs("span",{className:"font-bold text-red-700",children:["",e.total_amount.toLocaleString("en-PH",{minimumFractionDigits:2})]})]})}),U.length>0&&((ut=e.customer_response)==null?void 0:ut.response_type)==="approved"&&s.jsxs("button",{onClick:()=>{O(!1),V(Math.round(Z*(W/100)*100)/100),M(!0)},className:"w-full bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg font-semibold flex items-center justify-center gap-2 transition-colors",children:[s.jsx(fl,{className:"w-5 h-5"}),z>0?"Pay Remaining Balance":"Make Payment"]})]}),D.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Payments"}),s.jsx("div",{className:"space-y-2",children:D.map(Le=>s.jsxs("div",{className:"p-3 rounded-lg border bg-green-50 border-green-200 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("span",{className:"font-medium",children:["",parseFloat(Le.amount).toLocaleString("en-PH",{minimumFractionDigits:2})]}),s.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-700",children:"Paid"})]}),s.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[s.jsxs("div",{children:["Via ",Le.payment_method||"Xendit"]}),Le.provider_ref&&s.jsx("div",{className:"flex items-center gap-1",children:s.jsxs("span",{children:["Ref: ",Le.provider_ref]})}),Le.paid_at&&s.jsx("div",{children:new Date(Le.paid_at).toLocaleString()})]})]},Le.id))})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 print:hidden",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Actions"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{onClick:ke,className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 px-4 rounded-lg font-medium flex items-center justify-center gap-2 transition-colors",children:[s.jsx(Wv,{className:"w-4 h-4"}),"Print"]}),s.jsxs("button",{onClick:Ye,className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 px-4 rounded-lg font-medium flex items-center justify-center gap-2 transition-colors",children:[s.jsx(mE,{className:"w-4 h-4"}),"Save as PDF"]})]})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Quotation Details"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Number:"}),s.jsx("div",{className:"font-medium",children:e.quotation_number})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Date:"}),s.jsx("div",{className:"font-medium",children:new Date(e.quotation_date).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Valid Until:"}),s.jsx("div",{className:"font-medium",children:new Date(e.valid_until).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Company:"}),s.jsx("div",{className:"font-medium",children:e.company_name})]})]})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Your Contact"}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[s.jsx("div",{children:e.customer_name}),s.jsx("div",{children:e.customer_email}),s.jsx("div",{children:e.customer_phone})]})]})]})}),s.jsx("div",{className:"lg:col-span-3",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 quotation-content",children:[e.template_logo_url&&s.jsx("div",{className:`mb-6 flex ${e.template_logo_position==="center"?"justify-center":e.template_logo_position==="right"?"justify-end":"justify-start"}`,children:s.jsx("img",{src:e.template_logo_url,alt:"Company logo",style:{maxWidth:`${e.template_logo_max_width||200}px`}})}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"QUOTATION"}),s.jsx("p",{className:"text-gray-600",children:e.company_name})]}),(e.event_type_name||e.no_of_pax||e.event_date)&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Event Details"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.event_type_name&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Event Type:"}),s.jsx("p",{className:"font-medium text-gray-900",children:e.event_type_name})]}),e.no_of_pax&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"No. of Pax:"}),s.jsx("p",{className:"font-medium text-gray-900",children:e.no_of_pax})]}),e.event_date&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Event Date:"}),s.jsx("p",{className:"font-medium text-gray-900",children:v6(e.event_date)})]})]})]}),e.body_html&&s.jsx("div",{className:"mb-8 prose prose-slate max-w-none",children:s.jsx("div",{dangerouslySetInnerHTML:{__html:e.body_html}})}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Items"}),s.jsxs("table",{className:"w-full border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-100",children:[s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-900 border-b-2 border-gray-300",children:"Description"}),s.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-900 border-b-2 border-gray-300",children:"Qty"}),s.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-900 border-b-2 border-gray-300",children:"Unit Price"}),e.lines.some(Le=>Le.discount>0)&&s.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-900 border-b-2 border-gray-300",children:"Discount"}),s.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-900 border-b-2 border-gray-300",children:"Amount"})]})}),s.jsx("tbody",{children:e.lines.map(Le=>s.jsxs("tr",{className:"border-b border-gray-200",children:[s.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:Le.description}),s.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-700",children:Le.quantity}),s.jsxs("td",{className:"px-4 py-3 text-sm text-right text-gray-700",children:["",parseFloat(String(Le.unit_price)).toLocaleString("en-PH",{minimumFractionDigits:2})]}),e.lines.some(lt=>lt.discount>0)&&s.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-700",children:Le.discount>0?`${Le.discount}%`:"-"}),s.jsxs("td",{className:"px-4 py-3 text-sm text-right font-medium text-gray-900",children:["",parseFloat(String(Le.subtotal)).toLocaleString("en-PH",{minimumFractionDigits:2})]})]},Le.id))})]})]}),s.jsx("div",{className:"flex justify-end mb-8",children:s.jsx("div",{className:"w-80",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),s.jsxs("span",{className:"font-medium text-gray-900",children:["",e.subtotal.toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),e.vat_enabled&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-600",children:["VAT (",e.vat_rate,"%):"]}),s.jsxs("span",{className:"font-medium text-gray-900",children:["",e.vat_amount.toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),s.jsxs("div",{className:"flex justify-between pt-3 border-t-2 border-gray-300",children:[s.jsx("span",{className:"font-semibold text-gray-900",children:"Total:"}),s.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["",e.total_amount.toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),!e.vat_enabled&&s.jsx("p",{className:"text-xs text-gray-500 text-right",children:"Exclusive of VAT"})]})})}),e.terms_html&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Terms & Conditions"}),s.jsx("div",{className:"prose prose-slate max-w-none text-sm",children:s.jsx("div",{dangerouslySetInnerHTML:{__html:e.terms_html}})})]}),e.template_custom_sections&&e.template_custom_sections.length>0&&s.jsx("div",{className:"mb-8 space-y-6",children:e.template_custom_sections.map((Le,lt)=>s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:Le.title}),s.jsx("div",{className:"prose prose-slate max-w-none text-sm",children:s.jsx("div",{dangerouslySetInnerHTML:{__html:Le.content}})})]},lt))}),s.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200 text-xs text-gray-500 text-center",children:s.jsx("p",{children:"This quotation is valid for the period specified above and subject to our standard terms and conditions."})}),!Pe&&s.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-200 flex items-center justify-center gap-4 print:hidden",children:[s.jsxs("button",{onClick:()=>A(!0),className:"bg-cyan-500 hover:bg-cyan-600 text-white py-3 px-8 rounded-lg font-semibold flex items-center gap-2 transition-colors",children:[s.jsx(Fs,{className:"w-5 h-5"}),"Accept & Sign"]}),s.jsxs("button",{onClick:()=>i(!0),className:"bg-red-500 hover:bg-red-600 text-white py-3 px-8 rounded-lg font-semibold flex items-center gap-2 transition-colors",children:[s.jsx(mr,{className:"w-5 h-5"}),"Reject"]})]})]})})]})}),c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-xl font-bold",children:"Accept Quotation"}),s.jsx("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(mr,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),s.jsx("input",{type:"text",value:d,onChange:Le=>h(Le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Enter your full name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Signature"}),s.jsxs("div",{className:"flex gap-2 mb-3",children:[s.jsxs("button",{onClick:()=>{B("type"),w(""),It()},className:`flex-1 py-2 px-4 rounded-lg font-medium flex items-center justify-center gap-2 transition-colors ${j==="type"?"bg-cyan-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[s.jsx(kE,{className:"w-4 h-4"}),"Type"]}),s.jsxs("button",{onClick:()=>{B("draw"),w("")},className:`flex-1 py-2 px-4 rounded-lg font-medium flex items-center justify-center gap-2 transition-colors ${j==="draw"?"bg-cyan-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[s.jsx(FE,{className:"w-4 h-4"}),"Draw"]})]}),j==="type"?s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"text",value:f,onChange:Le=>w(Le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-500 text-2xl",placeholder:"Type your signature",style:{fontFamily:"cursive"}}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Type your name as your digital signature"})]}):s.jsxs("div",{children:[s.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden bg-white",children:s.jsx("canvas",{ref:dt,width:450,height:200,className:"w-full cursor-crosshair touch-none",onMouseDown:ze,onMouseMove:gt,onMouseUp:et,onMouseLeave:et,onTouchStart:ze,onTouchMove:gt,onTouchEnd:et})}),s.jsx("button",{onClick:It,className:"mt-2 text-sm text-red-600 hover:text-red-700 font-medium",children:"Clear Signature"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Draw your signature above"})]})]}),s.jsxs("div",{className:"bg-gray-50 p-3 rounded text-sm text-gray-600",children:["By signing, you confirm acceptance of this ",e.total_amount.toLocaleString("en-PH",{minimumFractionDigits:2})," quotation."]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>A(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",disabled:C,children:"Cancel"}),s.jsx("button",{onClick:vt,disabled:C||!d.trim()||!f.trim(),className:"flex-1 bg-cyan-500 hover:bg-cyan-600 text-white py-2 px-4 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:C?s.jsxs(s.Fragment,{children:[s.jsx(uA,{className:"w-4 h-4 animate-spin"}),"Submitting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Fs,{className:"w-4 h-4"}),"Accept & Sign"]})})]})]})]})}),u&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-xl font-bold",children:"Reject Quotation"}),s.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(mr,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),s.jsx("input",{type:"text",value:d,onChange:Le=>h(Le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Enter your full name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason for Rejection"}),s.jsx("textarea",{value:p,onChange:Le=>x(Le.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Please let us know why you're rejecting this quotation..."})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>i(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",disabled:C,children:"Cancel"}),s.jsx("button",{onClick:Tt,disabled:C||!d.trim()||!p.trim(),className:"flex-1 bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:C?s.jsxs(s.Fragment,{children:[s.jsx(uA,{className:"w-4 h-4 animate-spin"}),"Submitting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Fj,{className:"w-4 h-4"}),"Submit Feedback"]})})]})]})]})}),H&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full my-8",children:[s.jsxs("div",{className:"sticky top-0 bg-white rounded-t-lg border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[s.jsx("h3",{className:"text-xl font-bold",children:"Make Payment"}),s.jsx("button",{onClick:()=>M(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(mr,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"px-6 py-4 pb-6",children:[s.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Quotation:"}),s.jsx("span",{className:"font-medium text-gray-900",children:e.quotation_number})]}),s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Total Amount:"}),s.jsxs("span",{className:"font-semibold text-gray-900",children:["",e.total_amount.toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),z>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Already Paid:"}),s.jsxs("span",{className:"font-semibold text-green-600",children:["",z.toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-300",children:[s.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Remaining:"}),s.jsxs("span",{className:"text-lg font-bold text-blue-600",children:["",Z.toLocaleString("en-PH",{minimumFractionDigits:2})]})]})]})]}),U.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Type"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[s.jsx("button",{type:"button",onClick:()=>{O(!1),V(Math.round(Z*(W/100)*100)/100)},className:`px-4 py-2 border-2 rounded-lg font-medium transition-colors ${oe?"border-gray-300 text-gray-700 hover:border-gray-400":"border-green-500 bg-green-50 text-green-700"}`,children:"Deposit"}),s.jsx("button",{type:"button",onClick:()=>{O(!0),V(Z)},className:`px-4 py-2 border-2 rounded-lg font-medium transition-colors ${oe?"border-green-500 bg-green-50 text-green-700":"border-gray-300 text-gray-700 hover:border-gray-400"}`,children:"Full Payment"})]})]}),!oe&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Deposit Percentage: ",W,"%"]}),s.jsx("input",{type:"range",min:"10",max:"100",step:"5",value:W,onChange:Le=>{const lt=parseInt(Le.target.value);te(lt),V(Math.round(Z*(lt/100)*100)/100)},className:"w-full"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[s.jsx("span",{children:"10%"}),s.jsx("span",{children:"50%"}),s.jsx("span",{children:"100%"})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Amount"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-3 top-2.5 text-gray-600",children:""}),s.jsx("input",{type:"number",value:ee,onChange:Le=>V(parseFloat(Le.target.value)||0),min:"0",max:Z,step:"0.01",className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Maximum: ",Z.toLocaleString("en-PH",{minimumFractionDigits:2})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Gateway"}),s.jsx("select",{value:k,onChange:Le=>T(Le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:U.map(Le=>s.jsxs("option",{value:Le.provider,children:[Le.provider==="check"?"Check Payment":Le.provider.charAt(0).toUpperCase()+Le.provider.slice(1),Le.is_test_mode&&Le.provider!=="check"&&" (Test Mode)"]},Le.id))})]}),(k==null?void 0:k.toLowerCase())==="check"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mb-4 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-amber-800",children:[s.jsx("strong",{children:"Check Payment:"})," Fill in your check details below. Your payment will be verified by our Finance team."]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Bank Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:Ae,onChange:Le=>ve(Le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"e.g., BDO, BPI"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Check Number ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:be,onChange:Le=>Ne(Le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Check #"})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Payment Date ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",value:Te,onChange:Le=>De(Le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deposit Slip Link (Optional)"}),s.jsx("input",{type:"url",value:We,onChange:Le=>_e(Le.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"https://example.com/deposit-slip.jpg"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload your deposit slip to cloud storage and paste the link here"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),s.jsx("textarea",{value:de,onChange:Le=>Ut(Le.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Any additional notes..."})]}),s.jsx("button",{onClick:pe,disabled:P||!Ae.trim()||!be.trim()||!Te||ee<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 font-medium",children:P?s.jsxs(s.Fragment,{children:[s.jsx(uA,{className:"w-5 h-5 animate-spin"}),"Submitting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(fl,{className:"w-5 h-5"}),"Submit Check Payment"]})})]}):(at=U.find(Le=>Le.provider===k))!=null&&at.is_test_mode?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Test Mode:"})," You can simulate a successful or failed payment for testing purposes."]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>Se(!0),disabled:P||ee<=0,className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 font-medium",children:P?"Processing...":"Simulate Success"}),s.jsx("button",{onClick:()=>Se(!1),disabled:P,className:"flex-1 px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 font-medium",children:P?"Processing...":"Simulate Failure"})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:["You will be redirected to ",k," to complete your payment securely."]})}),s.jsxs("button",{onClick:Ie,disabled:P||ee<=0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 font-medium",children:[s.jsx(fl,{className:"w-5 h-5"}),P?"Processing...":"Proceed to Payment"]})]})]})]})]})}),s.jsx("style",{children:`
        @media print {
          .print\\:hidden {
            display: none !important;
          }
          body {
            margin: 0;
            padding: 20px;
          }
          .bg-gray-50 {
            background: white;
          }
        }
      `})]})}function y6(){const{user:t}=Jr(),[e,r]=Y.useState(""),[n,a]=Y.useState(""),[o,l]=Y.useState(""),[c,A]=Y.useState(""),[u,i]=Y.useState(""),[d,h]=Y.useState(!1),[f,w]=Y.useState(""),[j,B]=Y.useState("");Y.useEffect(()=>{t&&(r(t.email||""),p())},[t]);const p=async()=>{if(!t)return;const{data:C}=await ge.from("users").select("full_name").eq("id",t.id).maybeSingle();C!=null&&C.full_name&&a(C.full_name)},x=async C=>{C.preventDefault(),w(""),B(""),h(!0);try{const S={};if(n.trim()){const{error:I}=await ge.from("users").update({full_name:n.trim()}).eq("id",t.id);if(I)throw I}if(e!==(t==null?void 0:t.email)){const{error:I}=await ge.auth.updateUser({email:e});if(I)throw I;S.email=!0}if(c&&o){if(c!==u)throw new Error("New passwords do not match");if(c.length<6)throw new Error("Password must be at least 6 characters long");const{error:I}=await ge.auth.updateUser({password:c});if(I)throw I;l(""),A(""),i(""),S.password=!0}let E="Profile updated successfully";S.email&&(E+=". Please check your new email for confirmation."),B(E)}catch(S){w(S.message||"Failed to update profile")}finally{h(!1)}};return s.jsx("div",{className:"max-w-3xl mx-auto py-8 px-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Profile Settings"}),s.jsx("p",{className:"text-slate-600 mt-1",children:"Manage your personal account information"})]}),s.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[f&&s.jsxs("div",{className:"flex items-start gap-3 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:[s.jsx(Wd,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),s.jsx("span",{children:f})]}),j&&s.jsxs("div",{className:"flex items-start gap-3 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:[s.jsx(Do,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),s.jsx("span",{children:j})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h2",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[s.jsx(Dm,{className:"w-5 h-5"}),"Personal Information"]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-slate-700 mb-2",children:"Full Name"}),s.jsx("input",{id:"fullName",type:"text",value:n,onChange:C=>a(C.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent",placeholder:"John Doe"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-2",children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Is,{className:"w-4 h-4"}),"Email Address"]})}),s.jsx("input",{id:"email",type:"email",value:e,onChange:C=>r(C.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent",placeholder:"you@company.com",required:!0}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Changing your email will require verification"})]})]}),s.jsxs("div",{className:"border-t border-slate-200 pt-6 space-y-4",children:[s.jsxs("h2",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[s.jsx(_j,{className:"w-5 h-5"}),"Change Password"]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-slate-700 mb-2",children:"Current Password"}),s.jsx("input",{id:"currentPassword",type:"password",value:o,onChange:C=>l(C.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent",placeholder:""})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 mb-2",children:"New Password"}),s.jsx("input",{id:"newPassword",type:"password",value:c,onChange:C=>A(C.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent",placeholder:""}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Must be at least 6 characters long"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 mb-2",children:"Confirm New Password"}),s.jsx("input",{id:"confirmPassword",type:"password",value:u,onChange:C=>i(C.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent",placeholder:""})]})]}),s.jsx("div",{className:"flex justify-end pt-4 border-t border-slate-200",children:s.jsxs("button",{type:"submit",disabled:d,className:"flex items-center gap-2 bg-slate-900 text-white px-6 py-2 rounded-lg hover:bg-slate-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:[s.jsx(FA,{className:"w-4 h-4"}),d?"Saving...":"Save Changes"]})})]})]})})}function w6({threadId:t,onBack:e,onRefresh:r}){var K,U,F,k;const{user:n}=Jr(),{fetchThread:a,markAsRead:o,markAsUnread:l,deleteMessage:c}=km(),[A,u]=Y.useState([]),[i,d]=Y.useState(!0),[h,f]=Y.useState(!1),[w,j]=Y.useState(""),[B,p]=Y.useState(!1),[x,C]=Y.useState(null);Y.useEffect(()=>{S()},[t]);const S=async()=>{d(!0);try{const P=(await a(t)).messages.map($=>{var V,W,te;const ee=$.payload.headers;return{id:$.id,from:((V=ee.find(oe=>oe.name==="From"))==null?void 0:V.value)||"",to:[((W=ee.find(oe=>oe.name==="To"))==null?void 0:W.value)||""],subject:((te=ee.find(oe=>oe.name==="Subject"))==null?void 0:te.value)||"",body:E($.payload),date:new Date(parseInt($.internalDate)).toLocaleString()}});u(P)}catch(T){console.error("Error loading thread:",T)}finally{d(!1)}},E=T=>{if(T.body.data)return atob(T.body.data.replace(/-/g,"+").replace(/_/g,"/"));if(T.parts){for(const P of T.parts)if(P.mimeType==="text/plain"||P.mimeType==="text/html")return atob(P.body.data.replace(/-/g,"+").replace(/_/g,"/"))}return""},I=async()=>{if(w.trim()){p(!0);try{const T=A[A.length-1],{data:P}=await ge.from("google_tokens").select("access_token").eq("user_id",n.id).single(),$=`To: ${T.from}\r
Subject: Re: ${T.subject}\r
In-Reply-To: ${T.id}\r
References: ${T.id}\r
\r
${w}`,ee=btoa(unescape(encodeURIComponent($))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");await fetch("https://gmail.googleapis.com/gmail/v1/users/me/messages/send",{method:"POST",headers:{Authorization:`Bearer ${P.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({raw:ee,threadId:t})}),j(""),f(!1),await S(),r()}catch(T){console.error("Error sending reply:",T)}finally{p(!1)}}},H=async T=>{C(T);try{await o(T),u(A.map(P=>P.id===T?{...P}:P))}catch(P){console.error("Error marking as read:",P)}finally{C(null)}},M=async T=>{C(T);try{await l(T),u(A.map(P=>P.id===T?{...P}:P))}catch(P){console.error("Error marking as unread:",P)}finally{C(null)}},D=async T=>{if(confirm("Are you sure you want to delete this email?")){C(T);try{await c(T),u(A.filter(P=>P.id!==T)),A.length===1&&e()}catch(P){console.error("Error deleting message:",P)}finally{C(null)}}};return i?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"text-slate-600",children:"Loading thread..."})})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 mb-6",children:[s.jsx(Tm,{className:"w-4 h-4"}),"Back to inbox"]}),s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200",children:[s.jsx("div",{className:"p-6 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:((K=A[0])==null?void 0:K.subject)||"(No subject)"}),s.jsxs("p",{className:"text-sm text-slate-600",children:[A.length," message",A.length!==1?"s":""]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>{var T;return H((T=A[0])==null?void 0:T.id)},disabled:x===((U=A[0])==null?void 0:U.id),className:"p-2 text-slate-500 hover:text-slate-700 hover:bg-slate-100 rounded transition-colors disabled:opacity-50",title:"Mark as read",children:s.jsx(cu,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>{var T;return M((T=A[0])==null?void 0:T.id)},disabled:x===((F=A[0])==null?void 0:F.id),className:"p-2 text-slate-500 hover:text-slate-700 hover:bg-slate-100 rounded transition-colors disabled:opacity-50",title:"Mark as unread",children:s.jsx(Nj,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>{var T;return D((T=A[0])==null?void 0:T.id)},disabled:x===((k=A[0])==null?void 0:k.id),className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded transition-colors disabled:opacity-50",title:"Delete thread",children:s.jsx(Ba,{className:"w-4 h-4"})})]})]})}),s.jsx("div",{className:"divide-y divide-slate-200",children:A.map(T=>s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900",children:T.from}),s.jsxs("div",{className:"text-sm text-slate-500",children:["To: ",T.to.join(", ")]})]}),s.jsx("div",{className:"text-sm text-slate-500",children:T.date})]}),s.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:T.body}})]},T.id))}),h?s.jsxs("div",{className:"p-6 border-t border-slate-200 bg-slate-50",children:[s.jsx("textarea",{value:w,onChange:T=>j(T.target.value),rows:6,placeholder:"Type your reply...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent mb-3"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:I,disabled:B||!w.trim(),className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 disabled:opacity-50",children:B?s.jsxs(s.Fragment,{children:[s.jsx(uA,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(hw,{className:"w-4 h-4"}),"Send Reply"]})}),s.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Cancel"})]})]}):s.jsx("div",{className:"p-6 border-t border-slate-200",children:s.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800",children:[s.jsx(hw,{className:"w-4 h-4"}),"Reply"]})})]})]})}function b6({onClose:t,onSuccess:e,defaultTo:r="",defaultSubject:n=""}){const{user:a}=Jr(),{currentCompany:o}=ir(),[l,c]=Y.useState(r),[A,u]=Y.useState(n),[i,d]=Y.useState(""),[h,f]=Y.useState(!1),[w,j]=Y.useState(""),B=async p=>{if(p.preventDefault(),!(!l.trim()||!A.trim()||!i.trim())){f(!0),j("");try{const{data:x}=await ge.from("google_tokens").select("access_token").eq("user_id",a.id).single();if(!x)throw new Error("Not connected to Gmail");const C=`To: ${l}\r
Subject: ${A}\r
Content-Type: text/html; charset=UTF-8\r
\r
${i.replace(/\n/g,"<br>")}`,S=btoa(unescape(encodeURIComponent(C))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");if(!(await fetch("https://gmail.googleapis.com/gmail/v1/users/me/messages/send",{method:"POST",headers:{Authorization:`Bearer ${x.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({raw:S})})).ok)throw new Error("Failed to send email");await ge.from("email_messages").insert({company_id:o==null?void 0:o.id,sender_user_id:a==null?void 0:a.id,direction:"outbound",from_address:(a==null?void 0:a.email)||"",to_addresses:[l],subject:A,body:i,sent_at:new Date().toISOString()}),e()}catch(x){j(x.message||"Failed to send email")}finally{f(!1)}}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-200",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Compose Email"}),s.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600",children:s.jsx(mr,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:B,className:"p-6",children:[w&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-800 rounded-lg text-sm",children:w}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"To"}),s.jsx("input",{type:"email",value:l,onChange:p=>c(p.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent",required:!0})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Subject"}),s.jsx("input",{type:"text",value:A,onChange:p=>u(p.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent",required:!0})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Message"}),s.jsx("textarea",{value:i,onChange:p=>d(p.target.value),rows:10,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent",required:!0})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:h,className:"flex items-center gap-2 px-6 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 disabled:opacity-50",children:h?s.jsxs(s.Fragment,{children:[s.jsx(uA,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Om,{className:"w-4 h-4"}),"Send"]})})]})]})]})})}function j6(){const{isConnected:t,connectGoogle:e,disconnectGoogle:r,fetchMessages:n,markAsRead:a,markAsUnread:o,deleteMessage:l,searchMessages:c}=km(),[A,u]=Y.useState([]),[i,d]=Y.useState(!1),[h,f]=Y.useState(null),[w,j]=Y.useState(!1),[B,p]=Y.useState(""),[x,C]=Y.useState("all"),[S,E]=Y.useState(null);Y.useEffect(()=>{t&&I()},[t]);const I=async()=>{d(!0);try{const k=await H();u(k)}catch(k){console.error("Error loading messages:",k)}finally{d(!1)}},H=async()=>{try{return await n(50)}catch(k){return console.error("Error fetching messages:",k),[]}},M=async k=>{if(k.preventDefault(),!B.trim()){I();return}d(!0);try{const T=await c(B);u(T)}catch(T){console.error("Error searching messages:",T)}finally{d(!1)}},D=async(k,T)=>{k.stopPropagation(),E(T);try{await a(T),u(A.map(P=>P.id===T?{...P,unread:!1}:P))}catch(P){console.error("Error marking as read:",P)}finally{E(null)}},K=async(k,T)=>{k.stopPropagation(),E(T);try{await o(T),u(A.map(P=>P.id===T?{...P,unread:!0}:P))}catch(P){console.error("Error marking as unread:",P)}finally{E(null)}},U=async(k,T)=>{if(k.stopPropagation(),!!confirm("Are you sure you want to delete this email?")){E(T);try{await l(T),u(A.filter(P=>P.id!==T))}catch(P){console.error("Error deleting message:",P)}finally{E(null)}}},F=A.filter(k=>{if(x==="unread"&&!k.unread)return!1;if(B){const T=B.toLowerCase();return k.subject.toLowerCase().includes(T)||k.from.toLowerCase().includes(T)||k.snippet.toLowerCase().includes(T)}return!0});return t?h?s.jsx(w6,{threadId:h,onBack:()=>f(null),onRefresh:I}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Emails"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:I,disabled:i,className:"flex items-center gap-2 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50",children:[s.jsx(UE,{className:`w-4 h-4 ${i?"animate-spin":""}`}),"Refresh"]}),s.jsxs("button",{onClick:()=>j(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800",children:[s.jsx(Om,{className:"w-4 h-4"}),"Compose"]}),s.jsx("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 border border-red-300 text-red-700 rounded-lg hover:bg-red-50",children:"Disconnect"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg border border-slate-200",children:[s.jsx("div",{className:"p-4 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("form",{onSubmit:M,className:"relative flex-1",children:[s.jsx(jl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),s.jsx("input",{type:"text",value:B,onChange:k=>p(k.target.value),placeholder:"Search emails...",className:"w-full pl-10 pr-10 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-900 focus:border-transparent"}),B&&s.jsx("button",{type:"button",onClick:()=>{p(""),I()},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:s.jsx(mr,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>C("all"),className:`px-4 py-2 rounded-lg text-sm font-medium ${x==="all"?"bg-slate-900 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"All"}),s.jsx("button",{onClick:()=>C("unread"),className:`px-4 py-2 rounded-lg text-sm font-medium ${x==="unread"?"bg-slate-900 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:"Unread"})]})]})}),i?s.jsx("div",{className:"p-12 text-center text-slate-600",children:"Loading emails..."}):F.length===0?s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(xE,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),s.jsx("p",{className:"text-slate-600",children:"No emails found"})]}):s.jsx("div",{className:"divide-y divide-slate-200",children:F.map(k=>s.jsxs("div",{className:"p-4 hover:bg-slate-50 transition-colors group",children:[s.jsxs("button",{onClick:()=>f(k.threadId),className:"w-full text-left",children:[s.jsxs("div",{className:"flex items-start justify-between mb-1",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[k.unread&&s.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full flex-shrink-0"}),s.jsx("span",{className:`font-medium text-slate-900 truncate ${k.unread?"font-semibold":""}`,children:k.from})]}),s.jsx("span",{className:"text-sm text-slate-500 flex-shrink-0 ml-2",children:k.date})]}),s.jsx("div",{className:`text-sm mb-1 ${k.unread?"font-semibold text-slate-900":"text-slate-700"}`,children:k.subject||"(No subject)"}),s.jsx("div",{className:"text-sm text-slate-500 truncate",children:k.snippet})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[k.unread?s.jsx("button",{onClick:T=>D(T,k.id),disabled:S===k.id,className:"p-1 text-slate-500 hover:text-slate-700 hover:bg-slate-200 rounded transition-colors disabled:opacity-50",title:"Mark as read",children:s.jsx(cu,{className:"w-4 h-4"})}):s.jsx("button",{onClick:T=>K(T,k.id),disabled:S===k.id,className:"p-1 text-slate-500 hover:text-slate-700 hover:bg-slate-200 rounded transition-colors disabled:opacity-50",title:"Mark as unread",children:s.jsx(Nj,{className:"w-4 h-4"})}),s.jsx("button",{onClick:T=>U(T,k.id),disabled:S===k.id,className:"p-1 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded transition-colors disabled:opacity-50",title:"Delete email",children:s.jsx(Ba,{className:"w-4 h-4"})})]})]},k.id))})]}),w&&s.jsx(b6,{onClose:()=>j(!1),onSuccess:()=>{j(!1),I()}})]}):s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"max-w-2xl mx-auto text-center py-12",children:[s.jsx(Is,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Connect Gmail"}),s.jsx("p",{className:"text-slate-600 mb-6",children:"Connect your Gmail account to view and reply to emails"}),s.jsx("button",{onClick:e,className:"px-6 py-3 bg-slate-900 text-white rounded-lg hover:bg-slate-800 font-medium",children:"Connect with Google"})]})})}function B6(){const{user:t,loading:e,signOut:r}=Jr(),{loading:n,currentCompany:a,refreshCompanies:o}=ir(),[l,c]=Y.useState("dashboard"),[A,u]=Y.useState(null),[i,d]=Y.useState(null),[h,f]=Y.useState(null);return Y.useEffect(()=>{const w=j=>{var B,p;((B=j.data)==null?void 0:B.type)==="google-connected"?window.location.reload():((p=j.data)==null?void 0:p.type)==="google-error"&&alert(`Google authentication failed: ${j.data.error}`)};return window.addEventListener("message",w),()=>window.removeEventListener("message",w)},[]),e||n?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:s.jsx("div",{className:"text-slate-600",children:"Loading..."})}):t?s.jsxs("div",{className:"min-h-screen bg-slate-50 print:bg-white",children:[s.jsx("div",{className:"print:hidden",children:s.jsx(DE,{currentView:l,onNavigate:c})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 print:max-w-none print:p-0",children:[l==="dashboard"&&s.jsx(RE,{}),l==="customers"&&s.jsx(ME,{}),l==="leads"&&!i&&s.jsx(JE,{onViewLead:d,onViewCalendar:()=>c("calendar")}),l==="leads"&&i&&s.jsx(qE,{leadId:i,onBack:()=>d(null),onViewQuotation:w=>{u(w),c("quotations")}}),l==="quotations"&&!A&&s.jsx(c_,{onViewQuotation:u}),l==="quotations"&&A&&s.jsx(u6,{quotationId:A,onBack:()=>u(null),onEdit:w=>f(w)}),l==="activities"&&s.jsx(ZE,{}),l==="products"&&s.jsx(t_,{}),l==="templates"&&s.jsx(g6,{}),l==="calendar"&&s.jsx(f6,{onBack:()=>c("leads")}),l==="emails"&&s.jsx(j6,{}),l==="profile"&&s.jsx(y6,{}),l==="settings"&&s.jsx(l_,{})]}),h&&s.jsx(Rm,{quotation:{id:h},onClose:()=>f(null),onSuccess:()=>{f(null)}})]}):s.jsx(PE,{})}function C6(){const e=new URLSearchParams(window.location.search).get("q");return e?s.jsx(x6,{token:e}):s.jsx(X3,{children:s.jsx(Y3,{children:s.jsx(eE,{children:s.jsx(B6,{})})})})}zb(document.getElementById("root")).render(s.jsx(Y.StrictMode,{children:s.jsx(C6,{})}));export{M5 as g,r6 as r};
